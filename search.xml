<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>计算机基础</title>
    <url>/2018/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/index.html</url>
    <content><![CDATA[<p>计算机基础简介</p>
<p>云计算：</p>
<div class="highlight"><pre class="code" ><code><span class="hljs-code">    IaaS    基础设施即服务
</span>
<span class="hljs-code">    SaaS    软件即服务
</span>
<span class="hljs-code">    PaaS    平台即服务
</span></code></pre></div>
<p>存储单位</p>
<p>比特位 ( bit )           1 Byte=8 bit        Byte    K   M   G   T   P   E   Z</p>
<p>Z　	E	P	T	G	M	K	Byte	bit<br>
1024	1024	1024	1024	1024	1024	1024	1024	8</p>
<p>ASCII码：计算机字符编码：</p>
<p>英文：每个字母占8个二进制位，即8bit，共计28=256个。</p>
<p>中文：每个汉字占16个二进制位，即16bit，共计216=65536个。</p>
<div class="highlight"><pre class="code" ><code>中文编码：   简体     GB2312

<span class="hljs-code">            繁体     Big5   
</span>
<span class="hljs-code">            统一汉字编码      UTF-8
</span></code></pre></div>
<p>摩尔定律：每过18个月，集成电路的密度增加一倍。</p>
<p>网速换算：单位：Mbps=Mbit/s   如：100Mbps的宽带，下载速度为100÷8≈12.5Mb/s.</p>
<p>主板插槽</p>
<p>（CPU运算速度=频率<em>CPU位数/8</em>线程数=2.5GHz<em>64/8B</em>4）</p>
<p>插槽速度：   PCI     66Mb/s                  老式插槽</p>
<div class="highlight"><pre class="code" ><code>        <span class="hljs-attribute">IDE</span>     <span class="hljs-number">133</span> Mb/s                老式硬盘插槽

        <span class="hljs-attribute">SCSI</span>    <span class="hljs-number">200</span> Mb/s                老式服务器硬盘插槽

        <span class="hljs-attribute">SATA</span>    <span class="hljs-number">500</span> Mb/s                硬盘接口

        <span class="hljs-attribute">PCI</span>-E   <span class="hljs-number">1000</span> Mb/s—<span class="hljs-number">2000</span> Mb/s    主要用显卡接口

        <span class="hljs-attribute">DDR3</span>    &lt;<span class="hljs-number">2400</span> Mb/s              内存插槽

        <span class="hljs-attribute">DDR4</span>    &gt;=<span class="hljs-number">2400</span> Mb/s             <span class="hljs-number">3</span>代和<span class="hljs-number">4</span>代接口不一样
</code></pre></div>
<p>BIOS：基本输入输出系统</p>
<p>COMS：互补金属氧化物半导体存储器（一块芯片，存储BIOS系统）</p>
<p>分区及系统安装</p>
<p>分区表形式</p>
<div class="highlight"><pre class="code" ><code><span class="hljs-attribute">MBR</span>分区表（主引导记录）：最大支持<span class="hljs-number">2</span>.<span class="hljs-number">1</span>Tb硬盘，最多支持<span class="hljs-number">4</span>个分区。

<span class="hljs-attribute">GTP</span> 分区表（全局唯一标识分区表）：最大支持<span class="hljs-number">9</span>.<span class="hljs-number">4</span>Zb硬盘，理论分区无限制（Windows限制<span class="hljs-number">128</span>个）
</code></pre></div>
<p>分区类型：</p>
<div class="highlight"><pre class="code" ><code>MBR分区类型

主分区：最多只能有4个。

扩展分区：

<span class="hljs-code">    最多只能有一个。
</span>
<span class="hljs-code">    主分区和扩展分区最多只能有4个。
</span>
<span class="hljs-code">    扩展分区能不能写入数据，只能包含逻辑分区。
</span>
逻辑分区：

<span class="hljs-code">    格式化：主要目的是为了写入文件系统。
</span>
<span class="hljs-code">    FAT16：最大支持2Gb分区。
</span>
<span class="hljs-code">    FAT32： 最大支持4Gb单个文件，（32Gb分区。注：不准确）
</span>
<span class="hljs-code">    NTFS：  最大支持64Gb单个文件，（2Tb分区。注：不准确）
</span></code></pre></div>
<p>文件系统：   Inode文件索引，128Byte（大小有限，可能会写满，每个文件只能占用一个）</p>
<div class="highlight"><pre class="code" ><code>            <span class="hljs-attribute">Inode</span>里面存储有：Inode号，文件时间，权限，保存位置，称之为文件元数据。

        <span class="hljs-attribute">block</span>：文件系统的小分区块，每个默认<span class="hljs-number">4</span>Kb（最大<span class="hljs-number">4</span>Kb）。
</code></pre></div>
<p>Windows分区：</p>
<div class="highlight"><pre class="code" ><code><span class="hljs-attribute">1</span>、分区      <span class="hljs-number">2</span>、格式化    <span class="hljs-number">3</span>、分配盘符
</code></pre></div>
<p>Windows版本分类：</p>
<div class="highlight"><pre class="code" ><code><span class="hljs-attribute">1</span>、个人版

<span class="hljs-attribute">2</span>、服务器版（Windows Server <span class="hljs-number">2000</span>、<span class="hljs-number">2003</span>、<span class="hljs-number">2008</span>、<span class="hljs-number">2012</span>）
</code></pre></div>
<p>防火墙：数据包过滤。可以根据以下5个参数过滤：</p>
<div class="highlight"><pre class="code" ><code><span class="hljs-code">                    IP地址
</span>
<span class="hljs-code">                    MAC地址
</span>
<span class="hljs-code">                    端口号
</span>
<span class="hljs-code">                    协议类型
</span>
<span class="hljs-code">                    数据包数据（只有在应用层的软防火墙才能生效）
</span></code></pre></div>
<p>Windows安装：（可能需要好几天的安装）</p>
<div class="highlight"><pre class="code" ><code>1、拔网线

2、安装操作系统

3、安装驱动

4、安装杀毒软件和配置防火墙

5、插网线

6、更新（补丁，杀毒软件，防火墙。需要从官网下载安装）

7、安装常用办公软件

8、服务器常规优化
</code></pre></div>
<p>注：Windows防火墙ISA，不免费提供。</p>
<p>Windows操作系统的安装：</p>
<div class="highlight"><pre class="code" ><code><span class="hljs-number">1</span>、光盘安装

<span class="hljs-number">2</span>、U盘安装

<span class="hljs-number">3</span>、磁盘对考（Windows用Ghost，Linux用<span class="hljs-selector-tag">dd</span>命令）

    Ghost：快，操作简单，但不稳定（Ghost <span class="hljs-number">9</span>以后只能在Windows系统中运行）

    <span class="hljs-selector-tag">dd</span>命令：慢，但稳定。

<span class="hljs-number">4</span>、网络批量安装（服务器操作系统的安装）
</code></pre></div>
<p>虚拟机使用：</p>
<div class="highlight"><pre class="code" ><code>VMware Workstation（清理工具：VMware clear）

<span class="hljs-code">    Linux 6（安装时内存不可小于628Mb）
</span>
<span class="hljs-code">    Server R2（安装时内存不可小于1024Mb）
</span>
虚拟机网络连接：

<span class="hljs-code">    桥接：   用物理机真实网卡通信
</span>
<span class="hljs-code">    NAT：   用net8虚拟网卡通信
</span>
<span class="hljs-code">    仅主机： 用net1虚拟网卡通信
</span></code></pre></div>
<p>通信方法     网卡             能否和物理机通信      能否和局域网通信      能否和公网通信</p>
<p>桥接         真实网卡         可以                 可以                 可以</p>
<p>NAT         VMnet8          可以                 不能                 可以</p>
<p>仅主机       VMnet1          可以                 不能                 不能</p>
<p>数据库简介及健康监控</p>
<p>SQL：结构化查询语句</p>
<p>数据库分类：</p>
<div class="highlight"><pre class="code" ><code><span class="hljs-keyword">SQL</span> sever（只能在Windows下运行）

My <span class="hljs-keyword">SQL</span>  （最常用数据库）

ORACLE（性能最好）
</code></pre></div>
<p>MMC： Windows管理控制台（可以自定义管理工具）</p>
<p>定时任务：让计算机在特定的时间完成指定的操作。</p>
<p>网上令居：关闭服务，则停止共享</p>
<div class="highlight"><pre class="code" ><code><span class="hljs-code">    端口 TCP     139 445
</span>
<span class="hljs-code">        UDP     137 138
</span></code></pre></div>
<p>健康监控：70/90原则 （内存/CPU）</p>
<div class="highlight"><pre class="code" ><code>正常进程：增加设备，搭建集群

非法进程：查明原因，终止进程，不能正常关闭是杀死进程
</code></pre></div>
<p>密码三原则</p>
<div class="highlight"><pre class="code" ><code>复杂性： 大于8位，至少包含数字、大写、小写、特殊符号其中三种。

<span class="hljs-code">        不能使用现有的英文单词。
</span>
<span class="hljs-code">        不能使用和个人身份信息相关的内容
</span>
易记忆性：

时效性： 理论180要更换一次密码。
</code></pre></div>
<p>权限原则</p>
<p>FAT16和FAT32文件系统中文件没有最高权限，其实就代表有最高权限。</p>
<p>注：大部分操作系统都一样。</p>
<div class="highlight"><pre class="code" ><code>1、本地访问：本地权限生效。

<span class="hljs-code">    网络访问：本地和网络权限都生效。
</span>
2、权限的累加：（Windows特有）

<span class="hljs-code">    如果一个用户属于多个组，则该用户的权限是多个组权限的累加。
</span>
3、拒绝权限优先（Windows和Linux通用）

4、权限的继承（Windows特有）

<span class="hljs-code">    为了让新建的用户和目录都有默认的权限。
</span></code></pre></div>
<p>高级分区简介</p>
<p>·基本分区不支持大小调整</p>
<div class="highlight"><pre class="code" ><code>注：软件调整是强制调整分区，有崩溃风险。
</code></pre></div>
<p>·动态磁盘管理（对分区有更高级操作时，动态调整分区）</p>
<div class="highlight"><pre class="code" ><code>1、简单卷：  只能在一块磁盘上扩容，无磁盘容错功能。

2、跨区卷：  可以使用2块或2块以上的磁盘

<span class="hljs-code">            每块磁盘提供空间大小可以不一致
</span>
<span class="hljs-code">            拥有动态扩容功能，没有磁盘容错功能
</span>
3、带区卷（Raid 0）：  可以使用2块或2块以上的磁盘

<span class="hljs-code">                    每块硬盘提供的空间大小必须一样
</span>
<span class="hljs-code">                    读写速度最快，无磁盘容错功能，无动态扩容
</span>
4、镜像卷（Raid 1）：  只能使用2块硬盘

<span class="hljs-code">                    每块硬盘提供的空间大小必须一致
</span>
<span class="hljs-code">                    磁盘利用率只有50%，有磁盘容错功能，无动态扩容。
</span>
5、Raid 5： 可以使用3块或3块以上硬盘组成

<span class="hljs-code">            每块磁盘提供空间大小必须一致
</span>
<span class="hljs-code">            磁盘的可用空间只有n-1块（n为磁盘个数）
</span>
<span class="hljs-code">            拥有磁盘容错功能，无动态扩容。
</span></code></pre></div>
<p>注：实际工作中软Raid并不常用，因为恢复数据时必须保证操作系统开机，所以常用的时硬件Raid卡。</p>
<p>卷名             磁盘数量         磁盘容量         读写速度     动态扩容     磁盘容错     存储空间</p>
<p>简单卷           n=1             ——             ——         是          否          100%</p>
<p>跨区卷           n&gt;=2            可以不一样       ——         是          否          100%</p>
<p>带区卷Raid 0    n&gt;=2            必须一样         最快         否          否          100%</p>
<p>镜像卷Raid 1    n=2             必须一样         最慢         否          是          50%</p>
<p>Raid 5          n&gt;=3            必须一样         较快         否          是          n-1</p>
<p>Windows之DHCP搭建</p>
<p>DHCP（动态主机配置协议)</p>
<div class="highlight"><pre class="code" ><code><span class="hljs-symbol">DHCP</span>功能：  ①<span class="hljs-built_in">IP</span>②上网所需东西都能分配（<span class="hljs-built_in">IP</span>、掩码、网关、DNS）③DHCP本机要有固定<span class="hljs-built_in">IP</span>

<span class="hljs-symbol">DHCP</span>好处：  提高<span class="hljs-built_in">IP</span>的利用率、减少管理员的工作量、避免<span class="hljs-built_in">IP</span>输入错误的可能、避免<span class="hljs-built_in">IP</span>的冲突

<span class="hljs-symbol">DHCP</span>缺点：  不可控--当有多个DHCP服务器出现时，选择一个回复最快的获取<span class="hljs-built_in">IP</span>，对局域网干扰较大。

租约过程：   客户机请求<span class="hljs-built_in">IP</span>

            服务器响应

            客户机选择<span class="hljs-built_in">IP</span>

            服务器确定租约

续租过程：   租期到<span class="hljs-number">50</span>%天时候，客户端会找服务器继续续租<span class="hljs-number">8</span>天，若此时连不上服务器，则会继续使用，到<span class="hljs-number">87</span>.<span class="hljs-number">5</span>%天时候，会再次去找服务器继续续租<span class="hljs-number">8</span>天，若连不上，则继续用直到到期，此时客户机则会寻找新的服务器重新发送请求，连接新的服务器。

    默认租约为<span class="hljs-number">8</span>天（协议为<span class="hljs-number">8</span>天）Windows系统在Server2008及以后将其改为<span class="hljs-number">6</span>天。
</code></pre></div>
<p>续租过程：</p>
<div class="highlight"><pre class="code" ><code>！主机必须要有固定<span class="hljs-built_in">IP</span>

如果局域网没有DHCP服务器，在XP以前系统下，客户机会一直发送请求，Win7以后系统会发送一轮请求，然后给一个以<span class="hljs-number">169</span>开头的假<span class="hljs-built_in">IP</span>。
</code></pre></div>
<p>客户端重启：  ①能连上服务器，若租期未到则继续用，若到期则重新发送请求</p>
<div class="highlight"><pre class="code" ><code><span class="hljs-code">        ②若连不上，则继续用，直到租期到期，重新发送请求。
</span></code></pre></div>
<p>主机释放已获取IP：release</p>
<p>主机重新获取IP：renew</p>
<p>客户机请求IP</p>
<div class="highlight"><pre class="code" ><code>当一个DHCP客户机启动时，客户机还没有<span class="hljs-built_in">IP</span>地址，所以客户机要通过DHCP获取一个合法的地址。此时DHCP客户机以广播方式（因为DHCP服务器的<span class="hljs-built_in">IP</span>地址对客户机来说是未知的）发送DHCP Discover发现信息来寻找DHCP服务器。广播信息中包含DHCP客户机的MAC地址和计算机名，以便DHCP服务器确定是哪个客户机发送的请求。
</code></pre></div>
<p>服务器响应</p>
<div class="highlight"><pre class="code" ><code>当DHCP服务器接收到来自客户机请求<span class="hljs-built_in">IP</span>地址的信息时，它就在自己的<span class="hljs-built_in">IP</span>地址池中查找是否有合法的<span class="hljs-built_in">IP</span>地址提供给客户机，如果有，DHCP服务器就将此<span class="hljs-built_in">IP</span>地址做上标记，加入到DHCP Offer的消息中，然后DHCP服务器就广播一则包含下列信息的DHCP Offer消息。
</code></pre></div>
<p>客户机选择IP</p>
<div class="highlight"><pre class="code" ><code><span class="hljs-symbol">DHCP</span>客户机从接收到的第一个DHCP Offer消息中提取<span class="hljs-built_in">IP</span>地址，发出<span class="hljs-built_in">IP</span>地址的DHCP服务器将该地址保留，这样该地址就不能提供给另一个DHCP客户机。当客户机从第一个DHCP服务器接收DHCP Offer消息并提取了<span class="hljs-built_in">IP</span>地址后，客户机将DHCP Request消息广播到所有的DHCP服务器，表明它接受提供的内容，DHCP Request消息包括为客户机提供<span class="hljs-built_in">IP</span>配置的服务器的服务标示符（服务器<span class="hljs-built_in">IP</span>地址），DHCP服务器查看服务器标识符字段，以确定提供的<span class="hljs-built_in">IP</span>地址是否被接受，如果DHCP Offer被拒绝，则DHCP服务器将会取消并保留其<span class="hljs-built_in">IP</span>地址以提供给下一个<span class="hljs-built_in">IP</span>租约的请求。
</code></pre></div>
<p>服务器确定租约</p>
<div class="highlight"><pre class="code" ><code><span class="hljs-symbol">DHCP</span>服务器接收到DHCP Request消息后，以DHCP ACK消息的形式向客户机广播成功的确认。该消息包含有<span class="hljs-built_in">IP</span>地址的有效租约和其他可配置的信息，虽然服务器确认了客户机的租约请求，但是客户机还没有接收到服务器的DHCP ACK消息。当客户机收到DHCP ACK消息时，它就配置了<span class="hljs-built_in">IP</span>地址，完成TCP/<span class="hljs-built_in">IP</span>的初始化。
</code></pre></div>
<p>重新登录</p>
<div class="highlight"><pre class="code" ><code><span class="hljs-symbol">DHCP</span>客户机每次重新登录网络时，不需要再发送DHCP Discover信息，而是直接发送包含前一次所分配的<span class="hljs-built_in">IP</span>地址的DHCP Request请求信息。当DHCP服务器接收到这一信息后，它会尝试让DHCP客户机继续使用原来的<span class="hljs-built_in">IP</span>地址，并回答一个DHCP ACK确认信息。如果此<span class="hljs-built_in">IP</span>地址已无法再分配给原来的DHCP客户机使用时（比如<span class="hljs-built_in">IP</span>已经分配给其他的DHCP客户机使用），DHCP服务器给DHCP客户机回答一个DHCP Nack否认信息。当原来的DHCP客户机收到此DHCP Nack否认信息后，它就必须重新发送DHCP Discover发现信息来请求新的<span class="hljs-built_in">IP</span>地址。

当DHCP服务器向客户机出租的<span class="hljs-built_in">IP</span>地址租期达到<span class="hljs-number">50</span>%时，就需要重新更新租约，客户机直接向提供租约的服务器发送DHCP Request包，要求更新现有的地址租约。
</code></pre></div>
<p>Windows之DNS搭建</p>
<p>DNS（域名系统）</p>
<p>主要特点：分布式，层次式</p>
<div class="highlight"><pre class="code" ><code>主要用来域名的解析

hosts域名解析文件

    Windows目录：C:<span class="hljs-symbol">\W</span>indows<span class="hljs-symbol">\S</span>ystem32<span class="hljs-symbol">\d</span>rivers<span class="hljs-symbol">\e</span>tc<span class="hljs-symbol">\h</span>osts

    Linux目录：/etc/hosts

    hosts文件的优先级高于DNS（①主机名重复，②主机维护空难）
</code></pre></div>
<p>域名分级</p>
<div class="highlight"><pre class="code" ><code>根域：FQDN（完全合格域名）全球部署了<span class="hljs-number">13</span>台

    用点（.）代表根域

一级域名：有国际域名组织分配

        组织一级域   <span class="hljs-selector-class">.com</span>        <span class="hljs-selector-class">.org</span>

        地区一级域   <span class="hljs-selector-class">.cn</span>         <span class="hljs-selector-class">.us</span>

二级域名：由个人或组织申请，二级域 + 一级域必须全球唯一

        itxdl<span class="hljs-selector-class">.cn</span>            qq<span class="hljs-selector-class">.com</span>

三级域名：由个人或组织自定义

        www<span class="hljs-selector-class">.itxdl</span><span class="hljs-selector-class">.cn</span>
</code></pre></div>
<p>北京网通DNS  202.106.0.20</p>
<p>DNS默认缓存3天，IP是网络通信的唯一标识。</p>
<p>递归查询：客户端向首选DNS查询，必须返回准确（正/误）结果</p>
<p>迭代查询：首选DNS向其他DNS查询，可以返回近似结果</p>
<p>正向查询：由域名查找IP</p>
<p>反向查询：由IP查找域名</p>
<p>FQDN（完全合格域名）：[<a href="http://www.itxdl.cn">www.itxdl.cn</a>.]</p>
<p><a href="http://xn--www-bp0g441f5oyoyf.souhu.com">查询过程www.souhu.com</a></p>
<p>资源记录类型              存放的东西</p>
<p>SOA（起始授权机构）       FQDN（完全合格域名）、时间</p>
<p>NS（名称服务器）          FQDN（完全合格域名）</p>
<p>A（主机）                正向解析记录</p>
<p>PTR（指针）              反向解析记录</p>
<p>MX（邮件交叉记录）        用于标识邮件的等级</p>
<p>SRV（服务）</p>
<p>CNAME（别名）</p>
<p>！在Linux系统中，域名需要统一，二级域和三级域都可以，不可一个二级域一个三级域，否则Linux会报错</p>
<p>Windows之IIS搭建</p>
<p>IIS（Internet信息服务）</p>
<div class="highlight"><pre class="code" ><code>互联网的典型应用：WWW      FTP     Email
</code></pre></div>
<p>URL：统一资源定位符，标准写法：协议://域名或IP:端口号/路径/网页文件名http://www.bjy.com:80/pub/indtx.html</p>
<p>1、WWW：万维网       端口：80</p>
<div class="highlight"><pre class="code" ><code>注：端口号不建议修改，特殊情况除外。
</code></pre></div>
<p>2、FTP：文件传输协议  端口：20  21</p>
<div class="highlight"><pre class="code" ><code>文件服务器，可以指定共享权限
</code></pre></div>
<p>3、Email：电子邮件端口：【SMTP（发信）简单邮件传输协议25 、 POP3（收信）邮件协议3代 110】</p>
<div class="highlight"><pre class="code" ><code>邮箱客户端：

<span class="hljs-code">    (1)网页邮箱
</span>
<span class="hljs-code">        优点：简单易用，不需要配置
</span>
<span class="hljs-code">        缺点：没有邮件实时提醒功能，邮件保存在对方服务器
</span>
<span class="hljs-code">    (2)客户端邮箱（Outlook  Foxmail）
</span>
<span class="hljs-code">        优点：有实时提醒功能，邮件可存在服务器，亦可下载到本地
</span>
<span class="hljs-code">        缺点：配置相对较复杂
</span>
<span class="hljs-code">    (3)手机邮箱
</span>
<span class="hljs-code">        优点：实时性更好
</span></code></pre></div>
<p>常见网页平台</p>
<div class="highlight"><pre class="code" ><code>Linux       Linux + Apache + MySQL + PHP       LAMP

            Linux + Nginx + MySQL + PHP        LNMP

Unix        Unix + Apache + <span class="hljs-keyword">Oracle </span>+ <span class="hljs-keyword">JSP
</span>
Windows     Windows + IIS + SQLServer + ASP
</code></pre></div>
<p>网络简介及接入方式</p>
<div class="highlight"><pre class="code" ><code>1、拨号网络

<span class="hljs-code">    优点：能上网，使用电话线，不需要重新布线
</span>
<span class="hljs-code">    缺点：价格昂贵4+4元，网速慢，56Kbps  约为7KB/s
</span>
2、ADSL非对称数字用户环路

<span class="hljs-code">    优点：使用电话线，不用重新布线，网速快8Mbps（ADSL2，24Mbps）价格相对合理
</span>
<span class="hljs-code">    缺点：使用电话线，极限速度低，动态IP，不能搭建服务器。
</span>
3、FTTH光纤入户

<span class="hljs-code">    优点：使用光纤，价格合理，网速更快
</span>
<span class="hljs-code">    缺点：使用光纤，需要重新布线，动态IP
</span>
4、固定IP光纤接入

<span class="hljs-code">    优点：固定IP地址（可以搭建服务器），网速快
</span>
<span class="hljs-code">    缺点：价格昂贵
</span></code></pre></div>
<p>网络设备：</p>
<div class="highlight"><pre class="code" ><code>路由器router：用于不同网段通信

交换机<span class="hljs-keyword">switch</span>：用于同一个网段通信
</code></pre></div>
<p>网段：</p>
<div class="highlight"><pre class="code" ><code>逻辑网段：（指的就是<span class="hljs-built_in">IP</span>网段）

物理网段：（指的就是物理连线）

在同一个物理网段，应使用相同的逻辑网段

在不同的物理网段，应使用不同的逻辑网段
</code></pre></div>
<p>局域网：在同一个路由器节点之内的网络是一个局域网</p>
<p>协议：协议就是规定</p>
<div class="highlight"><pre class="code" ><code>语法、语义、同步
</code></pre></div>
<p>标准：</p>
<div class="highlight"><pre class="code" ><code>ISO（国际标准化组织）：广域网标准

IEEE（美国电气和电子工程师协会）：局域网标准

<span class="hljs-code">    IEEE 802.3      有线局域网标准
</span>
<span class="hljs-code">    IEEE 802.11     无线局域网标准
</span>
网络设备：

<span class="hljs-code">    Cisco（思科）        华为     华三
</span></code></pre></div>
<p>网络拓扑</p>
<div class="highlight"><pre class="code" ><code>服务器和网络设备的网络连接示意图

星型拓扑：

<span class="hljs-code">    优点：易于实现、易于网络扩展、易于故障排查
</span>
<span class="hljs-code">    缺点：中心节点压力大、组网成本高
</span></code></pre></div>
<p>OSI模型简介</p>
<p>数制转换：二进制，八进制，十进制，十六进制之间的相互转换</p>
<div class="highlight"><pre class="code" ><code>十进制转二进制：除2取余

二进制转十进制：乘2取幂
</code></pre></div>
<p>水桶法：</p>
<p>27</p>
<p>26</p>
<p>25</p>
<p>24</p>
<p>23</p>
<p>22</p>
<p>21</p>
<p>20</p>
<p>128</p>
<p>64</p>
<p>32</p>
<p>16</p>
<p>8</p>
<p>4</p>
<p>2</p>
<p>1</p>
<p>1</p>
<p>1</p>
<p>1</p>
<p>1</p>
<p>1</p>
<p>1</p>
<p>1</p>
<p>1</p>
<p>ISO/OSI七层模型（实验室模型，实际使用的是TCP/IP五层模型，但是在四层模型中数据链路层和物理层合称为网络接口层）</p>
<div class="highlight"><pre class="code" ><code>ISO（国际标准化组织）

OSI（开放系统互联）
</code></pre></div>
<p>ARP：地址解析协议     IP—&gt;MAC</p>
<p>ARP：是电脑用于查询未知MAC地址的协议</p>
<p>泛洪：在数据链路层，泛洪MAC地址，是交换机用于查询未知MAC地址的协议。MAC：硬件地址</p>
<p>广播：在网络层，广播的是IP地址。</p>
<p>交换机：交换机用于同一个网段通信，不能分割广播域，能分割冲突域。</p>
<p>路由器：用于不同网段通信，会分割广播域，也会分割冲突域。</p>
<p>集线器：不能分割冲突域</p>
<p>中继器：信号还原</p>
<p>网桥：分割冲突域</p>
<p>广播域：广播能到达的区域，</p>
<p>冲突域：交换机接收到多台电脑同时发送的数据包的冲突的范围。</p>
<p>注意事项：</p>
<p>1、上三层是为用户提供服务的，下四层负责实际数据传输</p>
<p>2、下四层的传输单位：</p>
<div class="highlight"><pre class="code" ><code>传输层： 数据段（报文）

网络层： 数据包（报文分组）

数据链路层：数据帧

物理层： 比特（位）
</code></pre></div>
<p>3、越是上层，越智能，可以识别所有当前层以下的数据，越贴近用户。越是下层，越傻瓜，越贴近硬件</p>
<p>4、数据发送时，数据从上层向下层传输，数据接收时，数据从下层向上层传输</p>
<p>5、数据不能跨层传递，每层之间通过逻辑的接口传递</p>
<p>6、物理层负责实际数据传递，其它层只是逻辑对应</p>
<p>7、OSI模型只是理论模型，不能对应实际协议或硬件</p>
<p>每层功能：</p>
<p>应用层<br>
为用户提供服务，给用户一个操作界面</p>
<p>表示层<br>
为数据提供表示、加密、压缩</p>
<p>会话层<br>
确定数据是否需要进行网络传递</p>
<p>传输层<br>
对报文进行分组、和组装</p>
<div class="highlight"><pre class="code" ><code><span class="hljs-code">    提供传输协议的选择：   TCP（传输控制协议）：可靠的，面向连接的传输协议（可靠，准确）（慢）
</span>
<span class="hljs-code">                        UDP（用户数据报协议）：不可靠的，面向无连接的传输协议（不可靠）（快）
</span>
<span class="hljs-code">    端口封装
</span>
<span class="hljs-code">    差错校验
</span></code></pre></div>
<p>网络层<br>
IP地址编址</p>
<div class="highlight"><pre class="code" ><code><span class="hljs-code">    路由选择
</span></code></pre></div>
<p>数据链路层<br>
MAC地址编址</p>
<p>物理层<br>
数据实际传输</p>
<div class="highlight"><pre class="code" ><code><span class="hljs-code">    电气特性定义
</span></code></pre></div>
<p>OSI模型和TCP/IP实际模型</p>
<p>TCP/IP四层模型</p>
<p>TCP/IP五层模型</p>
<p>OSI七层模型</p>
<p>数据封装结构</p>
<p>数据类型</p>
<p>应用层</p>
<p>应用层</p>
<p>应用层</p>
<p>上层数据</p>
<p>表示层</p>
<p>会话层</p>
<p>传输层</p>
<p>传输层</p>
<p>传输层</p>
<p>TCP头部|上层数据</p>
<p>数据段</p>
<p>网络层</p>
<p>网络层</p>
<p>网络层</p>
<p>IP头部TCP头部|上层数据</p>
<p>数据报</p>
<p>网络接口层</p>
<p>数据链路层</p>
<p>数据链路层</p>
<p>MAC头部|IP头部|TCP头部|上层数据</p>
<p>数据帧</p>
<p>物理层</p>
<p>物理层</p>
<p>┌┐_┌┐_┌┐_┌┐_┌┐_┌┐_┌┐</p>
<p>比特流</p>
<p>TCP/IP模型对应的协议：</p>
<div class="highlight"><pre class="code" ><code>应用层：

<span class="hljs-code">    HTTP：  （80）超文本传输协议       （网站访问web）（Apache、Nginx）（IIS）
</span>
<span class="hljs-code">    FTP:    （20、21）文件传输协议     （网络文件传输）
</span>
<span class="hljs-code">    TFTP：  （69）简单文件传输协议     （交换机和路由器系统重装）
</span>
<span class="hljs-code">    SMTP：  （25）简单邮件传输协议     （发信）
</span>
<span class="hljs-code">    POP3：  （110）邮局协议3代       （收信）
</span>
<span class="hljs-code">    SNMP：  （161）简单网络管理协议    （服务器监控）
</span>
<span class="hljs-code">    DNS：   （53）域名系统            （域名与IP解析）
</span>
传输层：

<span class="hljs-code">    TCP：   （139、445）传输控制协议   （面向连接的、可靠的传输协议）
</span>
<span class="hljs-code">    UDP：   （137、138）用户数据报协议 （面向无连接的、不可靠的传输协议）
</span>
网络层协议：

<span class="hljs-code">    IP：    网际协议
</span>
<span class="hljs-code">    ICMP：  互联网控制消息协议     （网络探测，ping命令协议）
</span>
<span class="hljs-code">    IGMP：  互联网组管理协议
</span>
<span class="hljs-code">    ARP：   地址解析协议          （IP  --à  MAC）
</span>
<span class="hljs-code">    RARP：  反向地址解析协议      （MAC  --à  IP）
</span>
数据链路层：

物理层：

<span class="hljs-code">    PPP：点对点协议
</span>
<span class="hljs-code">    PPPOE：点对点拨号协议
</span></code></pre></div>
<p>注：理论上传输层硬件防火墙不能对数据进行</p>
<p>拆包过滤（数据包数据过滤），但是安装在应用层的</p>
<p>软防火墙可以进行数据包数据过滤。有很多攻击是</p>
<p>协议本身漏洞造成的，所以防火墙也没有用，造成</p>
<p>很多公司不用硬件防火墙。</p>
<p>TCP/IP模型与OSI模型的比较</p>
<p>共同点</p>
<div class="highlight"><pre class="code" ><code><span class="hljs-comment">(1)</span>OSI参考模型和TCP/IP参考模型都采用了层次结构的概念。

<span class="hljs-comment">(2)</span>都能够提供面向连接和无连接两种通信服务机制；
</code></pre></div>
<p>不同点</p>
<div class="highlight"><pre class="code" ><code><span class="hljs-comment">(1)</span>前者是七层模型，后者是四层结构

<span class="hljs-comment">(2)</span>对可靠性要求不同（后者更高）

<span class="hljs-comment">(3)</span> OSI模型是在协议开发前设计的, 具有通用性.TCP/IP是先有协议集然后建立模型, 不适用于非TCP/IP网络。

<span class="hljs-comment">(4)</span>实际市场应用不同（OSI模型只是理论上的模型，并没有成熟的产品，而TCP/IP已经成为“实际上的国际标准”）
</code></pre></div>
<p>网络通信</p>
<p>IP简介</p>
<p>对等网络通信：公有IP—公有IP，私有IP—私有IP</p>
<div class="highlight"><pre class="code" ><code>网关：①首先是路由器   ②默认路由
</code></pre></div>
<p>非对等网络通信：私有IP—公有IP</p>
<div class="highlight"><pre class="code" ><code>网关：①首先是路由器   ②默认路由   ③NAT转换（网络地址转换，实际使用PAT）
</code></pre></div>
<p>注：电脑通过网关IP连接到路由器。</p>
<p>网关：首先是路由器，或是拥有路由器功能的电脑，（跨网段通信）。</p>
<p>广播和泛洪是局域网查找IP的方法</p>
<p>对等网络通信中，IP地址永不变，MAC地址每经过一个路由，需要重新计算。</p>
<p>包头             PC-a        S1      0【R1】1     0【R2】1     S1          PC-b</p>
<p>原始IP          A                   A           A                       A</p>
<p>目标IP          B                   B           B                       B</p>
<p>原始MAC         B                   R11         R21                     R21</p>
<p>目标MAC         R10                 R20         B                       B</p>
<p>注：PC-a通过配置的网关地址找到路由器R1</p>
<p>交换机环路会造成教室电脑一片一片的网不通（布线时给网线贴标签）</p>
<p>路由表查看：route print</p>
<p>MAC地址查看：arp -a</p>
<p>全网段广播255.255.255.255</p>
<p>单网段广播192.168.28.255</p>
<p>泛洪地址：FF-FF-FF-FF-FF-FF</p>
<p>CSMA/CD载波监听多路访问</p>
<p>IP协议：IP范围：232 = 42亿9千万多（如下）</p>
<div class="highlight"><pre class="code" ><code><span class="hljs-number">00000000</span>.<span class="hljs-number">00000000</span>.<span class="hljs-number">00000000</span>.<span class="hljs-number">00000000</span>            <span class="hljs-number">0.0.0.0</span>

<span class="hljs-number">11111111</span>.<span class="hljs-number">11111111</span>.<span class="hljs-number">11111111</span>.<span class="hljs-number">11111111</span>            <span class="hljs-number">255.255.255.255</span>
</code></pre></div>
<p>1、IP地址分类</p>
<div class="highlight"><pre class="code" ><code><span class="hljs-keyword">A</span>类：必须以<span class="hljs-number">0</span>开头

    <span class="hljs-number">00000001</span>.<span class="hljs-number">00000000</span>.<span class="hljs-number">00000000</span>.<span class="hljs-number">00000000</span>            <span class="hljs-number">1.0.0.0</span>

    <span class="hljs-number">01111111</span>.<span class="hljs-number">11111111</span>.<span class="hljs-number">11111111</span>.<span class="hljs-number">11111111</span>            <span class="hljs-number">126.255.255.255</span>

        IP地址必须从<span class="hljs-number">1</span>开始                排除<span class="hljs-number">0.0.0.0</span> ——<span class="hljs-number">0.255.255.255</span>

        <span class="hljs-number">127.0.0.1</span>       本地回环IP       排除<span class="hljs-number">127.0.0.2</span>——<span class="hljs-number">127.255.255.255</span>

B类：必须以<span class="hljs-number">10</span>开头

    <span class="hljs-number">10000000</span>.<span class="hljs-number">00000000</span>.<span class="hljs-number">00000000</span>.<span class="hljs-number">00000000</span>            <span class="hljs-number">128.0.0.0</span>

    <span class="hljs-number">10111111</span>.<span class="hljs-number">11111111</span>.<span class="hljs-number">11111111</span>.<span class="hljs-number">11111111</span>            <span class="hljs-number">191.255.255.255</span>

C类：必须<span class="hljs-number">110</span>开头

    <span class="hljs-number">11000000</span>.<span class="hljs-number">00000000</span>.<span class="hljs-number">00000000</span>.<span class="hljs-number">00000000</span>            <span class="hljs-number">192.0.0.0</span>

    <span class="hljs-number">11011111</span>.<span class="hljs-number">11111111</span>.<span class="hljs-number">11111111</span>.<span class="hljs-number">11111111</span>            <span class="hljs-number">223.255.255.255</span>

D类：必须<span class="hljs-number">1110</span>开头（不允许使用，组播地址）

    <span class="hljs-number">11100000</span>.<span class="hljs-number">00000000</span>.<span class="hljs-number">00000000</span>.<span class="hljs-number">00000000</span>            <span class="hljs-number">224.0.0.0</span>

    <span class="hljs-number">11101111</span>.<span class="hljs-number">11111111</span>.<span class="hljs-number">11111111</span>.<span class="hljs-number">11111111</span>            <span class="hljs-number">239.255.255.255</span>

E类：必须<span class="hljs-number">1111</span>开头（不允许使用，保留，<span class="hljs-number">255.255.255.255</span> 全网段广播）

    <span class="hljs-number">11110000</span>.<span class="hljs-number">00000000</span>.<span class="hljs-number">00000000</span>.<span class="hljs-number">00000000</span>            <span class="hljs-number">240.0.0.0</span>

    <span class="hljs-number">11111111</span>.<span class="hljs-number">11111111</span>.<span class="hljs-number">11111111</span>.<span class="hljs-number">11111111</span>            <span class="hljs-number">255.255.255.255</span>
</code></pre></div>
<p>2、私有IP</p>
<div class="highlight"><pre class="code" ><code><span class="hljs-number">10.0.0.0</span>    —  <span class="hljs-number">10</span>.<span class="hljs-number">255</span>.<span class="hljs-number">255</span>.<span class="hljs-number">255</span>

<span class="hljs-number">172.16.0.0</span>  —  <span class="hljs-number">172</span>.<span class="hljs-number">31</span>.<span class="hljs-number">255</span>.<span class="hljs-number">255</span>

<span class="hljs-number">192.168.0.0</span> —  <span class="hljs-number">192</span>.<span class="hljs-number">168</span>.<span class="hljs-number">255</span>.<span class="hljs-number">255</span>
</code></pre></div>
<p>3、IP地址和主机位</p>
<div class="highlight"><pre class="code" ><code>A类：前8位代表网络地址，后24位代表主机地址

    网段数27<span class="hljs-string">-2</span>       主机数224<span class="hljs-string">-2</span>

B类：前16位代表网络地址，后16位代表主机地址

    网段数214        主机数216<span class="hljs-string">-2</span>

C类：前24位代表网络地址，后8位代表主机地址

    网段数221        主机数28<span class="hljs-string">-2</span>

    分类     网络位       主机位       网段数       主机数

    A类     前8位       后24位      27<span class="hljs-string">-2</span>        224<span class="hljs-string">-2</span>

    B类     前16位      后16位      214          216<span class="hljs-string">-2</span>

    C类     前24位      后8位       221          28<span class="hljs-string">-2</span>                           
</code></pre></div>
<p>子网掩码简介</p>
<div class="highlight"><pre class="code" ><code>划分子网的目的是为了节省公有<span class="hljs-built_in">IP</span>，降低<span class="hljs-built_in">IP</span>使用费用。
</code></pre></div>
<p>A类255.0.0.0       B类255.255.0.0     C类255.255.255.0</p>
<p>IP地址中和掩码1对应的IP地址位是网络位</p>
<p>IP地址中和掩码0对应的IP地址位是主机位</p>
<p>注：①IP要和掩码同时出现，否则没有意义</p>
<div class="highlight"><pre class="code" ><code>②子网掩码中的1必须是连续的，否则没有意义

③子网掩码中只要1是连续的，就是合理子网掩码
</code></pre></div>
<p>常规写法：A类1.0.0.0 /8  B类128.0.0.0 /16   C类192.0.0.0 /24   斜杠后面数字代表子网掩码中1的数量</p>
<p>子网划分越多，浪费的IP地址越多。</p>
<p>计算公式：</p>
<div class="highlight"><pre class="code" ><code>网络地址：把<span class="hljs-built_in">IP</span>地址和子网掩码的二进制，按位进行逻辑与运算

广播地址：有效子网掩码中，有几个<span class="hljs-number">0</span>，就把<span class="hljs-built_in">IP</span>地址中后几位换成<span class="hljs-number">1</span>

子网数：有效子网掩码中，有几个<span class="hljs-number">1</span>，子网数就是<span class="hljs-number">2</span>的几次方

主机数：有效子网掩码中，有几个<span class="hljs-number">0</span>，主机数就是<span class="hljs-number">2</span>的几次方减<span class="hljs-number">2</span>
</code></pre></div>
<p>通用原则：在能实现功能的情况下，用到的技术越简单，出问题的机率就越小。</p>
<p>私有IP不需要做子网划分，（因为私有IP不要钱，随便用就行）</p>
<p>VLSM：可变长子网掩码划分</p>
<p>逻辑运算：</p>
<p>与  0与0=0，1与0=1，0与1=1，1与1=1（都为1时才为1，有0则为0）</p>
<p>或  0或0=1，1或0=0，0或1=0，1或1=1（都为0时才为0，有1则为1）</p>
<p>例：</p>
<p>192.168.1.215       11000000.10101000.00000001.11010111</p>
<p>255.255.255.252     11111111.11111111.11111111.11111100</p>
<p>网络地址：           11000000.10101000.00000001.11010100        192.168.1.212</p>
<p>广播地址：           11000000.10101000.00000001.11010111        192.168.1.215</p>
<p>子网数：         26=64</p>
<p>主机数：         22-2=2</p>
<p>说明：该IP地址是广播地址，不能正常使用，且只有1个IP可用，因为主机数中还有一个做为网关地址</p>
<p>192.168.1.0         11000000.10101000.00000001.00000000</p>
<p>255.255.254.0       11111111.11111111.11111110.00000000</p>
<p>网络地址：           11000000.10101000.00000000.00000000        192.168.0.0</p>
<p>广播地址：           11000000.10101000.00000001.11111111        192.168.1.255</p>
<p>子网数：         27=128</p>
<p>主机数：         29-2=510</p>
<p>说明：只要IP有效，子网掩码合理，那么只需要按公式计算即可。</p>
<p>C类IP子网掩码划分：</p>
<div class="highlight"><pre class="code" ><code>子网掩码             二进制位数       子网数           主机数           备注

<span class="hljs-number">255.255.255.0</span>           /<span class="hljs-number">24</span>             <span class="hljs-number">1</span>           <span class="hljs-number">256</span>-<span class="hljs-number">2</span>          

<span class="hljs-number">255.255.255.128</span>         /<span class="hljs-number">25</span>             <span class="hljs-number">2</span>           <span class="hljs-number">128</span>-<span class="hljs-number">2</span>          

<span class="hljs-number">255.255.255.192</span>         /<span class="hljs-number">26</span>             <span class="hljs-number">4</span>           <span class="hljs-number">64</span>-<span class="hljs-number">2</span>           

<span class="hljs-number">255.255.255.224</span>         /<span class="hljs-number">27</span>             <span class="hljs-number">8</span>           <span class="hljs-number">32</span>-<span class="hljs-number">2</span>           

<span class="hljs-number">255.255.255.240</span>         /<span class="hljs-number">28</span>             <span class="hljs-number">18</span>          <span class="hljs-number">16</span>-<span class="hljs-number">2</span>           

<span class="hljs-number">255.255.255.248</span>         /<span class="hljs-number">29</span>             <span class="hljs-number">32</span>          <span class="hljs-number">8</span>-<span class="hljs-number">2</span>        

<span class="hljs-number">255.255.255.252</span>         /<span class="hljs-number">30</span>             <span class="hljs-number">64</span>          <span class="hljs-number">4</span>-<span class="hljs-number">2</span>        

<span class="hljs-number">255.255.255.254</span>         /<span class="hljs-number">31</span>             <span class="hljs-number">128</span>         <span class="hljs-number">2</span>-<span class="hljs-number">2</span>         特殊情况下也可以使用
</code></pre></div>
<p>TCP/UDP  协议</p>
<p>TCP 包头：20-60 字节，可选项 40 字节，序列号 32 位，确认号 32 位，标志 6 位（ACK、SYN 等）</p>
<p>SYN：发起信息包       ACK：回复信息包</p>
<p>TCP三次握手机制</p>
<p>SYN：发起连接包       ACK：回复连接包</p>
<p>第一次握手：建立连接时，客户端发送 syn 包（syn=j）到服务器，并进入 SYN_SENT 状态，等待服务器确认；</p>
<p>第二次握手： 服务器收到 syn 包， 必须确认客户的 SYN （ack=j+1） ， 同时自己也发送一个 SYN 包 （syn=k），</p>
<p>即 SYN+ACK 包，此时服务器进入 SYN_RECV 状态；</p>
<p>第三次握手：客户端收到服务器的 SYN+ACK 包，向服务器发送确认包 ACK(ack=k+1） ，此包发送完毕，客户端和服务器进入 ESTABLISHED（TCP 连接成功）状态，完成三次握手。</p>
<p>TCP四次挥手机制</p>
<p>第一次挥手：Client 发送一个 FIN，用来关闭 Client 到 Server 的数据传送，Client 进入 FIN_WAIT_1 状态</p>
<p>第二次挥手：Server 收到 FIN 后，发送一个 ACK 给 Client，确认序号为收到序号+1（与 SYN 相同，一个FIN 占用一个序号） ，Server 进入 CLOSE_WAIT 状态</p>
<p>第三次挥手：Server 发送一个 FIN，用来关闭 Server 到 Client 的数据传送，Server 进入 LAST_ACK 状态</p>
<p>第四次挥手：Client 收到 FIN 后，Client 进入 TIME_WAIT 状态，接着发送一个 ACK 给 Server，确认序号为收到序号+1，Server 进入 CLOSED 状态，完成四次挥手</p>
<p>针对 TCP 的三次握手，会出现以下两种攻击方式;</p>
<p>攻击手段：   SYNDOS      拒绝服务攻击</p>
<div class="highlight"><pre class="code" ><code><span class="hljs-code">        SYNDDOS     分布式拒绝服务攻击
</span></code></pre></div>
<p>防御措施：①购买临时带宽       ②用2个IP，被攻击时切换IP。</p>
<p>端口：计算机服务对外访问的接口</p>
<p>telnet远程管理服务（端口23）</p>
<div class="highlight"><pre class="code" ><code>注：服务器端禁止使用（明文无加密，不安全，23端口不能开）客户端可正常使用
</code></pre></div>
<p>netsat  -an（查看本机开启端口）</p>
<div class="highlight"><pre class="code" ><code><span class="hljs-symbol">telnet</span>  对方<span class="hljs-built_in">IP</span> 端口（查看对方端口是否打开），退出：ctrl+]，输入quit
</code></pre></div>
<p>Liunx，交换机，路由器都使用SSH服务进行远程管理（端口22）（加密的服务，安全）</p>
<p>Windows使用终端服务管理（端口3389）</p>
<p>SSL：安全套接层（用于https加密）</p>
<p>NFS：Linux专用文件传输协议        FTP：不限平台</p>
<p>网线接头类别</p>
<p>交叉线：一头A线序，一头B线序，连接相同设备</p>
<p>直通线：两头B线序，连接不同设备</p>
<p>全反线：两头相反，用于路由器，交换机本地管理。</p>
<p>以太网：工作在数据链路层的网络</p>
<p>VLAN：虚拟局域网（实现交换机分割广播域）</p>
<p>VLAN间路由：实现全网段分割广播域并实现通信</p>
<p>数据链路层在定义是分为LLC，MAC两块，但实际并没有使用</p>
<p>双绞线</p>
<p>双绞线的连接规范</p>
<div class="highlight"><pre class="code" ><code><span class="hljs-attribute">EIA</span>/TIA <span class="hljs-number">568</span>A和<span class="hljs-number">568</span>B

    <span class="hljs-attribute">T568B</span>：白橙、橙、白绿、蓝、白蓝、绿、白棕、棕

    <span class="hljs-attribute">T568A</span>：白绿、绿、白橙、蓝、白蓝、橙、白棕、棕
</code></pre></div>
<p>双绞线标准</p>
<div class="highlight"><pre class="code" ><code>EIA/TIA-568——“商用建筑物电信布线标准”

Cat 5

<span class="hljs-code">    主要用于100Base-T和10Base-T网络
</span>
Cat 5e

<span class="hljs-code">    衰减更小，串扰更少，性能优于5类线
</span>
Cat 6

<span class="hljs-code">    传输频率为200MHz
</span>
Cat 7

<span class="hljs-code">    传输频率为600MHz
</span></code></pre></div>
<p>双绞线分类</p>
<div class="highlight"><pre class="code" ><code>屏蔽双绞线

<span class="hljs-code">    铜线外包裹一层金属网膜
</span>
<span class="hljs-code">    用于电磁环境非常复杂的工业环境中
</span>
非屏蔽双绞线

<span class="hljs-code">    用于电磁干扰相对较弱的环境
</span></code></pre></div>
<p>光纤</p>
<p>光纤分类</p>
<p>分类</p>
<p>单模光纤</p>
<p>多模光纤</p>
<p>传输特性</p>
<p>用于高速度、长距离</p>
<p>用于低速度、短距离</p>
<p>成本</p>
<p>成本高</p>
<p>成本低</p>
<p>安装</p>
<p>端接较难</p>
<p>端接较易</p>
<p>物理特性</p>
<p>窄芯线，需要激光源</p>
<p>宽芯线，聚光好，光源可采用激光或发光二极管</p>
<p>损耗</p>
<p>耗散极小，高效</p>
<p>耗散大，低效</p>
<p>光纤接口</p>
<div class="highlight"><pre class="code" ><code>光纤接口分类

<span class="hljs-code">    FC 圆形带螺纹光纤接头
</span>
<span class="hljs-code">    ST 卡接式圆形光纤接头
</span>
<span class="hljs-code">    SC 方型光纤接头
</span>
<span class="hljs-code">    LC 窄体方形光纤接头
</span>
<span class="hljs-code">    MT-RJ 收发一体的方型光纤接头
</span></code></pre></div>
<p>补充</p>
<div class="highlight"><pre class="code" ><code>1、一般情况下为向光信号传输系统的模型，以此说明光纤需要成对使用，一根用于收，一根用于发。单纤光收发器可以实现在一根光纤上收发信号，不再需要使用一对光纤。单纤收发器采用光复用技术，使光的发射和接收在同一根光纤中完成，节省了光纤开销，主要用于光纤资源紧张、租用别人的光纤或两芯光纤有一根出现故障不能正常工作的情况下

2、光缆按铺设方式可分为：自承重架空光缆、管道光缆、铠装地埋光缆和海底光缆。不同的光缆其结构不同。
</code></pre></div>
<p>多模光纤</p>
<p>单模光纤</p>
]]></content>
      <categories>
        <category>系统</category>
      </categories>
      <tags>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title>CentOS配置网卡子接口</title>
    <url>/2019/09/CentOS%E9%85%8D%E7%BD%AE%E7%BD%91%E5%8D%A1%E5%AD%90%E6%8E%A5%E5%8F%A3/index.html</url>
    <content><![CDATA[<h2 id="配置网卡子接口">配置网卡子接口</h2>
<p>正常情况，只有一块网卡，这里的网卡名为 <code>enp0s25</code>，但有时候需要多个IP配置在一个服务器上，就需要网卡子接口实现</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@host-0 network-scripts]<span class="comment"># ls</span></span><br><span class="line">ifcfg-enp0s25    ifdown       ......</span><br><span class="line">......</span><br></pre></td></tr></table></figure>
<p>复制这个网卡配置文件并改名为<code>enp0s25:0</code> , <code>enp0s25:1</code></p>
<blockquote>
<p><em>需要几个子接口就复制几个文件</em></p>
</blockquote>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cp</span> ifcfg-enp0s25 ifcfg-enp0s25:0</span><br><span class="line"><span class="built_in">cp</span> ifcfg-enp0s25 ifcfg-enp0s25:1</span><br><span class="line">......</span><br></pre></td></tr></table></figure>
<p>将子接口的配置文件的 <strong>NAME</strong> 和 <strong>DEVICE</strong> 改名为和网卡配置文件一样的名称，每个子接口的ip地址要不一样</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@host-0 network-scripts]<span class="comment"># cat ifcfg-enp0s25:0</span></span><br><span class="line">TYPE=Ethernet</span><br><span class="line">BOOTPROTO=static</span><br><span class="line">DEVICE=enp0s25:0</span><br><span class="line">NAME=enp0s25:0</span><br><span class="line">ONBOOT=<span class="built_in">yes</span></span><br><span class="line">IPADDR=10.10.10.200</span><br><span class="line">NETMASK=255.255.255.0</span><br></pre></td></tr></table></figure>
<p>重启网络服务</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">systemctl restart network</span><br></pre></td></tr></table></figure>
<blockquote>
<p>可以看到ip已经生效</p>
</blockquote>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@host-0 network-scripts]<span class="comment"># ifconfig </span></span><br><span class="line">enp0s25: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500</span><br><span class="line">        inet 192.168.0.20  netmask 255.255.255.0  broadcast 192.168.0.255</span><br><span class="line">        inet6 fe80::6af7:28ff:fe2e:e230  prefixlen 64  scopeid 0x20&lt;<span class="built_in">link</span>&gt;</span><br><span class="line">        ether 68:f7:28:2e:e2:30  txqueuelen 1000  (Ethernet)</span><br><span class="line">        RX packets 553217  bytes 301601649 (287.6 MiB)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 482998  bytes 61025212 (58.1 MiB)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br><span class="line">        device interrupt 20  memory 0xf0600000-f0620000  </span><br><span class="line"></span><br><span class="line">enp0s25:0: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500</span><br><span class="line">        inet 10.10.10.200  netmask 255.255.255.0  broadcast 10.10.10.255</span><br><span class="line">        ether 68:f7:28:2e:e2:30  txqueuelen 1000  (Ethernet)</span><br><span class="line">        device interrupt 20  memory 0xf0600000-f0620000  </span><br><span class="line"></span><br><span class="line">......</span><br><span class="line"></span><br><span class="line">[root@host-0 network-scripts]<span class="comment"># ping 10.10.10.200</span></span><br><span class="line">PING 10.10.10.200 (10.10.10.200) 56(84) bytes of data.</span><br><span class="line">64 bytes from 10.10.10.200: icmp_seq=1 ttl=64 time=0.051 ms</span><br><span class="line">64 bytes from 10.10.10.200: icmp_seq=2 ttl=64 time=0.066 ms</span><br><span class="line">64 bytes from 10.10.10.200: icmp_seq=3 ttl=64 time=0.058 ms</span><br><span class="line">^C</span><br><span class="line">--- 10.10.10.200 ping statistics ---</span><br><span class="line">3 packets transmitted, 3 received, 0% packet loss, time 2000ms</span><br><span class="line">rtt min/avg/max/mdev = 0.051/0.058/0.066/0.008 ms</span><br></pre></td></tr></table></figure>
<h2 id="删除子接口">删除子接口</h2>
<p>将 ifcfg-xxx:n 配置文件删除<br>
重启网路服务</p>
]]></content>
      <categories>
        <category>系统</category>
      </categories>
      <tags>
        <tag>系统</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo使用gulp压缩静态资源</title>
    <url>/2019/04/Hexo%E4%BD%BF%E7%94%A8gulp%E5%8E%8B%E7%BC%A9%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90/index.html</url>
    <content><![CDATA[<p>hexo作为静态页面来说加载速度已经很快了，但是我们仍然可以通过基于Node.js名为gulp的自动化构建工具实现对html、css、js等静态资源的压缩，进一步优化博客访问速度。</p>
<h3 id="先安装gulp">先安装gulp</h3>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm install gulp -g</span><br></pre></td></tr></table></figure>
<h4 id="安装gulp所需要的模块">安装gulp所需要的模块</h4>
<p>要实现gulp压缩需要安装以下五个模块</p>
<ul>
<li><code>gulp-htmlclean</code>：清理html</li>
<li><code>gulp-htmlmin</code>：压缩html</li>
<li><code>gulp-minify-css</code>：压缩css</li>
<li><code>gulp-uglify</code>：混淆js</li>
<li><code>gulp-imagemin</code>：压缩图片</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm install gulp-htmlclean gulp-htmlmin gulp-minify-css gulp-uglify gulp-imagemin --save</span><br></pre></td></tr></table></figure>
<h3 id="创建gulpfilejs文件">创建gulpfile.js文件</h3>
<p>在博客根目录下，新建gulpfile.js文件，文件内容如下</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//Plugins模块获取</span></span><br><span class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">&#x27;gulp&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> minifycss = <span class="built_in">require</span>(<span class="string">&#x27;gulp-minify-css&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> uglify = <span class="built_in">require</span>(<span class="string">&#x27;gulp-uglify&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> htmlmin = <span class="built_in">require</span>(<span class="string">&#x27;gulp-htmlmin&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> htmlclean = <span class="built_in">require</span>(<span class="string">&#x27;gulp-htmlclean&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//压缩css</span></span><br><span class="line">gulp.<span class="title function_">task</span>(<span class="string">&#x27;minify-css&#x27;</span>,  <span class="keyword">async</span> <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line"><span class="keyword">return</span> gulp.<span class="title function_">src</span>(<span class="string">&#x27;./public/**/*.css&#x27;</span>)</span><br><span class="line">.<span class="title function_">pipe</span>(<span class="title function_">minifycss</span>())</span><br><span class="line">.<span class="title function_">pipe</span>(gulp.<span class="title function_">dest</span>(<span class="string">&#x27;./public&#x27;</span>));</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//压缩html</span></span><br><span class="line">gulp.<span class="title function_">task</span>(<span class="string">&#x27;minify-html&#x27;</span>,  <span class="keyword">async</span> <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line"><span class="keyword">return</span> gulp.<span class="title function_">src</span>(<span class="string">&#x27;./public/**/**/*.html&#x27;</span>)</span><br><span class="line">.<span class="title function_">pipe</span>(<span class="title function_">htmlclean</span>())</span><br><span class="line">.<span class="title function_">pipe</span>(<span class="title function_">htmlmin</span>(&#123;</span><br><span class="line"><span class="attr">removeComments</span>: <span class="literal">true</span>,</span><br><span class="line"><span class="attr">minifyJS</span>: <span class="literal">true</span>,</span><br><span class="line"><span class="attr">minifyCSS</span>: <span class="literal">true</span>,</span><br><span class="line"><span class="attr">minifyURLs</span>: <span class="literal">true</span>,</span><br><span class="line">&#125;))</span><br><span class="line"></span><br><span class="line">.<span class="title function_">pipe</span>(gulp.<span class="title function_">dest</span>(<span class="string">&#x27;./public&#x27;</span>))</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//压缩js 不压缩min.js</span></span><br><span class="line">gulp.<span class="title function_">task</span>(<span class="string">&#x27;minify-js&#x27;</span>,  <span class="keyword">async</span> <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line"><span class="keyword">return</span> gulp.<span class="title function_">src</span>([<span class="string">&#x27;./public/**/*.js&#x27;</span>, <span class="string">&#x27;!./public/**/*.min.js&#x27;</span>])</span><br><span class="line">.<span class="title function_">pipe</span>(<span class="title function_">uglify</span>())</span><br><span class="line">.<span class="title function_">pipe</span>(gulp.<span class="title function_">dest</span>(<span class="string">&#x27;./public&#x27;</span>));</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 压缩 public/images 目录内图片(Version&gt;3)</span></span><br><span class="line">gulp.<span class="title function_">task</span>(<span class="string">&#x27;minify-images&#x27;</span>, <span class="keyword">async</span> <span class="keyword">function</span> (<span class="params">done</span>) &#123;</span><br><span class="line">    gulp.<span class="title function_">src</span>(<span class="string">&#x27;./public/images/**/*.*&#x27;</span>)</span><br><span class="line">        .<span class="title function_">pipe</span>(<span class="title function_">imagemin</span>([</span><br><span class="line">            imagemin.<span class="title function_">gifsicle</span>(&#123;<span class="attr">interlaced</span>: <span class="literal">true</span>&#125;),</span><br><span class="line">            imagemin.<span class="title function_">jpegtran</span>(&#123;<span class="attr">progressive</span>: <span class="literal">true</span>&#125;),</span><br><span class="line">            imagemin.<span class="title function_">optipng</span>(&#123;<span class="attr">optimizationLevel</span>: <span class="number">5</span>&#125;),</span><br><span class="line">            imagemin.<span class="title function_">svgo</span>(&#123;</span><br><span class="line">                <span class="attr">plugins</span>: [</span><br><span class="line">                    &#123;<span class="attr">removeViewBox</span>: <span class="literal">true</span>&#125;,</span><br><span class="line">                    &#123;<span class="attr">cleanupIDs</span>: <span class="literal">false</span>&#125;</span><br><span class="line">                ]</span><br><span class="line">            &#125;)</span><br><span class="line">        ]))</span><br><span class="line">        .<span class="title function_">pipe</span>(gulp.<span class="title function_">dest</span>(<span class="string">&#x27;./public/images&#x27;</span>));</span><br><span class="line">    <span class="title function_">done</span>();</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 开始任务</span></span><br><span class="line">gulp.<span class="title function_">task</span>(<span class="string">&#x27;default&#x27;</span>, gulp.<span class="title function_">parallel</span>(<span class="string">&#x27;minify-html&#x27;</span>, <span class="string">&#x27;minify-css&#x27;</span>,  <span class="keyword">async</span> <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// Do something after a, b, and c are finished.</span></span><br><span class="line">&#125;));</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="执行压缩">执行压缩</h3>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">hexo clean</span><br><span class="line">hexo g</span><br><span class="line">gulp</span><br></pre></td></tr></table></figure>
<h3 id="发布博客">发布博客</h3>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">hexo d</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>帮助</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux 生成大文件</title>
    <url>/2019/09/Linux-%E7%94%9F%E6%88%90%E5%A4%A7%E6%96%87%E4%BB%B6/index.html</url>
    <content><![CDATA[<h3 id="生成一大堆固定大小的文件">生成一大堆固定大小的文件</h3>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 生成一大堆固定大小的文件，用于测试磁盘，网速等</span></span><br><span class="line"><span class="comment"># bs=每次写入指定目标时块的大小，单位是字节</span></span><br><span class="line"><span class="comment"># count=所写入的块的个数</span></span><br><span class="line"><span class="comment"># 文件大小为 bs * count</span></span><br><span class="line"><span class="built_in">seq</span> -w 120 |xargs -i <span class="built_in">dd</span> <span class="keyword">if</span>=/dev/zero bs=4096 count=1 of=&#123;&#125;.dat</span><br></pre></td></tr></table></figure>
<h3 id="生成一个较大的文件">生成一个较大的文件</h3>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 生成一个1G大文件</span></span><br><span class="line"><span class="built_in">dd</span> <span class="keyword">if</span>=/dev/zero bs=1G count=1 of=1.dat</span><br></pre></td></tr></table></figure>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 生成一个2G大文件</span></span><br><span class="line"><span class="built_in">truncate</span> -s 2G 2.dat</span><br></pre></td></tr></table></figure>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 生成一个2G大文件</span></span><br><span class="line">fallocate -l 2G 3.dat</span><br></pre></td></tr></table></figure>
<p><code>fallocate</code>用于将块预分配给文件。对于支持fallocate系统调用的文件系统，这可以通过分配块并将其标记为未初始化来快速完成，因此不需要对数据块进行<code>I / O</code>操作.</p>
<p>该命令是比较推荐的创建大文件的方法，因为它创建大文件的速度是最快的。</p>
]]></content>
      <categories>
        <category>常用命令</category>
      </categories>
      <tags>
        <tag>dd</tag>
        <tag>truncate</tag>
        <tag>fallocate</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux内核调整</title>
    <url>/2019/04/Linux%E5%86%85%E6%A0%B8%E8%B0%83%E6%95%B4/index.html</url>
    <content><![CDATA[<h2 id="linux内核调整">Linux内核调整</h2>
<span id="more"></span>
<p>内核配置文件</p>
<div class="highlight"><pre class="code" ><code>-rw-r--r--<span class="hljs-number"> 1 </span>root root<span class="hljs-number"> 1631 </span>Apr<span class="hljs-number"> 11 </span>20:51 /etc/sysctl.conf
</code></pre></div>
<p>开启路由转发功能</p>
<div class="highlight"><pre class="code" ><code><span class="hljs-attribute">net</span>.ipv<span class="hljs-number">4</span>.ip_forward = <span class="hljs-number">1</span>
</code></pre></div>
<p>Linux对大部分申请内存的请求都回复&quot;yes&quot;，以便能跑更多更大的程序。因为申请内存后，并不会马上使用内存。这种技术叫做Overcommit。当linux发现内存不足时，会发生OOM killer(OOM=out-of-memory)。它会选择杀死一些进程(用户态进程，不是内核线程)，以便释放内存。当oom-killer发生时，linux会选择杀死哪些进程？选择进程的函数是oom_badness函数(在mm/oom_kill.c中)，该函数会计算每个进程的点数(0~1000)。点数越高，这个进程越有可能被杀死。每个进程的点数跟oom_score_adj有关，而且oom_score_adj可以被设置(-1000最低，1000最高)。</p>
<div class="highlight"><pre class="code" ><code><span class="hljs-attr">vm.overcommit_memory</span> = <span class="hljs-number">1</span>
</code></pre></div>
<p>设置linux可以使用的端口是从1024到65535</p>
<div class="highlight"><pre class="code" ><code><span class="hljs-attribute">net</span>.ipv<span class="hljs-number">4</span>.ip_local_port_range = <span class="hljs-number">1024</span> <span class="hljs-number">65535</span>
</code></pre></div>
<p>FIN_WAIT_2状态的超时时长</p>
<div class="highlight"><pre class="code" ><code><span class="hljs-attribute">net</span>.ipv<span class="hljs-number">4</span>.tcp_fin_timeout = <span class="hljs-number">1</span>
</code></pre></div>
<p>当keepalive起用的时候，TCP发送keepalive消息的频度，单位为秒，缺省是7200秒（即2小时）</p>
<div class="highlight"><pre class="code" ><code><span class="hljs-attribute">net</span>.ipv<span class="hljs-number">4</span>.tcp_keepalive_time = <span class="hljs-number">1200</span>
</code></pre></div>
<p>内核分配给TCP连接的内存，单位是page：</p>
<p>       第一个数字表示TCP使用的page少于此值时，内核不进行任何处理（干预），<br>
       第二个数字表示TCP使用的page超过此值时，内核进入“memory pressure”压力模式，<br>
       第三个数字表示TCP使用的page超过些值时，报“Out of socket memory”错误，TCP 连接将被拒绝</p>
<div class="highlight"><pre class="code" ><code><span class="hljs-attribute">net</span>.ipv<span class="hljs-number">4</span>.tcp_mem = <span class="hljs-number">94500000</span> <span class="hljs-number">915000000</span> <span class="hljs-number">927000000</span>
</code></pre></div>
<p>为每个TCP连接分配的写缓冲区内存大小，单位是byte：<br>
       第一个数字表示，为TCP连接分配的最小内存，<br>
       第二个数字表示，为TCP连接分配的缺省内存，<br>
       第三个数字表示，为TCP连接分配的最大内存（net.core.wmem_max可覆盖该值）</p>
<div class="highlight"><pre class="code" ><code><span class="hljs-attribute">net</span>.ipv<span class="hljs-number">4</span>.tcp_wmem = <span class="hljs-number">4096</span> <span class="hljs-number">8192</span> <span class="hljs-number">4194304</span>
</code></pre></div>
<p>为1表示允许将TIME-WAIT（僵尸进程）的句柄重新用于新的TCP连接</p>
<div class="highlight"><pre class="code" ><code><span class="hljs-attribute">net</span>.ipv<span class="hljs-number">4</span>.tcp_tw_reuse = <span class="hljs-number">1</span>
</code></pre></div>
<p>为1表示开启TCP连接中TIME-WAIT的快速回收，NAT环境可能导致DROP掉SYN包（回复RST）</p>
<div class="highlight"><pre class="code" ><code><span class="hljs-attribute">net</span>.ipv<span class="hljs-number">4</span>.tcp_tw_recycle = <span class="hljs-number">1</span>
</code></pre></div>
<p>开启TCP时间戳，用来计算往返时间RTT（Round-Trip Time）和防止序列号回绕，关闭即可防止nat架构的问题</p>
<div class="highlight"><pre class="code" ><code><span class="hljs-attribute">net</span>.ipv<span class="hljs-number">4</span>.tcp_timestamps = <span class="hljs-number">0</span>
</code></pre></div>
<p>TCP三次握手的syn/ack阶段，重试次数，缺省5，设为2-3</p>
<div class="highlight"><pre class="code" ><code><span class="hljs-attribute">net</span>.ipv<span class="hljs-number">4</span>.tcp_synack_retries = <span class="hljs-number">2</span>
</code></pre></div>
<p>对于一个新建连接，内核要发送多少个 SYN 连接请求才决定放弃。不应该大于255，默认值是5，对应于180秒左右时间。(对于大负载而物理通信良好的网络而言,这个值偏高,可修改为2.这个值仅仅是针对对外的连接,对进来的连接,是由tcp_retries1 决定的)</p>
<div class="highlight"><pre class="code" ><code><span class="hljs-attribute">net</span>.ipv<span class="hljs-number">4</span>.tcp_syn_retries = <span class="hljs-number">1</span>
</code></pre></div>
<p>当出现SYN等待队列溢出时，启用cookies来处理，可防范少量SYN攻击</p>
<div class="highlight"><pre class="code" ><code><span class="hljs-attribute">net</span>.ipv<span class="hljs-number">4</span>.tcp_syncookies = <span class="hljs-number">1</span>
</code></pre></div>
<p>当TCP连接已经建立，并塞到程序监听backlog队列时，如果检测到backlog队列已经满员后，TCP连接状态会回退到SYN+ACK状态，假装TCP三次握手第三次客户单的ACK包没收到，让客户端重传ACK，以便快速进入ESTABLISHED状态。如果设置了该参数，那么在检测到监听backlog队列已满时，直接发 RST 包给客户端终止此连接，此时客户端程序会收到104 Connection reset by peer错误。这个参数很暴力，慎用。</p>
<div class="highlight"><pre class="code" ><code><span class="hljs-attribute">net</span>.ipv<span class="hljs-number">4</span>.tcp_abort_on_overflow = <span class="hljs-number">0</span>
</code></pre></div>
<p>接收套接字缓冲区大小的默认值(以字节为单位)。</p>
<div class="highlight"><pre class="code" ><code><span class="hljs-attr">net.core.rmem_default</span> = <span class="hljs-number">262144</span>
</code></pre></div>
<p>接收套接字缓冲区大小的最大值(以字节为单位)。</p>
<div class="highlight"><pre class="code" ><code><span class="hljs-attr">net.core.rmem_max</span> = <span class="hljs-number">16777216</span>
</code></pre></div>
<p>发送套接字缓冲区大小的默认值(以字节为单位)。</p>
<div class="highlight"><pre class="code" ><code><span class="hljs-attr">net.core.wmem_default</span> = <span class="hljs-number">262144</span>
</code></pre></div>
<p>发送套接字缓冲区大小的最大值(以字节为单位)。</p>
<div class="highlight"><pre class="code" ><code><span class="hljs-attr">net.core.wmem_max</span> = <span class="hljs-number">16777216</span>
</code></pre></div>
<p>每个网络接口接收数据包的速率比内核处理这些包的速率快时，允许送到队列的数据包的最大数目。</p>
<div class="highlight"><pre class="code" ><code><span class="hljs-attr">net.core.netdev_max_backlog</span> = <span class="hljs-number">262144</span>
</code></pre></div>
<p>表示socket监听（listen）的backlog上限。backlog是socket的监听队列，当一个请求（request）尚未被处理或建立时，他会进入backlog。而socket server可以一次性处理backlog中的所有请求，处理后的请求不再位于监听队列中。当server处理请求较慢，以至于监听队列被填满后，新来的请求会被拒绝。 默认值是128。当服务端繁忙时，如NameNode或JobTracker，128是远远不够的。这样就需要增大backlog，例如3000台集群就将ipc.server.listen.queue.size设成了32768，为了使得整个参数达到预期效果，同样需要将kernel参数net.core.somaxconn设成一个大于等于32768的值。</p>
<div class="highlight"><pre class="code" ><code><span class="hljs-attr">net.core.somaxconn</span> = <span class="hljs-number">262144</span>
</code></pre></div>
<p>该参数用于设定系统中最多允许存在多少tcp套接字不被关联到任何一个用户文件句柄上。如果超过这个数字，没有与用户文件句柄关联的tcp套接字符将立即被复位，同时给出警告信息。这个限制只是为了防止简单的DoS工具。一般在系统内存比较充足的情况下，可以增大这个参数的赋值</p>
<div class="highlight"><pre class="code" ><code><span class="hljs-attribute">net</span>.ipv<span class="hljs-number">4</span>.tcp_max_orphans = <span class="hljs-number">3276800</span>
</code></pre></div>
<p>Tcp syn队列的较大长度，在进行系统调用connect时会发生Tcp的三次握手，server内核会为Tcp维护两个队列，Syn队列和Accept队列，Syn队列是指存放完成第一次握手的连接，Accept队列是存放完成整个Tcp三次握手的连接，修改net.ipv4.tcp_max_syn_backlog使之增大可以接受更多的网络连接。</p>
<div class="highlight"><pre class="code" ><code><span class="hljs-attribute">net</span>.ipv<span class="hljs-number">4</span>.tcp_max_syn_backlog = <span class="hljs-number">262144</span>
</code></pre></div>
<h4 id="最大追踪连接数修改调整">最大追踪连接数修改调整</h4>
<div class="highlight"><pre class="code" ><code><span class="hljs-attr">net.ipv4.netfilter.ip_conntrack_max</span> = <span class="hljs-number">2097152</span>
<span class="hljs-attr">net.nf_conntrack_max</span> = <span class="hljs-number">655360</span>
</code></pre></div>
<h4 id="响应时间调整">响应时间调整</h4>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#主动方的最后1个状态。默认120秒</span><br><span class="line">net.netfilter.nf_conntrack_tcp_timeout_fin_wait=30</span><br><span class="line">net.netfilter.nf_conntrack_tcp_timeout_time_wait=30</span><br><span class="line">#CLOSE_WAIT是被动方收到FIN发ACK，然后会转到LAST_ACK发FIN，除非程序写得有问题，正常来说这状态持续时间很短。默认 60 秒</span><br><span class="line">net.netfilter.nf_conntrack_tcp_timeout_close_wait=15</span><br><span class="line">#理论上不用这么长，不小于 net.ipv4.tcp_keepalive_time 就行了。默认 432000 秒（5天）</span><br><span class="line">net.netfilter.nf_conntrack_tcp_timeout_established=300</span><br></pre></td></tr></table></figure>
<h4 id="关闭-arp 的公告及响应">关闭 arp 的公告及响应</h4>
<h5 id="arp_announce">arp_announce</h5>
<p>对网络接口上本地IP地址发出的ARP报文作出相应级别的限制。<br>
       0 本机所有IP地址都向任何一个接口通告ARP报文。<br>
       1 尽量仅向该网卡回应与该网段匹配的ARP报文。<br>
       2 只向该网卡回应与该网段匹配的ARP报文。</p>
<h5 id="arp_ignore">arp_ignore</h5>
<p>定义对目标地址为本地IP的ARP询问不同的应答模式。</p>
<p>       0 响应任意网卡上接收到的对本机IP地址的arp请求（包括环回网卡上的地址），而不管该目的IP是否在接收网卡上。<br>
       1 只响应目的IP地址为接收网卡上的本地地址的arp请求。<br>
       2 只响应目的IP地址为接收网卡上的本地地址的arp请求，并且arp请求的源IP必须和接收网卡同网段。<br>
       3 如果ARP请求数据包所请求的IP地址对应的本地地址其作用域（scope）为主机（host），则不回应ARP响应数据包，如果作用域为全局（global）或链路（link），则回应ARP响应数据包。<br>
       4~7 预留。<br>
       8 不回应所有的arp请求。</p>
<div class="highlight"><pre class="code" ><code>net<span class="hljs-selector-class">.ipv4</span><span class="hljs-selector-class">.conf</span><span class="hljs-selector-class">.all</span><span class="hljs-selector-class">.arp_ignore</span> = <span class="hljs-number">1</span>
net<span class="hljs-selector-class">.ipv4</span><span class="hljs-selector-class">.conf</span><span class="hljs-selector-class">.all</span><span class="hljs-selector-class">.arp_announce</span> = <span class="hljs-number">2</span>
net<span class="hljs-selector-class">.ipv4</span><span class="hljs-selector-class">.conf</span><span class="hljs-selector-class">.default</span><span class="hljs-selector-class">.arp_ignore</span> = <span class="hljs-number">1</span>
net<span class="hljs-selector-class">.ipv4</span><span class="hljs-selector-class">.conf</span><span class="hljs-selector-class">.default</span><span class="hljs-selector-class">.arp_announce</span> = <span class="hljs-number">2</span>
net<span class="hljs-selector-class">.ipv4</span><span class="hljs-selector-class">.conf</span><span class="hljs-selector-class">.lo</span><span class="hljs-selector-class">.arp_ignore</span> = <span class="hljs-number">1</span>
net<span class="hljs-selector-class">.ipv4</span><span class="hljs-selector-class">.conf</span><span class="hljs-selector-class">.lo</span><span class="hljs-selector-class">.arp_announce</span> = <span class="hljs-number">2</span>
</code></pre></div>
]]></content>
      <categories>
        <category>系统</category>
      </categories>
  </entry>
  <entry>
    <title>Linux常用命令记录</title>
    <url>/2019/04/Linux%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E8%AE%B0%E5%BD%95/index.html</url>
    <content><![CDATA[<h2 id="记录linux常用命令">记录Linux常用命令</h2>
<span id="more"></span>
<p>路径赋值变量</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">DIR=/usr/local &amp;&amp; cd $DIR</span><br></pre></td></tr></table></figure>
<p>时间相关命令</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">echo &#x27;0 */2 * * * root /usr/sbin/ntpdate -u cn.pool.ntp.org &amp;&gt;/dev/null&#x27; &gt;&gt; /etc/crontab </span><br><span class="line">echo `date +%Y/%m/%d-%H:%M:%S`			//获取当天年月日时分秒</span><br><span class="line">echo `date +%Y%m%d`				//获取当前日期</span><br><span class="line">echo `date -d yesterday +%Y%m%d`	//获取昨天日期</span><br><span class="line">echo `date -d -2day +%Y%m%d`		//获取前两天的日期</span><br><span class="line">echo `date -d -3day +%Y%m%d`		//获取前三天的日期</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>查看所有用户创建的进程数,使用命令</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ps h -Led -o user | sort | uniq -c | sort -n</span><br></pre></td></tr></table></figure>
<p>查看CPU核心数</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#物理 CPU 个数：</span><br><span class="line">cat /proc/cpuinfo | grep &quot;physical id&quot; | sort -u | wc -l</span><br><span class="line">#每个物理 CPU 中核心（Core）的个数：</span><br><span class="line">cat /proc/cpuinfo | grep &quot;cpu cores&quot; | uniq | awk -F: &#x27;&#123;print $2&#125;&#x27; |sed &#x27;s/ //g&#x27;</span><br><span class="line">#逻辑 CPU 个数(线程数目)</span><br><span class="line">cat /proc/cpuinfo | grep &quot;processor&quot; | wc -l</span><br><span class="line">#查看 core id 的数量,即为所有物理 CPU 上的核心（Core）的个数（查看总线程数）</span><br><span class="line">cat /proc/cpuinfo | grep &quot;core id&quot; | uniq | wc -l</span><br></pre></td></tr></table></figure>
<p>Centos7：改主机名（当前环境并量并永久生效）</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">hostnamectl set-hostname  xx.xx.xx    //这种方法大写会变小写</span><br><span class="line">还有一种方法，直接修改 /etc/hostname文件，这个可以保证大写不变</span><br><span class="line">注意，最好在 /etc/hosts 中增加 </span><br><span class="line">127.0.0.1 [yourhostname]</span><br><span class="line">否则可能导致各种问题。</span><br><span class="line">重启后生效</span><br></pre></td></tr></table></figure>
<p>查看打开文件的个数</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ulimit -a </span><br></pre></td></tr></table></figure>
<p>句柄数修改，即open files值修改</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cat &lt;&lt; EFO &gt;&gt; /etc/security/limits.conf</span><br><span class="line">* soft nofile 65530</span><br><span class="line">* hard nofile 65530</span><br><span class="line">EFO</span><br></pre></td></tr></table></figure>
<p>备份数据库</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysqldump -uroot -ppasswd --databases  databases &gt; data.sql</span><br></pre></td></tr></table></figure>
<p>yum下载二进制包方法</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">yum -y install yum-utils    //安装下载工具</span><br><span class="line">yumdownloader httpd --resolve --destdir=/root/package/httpd   //下载httpd包，包括依赖包。</span><br></pre></td></tr></table></figure>
<p>查看是否插网线，1表示有，0表示无</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cat /sys/class/net/eth0/carrier</span><br></pre></td></tr></table></figure>
<p>修改docker目录，centos7，在ExecStart项后面添加–graph /home/docker，即可指定到/home/docker</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">vim /usr/lib/systemd/system/docker.service</span><br><span class="line">ExecStart=/usr/bin/dockerd-current --graph /home/docker \</span><br><span class="line">systemctl daemon-reload</span><br></pre></td></tr></table></figure>
<p>关闭防火墙及selinux</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sed -i &quot;s/SELINUX=.*/SELINUX=disabled/g&quot; /etc/selinux/config</span><br><span class="line">iptables -F &amp;&amp; service iptables stop &amp;&amp; chkconfig iptables off</span><br><span class="line">chkconfig  | grep iptab &amp;&amp; shutdown -r now</span><br></pre></td></tr></table></figure>
<p>设置时区</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">timedatectl set-timezone &quot;Asia/Shanghai&quot; &amp;&amp; timedatectl</span><br></pre></td></tr></table></figure>
<p>IP过滤</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">grep -E &quot;^(([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\.)&#123;3&#125;([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])$&quot; ip.txt</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>脚本</category>
      </categories>
      <tags>
        <tag>shell</tag>
      </tags>
  </entry>
  <entry>
    <title>Markdown语法</title>
    <url>/2019/04/Markdown%E8%AF%AD%E6%B3%95/index.html</url>
    <content><![CDATA[<p>我们理解您需要更便捷更高效的工具记录思想，整理笔记、知识，并将其中承载的价值传播给他人，<strong>Cmd Markdown</strong> 是我们给出的答案 —— 我们为记录思想和分享知识提供更专业的工具。 您可以使用 Cmd Markdown：</p>
<span id="more"></span>
<blockquote>
<ul>
<li>整理知识，学习笔记</li>
<li>发布日记，杂文，所见所想</li>
<li>撰写发布技术文稿（代码支持）</li>
<li>撰写发布学术论文（LaTeX 公式支持）</li>
</ul>
</blockquote>
<p><img src="https://www.zybuluo.com/static/img/logo.png" alt="cmd-markdown-logo"></p>
<p>除了您现在看到的这个 Cmd Markdown 在线版本，您还可以前往以下网址下载：</p>
<h3 id="[windows/mac/linux-全平台客户端](https://wwwzybuluo.com/cmd/)"><a href="https://www.zybuluo.com/cmd/">Windows/Mac/Linux 全平台客户端</a></h3>
<blockquote>
<p>请保留此份 Cmd Markdown 的欢迎稿兼使用说明，如需撰写新稿件，点击顶部工具栏右侧的 <i class="icon-file"></i> <strong>新文稿</strong> 或者使用快捷键 <code>Ctrl+Alt+N</code>。</p>
</blockquote>
<hr>
<h2 id="什么是-markdown">什么是 Markdown</h2>
<p>Markdown 是一种方便记忆、书写的纯文本标记语言，用户可以使用这些标记符号以最小的输入代价生成极富表现力的文档：譬如您正在阅读的这份文档。它使用简单的符号标记不同的标题，分割不同的段落，<strong>粗体</strong> 或者 <em>斜体</em> 某些文字，更棒的是，它还可以</p>
<h3 id="1-制作一份待办事宜 [todo 列表](https://www.zybuluo.com/mdeditor?url=https://www.zybuluo.com/static/editor/md-help.markdown#13-待办事宜-todo-列表)">1. 制作一份待办事宜 <a href="https://www.zybuluo.com/mdeditor?url=https://www.zybuluo.com/static/editor/md-help.markdown#13-%E5%BE%85%E5%8A%9E%E4%BA%8B%E5%AE%9C-todo-%E5%88%97%E8%A1%A8">Todo 列表</a></h3>
<ul>
<li><input type="checkbox" style="color: blue;" disabled/>支持以 PDF 格式导出文稿</li>
<li><input type="checkbox" style="color: blue;" disabled/>改进 Cmd 渲染算法，使用局部渲染技术提高渲染效率</li>
<li><input type="checkbox" style="color: blue;" disabled checked/>新增 Todo 列表功能</li>
<li><input type="checkbox" style="color: blue;" disabled checked/>修复 LaTex 公式渲染问题</li>
<li><input type="checkbox" style="color: blue;" disabled checked/>新增 LaTex 公式编号功能</li>
</ul>
<h3 id="2-书写一个质能守恒公式[^latex]">2. 书写一个质能守恒公式<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup></h3>
<p><div class="markdown-them-math-block">$$E=mc^2$$</div></p>
<h3 id="3-高亮一段代码[^code]">3. 高亮一段代码<sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup></h3>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">@requires_authorization</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SomeClass</span>:</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    <span class="comment"># A comment</span></span><br><span class="line">    <span class="built_in">print</span> <span class="string">&#x27;hello world&#x27;</span></span><br></pre></td></tr></table></figure>
<h3 id="4-高效绘制 [流程图](https://www.zybuluo.com/mdeditor?url=https://www.zybuluo.com/static/editor/md-help.markdown#7-流程图)">4. 高效绘制 <a href="https://www.zybuluo.com/mdeditor?url=https://www.zybuluo.com/static/editor/md-help.markdown#7-%E6%B5%81%E7%A8%8B%E5%9B%BE">流程图</a></h3>
<div id="flowchart-0" class="flow-chart"></div>
<h3 id="5-高效绘制 [序列图](https://www.zybuluo.com/mdeditor?url=https://www.zybuluo.com/static/editor/md-help.markdown#8-序列图)">5. 高效绘制 <a href="https://www.zybuluo.com/mdeditor?url=https://www.zybuluo.com/static/editor/md-help.markdown#8-%E5%BA%8F%E5%88%97%E5%9B%BE">序列图</a></h3>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Alice-&gt;Bob: Hello Bob, how are you?</span><br><span class="line">Note right of Bob: Bob thinks</span><br><span class="line">Bob--&gt;Alice: I am good thanks!</span><br></pre></td></tr></table></figure>
<h3 id="6-高效绘制 [甘特图](https://www.zybuluo.com/mdeditor?url=https://www.zybuluo.com/static/editor/md-help.markdown#9-甘特图)">6. 高效绘制 <a href="https://www.zybuluo.com/mdeditor?url=https://www.zybuluo.com/static/editor/md-help.markdown#9-%E7%94%98%E7%89%B9%E5%9B%BE">甘特图</a></h3>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">title 项目开发流程</span><br><span class="line">section 项目确定</span><br><span class="line">    需求分析       :a1, 2016-06-22, 3d</span><br><span class="line">    可行性报告     :after a1, 5d</span><br><span class="line">    概念验证       : 5d</span><br><span class="line">section 项目实施</span><br><span class="line">    概要设计      :2016-07-05  , 5d</span><br><span class="line">    详细设计      :2016-07-08, 10d</span><br><span class="line">    编码          :2016-07-15, 10d</span><br><span class="line">    测试          :2016-07-22, 5d</span><br><span class="line">section 发布验收</span><br><span class="line">    发布: 2d</span><br><span class="line">    验收: 3d</span><br></pre></td></tr></table></figure>
<h3 id="7-绘制表格">7. 绘制表格</h3>
<table>
<thead>
<tr>
<th>项目</th>
<th style="text-align:right">价格</th>
<th style="text-align:center">数量</th>
</tr>
</thead>
<tbody>
<tr>
<td>计算机</td>
<td style="text-align:right">$1600</td>
<td style="text-align:center">5</td>
</tr>
<tr>
<td>手机</td>
<td style="text-align:right">$12</td>
<td style="text-align:center">12</td>
</tr>
<tr>
<td>管线</td>
<td style="text-align:right">$1</td>
<td style="text-align:center">234</td>
</tr>
</tbody>
</table>
<h3 id="8-更详细语法说明">8. 更详细语法说明</h3>
<p>想要查看更详细的语法说明，可以参考我们准备的 <a href="https://www.zybuluo.com/mdeditor?url=https://www.zybuluo.com/static/editor/md-help.markdown">Cmd Markdown 简明语法手册</a>，进阶用户可以参考 <a href="https://www.zybuluo.com/mdeditor?url=https://www.zybuluo.com/static/editor/md-help.markdown#cmd-markdown-%E9%AB%98%E9%98%B6%E8%AF%AD%E6%B3%95%E6%89%8B%E5%86%8C">Cmd Markdown 高阶语法手册</a> 了解更多高级功能。</p>
<p>总而言之，不同于其它 <em>所见即所得</em> 的编辑器：你只需使用键盘专注于书写文本内容，就可以生成印刷级的排版格式，省却在键盘和工具栏之间来回切换，调整内容和格式的麻烦。<strong>Markdown 在流畅的书写和印刷级的阅读体验之间找到了平衡。</strong> 目前它已经成为世界上最大的技术分享网站 GitHub 和 技术问答网站 StackOverFlow 的御用书写格式。</p>
<hr>
<h2 id="什么是-cmd markdown">什么是 Cmd Markdown</h2>
<p>您可以使用很多工具书写 Markdown，但是 Cmd Markdown 是这个星球上我们已知的、最好的 Markdown 工具——没有之一 ：）因为深信文字的力量，所以我们和你一样，对流畅书写，分享思想和知识，以及阅读体验有极致的追求，我们把对于这些诉求的回应整合在 Cmd Markdown，并且一次，两次，三次，乃至无数次地提升这个工具的体验，最终将它演化成一个 <strong>编辑/发布/阅读</strong> Markdown 的在线平台——您可以在任何地方，任何系统/设备上管理这里的文字。</p>
<h3 id="1-实时同步预览">1. 实时同步预览</h3>
<p>我们将 Cmd Markdown 的主界面一分为二，左边为<strong>编辑区</strong>，右边为<strong>预览区</strong>，在编辑区的操作会实时地渲染到预览区方便查看最终的版面效果，并且如果你在其中一个区拖动滚动条，我们有一个巧妙的算法把另一个区的滚动条同步到等价的位置，超酷！</p>
<h3 id="2-编辑工具栏">2. 编辑工具栏</h3>
<p>也许您还是一个 Markdown 语法的新手，在您完全熟悉它之前，我们在 <strong>编辑区</strong> 的顶部放置了一个如下图所示的工具栏，您可以使用鼠标在工具栏上调整格式，不过我们仍旧鼓励你使用键盘标记格式，提高书写的流畅度。</p>
<p><img src="https://www.zybuluo.com/static/img/toolbar-editor.png" alt="tool-editor"></p>
<h3 id="3-编辑模式">3. 编辑模式</h3>
<p>完全心无旁骛的方式编辑文字：点击 <strong>编辑工具栏</strong> 最右侧的拉伸按钮或者按下 <code>Ctrl + M</code>，将 Cmd Markdown 切换到独立的编辑模式，这是一个极度简洁的写作环境，所有可能会引起分心的元素都已经被挪除，超清爽！</p>
<h3 id="4-实时的云端文稿">4. 实时的云端文稿</h3>
<p>为了保障数据安全，Cmd Markdown 会将您每一次击键的内容保存至云端，同时在 <strong>编辑工具栏</strong> 的最右侧提示 <code>已保存</code> 的字样。无需担心浏览器崩溃，机器掉电或者地震，海啸——在编辑的过程中随时关闭浏览器或者机器，下一次回到 Cmd Markdown 的时候继续写作。</p>
<h3 id="5-离线模式">5. 离线模式</h3>
<p>在网络环境不稳定的情况下记录文字一样很安全！在您写作的时候，如果电脑突然失去网络连接，Cmd Markdown 会智能切换至离线模式，将您后续键入的文字保存在本地，直到网络恢复再将他们传送至云端，即使在网络恢复前关闭浏览器或者电脑，一样没有问题，等到下次开启 Cmd Markdown 的时候，她会提醒您将离线保存的文字传送至云端。简而言之，我们尽最大的努力保障您文字的安全。</p>
<h3 id="6-管理工具栏">6. 管理工具栏</h3>
<p>为了便于管理您的文稿，在 <strong>预览区</strong> 的顶部放置了如下所示的 <strong>管理工具栏</strong>：</p>
<p><img src="https://www.zybuluo.com/static/img/toolbar-manager.jpg" alt="tool-manager"></p>
<p>通过管理工具栏可以：</p>
<p><i class="icon-share"></i> 发布：将当前的文稿生成固定链接，在网络上发布，分享<br>
<i class="icon-file"></i> 新建：开始撰写一篇新的文稿<br>
<i class="icon-trash"></i> 删除：删除当前的文稿<br>
<i class="icon-cloud"></i> 导出：将当前的文稿转化为 Markdown 文本或者 Html 格式，并导出到本地<br>
<i class="icon-reorder"></i> 列表：所有新增和过往的文稿都可以在这里查看、操作<br>
<i class="icon-pencil"></i> 模式：切换 普通/Vim/Emacs 编辑模式</p>
<h3 id="7-阅读工具栏">7. 阅读工具栏</h3>
<p><img src="https://www.zybuluo.com/static/img/toolbar-reader.jpg" alt="tool-manager"></p>
<p>通过 <strong>预览区</strong> 右上角的 <strong>阅读工具栏</strong>，可以查看当前文稿的目录并增强阅读体验。</p>
<p>工具栏上的五个图标依次为：</p>
<p><i class="icon-list"></i> 目录：快速导航当前文稿的目录结构以跳转到感兴趣的段落<br>
<i class="icon-chevron-sign-left"></i> 视图：互换左边编辑区和右边预览区的位置<br>
<i class="icon-adjust"></i> 主题：内置了黑白两种模式的主题，试试 <strong>黑色主题</strong>，超炫！<br>
<i class="icon-desktop"></i> 阅读：心无旁骛的阅读模式提供超一流的阅读体验<br>
<i class="icon-fullscreen"></i> 全屏：简洁，简洁，再简洁，一个完全沉浸式的写作和阅读环境</p>
<h3 id="8-阅读模式">8. 阅读模式</h3>
<p>在 <strong>阅读工具栏</strong> 点击 <i class="icon-desktop"></i> 或者按下 <code>Ctrl+Alt+M</code> 随即进入独立的阅读模式界面，我们在版面渲染上的每一个细节：字体，字号，行间距，前背景色都倾注了大量的时间，努力提升阅读的体验和品质。</p>
<h3 id="9-标签、分类和搜索">9. 标签、分类和搜索</h3>
<p>在编辑区任意行首位置输入以下格式的文字可以标签当前文档：</p>
<p>标签： 未分类</p>
<p>标签以后的文稿在【文件列表】（Ctrl+Alt+F）里会按照标签分类，用户可以同时使用键盘或者鼠标浏览查看，或者在【文件列表】的搜索文本框内搜索标题关键字过滤文稿，如下图所示：</p>
<p><img src="https://www.zybuluo.com/static/img/file-list.png" alt="file-list"></p>
<h3 id="10-文稿发布和分享">10. 文稿发布和分享</h3>
<p>在您使用 Cmd Markdown 记录，创作，整理，阅读文稿的同时，我们不仅希望它是一个有力的工具，更希望您的思想和知识通过这个平台，连同优质的阅读体验，将他们分享给有相同志趣的人，进而鼓励更多的人来到这里记录分享他们的思想和知识，尝试点击 <i class="icon-share"></i> (Ctrl+Alt+P) 发布这份文档给好友吧！</p>
<hr>
<p>再一次感谢您花费时间阅读这份欢迎稿，点击 <i class="icon-file"></i> (Ctrl+Alt+N) 开始撰写新的文稿吧！祝您在这里记录、阅读、分享愉快！</p>
<p>作者 <a href="http://weibo.com/ghosert">@ghosert</a><br>
2016 年 07月 07日</p>
<p><a href="https://www.zybuluo.com/mdeditor">点击查看原站</a><script src="https://cdnjs.cloudflare.com/ajax/libs/raphael/2.2.7/raphael.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/flowchart/1.6.5/flowchart.min.js"></script><textarea id="flowchart-0-code" style="display: none">st=>start: Start
op=>operation: Your Operation
cond=>condition: Yes or No?
e=>end

st->op->cond
cond(yes)->e
cond(no)->op</textarea><textarea id="flowchart-0-options" style="display: none">{"scale":1,"line-width":2,"line-length":50,"text-margin":10,"font-size":12}</textarea><script>  var code = document.getElementById("flowchart-0-code").value;  var options = JSON.parse(decodeURIComponent(document.getElementById("flowchart-0-options").value));  var diagram = flowchart.parse(code);  diagram.drawSVG("flowchart-0", options);</script></p>
<hr class="footnotes-sep">
<section class="footnotes">
<ol class="footnotes-list">
<li id="fn1" class="footnote-item"><p>支持 <strong>LaTeX</strong> 编辑显示支持，例如：<span class="markdown-them-math-inline">$\sum_{i=1}^n a_i=0$</span>， 访问 <a href="http://meta.math.stackexchange.com/questions/5020/mathjax-basic-tutorial-and-quick-reference">MathJax</a> 参考更多使用方法。 <a href="#fnref1" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn2" class="footnote-item"><p>代码高亮功能支持包括 Java, Python, JavaScript 在内的，<strong>四十一</strong>种主流编程语言。 <a href="#fnref2" class="footnote-backref">↩︎</a></p>
</li>
</ol>
</section>
]]></content>
  </entry>
  <entry>
    <title>Nginx 反向代理 grafana （使用虚拟主机）</title>
    <url>/2019/09/Nginx-%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86-grafana-%E4%BD%BF%E7%94%A8%E8%99%9A%E6%8B%9F%E4%B8%BB%E6%9C%BA/index.html</url>
    <content><![CDATA[<h5 id="nginx-配置示例如下">Nginx 配置示例如下</h5>
<figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="attribute">map</span> <span class="variable">$http_upgrade</span> <span class="variable">$connection_upgrade</span> &#123;</span><br><span class="line">    <span class="attribute">default</span> upgrade;</span><br><span class="line">    &#x27;&#x27; close;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="section">upstream</span> grafana &#123;</span><br><span class="line">    <span class="attribute">server</span> <span class="number">127.0.0.1:3000</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment"># HTTP</span></span><br><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span>       <span class="number">80</span>;</span><br><span class="line">    <span class="attribute">server_name</span>  grafana.local.com;</span><br><span class="line"></span><br><span class="line">    <span class="section">location</span> / &#123;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> Host <span class="variable">$http_host</span>;</span><br><span class="line">        <span class="attribute">proxy_pass</span> http://grafana;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="section">location</span> /api/live/ &#123;</span><br><span class="line">        <span class="attribute">proxy_http_version</span> <span class="number">1</span>.<span class="number">1</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> Upgrade <span class="variable">$http_upgrade</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> Connection <span class="variable">$connection_upgrade</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> Host <span class="variable">$http_host</span>;</span><br><span class="line">        <span class="attribute">proxy_pass</span> http://grafana;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># HTTPS</span></span><br><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span>       <span class="number">443</span> ssl http2;</span><br><span class="line">    <span class="attribute">server_name</span>  grafana.local.com;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">ssl_certificate</span>      cert/server.pem;</span><br><span class="line">    <span class="attribute">ssl_certificate_key</span>  cert/server-key.pem;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">ssl_session_cache</span>    shared:SSL:<span class="number">1m</span>;</span><br><span class="line">    <span class="attribute">ssl_session_timeout</span>  <span class="number">5m</span>;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">ssl_ciphers</span>  HIGH:!aNULL:!MD5;</span><br><span class="line">    <span class="attribute">ssl_prefer_server_ciphers</span>  <span class="literal">on</span>;</span><br><span class="line"></span><br><span class="line">    <span class="section">location</span> / &#123;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> Host <span class="variable">$http_host</span>;</span><br><span class="line">        <span class="attribute">proxy_pass</span> http://grafana;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="section">location</span> /api/live/ &#123;</span><br><span class="line">        <span class="attribute">proxy_http_version</span> <span class="number">1</span>.<span class="number">1</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> Upgrade <span class="variable">$http_upgrade</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> Connection <span class="variable">$connection_upgrade</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> Host <span class="variable">$http_host</span>;</span><br><span class="line">        <span class="attribute">proxy_pass</span> http://grafana;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p><a href="https://grafana.com/tutorials/run-grafana-behind-a-proxy/">Run Grafana behind a reverse proxy | Grafana Labs</a></p>
</blockquote>
]]></content>
      <categories>
        <category>服务</category>
        <category>监控</category>
      </categories>
      <tags>
        <tag>grafana</tag>
        <tag>Nginx</tag>
      </tags>
  </entry>
  <entry>
    <title>TCP血案</title>
    <url>/2019/08/TCP%E8%A1%80%E6%A1%88/index.html</url>
    <content><![CDATA[<h2 id="tcp血案">TCP血案</h2>
<p>传输控制协议（TCP，Transmission Control Protocol）是一种面向连接的、可靠的、基于字节流的传输层通信协议，由IETF的RFC 793 [1]  定义。<br>
TCP旨在适应支持多网络应用的分层协议层次结构。 连接到不同但互连的计算机通信网络的主计算机中的成对进程之间依靠TCP提供可靠的通信服务。TCP假设它可以从较低级别的协议获得简单的，可能不可靠的数据报服务。 原则上，TCP应该能够在从硬线连接到分组交换或电路交换网络的各种通信系统之上操作。<br>
在拥塞控制上，采用广受好评的TCP拥塞控制算法（也称AIMD算法）。该算法主要包括四个主要部分：<br>
（1）慢启动<br>
每当建立一个TCP连接时或一个TCP连接发生超时重传后，该连接便进入慢启动阶段。进入慢启动后，TCP实体将拥塞窗口的大小初始化为一个报文段，即：cwnd=1。此后，每收到一个报文段的确认（ACK），cwnd值加1，即拥塞窗口按指数增加。当cwnd值超过慢启动阐值（sshterhs）或发生报文段丢失重传时，慢启动阶段结束。前者进入拥塞避免阶段，后者重新进入慢启动阶段。<br>
（2）拥塞避免<br>
在慢启阶段，当cwnd值超过慢启动阐值（ssthresh）后，慢启动过程结束，TCP连接进入拥塞避免阶段。在拥塞避免阶段，每一次发送的cwnd个报文段被完全确认后，才将cwnd值加1。在此阶段，cwnd值线性增加。<br>
（3）快速重传<br>
快速重传是对超时重传的改进。当源端收到对同一个报文的三个重复确认时，就确定一个报文段已经丢失，因此立刻重传丢失的报文段，而不必等到重传定时器（RTO）超时。以此减少不必要的等待时间。<br>
（4）快速恢复<br>
快速恢复是对丢失恢复机制的改进。在快速重传之后，不经过慢启动过程而直接进入拥塞避免阶段。每当快速重传后，置sshtesrh=cwnd/2、ewnd=ssthresh+3。此后，每收到一个重复确认，将cwnd值加1，直至收到对丢失报文段和其后若干报文段的累积确认后，置cwnd=ssthesrh，进入拥塞避免阶段。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">TCP三次握手的过程如下：</span><br><span class="line">客户端发送SYN（SEQ=x）报文给服务器端，进入SYN_SEND状态。</span><br><span class="line">服务器端收到SYN报文，回应一个SYN （SEQ=y）ACK（ACK=x+1）报文，进入SYN_RECV状态。</span><br><span class="line">客户端收到服务器端的SYN报文，回应一个ACK（ACK=y+1）报文，进入Established状态。</span><br><span class="line">三次握手完成，TCP客户端和服务器端成功地建立连接，可以开始传输数据了。</span><br></pre></td></tr></table></figure>
<p><img src="https://gss2.bdstatic.com/9fo3dSag_xI4khGkpoWK1HF6hhy/baike/s%3D220/sign=aaa66b7aad4bd11300cdb0306aafa488/29381f30e924b899cb32f6316e061d950a7bf6a9.jpg" alt=""></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">连接终止</span><br><span class="line">建立一个连接需要三次握手，而终止一个连接要经过四次握手，这是由TCP的半关闭（half-close）造成的。 </span><br><span class="line">（1） 某个应用进程首先调用close，称该端执行“主动关闭”（activeclose）。该端的TCP于是发送一个FIN分节，表示数据发送完毕。</span><br><span class="line">（2） 接收到这个FIN的对端执行 “被动关闭”（passive close），这个FIN由TCP确认。注意：FIN的接收也作为一个文件结束符（end-of-file）传递给接收端应用进程，放在已排队等候该应用进程接收的任何其他数据之后，因为，FIN的接收意味着接收端应用进程在相应连接上再无额外数据可接收。</span><br><span class="line">（3） 一段时间后，接收到这个文件结束符的应用进程将调用close关闭它的套接字。这导致它的TCP也发送一个FIN。</span><br><span class="line">（4） 接收这个最终FIN的原发送端TCP（即执行主动关闭的那一端）确认这个FIN。既然每个方向都需要一个FIN和一个ACK，因此通常需要4个分节。</span><br></pre></td></tr></table></figure>
<p><img src="https://gss0.bdstatic.com/94o3dSag_xI4khGkpoWK1HF6hhy/baike/s%3D220/sign=b7dea42e8a82b90139adc431438da97e/a1ec08fa513d269721cc875455fbb2fb4316d898.jpg" alt=""></p>
]]></content>
      <categories>
        <category>系统</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>VIM编辑器</title>
    <url>/2019/05/VIM%E7%BC%96%E8%BE%91%E5%99%A8/index.html</url>
    <content><![CDATA[<h2 id="vim编辑器">vim编辑器</h2>
<span id="more"></span>
<h4 id="配置介绍">配置介绍</h4>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">-rw-r--r--. 1 root root 1982 8月   2 2017 /etc/virc        vi 配置文件</span><br><span class="line">-rw-r--r--. 1 root root 1982 8月   2 2017 /etc/vimrc       vim 全局配置文件</span><br><span class="line">-rw-r--r--. 1 root root 1982 8月   2 2017 ~/.vimrc         vim 用户配置文件，默认没有，需要手工建立</span><br><span class="line">source ~/.vimrc 让配置文件立即生效，source 可用（.）代替，如 . /etc/vimrc</span><br><span class="line">:q!   放弃修改，所用用户可用</span><br><span class="line">:wq!  当没有写入权限时强制写入，只有 root 可用。</span><br><span class="line">:wq   保存退出</span><br><span class="line">ZZ    保存退出</span><br></pre></td></tr></table></figure>
<h4 id="插入快捷键">插入快捷键</h4>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">a  在光标所在字符后插入</span><br><span class="line">A  插入光标所在行行尾</span><br><span class="line">i  在光标所在字符前插入</span><br><span class="line">I  插入光标所在行行首</span><br><span class="line">o  在光标下插入新行</span><br><span class="line">O  在光标上插入新行</span><br></pre></td></tr></table></figure>
<h4 id="光标移动快捷键">光标移动快捷键</h4>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">H  向左     gg 移动到文件头</span><br><span class="line">L  向右     G  移动到文件尾</span><br><span class="line">J  向下     ^  移到行首</span><br><span class="line">K  向上     $  移到行尾</span><br></pre></td></tr></table></figure>
<h4 id="删除操作">删除操作</h4>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">x      删除单个字符</span><br><span class="line">nx     删除 n 个字符 dw 删除光标后一个字符串</span><br><span class="line">dd     删除单行 D  光标后删除到行尾</span><br><span class="line">ndd    删除单行</span><br><span class="line">:m,nd  从 m 行删除到 n 行</span><br><span class="line">dG     从光标所在行删除到文件尾</span><br><span class="line">C      当前位置删除到行尾，且打开编辑模式</span><br><span class="line">dw     当前位置删除一个字符串</span><br></pre></td></tr></table></figure>
<h4 id="粘贴复制">粘贴复制</h4>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">yy         复制</span><br><span class="line">nyy        复制 n 行</span><br><span class="line">p          粘贴到光标下一行</span><br><span class="line">P          粘贴到光标上一行</span><br><span class="line">u          撤销</span><br><span class="line">ctrl+r     反撤销</span><br><span class="line">r          替换当前光标位置字符</span><br><span class="line">R          从光标位置开始替换，ESC 键结束</span><br><span class="line">/          查找，n 下一个，N 上一个，</span><br><span class="line">:noh       取消查找后的高亮</span><br><span class="line">:r! 命令   把命令结果写在光标所在行</span><br><span class="line">:r /etc/passwd 把/etc/passwd 文件内容载入到当前编辑的文件中</span><br></pre></td></tr></table></figure>
<h4 id="替换">替换</h4>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">:1,10s/old/new/g      把 1 到 10 行的 old 替换为 new</span><br><span class="line">:%s/old/new/g         把全文的 old 替换为 new（%代表全文）</span><br><span class="line">:1,10s/^/#/g          在 1 到 10 行的行首加入#</span><br></pre></td></tr></table></figure>
<h4 id="辅助操作">辅助操作</h4>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1) 显示行号  :set nu</span><br><span class="line">:set nonu</span><br><span class="line">2) 颜色开关 :syntax off</span><br><span class="line">:syntax on</span><br><span class="line">3) 快捷键 :map ^P I#&lt;ESC&gt; 当按下 ctrl+p，在行首加入“#” “^P”需要 ctrl+V+P 输入</span><br><span class="line">:map ^B ^x 当按下 ctrl+b，删除行首的一个字母，用于删除注释</span><br><span class="line">4) 替换</span><br><span class="line">:ab 原字符  目标字符</span><br><span class="line">:ab abc ABC1234@qq.com</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>系统</category>
      </categories>
  </entry>
  <entry>
    <title>Zabbix监控搭建</title>
    <url>/2019/05/Zabbix%E7%9B%91%E6%8E%A7%E6%90%AD%E5%BB%BA/index.html</url>
    <content><![CDATA[<h2 id="zabbix监控搭建">Zabbix监控搭建</h2>
<h4 id="zabbix概述">Zabbix概述</h4>
<p>       zabbix是一个基于WEB界面的提供分布式系统监视以及网络监视功能的企业级的开源解决方案 ( 基于 GPL V2 )zabbix由 2 部分构成，zabbix server与可选组件zabbix agent</p>
<h4 id="进程构成">进程构成</h4>
<p>zabbix 安装完成后会产生 5 个程序：zabbix_agentd、zabbix_get、zabbix_proxy、zabbix_sender、zabbix_server，zabbix_java_gateway是可选，这个需要另外安装</p>
<ul>
<li>
<p>zabbix_agentd<br>
       客户端守护进程，此进程收集客户端数据，例如 cpu负载、内存、硬盘使用情况等</p>
</li>
<li>
<p>zabbix_get<br>
       zabbix工具，单独使用的命令，通常用于排错</p>
</li>
<li>
<p>zabbix_sender<br>
       zabbix工具，用于发送数据给 server 或者 proxy ，在脚本完成之后使用 sender 主动将数据提交</p>
</li>
<li>
<p>zabbix_server<br>
       zabbix 服务端守护进程，所有的数据都是被提交或主动提交到 zabbix_server 端</p>
</li>
<li>
<p>zabbix_proxy<br>
       zabbix代理守护进程。功能类似server，唯一不同的是它只是一个中转站，它需要把收集到的数据提交/被提交到server里</p>
</li>
<li>
<p>zabbix_java_gateway<br>
       zabbix2.0之后引入的一个功能。顾名思义：Java网关，类似agentd，但是只用于Java方面。需要特别注意的是，它只能主动去获取数据，而不能被动获取数据。它的数据最终会给到server或者proxy</p>
</li>
</ul>
<h4 id="硬件需求">硬件需求</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Platform</th>
<th>CPU/Mem</th>
<th>Databases</th>
<th>Monitored host</th>
</tr>
</thead>
<tbody>
<tr>
<td>Small</td>
<td>Ubuntu linux</td>
<td>PII 350Mhz 256Mb</td>
<td>SQLite</td>
<td>20</td>
</tr>
<tr>
<td>Medium</td>
<td>Ubuntu linux 64 bit</td>
<td>AMD Athlon 3200+ 2GB</td>
<td>MySQL InnoDB</td>
<td>500</td>
</tr>
<tr>
<td>Large</td>
<td>Ubuntu linux 64 bit</td>
<td>Intel Dual Core 6400 4GB</td>
<td>RAID10 MySQL InnoDB or PostgreSQL</td>
<td>&gt;1000</td>
</tr>
<tr>
<td>very</td>
<td>RedHat Enterprise</td>
<td>Intel Xeon 2xCPU 8GB</td>
<td>Fast RAID10 MySQL InnoDB or PostgreSQL</td>
<td>&gt;10000</td>
</tr>
</tbody>
</table>
<h4 id="zabbix搭建，使用centos-7搭建">Zabbix搭建，使用CentOS 7搭建</h4>
<h5 id="一、初始化系统设置">一、初始化系统设置</h5>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># systemctl stop firewalld</span><br><span class="line"># systemctl disable firewalld</span><br><span class="line"># setenforce 0</span><br><span class="line"># sed -i &quot;s/SELINUX=enforcing/SELINUX=disabled/g&quot; /etc/selinux/config</span><br></pre></td></tr></table></figure>
<h5 id="二、安装-lamp环境">二、安装 LAMP环境</h5>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># cd /etc/yum.repos.d/</span><br><span class="line"># wget http://mirrors.163.com/.help/CentOS7-Base-163.repo</span><br><span class="line"># yum clean all &amp;&amp; yum makecache	//清空缓存并建立元数据</span><br><span class="line"># yum -y install mariadb mariadb-server httpd php php-mysql </span><br><span class="line"># systemctl enable httpd &amp;&amp; systemctl restart httpd	//添加开机自启并重启服务</span><br><span class="line"># systemctl enable mariadb &amp;&amp; systemctl restart mariadb	//添加开机自启并重启服务	</span><br><span class="line"># mysql_secure_installation	//初始化数据库，全部回答“y”</span><br><span class="line"># systemctl is-enabled mariadb	//查询是否开机自启</span><br></pre></td></tr></table></figure>
<h5 id="三、安装-zabbix 程序，以下需联网安装，光盘yum源没有安装包。">三、安装 Zabbix 程序，以下需联网安装，光盘yum源没有安装包。</h5>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># rpm -ivh http://repo.zabbix.com/zabbix/3.2/rhel/7/x86_64/zabbix-release-3.2-1.el7.noarch.rpm</span><br><span class="line"># rpm --import /etc/pki/rpm-gpg/RPM-GPG-KEY-ZABBIX</span><br><span class="line"># yum -y install zabbix-server-mysql zabbix-web-mysql zabbix-agent</span><br></pre></td></tr></table></figure>
<h6 id="配置初始数据库：">配置初始数据库：</h6>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># mysql -u root -p</span><br><span class="line">&gt; CREATE DATABASE zabbix DEFAULT CHARACTER SET utf8 COLLATE utf8_bin;</span><br><span class="line">&gt; grant all privileges on zabbix.* to zabbix@localhost identified by &#x27;zabbix&#x27;; </span><br><span class="line">&gt; exit</span><br><span class="line">导入数据库</span><br><span class="line"># cd /usr/share/doc/zabbix-server-mysql-3.2.11 </span><br><span class="line"># zcat create.sql.gz | mysql -uroot -p zabbix     //导入数据库</span><br><span class="line"></span><br><span class="line">启动 Zabbix 服务</span><br><span class="line"># vim /etc/zabbix/zabbix_server.conf</span><br><span class="line">DBHost=localhost</span><br><span class="line">DBName=zabbix</span><br><span class="line">DBUser=zabbix</span><br><span class="line">DBPassword=zabbix</span><br><span class="line"># systemctl enable zabbix-server &amp;&amp; systemctl start zabbix-server</span><br><span class="line"></span><br><span class="line">编辑 zabbix 前端 php 配置</span><br><span class="line"># vim /etc/httpd/conf.d/zabbix.conf</span><br><span class="line">php_value max_execution_time 300 </span><br><span class="line">php_value memory_limit 128M </span><br><span class="line">php_value post_max_size 16M </span><br><span class="line">php_value upload_max_filesize 2M </span><br><span class="line">php_value max_input_time 300 </span><br><span class="line">php_value always_populate_raw_post_data -1 </span><br><span class="line">php_value date.timezone Asia/Shanghai</span><br><span class="line"></span><br><span class="line">调整时间同步</span><br><span class="line"># yum -y install ntpdate </span><br><span class="line"># ntpdate cn.pool.ntp.org</span><br><span class="line"># systemctl restart httpd //重启 Apache 服务生效</span><br></pre></td></tr></table></figure>
<h4 id="四、修改中文乱码问题">四、修改中文乱码问题</h4>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Win+R	&gt;	fonts	&gt;	拷贝中文字体改名为 msyh.ttf	&gt;	</span><br><span class="line">将字体拷贝到该目录下 /usr/share/zabbix/fonts</span><br><span class="line">[root@localhost ~]# vim /usr/share/zabbix/include/defines.inc.php</span><br><span class="line">修改 zabbix php 页面配置，将&#x27;graphfont&#x27; 修改为 msyh</span><br><span class="line">define(&#x27;ZBX_GRAPH_FONT_NAME&#x27;, &#x27;msyh&#x27;);</span><br></pre></td></tr></table></figure>
<h4 id="五、添加客户端">五、添加客户端</h4>
<h6 id="linux配置">linux配置</h6>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">导入安装包	</span><br><span class="line">(CentOS 7)zabbix-agent-3.2.1-1.el7.x86_64.rpm</span><br><span class="line">(CentOS 6)zabbix-agent-3.2.6-1.el6.x86_64.rpm</span><br><span class="line"># yum –y install zabbix-agent-3.2.1-1.el7.x86_64.rpm</span><br><span class="line"># vim /etc/zabbix/zabbix_agentd.conf</span><br><span class="line">LogFile=/tmp/zabbix_agentd.log</span><br><span class="line">Server=10.10.10.11 //zabbix服务器ip</span><br><span class="line">ServerActive=10.10.10.11	//zabbix服务器ip</span><br><span class="line">Hostname=10.10.10.11	//自己的ip</span><br><span class="line"># systemctl enable zabbix-agent &amp;&amp; systemctl restart zabbix-agent	//CentOS-7</span><br><span class="line"># chkconfig zabbix-agent on &amp;&amp; service zabbix-agent start	//CentOS-6.8</span><br></pre></td></tr></table></figure>
<h6 id="windows端配置">Windows端配置</h6>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">将bin和conf目录放在C:\zabbix中</span><br><span class="line">修改C:\zabbix\conf\zabbix_agentd.conf配置文件下面三项</span><br><span class="line">LogFile=/tmp/zabbix_agentd.log</span><br><span class="line">Server=10.10.10.11 //zabbix服务器ip</span><br><span class="line">ServerActive=10.10.10.11	//zabbix服务器ip</span><br><span class="line">Hostname=10.10.10.111	//自己的ip</span><br><span class="line">c:\zabbix\bin\win64\zabbix_agentd.exe -c c:\zabbix\conf\zabbix_agentd.win.conf -i	//将进程添加到服务管理</span><br><span class="line">c:\zabbix\bin\win64\zabbix_agentd.exe -c c:\zabbix\conf\zabbix_agentd.win.conf -s	//开启服务</span><br></pre></td></tr></table></figure>
<h4 id="六、浏览器端配置">六、浏览器端配置</h4>
<p>登录zabbix   <a href="http://ip/zabbix">http://ip/zabbix</a><br>
用户名 Admin   密码： zabbix</p>
<p>1、 添加监控主机<br>
配置 | 主机 | 创建主机 | 模板 | 选择模板 | 添加模板 | 添加主机<br>
添加模板时，一般默认必须选择以下2项<br>
Template ICMP Ping<br>
Template OS Linux</p>
<p>2、 配置监控 Nginx 并发量脚本（自定义脚本）</p>
<h5 id="一、编译安装nginx，开启-nginx status 状态信息">一、编译安装Nginx，开启 Nginx status 状态信息</h5>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># ./configure --prefix=/usr/local/nginx --user=nginx --group=nginx --with-http_stub_status_module</span><br><span class="line"># make &amp;&amp; make install</span><br><span class="line">添加监控模块</span><br><span class="line"># vim /usr/local/nginx/conf/nginx.conf</span><br><span class="line">location /xabbix &#123;</span><br><span class="line">  stub_status on;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="二、zabbix-客户端配置">二、Zabbix 客户端配置</h5>
<p>1、编写客户机端脚本 nginx_stats.sh</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@localhost ~]# vim /etc/zabbix/zabbix_agentd.d/nginx_stats.sh</span><br><span class="line">#!/bin/bash</span><br><span class="line"># Description：zabbix监控nginx性能以及进程状态</span><br><span class="line"># Note：此脚本需要配置在被监控端，否则ping检测将会得到不符合预期的结果</span><br><span class="line">HOST=&quot;127.0.0.1&quot;</span><br><span class="line">PORT=&quot;80&quot;</span><br><span class="line"># 检测nginx进程是否存在</span><br><span class="line">function ping &#123;</span><br><span class="line">/sbin/pidof nginx | wc -l </span><br><span class="line">&#125;</span><br><span class="line"># 检测nginx性能</span><br><span class="line">function active &#123;</span><br><span class="line">  /usr/bin/curl &quot;http://$HOST:$PORT/xabbix/&quot; 2&gt;/dev/null| grep &#x27;Active&#x27; | awk &#x27;&#123;print $NF&#125;&#x27; </span><br><span class="line">&#125;</span><br><span class="line">function reading &#123;</span><br><span class="line">  /usr/bin/curl &quot;http://$HOST:$PORT/xabbix/&quot; 2&gt;/dev/null| grep &#x27;Reading&#x27; | awk &#x27;&#123;print $2&#125;&#x27;</span><br><span class="line">&#125;</span><br><span class="line">function writing &#123;</span><br><span class="line">  /usr/bin/curl &quot;http://$HOST:$PORT/xabbix/&quot; 2&gt;/dev/null| grep &#x27;Writing&#x27; | awk &#x27;&#123;print $4&#125;&#x27;</span><br><span class="line">&#125;</span><br><span class="line">function waiting &#123;</span><br><span class="line">  /usr/bin/curl &quot;http://$HOST:$PORT/xabbix/&quot; 2&gt;/dev/null| grep &#x27;Waiting&#x27; | awk &#x27;&#123;print $6&#125;&#x27;</span><br><span class="line">&#125;</span><br><span class="line">function accepts &#123;</span><br><span class="line">  /usr/bin/curl &quot;http://$HOST:$PORT/xabbix/&quot; 2&gt;/dev/null| awk NR==3 | awk &#x27;&#123;print $1&#125;&#x27;</span><br><span class="line">&#125;</span><br><span class="line">function handled &#123;</span><br><span class="line">  /usr/bin/curl &quot;http://$HOST:$PORT/xabbix/&quot; 2&gt;/dev/null| awk NR==3 | awk &#x27;&#123;print $2&#125;&#x27;</span><br><span class="line">&#125;</span><br><span class="line">function requests &#123;</span><br><span class="line">  /usr/bin/curl &quot;http://$HOST:$PORT/xabbix/&quot; 2&gt;/dev/null| awk NR==3 | awk &#x27;&#123;print $3&#125;&#x27;</span><br><span class="line">&#125;</span><br><span class="line"># 执行function</span><br><span class="line">$1</span><br></pre></td></tr></table></figure>
<p>2、在客户机将自定义的UserParameter加入配置文件，然后重启agentd<br>
将脚本存在该目录下 ： /etc/zabbix/zabbix_agentd.d，修改UserParameter的值</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># vim /etc/zabbix/zabbix_agentd.conf</span><br><span class="line">UserParameter=nginx.status[*],/etc/zabbix/zabbix_agentd.d/nginx_stats.sh $1</span><br><span class="line"># killall zabbix_agentd</span><br><span class="line"># /etc/init.d/zabbix-agent restart</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>3、在服务器使用zabbix_get获取数据</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">rpm -ivh http://repo.zabbix.com/zabbix/3.2/rhel/7/x86_64/zabbix-get-3.2.11-1.el7.x86_64.rpm</span><br><span class="line"># zabbix_get -s 10.10.10.11 -k &#x27;nginx.status[accepts]&#x27;</span><br><span class="line"># zabbix_get -s 10.10.10.11 -k &#x27;nginx.status[ping]&#x27;</span><br></pre></td></tr></table></figure>
<p>4、浏览器配置Nginx 服务器并添加 Nginx 监控模板<br>
浏览器操作</p>
<ol>
<li>配置 | 模板 | 导入 | 选择文件 | 导入</li>
<li>配置 | 主机 | 创建主机 | 模板 | 选择模板 | 添加模板 | 添加主机</li>
</ol>
<blockquote>
<p>添加模板时，一般默认必须选择以下2项<br>
Template ICMP Ping<br>
Template OS Linux<br>
Template App NGINX 选择刚才导入的模板</p>
</blockquote>
<p>3、 链接钉钉报警</p>
<blockquote>
<p>a、添加钉钉机器人，复制出机器码<br>
b 、Zabbix 配置文件中查找”Alert”查看告警脚本存放路径：</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@localhost ~]# vim /etc/zabbix/zabbix_server.conf</span><br><span class="line">AlertScriptsPath=/usr/lib/zabbix/alertscripts</span><br></pre></td></tr></table></figure>
<p>c、进入配置中路径创建配置文件：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@localhost ~]# cd /usr/lib/zabbix/alertscripts/</span><br><span class="line">[root@localhost alertscripts]# vim token.sh</span><br><span class="line">#!/bin/bash</span><br><span class="line">to=$1</span><br><span class="line">subject=$2</span><br><span class="line">text=$3</span><br><span class="line">curl &#x27;****钉钉机器码填在此处*******&#x27; \</span><br><span class="line">-H &#x27;Content-Type: application/json&#x27; \</span><br><span class="line">-d &#x27;</span><br><span class="line">&#123;&quot;msgtype&quot;: &quot;text&quot;,</span><br><span class="line">&quot;text&quot;: &#123;</span><br><span class="line">&quot;content&quot;: &quot;&#x27;&quot;$text&quot;&#x27;&quot;</span><br><span class="line">&#125;,</span><br><span class="line">&quot;at&quot;:&#123;</span><br><span class="line">&quot;atMobiles&quot;: [ &quot;&#x27;&quot;$1&quot;&#x27;&quot; ],</span><br><span class="line">&quot;isAtAll&quot;: false</span><br><span class="line">&#125;</span><br><span class="line">&#125;&#x27;</span><br></pre></td></tr></table></figure>
<p>d、修改权限</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@localhost alertscripts]# chown zabbix.zabbix token.sh</span><br><span class="line">[root@localhost alertscripts]# chmod +x token.sh</span><br></pre></td></tr></table></figure>
<p>e、配置浏览器端</p>
<blockquote>
<p>管理 | 报警媒介类型 | 创建媒介类型····</p>
<p>配置 | 动作 | 事件源[触发器] 创建动作 ·····</p>
<p>管理 | 用户 | admin | 报警媒介 | 添加 | 收件人填电话 | 填加</p>
</blockquote>
]]></content>
      <categories>
        <category>服务</category>
        <category>监控</category>
      </categories>
      <tags>
        <tag>Zabbix</tag>
      </tags>
  </entry>
  <entry>
    <title>hexo 文章内跳转到其他文章</title>
    <url>/2019/04/hexo-%E6%96%87%E7%AB%A0%E5%86%85%E8%B7%B3%E8%BD%AC%E5%88%B0%E5%85%B6%E4%BB%96%E6%96%87%E7%AB%A0/index.html</url>
    <content><![CDATA[<figure class="highlight tex"><table><tr><td class="code"><pre><span class="line">&#123;<span class="comment">% post_link 文章文件名（不要后缀） 文章标题（可选） %&#125;</span></span><br></pre></td></tr></table></figure>
<p>示例如下：</p>
<ul>
<li>
<a href="/2023/07/Nginx-%E9%85%8D%E7%BD%AE%E5%9B%9B%E5%B1%82%E4%BB%A3%E7%90%86%E7%9A%84%E8%AE%BF%E9%97%AE%E6%97%A5%E5%BF%97/index.html" title="Nginx 配置四层代理的访问日志">Nginx 配置四层代理的访问日志</a>
</li>
<li>
<a href="/2023/07/Nginx-%E9%85%8D%E7%BD%AE%E5%9B%9B%E5%B1%82%E4%BB%A3%E7%90%86%E7%9A%84%E8%AE%BF%E9%97%AE%E6%97%A5%E5%BF%97/index.html" title="Nginx 配置四层代理的访问日志">（给显示重命名）</a>
</li>
</ul>
]]></content>
      <categories>
        <category>帮助</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>mermaid流程图使用指南</title>
    <url>/2019/04/mermaid%E6%B5%81%E7%A8%8B%E5%9B%BE%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/index.html</url>
    <content><![CDATA[<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="comment"># themes\ayer\_config.yml</span></span><br><span class="line">mermaid:</span><br><span class="line">  enable: true</span><br><span class="line">  cdn: https://cdn.staticfile.org/mermaid/8.14.0/mermaid.min.js</span><br><span class="line">  theme: forest</span><br></pre></td></tr></table></figure>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">npm install --save hexo-filter-mermaid-diagrams</span><br><span class="line">npm install --save hexo-filter-flowchart</span><br></pre></td></tr></table></figure>
<figure class="highlight tex"><table><tr><td class="code"><pre><span class="line">graph TD</span><br><span class="line">    B((开始)) --&gt;C&#123;判断&#125;</span><br><span class="line">    C --  a=1 --&gt;D[执行语句1]</span><br><span class="line">    C --  a=2  --&gt;E[执行语句2]</span><br><span class="line">    C --  a=3 --&gt;F[执行语句3]</span><br><span class="line">    C -- a=4  --&gt;G[执行语句4]</span><br><span class="line">    D--&gt; AA((结束))</span><br><span class="line">    E--&gt; AA</span><br><span class="line">    F--&gt; AA</span><br><span class="line">   G--&gt; AA  </span><br></pre></td></tr></table></figure>
<pre class="mermaid">graph TD
    B((开始)) -->C{判断}
    C --  a=1 -->D[执行语句1]
    C --  a=2  -->E[执行语句2]
    C --  a=3 -->F[执行语句3]
    C -- a=4  -->G[执行语句4]
    D--> AA((结束))
    E--> AA
    F--> AA
   G--> AA</pre>
]]></content>
      <categories>
        <category>帮助</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>不同的时间格式</title>
    <url>/2019/06/%E4%B8%8D%E5%90%8C%E7%9A%84%E6%97%B6%E9%97%B4%E6%A0%BC%E5%BC%8F/index.html</url>
    <content><![CDATA[<h2 id="不同的时间格式">不同的时间格式</h2>
<h5 id="iso-8601">ISO 8601</h5>
<p>这是一种国际标准的日期和时间表示方式，格式为YYYY-MM-DDTHH:mm:ss.sssZ，其中 YYYY代表四位数年份，MM 代表月份，DD 代表天数，T 作为日期和时间的分隔符，HH 代表小时，mm 代表分钟，ss.sss代表秒和毫秒，Z 代表时区。例如：2019-04-24T05:49:10Z 、2019-04-24T13:49:10+0800</p>
<h5 id="rfc-3339">RFC 3339</h5>
<p>这是一种在互联网上广泛使用的日期和时间表示方式，它基于 ISO 8601格式，但对其进行了一些扩展，例如允许使用非零开头的小时、分钟和秒。例如：2019-04-13T15:30:00Z</p>
<h5 id="rfc-2822">RFC 2822</h5>
<p>这是一种用于电子邮件日期和时间表示的格式，例如：Sat, 13 Apr 2019 15:30:00 +0000</p>
<h5 id="unix-时间戳">Unix 时间戳</h5>
<p>这是一种用于表示自 1970 年 1 月 1 日 00:00:00 UTC（世界协调时间）以来的秒数。例如：1678882200</p>
<h5 id="自然语言表示">自然语言表示</h5>
<p>这种格式以人类易读的方式表示日期和时间，例如：April 13, 2019, 3:30 PM</p>
<h5 id="中文日期表示">中文日期表示</h5>
<p>这种格式用汉字表示日期和时间，例如：2019年4月13日 15:30</p>
<h5 id="美国习惯用法">美国习惯用法</h5>
<p>美国常见的日期表示方式为 MM/DD/YYYY，例如：04/13/2019。时间表示方式通常为 12小时制，例如：3:30 PM。</p>
<h5 id="欧洲习惯用法">欧洲习惯用法</h5>
<p>欧洲常见的日期表示方式为 DD.MM.YYYY，例如：13.04.2019。时间表示方式通常为 24小时制，例如：15:30。</p>
<h5 id="iso-8601 的扩展表示">ISO 8601 的扩展表示</h5>
<p>在 ISO 8601基础上，还可以表示更详细的时间信息，如时区偏移、周数、季度等。例如：2019-W15-4 表示 2019 年第 15周的星期四，2019-Q2 表示 2019 年第二季度。</p>
<h5 id="julian-日期">Julian 日期</h5>
<p>这种格式以公元前 4713 年 1 月 1 日为起点，表示从起点到指定日期的连续天数。例如，儒略日数（JulianDay Number，简写为 JDN）表示某一天，而儒略日期（Julian Date，简写为JD）表示某一天的某一时刻。儒略日期的格式为：JD 2459589.3125。</p>
<h5 id="microsoft-excel 日期序数">Microsoft Excel 日期序数</h5>
<p>在 Microsoft Excel 中，日期表示为一个序数值，该值表示自 1900 年 1月 1 日（或 1904 年 1 月 1 日，取决于所使用的日期系统）以来的天数。例如，2019-04-13 在 Excel 中表示为45800（基于 1900 年系统）。</p>
<h5 id="swatch-internet time">Swatch Internet Time</h5>
<p>这是一种基于比耶尔时间（Biel Mean Time，BMT）的全球统一时间单位，以.beat 为单位，一天被划分为 1000 个 beats。例如：@500 表示一天过去了一半。</p>
<h5 id="posix-时间（又称 unix 时间）">POSIX 时间（又称 Unix 时间）</h5>
<p>这是一种用于表示自 1970 年 1 月 1 日 00:00:00 UTC 以来的秒数，不包括闰秒。与 Unix 时间戳类似，但 POSIX 时间会明确排除闰秒。例如：1678882200</p>
<h5 id="tai-时间">TAI 时间</h5>
<p>这是国际原子时（International Atomic Time，TAI），它是一种基于原子钟的时间系统，用于表示自1958 年 1 月 1 日 00:00:00 以来的秒数。例如：TAI 2,142,231,200</p>
<h5 id="gps-时间">GPS 时间</h5>
<p>这是全球定位系统（Global Positioning System，GPS）使用的时间系统，用于表示自 1980 年1 月 6 日 00:00:00 以来的周数和秒数。例如：GPS Week 2244, Seconds 302400</p>
<h5 id="自定义格式">自定义格式</h5>
<p>许多软件、库和程序允许用户自定义日期和时间的表示方式。例如：%Y-%m-%d %H:%M:%S %z 表示 2019-04-13 15:30:00 +0800。</p>
]]></content>
      <categories>
        <category>系统</category>
      </categories>
      <tags>
        <tag>时间</tag>
      </tags>
  </entry>
  <entry>
    <title>使用hexo新建文章</title>
    <url>/2019/04/%E4%BD%BF%E7%94%A8hexo%E6%96%B0%E5%BB%BA%E6%96%87%E7%AB%A0/index.html</url>
    <content><![CDATA[<h2 id="hexo-新建文章">HEXO 新建文章</h2>
<p>使用命令如下命令新建，最好使用引号将文章名字引起来</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">hexo new &quot;使用hexo新建文章&quot;</span><br></pre></td></tr></table></figure>
<p>上面命令执行后会生成md类型的文章：source/_posts/xxx.md</p>
<h3 id="编辑文章">编辑文章</h3>
<ul>
<li>使用markdown编辑器编写文章，放到生成的xxx.md即可。</li>
</ul>
<blockquote>
<p>注意不要将文章最上面的类容删掉</p>
</blockquote>
<h3 id="清除缓存">清除缓存</h3>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ohexo clean</span><br></pre></td></tr></table></figure>
<h3 id="编译文章">编译文章</h3>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">hexo generate</span><br><span class="line">hexo g # 简写</span><br></pre></td></tr></table></figure>
<h3 id="启动本地服务测试文章">启动本地服务测试文章</h3>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">hexo server</span><br><span class="line">hexo s # 简写</span><br></pre></td></tr></table></figure>
<h3 id="上传到github">上传到github</h3>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">hexo deploy</span><br><span class="line">hexo d # 简写</span><br></pre></td></tr></table></figure>
<h3 id="快捷命令">快捷命令</h3>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">hexo clean &amp;&amp; hexo g &amp;&amp; hexo s</span><br></pre></td></tr></table></figure>
<h2 id="快速发布命令（资源压缩）">快速发布命令（资源压缩）</h2>
<a href="/2019/04/Hexo%E4%BD%BF%E7%94%A8gulp%E5%8E%8B%E7%BC%A9%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90/index.html" title="Hexo使用gulp压缩静态资源">Hexo使用gulp压缩静态资源</a>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">hexo clean &amp;&amp; hexo g &amp;&amp; gulp &amp;&amp; hexo d</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>帮助</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>时间同步服务器NTP搭建</title>
    <url>/2019/05/%E6%97%B6%E9%97%B4%E5%90%8C%E6%AD%A5%E6%9C%8D%E5%8A%A1%E5%99%A8NTP%E6%90%AD%E5%BB%BA/index.html</url>
    <content><![CDATA[<h4 id="ntp服务器">NTP服务器</h4>
<p>       NTP(Network Time Protocol)【网络时间协议】，它是用来同步网络中各个计算机的时间的协议，它可以提供高精准度的时间校正（LAN上与标准间差小于1毫秒，WAN上几十毫秒），且可介由加密确认的方式来防止恶毒的协议攻击。NTP服务的端口是123,使用的是UDP协议，所以NTP服务器的防火墙必须对外开放UDP 123这个端口。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">iptables -A INPUT -p udp -m udp --dport 123 -j ACCEPT</span><br></pre></td></tr></table></figure>
<h4 id="特征介绍">特征介绍</h4>
<p>       NTP提供准确时间，首先要有准确的时间来源，这一时间应该是国际标准时间UTC。 NTP获得UTC的时间来源可以是原子钟、天文台、卫星，也可以从Internet上获取。这样就有了准确而可靠的时间源。时间按NTP服务器的等级传播。按照离外部UTC 源的远近将所有服务器归入不同的Stratum（层）中。Stratum-1在顶层，有外部UTC接入，而Stratum-2则从Stratum-1获取时间，Stratum-3从Stratum-2获取时间，以此类推，但Stratum层的总数限制在15以内。所有这些服务器在逻辑上形成阶梯式的架构相互连接，而Stratum-1的时间服务器是整个系统的基础。<br>
       计算机主机一般同多个时间服务器连接， 利用统计学的算法过滤来自不同服务器的时间，以选择最佳的路径和来源来校正主机时间。即使主机在长时间无法与某一时间服务器相联系的情况下，NTP服务依然有效运转。</p>
<h4 id="ntp的层次stratum">NTP的层次stratum</h4>
<p>       本地设备的时间和远程时间服务器即使能够同步，也会存在毫秒级的误差，如果自己和远程时间服务器同步，那么别人再和自己同步，就意味着别人的时间误差可能更大。在这里，时间的精准度就会有高低，Cisco设备的NTP把这样的精准度高低称为stratum，如果stratum值越大，就表示精准度越差，stratum值越小表示精准度就越好。比如远程一台时间服务器的stratum是2，本地设备和它同步后，自己的stratum就是3，精准度就差了一些，如果这时别的设备再和自己同步，那么它得到的stratum就是4，精准度就意味着更差，而作为局域网的time service provider，通常将stratum设置为10 （Stratum 10 is conventional for unsynchronized local clocks; it is high enough that nobody is likely to mistake it for a desirable clock to synchronize with.）。</p>
<h4 id="时区介绍">时区介绍</h4>
<p>GMT: 格林威治时间，（旧译格林尼治平均时间或格林威治标准时间；英语：Greenwich Mean Time，GMT）是指位于英国伦敦郊区的皇家格林尼治天文台的标准时间，因为本初子午线被定义在通过那里的经线。<br>
UTC：标准时间，又称世界标准时间或世界协调时间，简称UTC，从英文“Coordinated Universal Time”／法文“Temps Universel Cordonné”而来。协调世界时是以原子时秒长为基础，在时刻上尽量接近于世界时的一种时间计量系统。<br>
ISO： 标准时间<br>
CST：北京时间，又名中国标准时间，是中国的标准时间。在时区划分上，属东八区，比协调世界时早8小时，记为UTC+8，与中华民国国家标准时间（旧称“中原标准时间”）、香港时间和澳门时间和相同。當格林威治時間為凌晨0:00時，中國標準時間剛好為上午8:00。</p>
<h4 id="时区关系">时区关系</h4>
<p>CET=UTC/GMT + 1小时<br>
CST=UTC/GMT +8 小时<br>
CST=CET+9<br>
例如： Thursday 03/17/2011 between 0:30am and 6:00am CET (UTC/GMT +1 hour)<br>
CET=03/17/2011  0:30am and 6:00am<br>
CST=03/17/2011  9:30am and 15:00am<br>
UTC/GMT =03/17/2011  1:30am and 7:00am</p>
<h4 id="ntp服务器搭建">NTP服务器搭建</h4>
<p>服务器 ip 10.10.10.11/24<br>
客户机 ip 10.10.10.0/24</p>
<h5 id="1、服务端配置">1、服务端配置</h5>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@NTP ~]# yum -y install ntp</span><br><span class="line">[root@NTP ~]# vim /etc/ntp.conf</span><br><span class="line">restrict 10.10.10.0 mask 255.255.255.0 nomodify notrap</span><br><span class="line">server 127.127.1.0</span><br><span class="line">fudge 127.127.1.0 stratum 10</span><br><span class="line">![](https://img2018.cnblogs.com/blog/1599886/201906/1599886-20190616111548318-665838783.png)</span><br><span class="line">[root@NTP ~]# date -s 20160202			修改时间</span><br><span class="line">[root@NTP ~]# ntpdate cn.pool.ntp.org		或者同步网络时间</span><br><span class="line">[root@NTP ~]# /etc/init.d/ntpd restart		启动服务CentOS 6</span><br><span class="line">[root@NTP ~]# systemctl restart ntpd		启动服务CentOS 7</span><br></pre></td></tr></table></figure>
<h5 id="2、客户机配置">2、客户机配置</h5>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@Test ~]# yum -y install ntpdate</span><br><span class="line">同步时间，指定ip时间同步服务器</span><br><span class="line">[root@Test ~]# ntpdate -u 10.10.10.11		</span><br><span class="line">客户机写入定时任务,自动每分钟同步一次时间</span><br><span class="line">[root@Test ~]# echo &#x27;* * * * * root /usr/sbin/ntpdate -u 10.10.10.11 &amp;&gt;/dev/null&#x27; &gt;&gt; /etc/crontab</span><br></pre></td></tr></table></figure>
<h4 id="配置文件">配置文件</h4>
<div class="highlight"><pre class="code" ><code>    -rw-r--r--<span class="hljs-number"> 1 </span>root root<span class="hljs-number"> 2000 </span>9月 <span class="hljs-number"> 23 </span>2017 /etc/ntp.conf
</code></pre></div>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#在与上级时间服务器联系时所花费的时间，记录在driftfile参数后面的文件内</span><br><span class="line">driftfile /var/lib/ntp/drift </span><br><span class="line">#我们对于默认的客户端拒绝所有的操作</span><br><span class="line">restrict default kod nomodify notrap nopeer noquery  </span><br><span class="line">restrict -6 default kod nomodify notrap nopeer noquery</span><br><span class="line">#开启内部递归网络接口lo 即允许本机地址一切的操作</span><br><span class="line">restrict 127.0.0.1  </span><br><span class="line">restrict -6 ::1</span><br><span class="line">#允许局域网内所有客户端连接到这台服务器同步时间.但是拒绝让他们修改服务器上的时间</span><br><span class="line">restrict 10.10.10.0 mask 255.255.255.0 nomodify notrap</span><br><span class="line">#指明局域网中作为NTP服务器的IP</span><br><span class="line">service 10.10.10.11</span><br><span class="line">#互联网上的三个ntp服务器</span><br><span class="line">server 0.rhel.pool.ntp.org   </span><br><span class="line">server 1.rhel.pool.ntp.org</span><br><span class="line">server 2.rhel.pool.ntp.org</span><br><span class="line">#当服务器与公用的时间服务器失去联系时（连不上网），以局域网的时间服务器为客户端提供时间同步服务　</span><br><span class="line">server  127.127.1.0    </span><br><span class="line">fudge   127.127.1.0 stratum 10</span><br><span class="line">*****restrict参数*****</span><br><span class="line">#kod 使用kod技术防范“kiss of death”攻击</span><br><span class="line">#ignore 拒绝任何NTP连接</span><br><span class="line">#nomodify 用户端不能使用ntpc,ntpq修改时间服务器参数，但是可以进行网络校时</span><br><span class="line">#noquery 用户端不能使用ntpc,ntpq查询时间服务器参数，不可以进行网络校时</span><br><span class="line">#notrap 不提供远程日志功能</span><br><span class="line">#notrust 拒绝没有认证的客户端</span><br></pre></td></tr></table></figure>
<h2 id="注：">注：</h2>
<p>       对于centos7系统有默认的时间服务chronyd，他会默认开机自启，系统就会略过ntpd的开机自启，就会出现ntpd虽然加入开机自启，但是服务并未启动，此时关闭chronyd的开机自启即可</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@NTP ~]#  systemctl disable chronyd</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>系统</category>
      </categories>
      <tags>
        <tag>NTP</tag>
      </tags>
  </entry>
  <entry>
    <title>浏览器导入p12证书</title>
    <url>/2023/04/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%AF%BC%E5%85%A5p12%E8%AF%81%E4%B9%A6/index.html</url>
    <content><![CDATA[<h2 id="浏览器导入p12证书">浏览器导入p12证书</h2>
<p><a href="https://blog.csdn.net/u011285281/article/details/127111816">https://blog.csdn.net/u011285281/article/details/127111816</a></p>
<p><a href="https://www.lmlphp.com/user/58195/article/item/787940/">https://www.lmlphp.com/user/58195/article/item/787940/</a></p>
]]></content>
      <categories>
        <category>系统</category>
      </categories>
      <tags>
        <tag>SSL</tag>
        <tag>TLS</tag>
      </tags>
  </entry>
  <entry>
    <title>笔记本安装CentOS 设置关闭盖子不休眠</title>
    <url>/2019/06/%E7%AC%94%E8%AE%B0%E6%9C%AC%E5%AE%89%E8%A3%85CentOS-%E8%AE%BE%E7%BD%AE%E5%85%B3%E9%97%AD%E7%9B%96%E5%AD%90%E4%B8%8D%E4%BC%91%E7%9C%A0/index.html</url>
    <content><![CDATA[<p>我在自己一台老旧的便携计算机上安装了cent os7作为平常的服务器，这台笔记本改的服务器一直都不会关机，这时候需要：合上笔记本盖子（显示屏关闭），系统就会休眠</p>
<p>编辑下列文件：<code>/etc/systemd/logind.conf</code></p>
<p><code>#HandlePowerKey</code>按下电源键后的行为，默认power off<br>
<code>#HandleSleepKey</code> 按下挂起键后的行为，默认suspend<br>
<code>#HandleHibernateKey</code>按下休眠键后的行为，默认hibernate<br>
<code>#HandleLidSwitch</code>合上笔记本盖后的行为，默认suspend（改为<code>lock</code>或<code>ignore</code>；即合盖不休眠）在原文件中，还要去掉前面的注释</p>
<p>重启 <code>systemd-logind</code></p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">systemctl restart systemd-logind</span><br></pre></td></tr></table></figure>
<p>自己的配置示例</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@host-0 ~]<span class="comment"># cat /etc/systemd/logind.conf </span></span><br><span class="line"><span class="comment">#  This file is part of systemd.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#  systemd is free software; you can redistribute it and/or modify it</span></span><br><span class="line"><span class="comment">#  under the terms of the GNU Lesser General Public License as published by</span></span><br><span class="line"><span class="comment">#  the Free Software Foundation; either version 2.1 of the License, or</span></span><br><span class="line"><span class="comment">#  (at your option) any later version.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Entries in this file show the compile time defaults.</span></span><br><span class="line"><span class="comment"># You can change settings by editing this file.</span></span><br><span class="line"><span class="comment"># Defaults can be restored by simply deleting this file.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># See logind.conf(5) for details.</span></span><br><span class="line"></span><br><span class="line">[Login]</span><br><span class="line"><span class="comment">#NAutoVTs=6</span></span><br><span class="line"><span class="comment">#ReserveVT=6</span></span><br><span class="line"><span class="comment">#KillUserProcesses=no</span></span><br><span class="line"><span class="comment">#KillOnlyUsers=</span></span><br><span class="line"><span class="comment">#KillExcludeUsers=root</span></span><br><span class="line"><span class="comment">#InhibitDelayMaxSec=5</span></span><br><span class="line"><span class="comment">#HandlePowerKey=poweroff</span></span><br><span class="line"><span class="comment">#HandleSuspendKey=suspend</span></span><br><span class="line"><span class="comment">#HandleHibernateKey=hibernate</span></span><br><span class="line">HandleLidSwitch=ignore</span><br><span class="line"><span class="comment">#HandleLidSwitchDocked=ignore</span></span><br><span class="line"><span class="comment">#PowerKeyIgnoreInhibited=no</span></span><br><span class="line"><span class="comment">#SuspendKeyIgnoreInhibited=no</span></span><br><span class="line"><span class="comment">#HibernateKeyIgnoreInhibited=no</span></span><br><span class="line"><span class="comment">#LidSwitchIgnoreInhibited=yes</span></span><br><span class="line"><span class="comment">#IdleAction=ignore</span></span><br><span class="line"><span class="comment">#IdleActionSec=30min</span></span><br><span class="line"><span class="comment">#RuntimeDirectorySize=10%</span></span><br><span class="line"><span class="comment">#RemoveIPC=no</span></span><br><span class="line"><span class="comment">#UserTasksMax=</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>系统</category>
      </categories>
      <tags>
        <tag>系统</tag>
      </tags>
  </entry>
  <entry>
    <title>解决因U盘标签问题导致的U盘安装Linux系统失败</title>
    <url>/2019/06/%E8%A7%A3%E5%86%B3%E5%9B%A0U%E7%9B%98%E6%A0%87%E7%AD%BE%E9%97%AE%E9%A2%98%E5%AF%BC%E8%87%B4%E7%9A%84U%E7%9B%98%E5%AE%89%E8%A3%85Linux%E7%B3%BB%E7%BB%9F%E5%A4%B1%E8%B4%A5/index.html</url>
    <content><![CDATA[<h3 id="解决因u盘标签问题导致的u盘安装linux系统失败">解决因U盘标签问题导致的U盘安装Linux系统失败</h3>
<h2 id="前言">前言</h2>
<p>我在使用U盘制作、安装Centos系统时遇到了一个问题，现象是进不了安装界面，在等待超时后提示以下信息，然后就进入了临时的linux shell。</p>
<blockquote>
<p>dracut-initqueue : Warning: dracut-initqueue timeout - starting timeout scripts</p>
</blockquote>
<p>然而同样的镜像文件如果刻录成光盘安装就没有问题，甚至可能换个U盘安装也没有问题。上网搜索有各种解决方法，总体说的是对的，但在细节上说得不够准确。个人推测发帖者根据原文分析并找到了原因，事后想要记录一下就直接Copy原文，并没有做更细的总结，这也是促使我发表本文的原因。以下记录我已在Centos7.8 + 工控机和服务器，便携机环境下实验过。</p>
<h2 id="问题分析">问题分析</h2>
<p>导致该问题的原因，是因为不同格式的U盘对标签支持的长度不一样。很可能使用<code>fat32</code>或<code>exfat</code>格式，无法支持镜像里超长的标签。我们将U盘插在windows下，看到U盘的标签名为</p>
<blockquote>
<p><code>CentOS 7 x8</code></p>
</blockquote>
<p>而打开<code>/isolinux/syslinux.cfg</code>搜索“<code>LABEL=</code>”，看到的都是</p>
<blockquote>
<p><code>CentOS\x207\x20x86_64</code></p>
</blockquote>
<p>其中\x20代表空格，这两处不一致导致无法正确引导进入安装界面。而如果是DVD刻录的，可以看到光盘的标签就是“<code>CentOS 7 x86_64</code>”，而U盘则可能是被截短后的标签。</p>
<h2 id="解决办法">解决办法</h2>
<p>问题分析完了，解决办法有三种<br>
<strong>1.使用DVD刻录安装</strong><br>
这种做法什么都不需要修改，前提是你安装系统的设备有光驱</p>
<p><strong>2.修改修改syslinux.cfg</strong><br>
该配置文件在U盘里/isolinux/目录下，把&quot;hd:LABEL=CentOS\x207\x20x86_64&quot;这里修改为正确的U盘标签名。例如这里修改为:</p>
<blockquote>
<p>hd:LABEL=CentOS\x207\x20x8</p>
</blockquote>
<p>配置里有多处hd:LABEL=，我都进行了修改，保存后按照正常流程安装即可。这种改法有几个坑需要注意： - 空格问题，<code>\x20</code> 为空格 - 不修改<code>syslinux.cfg</code>里的配置，而是在windows下修改U盘标签<br>
这么做思路没问题，但是有个坑是windows如果修改了标签名，会自动转成大写，造成的结果和原先一样，依旧是两边不匹配。而且一旦修改了U盘标签，就改不回小写了，这时候最好的做法就是两边同时修改为CENTOS7这样全大写、没有空格这样简单的标签名。</p>
<p>这种做法一劳永逸，之后使用该U盘安装不必再做修改和配置注：U盘系统里，还有一个<code>/isolinux/isolinux.cfg</code>，这个在刻录前有用，刻录后修改也不生效。注意别修改错了。 2）大小写问题，在windows下如果修改lable后有可能会被强制转为大写（有时重启系统才能发现） 所以保险起见，将标签，和该cfg都修改为CENTOS7这样没有歧义的名称。</p>
<p><strong>3.在安装时修改</strong><br>
这么做的好处是不会修改原本U盘里的任何内容。在安装系统步骤走到安装选择菜单时，通过键盘上下键，选择 Install CentOS 7（但是不回车） ,然后修改 按 e 键（或者tab键，可以看提示，不同版本不一样），进入修改状态，将 <code>hd:LABEL=</code>后面的内容修改为U盘实际的标签名例如标签名是别截断后的CentOS 7 x8，那么这里修改为</p>
<blockquote>
<p>vmlinuz initrd=initrd.img inst.stage2=hd:LABEL=CentOS\x207\x20x86_64.check quiet为 vmlinuz initrd=initrd.img inst.stage2=hd:LABEL=CentOS\x207\x20x8 quiet</p>
</blockquote>
<p>最后，通过按e键进入修改的，按<code>Ctrl+x</code>开始安装。如果通过tab键进入修改的，直接回车开始安装。</p>
<h3 id="使用linux-刻录优盘">使用Linux 刻录优盘</h3>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">yum install -y createrepo mkisofs dosfstools syslinux  </span><br></pre></td></tr></table></figure>
<blockquote>
<p><a href="https://blog.csdn.net/tianlong1929/article/details/129210988">【Linux】Linux环境下制作ISO镜像与刻录U盘_mkisofs制作启动iso镜像_道非凡的博客-CSDN博客</a><br>
createrepo：用于对软件包生成分组索引信息（不重做镜像不需要）<br>
syslinux：使用该包中的isohybrid工具，将标准ISO文件转换成混合ISO，以便写入USB存储设备（不重做镜像不需要）<br>
mkisofs：制作镜像文件（不重做镜像不需要）<br>
dosfstools：主要利用该工具包中的<code>mkfs.vfat</code>对U盘进行格式化</p>
</blockquote>
<h5 id="格式化优盘">格式化优盘</h5>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">mkfs.vfat -I /dev/sde</span><br></pre></td></tr></table></figure>
<h5 id="写入镜像">写入镜像</h5>
<p>首先在Linux系统中打开终端，使用<code>dd</code>命令，格式如下：</p>
<blockquote>
<p>**注意：**使用<code>dd</code>命令刻录完成后使用<code>sync</code>进行同步一下，不然有的刻录虽然成功了，但是数据没有同步，也会导致安装失败</p>
</blockquote>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="built_in">dd</span> <span class="keyword">if</span>=CentOS-7-x86_64-Minimal-2003.iso of=/dev/sdb &amp;&amp;<span class="built_in">sync</span></span><br></pre></td></tr></table></figure>
<p>注意，此时是看不了进度的。可另开一个窗口，输入下面命令</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="built_in">kill</span> -USR1 `pidof <span class="built_in">dd</span>`</span><br></pre></td></tr></table></figure>
<p>此时原窗口就会显示：</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@host-10-11 ~]<span class="comment"># dd if=CentOS-7-x86_64-Minimal-2003.iso of=/dev/sdc</span></span><br><span class="line">2013593+0 records <span class="keyword">in</span></span><br><span class="line">2013593+0 records out</span><br><span class="line">1030959616 bytes (1.0 GB) copied, 247.525 s, 4.2 MB/s</span><br><span class="line">2119680+0 records <span class="keyword">in</span></span><br><span class="line">2119680+0 records out</span><br><span class="line">1085276160 bytes (1.1 GB) copied, 263.28 s, 4.1 MB/s</span><br></pre></td></tr></table></figure>
<p>制作完成后</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@host-10-11 ~]<span class="comment"># blkid</span></span><br><span class="line">/dev/sdc: UUID=<span class="string">&quot;2020-04-22-00-51-40-00&quot;</span> LABEL=<span class="string">&quot;CentOS 7 x86_64&quot;</span> TYPE=<span class="string">&quot;iso9660&quot;</span> PTTYPE=<span class="string">&quot;dos&quot;</span></span><br></pre></td></tr></table></figure>
<p>可以挂载</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@host-10-11 ~]<span class="comment"># mount /dev/sdc4 /media/</span></span><br><span class="line">[root@host-10-11 media]<span class="comment"># ll</span></span><br><span class="line">total 110</span><br><span class="line">-rw-rw-r-- 2 root root    14 Apr 21  2020 CentOS_BuildTag</span><br><span class="line">drwxr-xr-x 3 root root  2048 Apr 21  2020 EFI</span><br><span class="line">-rw-rw-r-- 3 root root   227 Aug 30  2017 EULA</span><br><span class="line">-rw-rw-r-- 3 root root 18009 Dec 10  2015 GPL</span><br><span class="line">drwxr-xr-x 3 root root  2048 Apr 21  2020 images</span><br><span class="line">drwxr-xr-x 2 root root  2048 Apr 21  2020 isolinux</span><br><span class="line">drwxr-xr-x 2 root root  2048 Apr 21  2020 LiveOS</span><br><span class="line">drwxr-xr-x 2 root root 73728 Apr 22  2020 Packages</span><br><span class="line">drwxrwxr-x 2 root root  4096 Apr 22  2020 repodata</span><br><span class="line">-rw-rw-r-- 3 root root  1690 Dec 10  2015 RPM-GPG-KEY-CentOS-7</span><br><span class="line">-rw-rw-r-- 3 root root  1690 Dec 10  2015 RPM-GPG-KEY-CentOS-Testing-7</span><br><span class="line">-r--r--r-- 1 root root  2883 Apr 22  2020 TRANS.TBL</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>系统</category>
      </categories>
      <tags>
        <tag>系统</tag>
      </tags>
  </entry>
  <entry>
    <title>DockerFile及常用操作</title>
    <url>/2020/08/DockerFile%E5%8F%8A%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C/index.html</url>
    <content><![CDATA[<h2 id="dockerfile及常用操作">DockerFile及常用操作</h2>
<h3 id="一般性的指南和建议">一般性的指南和建议</h3>
<h6 id="容器应该是短暂的">容器应该是短暂的</h6>
<p>通过 Dockerfile 构建的镜像所启动的容器应该尽可能短暂（生命周期短）。「短暂」意味着可以停止和销毁容器，并且创建一个新容器并部署好所需的设置和配置工作量应该是极小的。</p>
<h6 id="使用-dockerignore 文件">使用 .dockerignore 文件</h6>
<p>使用 Dockerfile 构建镜像时最好是将 Dockerfile 放置在一个新建的空目录下。然后将构建镜像所需要的文件添加到该目录中。为了提高构建镜像的效率，你可以在目录下新建一个 .dockerignore 文件来指定要忽略的文件和目录。.dockerignore 文件的排除模式语法和 Git 的 .gitignore 文件相似。</p>
<h6 id="使用多阶段构建">使用多阶段构建</h6>
<p>在 Docker 17.05 以上版本中，你可以使用 多阶段构建 来减少所构建镜像的大小。 避免安装不必要的包</p>
<h6 id="避免安装不必要的包">避免安装不必要的包</h6>
<p>为了降低复杂性、减少依赖、减小文件大小、节约构建时间，你应该避免安装任何不必要的包。例如，不要在数据库镜像中包含一个文本编辑器</p>
<h6 id="一个容器只运行一个进程">一个容器只运行一个进程</h6>
<p>应该保证在一个容器中只运行一个进程。将多个应用解耦到不同容器中，保证了容器的横向扩展和复用。例如 web 应用应该包含三个容器：web应用、数据库、缓存。如果容器互相依赖，你可以使用 Docker 自定义网络 来把这些容器连接起来。</p>
<h6 id="镜像层数尽可能少">镜像层数尽可能少</h6>
<p>你需要在 Dockerfile 可读性（也包括长期的可维护性）和减少层数之间做一个平衡。</p>
<h6 id="将多行参数排序">将多行参数排序</h6>
<p>将多行参数按字母顺序排序（比如要安装多个包时）。这可以帮助你避免重复包含同一个包，更新包列表时也更容易。也便于 PRs 阅读和审查。建议在反斜杠符号 \ 之前添加一个空格，以增加可读性。<br>
下面是来自 buildpack-deps 镜像的例子：</p>
<figure class="highlight dockerfile"><table><tr><td class="code"><pre><span class="line"><span class="keyword">RUN</span><span class="language-bash"> apt-get update &amp;&amp; apt-get install -y \</span></span><br><span class="line"><span class="language-bash">bzr \</span></span><br><span class="line"><span class="language-bash">cvs \</span></span><br><span class="line"><span class="language-bash">git \</span></span><br><span class="line"><span class="language-bash">mercurial \</span></span><br><span class="line"><span class="language-bash">subversion</span></span><br></pre></td></tr></table></figure>
<h6 id="构建缓存">构建缓存</h6>
<p>在镜像的构建过程中，Docker 会遍历 Dockerfile 文件中的指令，然后按顺序执行。在执行每条指令之前，Docker 都会在缓存中查找是否已经存在可重用的镜像，如果有就使用现存的镜像，不再重复创建。如果你不想在构建过程中使用缓存，你可以在 docker build 命令中使用 <code>--no-cache=true</code> 选项。</p>
<p>但是，如果你想在构建的过程中使用缓存，你得明白什么时候会，什么时候不会找到匹配的镜像，遵循的基本规则如下：<br>
从一个基础镜像开始（<code>FROM</code> 指令指定），下一条指令将和该基础镜像的所有子镜像进行匹配，检查这些子镜像被创建时使用的指令是否和被检查的指令完全一样。如果不是，则缓存失效。</p>
<p>在大多数情况下，只需要简单地对比 Dockerfile 中的指令和子镜像。然而，有些指令需要更多的检查和解释。<br>
对于 <code>ADD</code> 和 <code>COPY</code> 指令，镜像中对应文件的内容也会被检查，每个文件都会计算出一个校验和。文件的最后修改时间和最后访问时间不会纳入校验。在缓存的查找过程中，会将这些校验和和已存在镜像中的文件校验和进行对比。如果文件有任何改变，比如内容和元数据，则缓存失效。</p>
<p>除了 <code>ADD</code> 和 <code>COPY</code> 指令，缓存匹配过程不会查看临时容器中的文件来决定缓存是否匹配。例如，当执行完 <code>RUN apt-get -y update</code> 指令后，容器中一些文件被更新，但 Docker 不会检查这些文件。这种情况下，只有指令字符串本身被用来匹配缓存。<br>
一旦缓存失效，所有后续的 Dockerfile 指令都将产生新的镜像，缓存不会被使用。</p>
<h3 id="dockerfile-指令">Dockerfile 指令</h3>
<h6 id="下面针对-dockerfile 中各种指令的最佳编写方式给出建议。">下面针对 Dockerfile 中各种指令的最佳编写方式给出建议。</h6>
<blockquote>
<p><code>FROM</code></p>
</blockquote>
<p>尽可能使用当前官方仓库作为你构建镜像的基础。推荐使用 Alpine 镜像，因为它被严格控制并保持最小尺寸（目前小于 5 MB），但它仍然是一个完整的发行版。</p>
<blockquote>
<p><code>LABEL</code></p>
</blockquote>
<p>你可以给镜像添加标签来帮助组织镜像、记录许可信息、辅助自动化构建等。每个标签一行，由 LABEL 开头加上一个或多个标签对。下面的示例展示了各种不同的可能格式。# 开头的行是注释内容。<br>
注意：如果你的字符串中包含空格，必须将字符串放入引号中或者对空格使用转义。如果字符串内容本身就包含引号，必须对引号使用转义。<br>
关于标签可以接受的键值对，参考 Understanding object labels。关于查询标签信息，参考 Managing labels on objects。</p>
<figure class="highlight dockerfile"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Set one or more individual labels</span></span><br><span class="line"><span class="keyword">LABEL</span><span class="language-bash"> com.example.version=<span class="string">&quot;0.0.1-beta&quot;</span></span></span><br><span class="line"><span class="keyword">LABEL</span><span class="language-bash"> vendor=<span class="string">&quot;ACME Incorporated&quot;</span></span></span><br><span class="line"><span class="keyword">LABEL</span><span class="language-bash"> com.example.release-date=<span class="string">&quot;2015-02-12&quot;</span></span></span><br><span class="line"><span class="keyword">LABEL</span><span class="language-bash"> com.example.version.is-production=<span class="string">&quot;&quot;</span></span></span><br></pre></td></tr></table></figure>
<p>一个镜像可以包含多个标签，但建议将多个标签放入到一个 LABEL 指令中。</p>
<figure class="highlight dockerfile"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Set multiple labels at once, using line-continuation characters to break long lines</span></span><br><span class="line"><span class="keyword">LABEL</span><span class="language-bash"> vendor=ACME\ Incorporated \</span></span><br><span class="line"><span class="language-bash">com.example.is-beta= \</span></span><br><span class="line"><span class="language-bash">com.example.is-production=<span class="string">&quot;&quot;</span> \</span></span><br><span class="line"><span class="language-bash">com.example.version=<span class="string">&quot;0.0.1-beta&quot;</span> \</span></span><br><span class="line"><span class="language-bash">com.example.release-date=<span class="string">&quot;2015-02-12&quot;</span></span></span><br></pre></td></tr></table></figure>
<blockquote>
<p><code>RUN</code></p>
</blockquote>
<p>为了保持 Dockerfile 文件的可读性，可理解性，以及可维护性，建议将长的或复杂的 RUN 指令用反斜杠 \ 分割成多行。<br>
RUN 指令最常见的用法是安装包用的<code> apt-get</code>。因为 <code>RUN apt-get</code> 指令会安装包，所以有几个问题需要注意。<br>
不要使用 <code>RUN apt-get upgrade</code> 或 <code>dist-upgrade</code>，因为许多基础镜像中的「必须」包不会在一个非特权容器中升级。如果基础镜像中的某个包过时了，你应该联系它的维护者。如果你确定某个特定的包，比如 foo，需要升级，使用 <code>apt-get install -y foo</code> 就行，该指令会自动升级 foo 包。</p>
<p>永远将 RUN apt-get update 和 apt-get install 组合成一条 RUN 声明，例如：</p>
<figure class="highlight dockerfile"><table><tr><td class="code"><pre><span class="line"><span class="keyword">RUN</span><span class="language-bash"> apt-get update &amp;&amp; apt-get install -y \</span></span><br><span class="line"><span class="language-bash">package-bar \</span></span><br><span class="line"><span class="language-bash">package-baz \</span></span><br><span class="line"><span class="language-bash">package-foo</span></span><br></pre></td></tr></table></figure>
<p>将 <code>apt-get update</code> 放在一条单独的 RUN 声明中会导致缓存问题以及后续的<code>apt-get install</code>失败。比如，假设你有一个 Dockerfile 文件：</p>
<figure class="highlight dockerfile"><table><tr><td class="code"><pre><span class="line"><span class="keyword">FROM</span> ubuntu:<span class="number">14.04</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> apt-get update</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> apt-get install -y curl</span></span><br></pre></td></tr></table></figure>
<p>构建镜像后，所有的层都在 Docker 的缓存中。假设你后来又修改了其中的 <code>apt-get install</code> 添加了一个包：</p>
<figure class="highlight dockerfile"><table><tr><td class="code"><pre><span class="line"><span class="keyword">FROM</span> ubuntu:<span class="number">14.04</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> apt-get update</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> apt-get install -y curl nginx</span></span><br></pre></td></tr></table></figure>
<p>Docker 发现修改后的 RUN apt-get update 指令和之前的完全一样。所以，apt-get update 不会执行，而是使用之前的缓存镜像。因为 apt-get update 没有运行，后面的 apt-get install 可能安装的是过时的 curl 和 nginx 版本。</p>
<p>使用 RUN apt-get update &amp;&amp; apt-get install -y 可以确保你的 Dockerfiles 每次安装的都是包的最新的版本，而且这个过程不需要进一步的编码或额外干预。这项技术叫作 cache busting。你也可以显示指定一个包的版本号来达到 cache-busting，这就是所谓的固定版本，例如：</p>
<figure class="highlight dockerfile"><table><tr><td class="code"><pre><span class="line"><span class="keyword">RUN</span><span class="language-bash"> apt-get update &amp;&amp; apt-get install -y \</span></span><br><span class="line"><span class="language-bash">    package-bar \</span></span><br><span class="line"><span class="language-bash">    package-baz \</span></span><br><span class="line"><span class="language-bash">    package-foo=1.3.*</span></span><br></pre></td></tr></table></figure>
<p>固定版本会迫使构建过程检索特定的版本，而不管缓存中有什么。这项技术也可以减少因所需包中未预料到的变化而导致的失败。下面是一个 RUN 指令的示例模板，展示了所有关于 apt-get 的建议。</p>
<figure class="highlight dockerfile"><table><tr><td class="code"><pre><span class="line"><span class="keyword">RUN</span><span class="language-bash"> apt-get update &amp;&amp; apt-get install -y \</span></span><br><span class="line"><span class="language-bash">    aufs-tools \</span></span><br><span class="line"><span class="language-bash">    automake \</span></span><br><span class="line"><span class="language-bash">    build-essential \</span></span><br><span class="line"><span class="language-bash">    curl \</span></span><br><span class="line"><span class="language-bash">    dpkg-sig \</span></span><br><span class="line"><span class="language-bash">    libcap-dev \</span></span><br><span class="line"><span class="language-bash">    libsqlite3-dev \</span></span><br><span class="line"><span class="language-bash">    mercurial \</span></span><br><span class="line"><span class="language-bash">    reprepro \</span></span><br><span class="line"><span class="language-bash">    ruby1.9.1 \</span></span><br><span class="line"><span class="language-bash">    ruby1.9.1-dev \</span></span><br><span class="line"><span class="language-bash">    s3cmd=1.1.* \</span></span><br><span class="line"><span class="language-bash"> &amp;&amp; <span class="built_in">rm</span> -rf /var/lib/apt/lists/*</span></span><br></pre></td></tr></table></figure>
<p>其中 s3cmd 指令指定了一个版本号 1.1.*。如果之前的镜像使用的是更旧的版本，指定新的版本会导致 apt-get udpate 缓存失效并确保安装的是新版本。<br>
另外，清理掉 apt 缓存 var/lib/apt/lists 可以减小镜像大小。因为 RUN 指令的开头为 apt-get udpate，包缓存总是会在 apt-get install 之前刷新。<br>
注意：官方的 Debian 和 Ubuntu 镜像会自动运行 apt-get clean，所以不需要显式的调用 apt-get clean。</p>
<blockquote>
<p>CMD</p>
</blockquote>
<p>CMD 指令用于执行目标镜像中包含的软件，可以包含参数。CMD 大多数情况下都应该以 <code>CMD [&quot;executable&quot;, &quot;param1&quot;, &quot;param2&quot;...]</code> 的形式使用。因此，如果创建镜像的目的是为了部署某个服务(比如 Apache)，你可能会执行类似于 <code>CMD [&quot;apache2&quot;, &quot;-DFOREGROUND&quot;]</code> 形式的命令。我们建议任何服务镜像都使用这种形式的命令。<br>
多数情况下，CMD 都需要一个交互式的 shell (bash, Python, perl 等)，例如 <code>CMD [&quot;perl&quot;, &quot;-de0&quot;]，或者 CMD [&quot;PHP&quot;, &quot;-a&quot;]</code>。使用这种形式意味着，当你执行类似 docker run -it python 时，你会进入一个准备好的 shell 中。CMD 应该在极少的情况下才能以 <code>CMD [&quot;param&quot;, &quot;param&quot;]</code> 的形式与 <code>ENTRYPOINT</code> 协同使用，除非你和你的镜像使用者都对 <code>ENTRYPOINT</code> 的工作方式十分熟悉。</p>
<blockquote>
<p>EXPOSE</p>
</blockquote>
<figure class="highlight dockerfile"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">EXPOSE</span> 指令用于指定容器将要监听的端口。因此，你应该为你的应用程序使用常见的端口。例如，提供 Apache web 服务的镜像应该使用 <span class="keyword">EXPOSE</span> <span class="number">80</span>，而提供 MongoDB 服务的镜像使用 <span class="keyword">EXPOSE</span> <span class="number">27017</span>。</span><br><span class="line">对于外部访问，用户可以在执行 docker <span class="keyword">run</span><span class="language-bash"> 时使用一个标志来指示如何将指定的端口映射到所选择的端口。</span></span><br><span class="line"><span class="keyword">ENV</span></span><br><span class="line">为了方便新程序运行，你可以使用 <span class="keyword">ENV</span> 来为容器中安装的程序更新 PATH 环境变量。例如使用 <span class="keyword">ENV</span> PATH /usr/local/nginx/bin:$PATH 来确保 <span class="keyword">CMD</span><span class="language-bash"> [<span class="string">&quot;nginx&quot;</span>] 能正确运行。</span></span><br><span class="line"><span class="keyword">ENV</span> 指令也可用于为你想要容器化的服务提供必要的环境变量，比如 Postgres 需要的 PGDATA。</span><br><span class="line">最后，<span class="keyword">ENV</span> 也能用于设置常见的版本号，比如下面的示例：</span><br><span class="line"><span class="keyword">ENV</span> PG_MAJOR <span class="number">9.3</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">ENV</span> PG_VERSION <span class="number">9.3</span>.<span class="number">4</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> curl -SL http://example.com/postgres-<span class="variable">$PG_VERSION</span>.tar.xz | tar -xJC /usr/src/postgress &amp;&amp; …</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">ENV</span> PATH /usr/local/postgres-$PG_MAJOR/bin:$PATH</span><br><span class="line">类似于程序中的常量，这种方法可以让你只需改变 <span class="keyword">ENV</span> 指令来自动的改变容器中的软件版本。</span><br><span class="line">两种写法：</span><br><span class="line"><span class="keyword">ENV</span> nane=bijianyong xu=hahuaxuanyan age=<span class="number">123</span></span><br><span class="line">注意，写一行对PATH变量不生效（同时执行时$NGINX_HOME为空，所以导致变量无效）</span><br><span class="line"><span class="keyword">ENV</span> NGINX_HOME /usr/local/nginx</span><br><span class="line"><span class="keyword">ENV</span> PATH $NGINX_HOME/sbin:$PATH</span><br><span class="line"></span><br><span class="line"><span class="keyword">ADD</span><span class="language-bash"> 和 COPY</span></span><br><span class="line">虽然 <span class="keyword">ADD</span><span class="language-bash"> 和 COPY 功能类似，但一般优先使用 COPY。因为它比 ADD 更透明。COPY 只支持简单将本地文件拷贝到容器中，而 ADD 有一些并不明显的功能（比如本地 tar 提取和远程 URL 支持）。因此，ADD 的最佳用例是将本地 tar 文件自动提取到镜像中，例如 ADD rootfs.tar.xz。</span></span><br><span class="line">如果你的 Dockerfile 有多个步骤需要使用上下文中不同的文件。单独 <span class="keyword">COPY</span><span class="language-bash"> 每个文件，而不是一次性的 COPY 所有文件，这将保证每个步骤的构建缓存只在特定的文件变化时失效。例如：</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> requirements.txt /tmp/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> pip install --requirement /tmp/requirements.txt</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> . /tmp/</span></span><br><span class="line">如果将 <span class="keyword">COPY</span><span class="language-bash"> . /tmp/ 放置在 RUN 指令之前，只要 . 目录中任何一个文件变化，都会导致后续指令的缓存失效。</span></span><br><span class="line">为了让镜像尽量小，最好不要使用 <span class="keyword">ADD</span><span class="language-bash"> 指令从远程 URL 获取包，而是使用 curl 和 wget。这样你可以在文件提取完之后删掉不再需要的文件来避免在镜像中额外添加一层。比如尽量避免下面的用法：</span></span><br><span class="line"><span class="keyword">ADD</span><span class="language-bash"> http://example.com/big.tar.xz /usr/src/things/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> tar -xJf /usr/src/things/big.tar.xz -C /usr/src/things</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> make -C /usr/src/things all</span></span><br><span class="line">而是应该使用下面这种方法：</span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> <span class="built_in">mkdir</span> -p /usr/src/things \</span></span><br><span class="line"><span class="language-bash">    &amp;&amp; curl -SL http://example.com/big.tar.xz \</span></span><br><span class="line"><span class="language-bash">    | tar -xJC /usr/src/things \</span></span><br><span class="line"><span class="language-bash">    &amp;&amp; make -C /usr/src/things all</span></span><br><span class="line">上面使用的管道操作，所以没有中间文件需要删除。</span><br><span class="line">对于其他不需要 <span class="keyword">ADD</span><span class="language-bash"> 的自动提取功能的文件或目录，你应该使用 COPY。</span></span><br><span class="line"><span class="keyword">ENTRYPOINT</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash">ENTRYPOINT 的最佳用处是设置镜像的主命令，允许将镜像当成命令本身来运行（用 CMD 提供默认选项）。</span></span><br><span class="line">例如，下面的示例镜像提供了命令行工具 s3cmd:</span><br><span class="line"><span class="keyword">ENTRYPOINT</span><span class="language-bash"> [<span class="string">&quot;s3cmd&quot;</span>]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">CMD</span><span class="language-bash"> [<span class="string">&quot;--help&quot;</span>]</span></span><br><span class="line">现在直接运行该镜像创建的容器会显示命令帮助：</span><br><span class="line">$ docker <span class="keyword">run</span><span class="language-bash"> s3cmd</span></span><br><span class="line">或者提供正确的参数来执行某个命令：</span><br><span class="line">$ docker <span class="keyword">run</span><span class="language-bash"> s3cmd <span class="built_in">ls</span> s3://mybucket</span></span><br><span class="line">这样镜像名可以当成命令行的参考。</span><br><span class="line"><span class="keyword">ENTRYPOINT</span><span class="language-bash"> 指令也可以结合一个辅助脚本使用，和前面命令行风格类似，即使启动工具需要不止一个步骤。</span></span><br><span class="line">例如，Postgres 官方镜像使用下面的脚本作为 <span class="keyword">ENTRYPOINT</span><span class="language-bash">：</span></span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line">set -e</span><br><span class="line">if [ <span class="string">&quot;$1&quot;</span> = <span class="string">&#x27;postgres&#x27;</span> ]; then</span><br><span class="line">    chown -R postgres <span class="string">&quot;$PGDATA&quot;</span></span><br><span class="line">    if [ -z <span class="string">&quot;$(ls -A &quot;</span>$PGDATA<span class="string">&quot;)&quot;</span> ]; then</span><br><span class="line">        gosu postgres initdb</span><br><span class="line">    fi</span><br><span class="line">    exec gosu postgres <span class="string">&quot;$@&quot;</span></span><br><span class="line">fi</span><br><span class="line">exec <span class="string">&quot;$@&quot;</span></span><br><span class="line">注意：该脚本使用了 Bash 的内置命令 exec，所以最后运行的进程就是容器的 PID 为 <span class="number">1</span> 的进程。这样，进程就可以接收到任何发送给容器的 Unix 信号了。</span><br><span class="line">该辅助脚本被拷贝到容器，并在容器启动时通过 <span class="keyword">ENTRYPOINT</span><span class="language-bash"> 执行：</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> ./docker-entrypoint.sh /</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">ENTRYPOINT</span><span class="language-bash"> [<span class="string">&quot;/docker-entrypoint.sh&quot;</span>]</span></span><br><span class="line"><span class="keyword">CMD</span><span class="language-bash"> [<span class="string">&quot;mysqld&quot;</span>]</span></span><br><span class="line">该脚本可以让用户用几种不同的方式和 Postgres 交互。</span><br><span class="line">你可以很简单地启动 Postgres：</span><br><span class="line">$ docker <span class="keyword">run</span><span class="language-bash"> postgres</span></span><br><span class="line">也可以执行 Postgres 并传递参数：</span><br><span class="line">$ docker <span class="keyword">run</span><span class="language-bash"> postgres postgres --<span class="built_in">help</span></span></span><br><span class="line">最后，你还可以启动另外一个完全不同的工具，比如 Bash：</span><br><span class="line">$ docker <span class="keyword">run</span><span class="language-bash"> --<span class="built_in">rm</span> -it postgres bash</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">VOLUME</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash">VOLUME 指令用于暴露任何数据库存储文件，配置文件，或容器创建的文件和目录。强烈建议使用 VOLUME 来管理镜像中的可变部分和用户可以改变的部分。</span></span><br><span class="line"><span class="keyword">USER</span></span><br><span class="line">如果某个服务不需要特权执行，建议使用 <span class="keyword">USER</span> 指令切换到非 root 用户。先在 Dockerfile 中使用类似 <span class="keyword">RUN</span><span class="language-bash"> groupadd -r postgres &amp;&amp; useradd -r -g postgres postgres 的指令创建用户和用户组。</span></span><br><span class="line">注意：在镜像中，用户和用户组每次被分配的 UID/GID 都是不确定的，下次重新构建镜像时被分配到的 UID/GID 可能会不一样。如果要依赖确定的 UID/GID，你应该显示的指定一个 UID/GID。</span><br><span class="line">你应该避免使用 sudo，因为它不可预期的 TTY 和信号转发行为可能造成的问题比它能解决的问题还多。如果你真的需要和 sudo 类似的功能（例如，以 root 权限初始化某个守护进程，以非 root 权限执行它），你可以使用 gosu。</span><br><span class="line">最后，为了减少层数和复杂度，避免频繁地使用 <span class="keyword">USER</span> 来回切换用户。</span><br><span class="line"><span class="keyword">WORKDIR</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash">为了清晰性和可靠性，你应该总是在 WORKDIR 中使用绝对路径。另外，你应该使用 WORKDIR 来替代类似于 RUN <span class="built_in">cd</span> ... &amp;&amp; do-something 的指令，后者难以阅读、排错和维护。</span></span><br><span class="line">官方仓库示例</span><br><span class="line">这些官方仓库的 Dockerfile 都是参考典范：https://github.com/docker-library/docs</span><br><span class="line"></span><br><span class="line"><span class="keyword">HEALTHCHECK</span><span class="language-bash"> </span></span><br><span class="line"><span class="keyword">HEALTHCHECK</span><span class="language-bash"> [选项] CMD &lt;命令&gt;：设置检查容器健康状况的命令</span></span><br><span class="line"><span class="keyword">HEALTHCHECK</span><span class="language-bash"> NONE：如果基础镜像有健康检查指令，使用这行可以屏蔽掉其健康检查指令</span></span><br><span class="line"><span class="keyword">HEALTHCHECK</span><span class="language-bash"> 指令是告诉 Docker 应该如何进行判断容器的状态是否正常，这是 Docker 1.12 引入的新指令。</span></span><br><span class="line">在没有 <span class="keyword">HEALTHCHECK</span><span class="language-bash"> 指令前，Docker 引擎只可以通过容器内主进程是否退出来判断容器是否状态异常。很多情况下这没问题，但是如果程序进入死锁状态，或者死循环状态，应用进程并不退出，但是该容器已经无法提供服务了。在 1.12 以前，Docker 不会检测到容器的这种状态，从而不会重新调度，导致可能会有部分容器已经无法提供服务了却还在接受用户请求。</span></span><br><span class="line">而自 <span class="number">1.12</span> 之后，Docker 提供了 <span class="keyword">HEALTHCHECK</span><span class="language-bash"> 指令，通过该指令指定一行命令，用这行命令来判断容器主进程的服务状态是否还正常，从而比较真实的反应容器实际状态。</span></span><br><span class="line">当在一个镜像指定了 <span class="keyword">HEALTHCHECK</span><span class="language-bash"> 指令后，用其启动容器，初始状态会为 starting，在 HEALTHCHECK 指令检查成功后变为 healthy，如果连续一定次数失败，则会变为 unhealthy。</span></span><br><span class="line"><span class="keyword">HEALTHCHECK</span><span class="language-bash"> 支持下列选项：</span></span><br><span class="line">--interval=&lt;间隔&gt;：两次健康检查的间隔，默认为 <span class="number">30</span> 秒；</span><br><span class="line">--timeout=&lt;时长&gt;：健康检查命令运行超时时间，如果超过这个时间，本次健康检查就被视为失败，默认 <span class="number">30</span> 秒；</span><br><span class="line">--retries=&lt;次数&gt;：当连续失败指定次数后，则将容器状态视为 unhealthy，默认 <span class="number">3</span> 次。</span><br><span class="line">和 <span class="keyword">CMD</span><span class="language-bash">, ENTRYPOINT 一样，HEALTHCHECK 只可以出现一次，如果写了多个，只有最后一个生效。</span></span><br><span class="line">在 <span class="keyword">HEALTHCHECK</span><span class="language-bash"> [选项] CMD 后面的命令，格式和 ENTRYPOINT 一样，分为 shell 格式，和 <span class="built_in">exec</span> 格式。命令的返回值决定了该次健康检查的成功与否：0：成功；1：失败；2：保留，不要使用这个值。</span></span><br><span class="line">假设我们有个镜像是个最简单的 Web 服务，我们希望增加健康检查来判断其 Web 服务是否在正常工作，我们可以用 curl 来帮助判断，其 Dockerfile 的 <span class="keyword">HEALTHCHECK</span><span class="language-bash"> 可以这么写：</span></span><br><span class="line"><span class="keyword">FROM</span> nginx</span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> apt-get update &amp;&amp; apt-get install -y curl &amp;&amp; <span class="built_in">rm</span> -rf /var/lib/apt/lists/*</span></span><br><span class="line"><span class="keyword">HEALTHCHECK</span><span class="language-bash"> --interval=5s --<span class="built_in">timeout</span>=3s \</span></span><br><span class="line"><span class="language-bash">  CMD curl -fs http://localhost/ || <span class="built_in">exit</span> 1</span></span><br><span class="line">这里我们设置了每 <span class="number">5</span> 秒检查一次（这里为了试验所以间隔非常短，实际应该相对较长），如果健康检查命令超过 <span class="number">3</span> 秒没响应就视为失败，并且使用 curl -fs http://localhost/ || exit <span class="number">1</span> 作为健康检查命令。</span><br><span class="line">使用 docker build 来构建这个镜像：</span><br><span class="line">$ docker build -t myweb:v1 .</span><br><span class="line">构建好了后，我们启动一个容器：</span><br><span class="line">$ docker <span class="keyword">run</span><span class="language-bash"> -d --name web -p 80:80 myweb:v1</span></span><br><span class="line">当运行该镜像后，可以通过 docker container ls 看到最初的状态为 (health: starting)：</span><br><span class="line">$ docker container ls</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS                            PORTS               NAMES</span><br><span class="line"><span class="number">03</span>e28eb00bd0        myweb:v1            <span class="string">&quot;nginx -g &#x27;daemon off&quot;</span>   <span class="number">3</span> seconds ago       Up <span class="number">2</span> seconds (health: starting)   <span class="number">80</span>/tcp, <span class="number">443</span>/tcp     web</span><br><span class="line">在等待几秒钟后，再次 docker container ls，就会看到健康状态变化为了 (healthy)：</span><br><span class="line">$ docker container ls</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS                    PORTS               NAMES</span><br><span class="line"><span class="number">03</span>e28eb00bd0        myweb:v1            <span class="string">&quot;nginx -g &#x27;daemon off&quot;</span>   <span class="number">18</span> seconds ago      Up <span class="number">16</span> seconds (healthy)   <span class="number">80</span>/tcp, <span class="number">443</span>/tcp     web</span><br><span class="line">如果健康检查连续失败超过了重试次数，状态就会变为 (unhealthy)。</span><br><span class="line">为了帮助排障，健康检查命令的输出（包括 stdout 以及 stderr）都会被存储于健康状态里，可以用 docker inspect 来查看。</span><br><span class="line">$ docker inspect --format <span class="string">&#x27;&#123;&#123;json .State.Health&#125;&#125;&#x27;</span> web | python -m json.tool</span><br><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;FailingStreak&quot;</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="string">&quot;Log&quot;</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">&quot;End&quot;</span>: <span class="string">&quot;2016-11-25T14:35:37.940957051Z&quot;</span>,</span><br><span class="line">            <span class="string">&quot;ExitCode&quot;</span>: <span class="number">0</span>,</span><br><span class="line">            <span class="string">&quot;Output&quot;</span>: <span class="string">&quot;&lt;!DOCTYPE h。。。。。。。,</span></span><br><span class="line"><span class="string">            &quot;</span>Start<span class="string">&quot;: &quot;</span><span class="number">2016</span>-<span class="number">11</span>-<span class="number">25</span>T14:<span class="number">35</span>:<span class="number">37.780192565</span>Z<span class="string">&quot;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">    ],</span></span><br><span class="line"><span class="string">    &quot;</span>Status<span class="string">&quot;: &quot;</span>healthy<span class="string">&quot;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">ARG</span></span><br><span class="line"><span class="string">ARG 可以在构建镜像的时候传递参数</span></span><br><span class="line"><span class="string">FROM hub.c.163.com/library/centos:7.4.1708</span></span><br><span class="line"><span class="string">MAINTAINER bijianyong &lt;bijianyong@126.com&gt;</span></span><br><span class="line"><span class="string">ARG version_tag</span></span><br><span class="line"><span class="string">LABEL version=$&#123;version_tag:-0.0.1&#125; author=&quot;</span>bijianyong &lt;bijianyong@<span class="number">126</span>.com&gt;<span class="string">&quot;</span></span><br><span class="line"><span class="string">WORKDIR /root</span></span><br><span class="line"><span class="string">RUN echo $&#123;version_tag:-0.0.1&#125; &gt; ./version</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">此时创建镜像version_tag会被替换成19.12.19</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">docker build --build-arg version_tag=&quot;</span><span class="number">19.12</span>.<span class="number">19</span><span class="string">&quot; -t test: 19.12.19 .  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">获取镜像或容器元数据</span></span><br><span class="line"><span class="string">docker inspect -f &quot;</span>&#123;&#123;json .Config.Labels &#125;&#125;<span class="string">&quot; $IMAGE | python -m json.tool</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">docker-compose</span></span><br><span class="line"><span class="string">version: &#x27;3&#x27;</span></span><br><span class="line"><span class="string">  services:</span></span><br><span class="line"><span class="string">    web:</span></span><br><span class="line"><span class="string">      image: $&#123;IMAGETAG&#125;</span></span><br><span class="line"><span class="string">      ports:</span></span><br><span class="line"><span class="string">       - &quot;</span><span class="number">5000</span>:<span class="number">5000</span><span class="string">&quot;</span></span><br><span class="line"><span class="string">    redis:</span></span><br><span class="line"><span class="string">      image: &quot;</span>redis:alpine<span class="string">&quot;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">使用文件为容器设置多个环境变量</span></span><br><span class="line"><span class="string">如果觉得通过 environment 为容器设置环境变量不够过瘾，我们还可以像 docker -run 的 --env-file 参数一样通过文件为容器设置环境变量：</span></span><br><span class="line"><span class="string">web:</span></span><br><span class="line"><span class="string">  env_file:</span></span><br><span class="line"><span class="string">- web-variables.env</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">注意，web-variables.env 文件的路径是相对于 docker-compose.yml 文件的相对路径。上面的代码效果与下面的代码相同：</span></span><br><span class="line"><span class="string">$ docker run --env-file=web-variables.env</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">web-variables.env 文件中可以定义一个或多个环境变量：</span></span><br><span class="line"><span class="string"># define web container env</span></span><br><span class="line"><span class="string">APPNAME=helloworld</span></span><br><span class="line"><span class="string">AUTHOR=Nick Li</span></span><br><span class="line"><span class="string">VERSION=1.0</span></span><br><span class="line"><span class="string">检查下结果：</span></span><br><span class="line"><span class="string">compose 把 env_file 的设置翻译成了 environment！</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">.env 文件</span></span><br><span class="line"><span class="string">当我们在 docker-compose.yml 文件中引用了大量的环境变量时，对每个环境变量都设置默认值将是繁琐的，并且也会影响 docker-compose.yml 简洁程度。此时我们可以通过 .env 文件来为 docker-compose.yml 文件引用的所有环境变量设置默认值！</span></span><br><span class="line"><span class="string">修改 docker-compose.yml 文件的内容如下：</span></span><br><span class="line"><span class="string">version: &#x27;3&#x27;</span></span><br><span class="line"><span class="string">services:</span></span><br><span class="line"><span class="string">  web:</span></span><br><span class="line"><span class="string">    image: $&#123;IMAGETAG&#125;                 </span></span><br><span class="line"><span class="string">    environment:</span></span><br><span class="line"><span class="string">      APPNAME: $&#123;APPNAME&#125;</span></span><br><span class="line"><span class="string">      AUTHOR:$&#123;AUTHOR&#125;</span></span><br><span class="line"><span class="string">      VERSION:$&#123;VERSION&#125;</span></span><br><span class="line"><span class="string">    ports:</span></span><br><span class="line"><span class="string">     - &quot;</span><span class="number">5000</span>:<span class="number">5000</span><span class="string">&quot;</span></span><br><span class="line"><span class="string">  redis:</span></span><br><span class="line"><span class="string">    image: &quot;</span>redis:alpine<span class="string">&quot;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">然后在相同的目录下创建 .env 文件，编辑其内容如下：</span></span><br><span class="line"><span class="string"># define env var default value.</span></span><br><span class="line"><span class="string">IMAGETAG=defaultwebimage</span></span><br><span class="line"><span class="string">APPNAME=default app name</span></span><br><span class="line"><span class="string">AUTHOR=default author name</span></span><br><span class="line"><span class="string">VERSION=default version is 1.0</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">docker-compose config 命令检查下结果，此时所有的环境变量都显示为 .env 文件中定义的默认值：</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Docker容器的重启策略是面向生产环境的一个启动策略，在开发过程中可以忽略该策略。</span></span><br><span class="line"><span class="string">Docker容器的重启都是由Docker守护进程完成的，因此与守护进程息息相关。</span></span><br><span class="line"><span class="string">Docker容器的重启策略如下：</span></span><br><span class="line"><span class="string">•	no，默认策略，在容器退出时不重启容器</span></span><br><span class="line"><span class="string">•	on-failure，在容器非正常退出时（退出状态非0），才会重启容器</span></span><br><span class="line"><span class="string">o	on-failure:3，在容器非正常退出时重启容器，最多重启3次</span></span><br><span class="line"><span class="string">•	always，在容器退出时总是重启容器</span></span><br><span class="line"><span class="string">•	unless-stopped，在容器退出时总是重启容器，但是不考虑在Docker守护进程启动时就已经停止了的容器</span></span><br><span class="line"><span class="string">docker run --restart=always nginx</span></span><br><span class="line"><span class="string">docker run --restart=on-failure nginx</span></span><br><span class="line"><span class="string">docker run --restart=on-failure:10 nginx</span></span><br><span class="line"><span class="string">在线更新重启策略</span></span><br><span class="line"><span class="string">docker update --restart=always container</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># 查看当前策略</span></span><br><span class="line"><span class="string">docker inspect -f &quot;</span>&#123;&#123; .HostConfig.RestartPolicy.Name &#125;&#125;<span class="string">&quot; container</span></span><br><span class="line"><span class="string">查看容器重启次数</span></span><br><span class="line"><span class="string">docker inspect -f &quot;</span>&#123;&#123; .RestartCount &#125;&#125;<span class="string">&quot; nginx</span></span><br><span class="line"><span class="string">查看容器最后一次的启动时间</span></span><br><span class="line"><span class="string">docker inspect -f &quot;</span>&#123;&#123; .State.StartedAt &#125;&#125;<span class="string">&quot; nginx</span></span><br><span class="line"><span class="string">Docker容器的退出状态码</span></span><br><span class="line"><span class="string">•	0，表示正常退出</span></span><br><span class="line"><span class="string">•	!0，表示异常退出（退出状态码采用chroot标准）</span></span><br><span class="line"><span class="string">o	125，Docker守护进程本身的错误</span></span><br><span class="line"><span class="string">o	126，容器启动后，要执行的默认命令无法调用</span></span><br><span class="line"><span class="string">o	127，容器启动后，要执行的默认命令不存在</span></span><br><span class="line"><span class="string">•	其他命令状态码，容器启动后正常执行命令，退出命令时该命令的返回状态码作为容器的退出状态码</span></span><br><span class="line"><span class="string">参</span></span><br><span class="line"><span class="string"></span></span><br></pre></td></tr></table></figure>
<figure class="highlight dockerfile"><table><tr><td class="code"><pre><span class="line">一.<span class="number">1</span>	多阶段构建</span><br><span class="line">一.<span class="number">1.1</span>	之前的做法</span><br><span class="line">在 Docker <span class="number">17.05</span> 版本之前，我们构建 Docker 镜像时，通常会采用两种方式：</span><br><span class="line">一.<span class="number">1.1</span>.<span class="number">1</span>	全部放入一个 Dockerfile</span><br><span class="line">一种方式是将所有的构建过程编包含在一个 Dockerfile 中，包括项目及其依赖库的编译、测试、打包等流程，这里可能会带来的一些问题：</span><br><span class="line">•	Dockerfile 特别长，可维护性降低</span><br><span class="line">•	镜像层次多，镜像体积较大，部署时间变长</span><br><span class="line">•	源代码存在泄露的风险</span><br><span class="line">例如</span><br><span class="line">编写 app.go 文件，该程序输出 Hello World!</span><br><span class="line">package main  </span><br><span class="line"></span><br><span class="line">import <span class="string">&quot;fmt&quot;</span>  </span><br><span class="line"></span><br><span class="line">func main()&#123;  </span><br><span class="line">    fmt.Printf(<span class="string">&quot;Hello World!&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">编写 Dockerfile.one 文件</span><br><span class="line"><span class="keyword">FROM</span> golang:<span class="number">1.9</span>-alpine</span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> apk --no-cache add git ca-certificates</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="language-bash"> /go/src/github.com/go/helloworld/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> app.go .</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> go get -d -v github.com/go-sql-driver/mysql \</span></span><br><span class="line"><span class="language-bash">  &amp;&amp; CGO_ENABLED=0 GOOS=linux go build -a -installsuffix cgo -o app . \</span></span><br><span class="line"><span class="language-bash">  &amp;&amp; <span class="built_in">cp</span> /go/src/github.com/go/helloworld/app /root</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="language-bash"> /root/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">CMD</span><span class="language-bash"> [<span class="string">&quot;./app&quot;</span>]</span></span><br><span class="line">构建镜像</span><br><span class="line">$ docker build -t go/helloworld:<span class="number">1</span> -f Dockerfile.one .</span><br><span class="line">一.<span class="number">1.1</span>.<span class="number">2</span>	分散到多个 Dockerfile</span><br><span class="line">另一种方式，就是我们事先在一个 Dockerfile 将项目及其依赖库编译测试打包好后，再将其拷贝到运行环境中，这种方式需要我们编写两个 Dockerfile 和一些编译脚本才能将其两个阶段自动整合起来，这种方式虽然可以很好地规避第一种方式存在的风险，但明显部署过程较复杂。</span><br><span class="line">例如</span><br><span class="line">编写 Dockerfile.build 文件</span><br><span class="line"><span class="keyword">FROM</span> golang:<span class="number">1.9</span>-alpine</span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> apk --no-cache add git</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="language-bash"> /go/src/github.com/go/helloworld</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> app.go .</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> go get -d -v github.com/go-sql-driver/mysql \</span></span><br><span class="line"><span class="language-bash">  &amp;&amp; CGO_ENABLED=0 GOOS=linux go build -a -installsuffix cgo -o app .</span></span><br><span class="line">编写 Dockerfile.copy 文件</span><br><span class="line"><span class="keyword">FROM</span> alpine:latest</span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> apk --no-cache add ca-certificates</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="language-bash"> /root/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> app .</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">CMD</span><span class="language-bash"> [<span class="string">&quot;./app&quot;</span>]</span></span><br><span class="line">新建 build.sh</span><br><span class="line"><span class="comment">#!/bin/sh</span></span><br><span class="line">echo Building go/helloworld:build</span><br><span class="line"></span><br><span class="line">docker build -t go/helloworld:build . -f Dockerfile.build</span><br><span class="line"></span><br><span class="line">docker create --name extract go/helloworld:build</span><br><span class="line">docker cp extract:/go/src/github.com/go/helloworld/app ./app</span><br><span class="line">docker rm -f extract</span><br><span class="line"></span><br><span class="line">echo Building go/helloworld:<span class="number">2</span></span><br><span class="line"></span><br><span class="line">docker build --no-cache -t go/helloworld:<span class="number">2</span> . -f Dockerfile.copy</span><br><span class="line">rm ./app</span><br><span class="line">现在运行脚本即可构建镜像</span><br><span class="line">$ chmod +x build.sh</span><br><span class="line"></span><br><span class="line">$ ./build.sh</span><br><span class="line">对比两种方式生成的镜像大小</span><br><span class="line">$ docker image ls</span><br><span class="line"></span><br><span class="line">REPOSITORY      TAG    IMAGE ID        CREATED         SIZE</span><br><span class="line">go/helloworld   <span class="number">2</span>      f7cf3465432c    <span class="number">22</span> seconds ago  <span class="number">6.47</span>MB</span><br><span class="line">go/helloworld   <span class="number">1</span>      f55d3e16affc    <span class="number">2</span> minutes ago   <span class="number">295</span>MB</span><br><span class="line">一.<span class="number">1.2</span>	使用多阶段构建</span><br><span class="line">为解决以上问题，Docker v17.<span class="number">05</span> 开始支持多阶段构建 (multistage builds)。使用多阶段构建我们就可以很容易解决前面提到的问题，并且只需要编写一个 Dockerfile：</span><br><span class="line">例如</span><br><span class="line">编写 Dockerfile 文件</span><br><span class="line"><span class="keyword">FROM</span> golang:<span class="number">1.9</span>-alpine as builder</span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> apk --no-cache add git</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="language-bash"> /go/src/github.com/go/helloworld/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> go get -d -v github.com/go-sql-driver/mysql</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> app.go .</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> CGO_ENABLED=0 GOOS=linux go build -a -installsuffix cgo -o app .</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">FROM</span> alpine:latest as prod</span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> apk --no-cache add ca-certificates</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="language-bash"> /root/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> --from=0 /go/src/github.com/go/helloworld/app .</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">CMD</span><span class="language-bash"> [<span class="string">&quot;./app&quot;</span>]  </span></span><br><span class="line">构建镜像</span><br><span class="line">$ docker build -t go/helloworld:<span class="number">3</span> .</span><br><span class="line">对比三个镜像大小</span><br><span class="line">$ docker image ls</span><br><span class="line"></span><br><span class="line">REPOSITORY        TAG   IMAGE ID         CREATED            SIZE</span><br><span class="line">go/helloworld     <span class="number">3</span>     d6911ed9c846     <span class="number">7</span> seconds ago      <span class="number">6.47</span>MB</span><br><span class="line">go/helloworld     <span class="number">2</span>     f7cf3465432c     <span class="number">22</span> seconds ago     <span class="number">6.47</span>MB</span><br><span class="line">go/helloworld     <span class="number">1</span>     f55d3e16affc     <span class="number">2</span> minutes ago      <span class="number">295</span>MB</span><br><span class="line">很明显使用多阶段构建的镜像体积小，同时也完美解决了上边提到的问题。</span><br><span class="line">一.<span class="number">1.2</span>.<span class="number">1</span>	只构建某一阶段的镜像</span><br><span class="line">我们可以使用 as 来为某一阶段命名，例如</span><br><span class="line"><span class="keyword">FROM</span> golang:<span class="number">1.9</span>-alpine as builder</span><br><span class="line">例如当我们只想构建 builder 阶段的镜像时，我们可以在使用 docker build 命令时加上 --target 参数即可</span><br><span class="line">$ docker build --target builder -t username/imagename:tag .</span><br><span class="line">一.<span class="number">1.2</span>.<span class="number">2</span>	构建时从其他镜像复制文件</span><br><span class="line">上面例子中我们使用 <span class="keyword">COPY</span><span class="language-bash"> --from=0 /go/src/github.com/go/helloworld/app . 从上一阶段的镜像中复制文件，我们也可以复制任意镜像中的文件。</span></span><br><span class="line">$ <span class="keyword">COPY</span><span class="language-bash"> --from=nginx:latest /etc/nginx/nginx.conf /nginx.conf</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>服务</category>
        <category>Docker</category>
      </categories>
      <tags>
        <tag>Docker</tag>
      </tags>
  </entry>
  <entry>
    <title>ETCD集群部署</title>
    <url>/2020/11/ETCD%E9%9B%86%E7%BE%A4%E9%83%A8%E7%BD%B2/index.html</url>
    <content><![CDATA[<h2 id="etcd集群部署">ETCD集群部署</h2>
<h3 id="环境信息">环境信息</h3>
<table>
<thead>
<tr>
<th>角色</th>
<th>ip</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>etcd01.etcd.kubernetes</td>
<td>10.10.10.31</td>
<td></td>
</tr>
<tr>
<td>etcd02.etcd.kubernetes</td>
<td>10.10.10.32</td>
<td></td>
</tr>
<tr>
<td>etcd03.etcd.kubernetes</td>
<td>10.10.10.33</td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="配置hosts文件">配置hosts文件</h3>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cat &lt;&lt; EOF &gt;&gt; /etc/hosts</span><br><span class="line">10.10.10.31 etcd01.etcd.kubernetes</span><br><span class="line">10.10.10.32 etcd02.etcd.kubernetes</span><br><span class="line">10.10.10.33 etcd03.etcd.kubernetes</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>
<h3 id="准备etcd二进制文件">准备etcd二进制文件</h3>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">mkdir -pv /opt/kubernetes/&#123;cfg,data/etcd,bin,data,ssl,logs&#125;</span><br><span class="line">tar xf etcd-v3.3.10-linux-amd64.tar.gz</span><br><span class="line">mv etcd-v3.3.10-linux-amd64/etcd* /opt/kubernetes/bin/</span><br></pre></td></tr></table></figure>
<h3 id="创建etcd所需证书文件">创建etcd所需证书文件</h3>
<h4 id="1、创建-etcd 证书的相关文件">1、创建 etcd 证书的相关文件</h4>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cat &lt;&lt; EOF &gt; ca-csr.json </span><br><span class="line">&#123;</span><br><span class="line">    &quot;CN&quot;:&quot;kubernetes&quot;,</span><br><span class="line">    &quot;key&quot;:&#123;</span><br><span class="line">        &quot;algo&quot;:&quot;rsa&quot;,</span><br><span class="line">        &quot;size&quot;:2048</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;ca&quot;:&#123;</span><br><span class="line">        &quot;expiry&quot;:&quot;262800h&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;names&quot;:[</span><br><span class="line">        &#123;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line">cat &lt;&lt; EOF &gt; ca-config.json</span><br><span class="line">&#123;</span><br><span class="line">    &quot;signing&quot;:&#123;</span><br><span class="line">        &quot;default&quot;:&#123;</span><br><span class="line">            &quot;expiry&quot;:&quot;8760h&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;profiles&quot;:&#123;</span><br><span class="line">            &quot;kubernetes&quot;:&#123;</span><br><span class="line">                &quot;expiry&quot;:&quot;87600h&quot;,</span><br><span class="line">                &quot;usages&quot;:[</span><br><span class="line">                    &quot;signing&quot;,</span><br><span class="line">                    &quot;key encipherment&quot;,</span><br><span class="line">                    &quot;server auth&quot;,</span><br><span class="line">                    &quot;client auth&quot;</span><br><span class="line">                ]</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line">cat &lt;&lt; EOF &gt; etcd-csr.json </span><br><span class="line">&#123;</span><br><span class="line">    &quot;CN&quot;:&quot;etcd.kubernetes&quot;,</span><br><span class="line">    &quot;hosts&quot;:[</span><br><span class="line">        &quot;127.0.0.1&quot;,</span><br><span class="line">        &quot;10.10.10.31&quot;,</span><br><span class="line">        &quot;10.10.10.32&quot;,</span><br><span class="line">        &quot;10.10.10.33&quot;,</span><br><span class="line">        &quot;localhost&quot;,</span><br><span class="line">        &quot;localhost.localdomain&quot;,</span><br><span class="line">        &quot;etcd-01.etcd.kubernetes&quot;,</span><br><span class="line">        &quot;etcd-02.etcd.kubernetes&quot;,</span><br><span class="line">        &quot;etcd-03.etcd.kubernetes&quot;</span><br><span class="line">    ],</span><br><span class="line">    &quot;key&quot;:&#123;</span><br><span class="line">        &quot;algo&quot;:&quot;rsa&quot;,</span><br><span class="line">        &quot;size&quot;:2048</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;names&quot;:[</span><br><span class="line">        &#123;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>
<h4 id="2、生成证书和私钥">2、生成证书和私钥</h4>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cfssl gencert -initca ca-csr.json | cfssljson -bare ca</span><br><span class="line"></span><br><span class="line">cfssl gencert -ca=ca.pem \</span><br><span class="line">              -ca-key=ca-key.pem \</span><br><span class="line">              -config=ca-config.json \</span><br><span class="line">              -profile=kubernetes etcd-csr.json | cfssljson -bare etcd</span><br></pre></td></tr></table></figure>
<h4 id="3、分发证书">3、分发证书</h4>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cp -a etcd*.pem /opt/kubernetes/ssl</span><br><span class="line">ha scp ./etcd*.pem root@$I:/opt/kubernetes/ssl ;done</span><br></pre></td></tr></table></figure>
<h3 id="创建etcd配置文件">创建etcd配置文件</h3>
<ul>
<li><strong>节点一（10.10.10.31）</strong></li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cat &lt;&lt; &#x27;EOF&#x27; &gt; /opt/kubernetes/cfg/kube-etcd.conf</span><br><span class="line">KUBE_ETCD_OPTS=&quot;--name=etcd1 \</span><br><span class="line">--data-dir=/opt/kubernetes/data/etcd \</span><br><span class="line">--listen-peer-urls=https://10.10.10.31:2380 \</span><br><span class="line">--listen-client-urls=https://10.10.10.31:2379,http://127.0.0.1:2379 \</span><br><span class="line">--initial-advertise-peer-urls=https://10.10.10.31:2380 \</span><br><span class="line">--initial-cluster-token=etcd-cluster \</span><br><span class="line">--advertise-client-urls=https://10.10.10.31:2379 \</span><br><span class="line">--cert-file=/opt/kubernetes/ssl/etcd.pem \</span><br><span class="line">--key-file=/opt/kubernetes/ssl/etcd-key.pem \</span><br><span class="line">--peer-cert-file=/opt/kubernetes/ssl/etcd.pem \</span><br><span class="line">--peer-key-file=/opt/kubernetes/ssl/etcd-key.pem \</span><br><span class="line">--trusted-ca-file=/opt/kubernetes/ssl/ca.pem \</span><br><span class="line">--peer-trusted-ca-file=/opt/kubernetes/ssl/ca.pem \</span><br><span class="line">--client-cert-auth=True \</span><br><span class="line">--initial-cluster etcd1=https://10.10.10.31:2380,etcd2=https://10.10.10.32:2380,etcd3=https://10.10.10.33:2380 \</span><br><span class="line">--initial-cluster-state=new&quot;</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>节点二：(10.10.10.32)</strong></li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cat &lt;&lt; &#x27;EOF&#x27; &gt; /opt/kubernetes/cfg/kube-etcd.conf</span><br><span class="line">KUBE_ETCD_OPTS=&quot;--name=etcd2 \</span><br><span class="line">--data-dir=/opt/kubernetes/data/etcd \</span><br><span class="line">--listen-peer-urls=https://10.10.10.32:2380 \</span><br><span class="line">--listen-client-urls=https://10.10.10.32:2379,http://127.0.0.1:2379 \</span><br><span class="line">--initial-advertise-peer-urls=https://10.10.10.32:2380 \</span><br><span class="line">--initial-cluster-token=etcd-cluster \</span><br><span class="line">--advertise-client-urls=https://10.10.10.32:2379 \</span><br><span class="line">--cert-file=/opt/kubernetes/ssl/etcd.pem \</span><br><span class="line">--key-file=/opt/kubernetes/ssl/etcd-key.pem \</span><br><span class="line">--peer-cert-file=/opt/kubernetes/ssl/etcd.pem \</span><br><span class="line">--peer-key-file=/opt/kubernetes/ssl/etcd-key.pem \</span><br><span class="line">--trusted-ca-file=/opt/kubernetes/ssl/ca.pem \</span><br><span class="line">--peer-trusted-ca-file=/opt/kubernetes/ssl/ca.pem \</span><br><span class="line">--client-cert-auth=True \</span><br><span class="line">--initial-cluster etcd1=https://10.10.10.31:2380,etcd2=https://10.10.10.32:2380,etcd3=https://10.10.10.33:2380 \</span><br><span class="line">--initial-cluster-state=new&quot;</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>节点三：(10.10.10.33)</strong></li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cat &lt;&lt; &#x27;EOF&#x27; &gt; /opt/kubernetes/cfg/kube-etcd.conf</span><br><span class="line">KUBE_ETCD_OPTS=&quot;--name=etcd3 \</span><br><span class="line">--data-dir=/opt/kubernetes/data/etcd \</span><br><span class="line">--listen-peer-urls=https://10.10.10.33:2380 \</span><br><span class="line">--listen-client-urls=https://10.10.10.33:2379,http://127.0.0.1:2379 \</span><br><span class="line">--initial-advertise-peer-urls=https://10.10.10.33:2380 \</span><br><span class="line">--initial-cluster-token=etcd-cluster \</span><br><span class="line">--advertise-client-urls=https://10.10.10.33:2379 \</span><br><span class="line">--cert-file=/opt/kubernetes/ssl/etcd.pem \</span><br><span class="line">--key-file=/opt/kubernetes/ssl/etcd-key.pem \</span><br><span class="line">--peer-cert-file=/opt/kubernetes/ssl/etcd.pem \</span><br><span class="line">--peer-key-file=/opt/kubernetes/ssl/etcd-key.pem \</span><br><span class="line">--trusted-ca-file=/opt/kubernetes/ssl/ca.pem \</span><br><span class="line">--peer-trusted-ca-file=/opt/kubernetes/ssl/ca.pem \</span><br><span class="line">--client-cert-auth=True \</span><br><span class="line">--initial-cluster etcd1=https://10.10.10.31:2380,etcd2=https://10.10.10.32:2380,etcd3=https://10.10.10.33:2380 \</span><br><span class="line">--initial-cluster-state=new&quot;</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>
<h3 id="创建systemctl启动脚本">创建systemctl启动脚本</h3>
<ul>
<li><strong>三个etcd节点是一样的，三个节点分别创建</strong></li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cat &lt;&lt; &#x27;EOF&#x27; &gt; /usr/lib/systemd/system/etcd.service</span><br><span class="line">[Unit]</span><br><span class="line">Description=Etcd Server</span><br><span class="line">After=network.target</span><br><span class="line">After=network-online.target</span><br><span class="line">Wants=network-online.target</span><br><span class="line">Documentation=https://github.com/coreos</span><br><span class="line">[Service]</span><br><span class="line">Type=notify</span><br><span class="line">WorkingDirectory=/opt/kubernetes/data/etcd</span><br><span class="line">EnvironmentFile=/opt/kubernetes/cfg/kube-etcd.conf</span><br><span class="line">ExecStart=/opt/kubernetes/bin/etcd $KUBE_ETCD_OPTS</span><br><span class="line">Restart=on-failure</span><br><span class="line">RestartSec=5</span><br><span class="line">LimitNOFILE=65536</span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>
<h3 id="启动etcd集群">启动etcd集群</h3>
<blockquote>
<p>etcd节点要同时启动，才能启动成功</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl daemon-reload</span><br><span class="line">systemctl restart etcd</span><br><span class="line">systemctl status etcd</span><br><span class="line">systemctl enable etcd</span><br></pre></td></tr></table></figure>
<h3 id="ctcd集群信息查看">CTCD集群信息查看</h3>
<p><strong>由于是https，所以查看操作集群需要使用证书。</strong></p>
<blockquote>
<p>etcdctl 默认使用的是api v2版本</p>
</blockquote>
<ul>
<li>方法一</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd /opt/kubernetes/ssl</span><br><span class="line">etcdctl --ca-file=ca.pem --cert-file=etcd.pem --key-file=etcd-key.pem cluster-health</span><br><span class="line">etcdctl --ca-file=ca.pem --cert-file=etcd.pem --key-file=etcd-key.pem member list</span><br></pre></td></tr></table></figure>
<ul>
<li>方法二</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">alias etcdctl=&quot;etcdctl \</span><br><span class="line">--endpoints=&#x27;https://10.10.10.31:2379,https://10.10.10.32:2379,https://10.10.10.33:2379&#x27; \</span><br><span class="line">--ca-file=/opt/kubernetes/ssl/ca.pem -cert-file=/opt/kubernetes/ssl/etcd.pem \</span><br><span class="line">--key-file=/opt/kubernetes/ssl/etcd-key.pem&quot;</span><br><span class="line">etcdctl cluster-health</span><br><span class="line">etcdctl member list</span><br></pre></td></tr></table></figure>
<blockquote>
<p>etcdctl 的api v3版本使用</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">使用环境变量定义api版本</span></span><br><span class="line">export ETCDCTL_API=3</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">申明etcd相关信息，etcdctl 默认连接的是http://127.0.0.1:2379，因无证书也能访问，建议关闭回环网卡监听。</span></span><br><span class="line">export ETCDCTL_FILE=/opt/kubernetes/bin/etcdctl</span><br><span class="line">export ETCD_ENDPOINTS=https://10.10.10.31:2379,https://10.10.10.32:2379,https://10.10.10.33:2379</span><br><span class="line">export ETCD_CA_FILE=/opt/kubernetes/ssl/ca.pem</span><br><span class="line">export ETCD_cert_FILE=/opt/kubernetes/ssl/etcd.pem</span><br><span class="line">export ETCD_key_FILE=/opt/kubernetes/ssl/etcd-key.pem</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">配置etcdctl别名</span></span><br><span class="line">alias etcdctl=&quot;$ETCDCTL_FILE --endpoints=$ETCD_ENDPOINTS --cacert=$ETCD_CA_FILE --cert=$ETCD_cert_FILE --key=$ETCD_key_FILE&quot;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">列出集群成员</span></span><br><span class="line">etcdctl member list</span><br><span class="line">etcdctl member list -w table</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">----示例</span></span><br><span class="line">[root@k8s-master ~]# etcdctl member list</span><br><span class="line">a01381d0afc19e9, started, etcd1, https://10.10.10.31:2380, https://10.10.10.31:2379</span><br><span class="line">53807b9bddd14168, started, etcd2, https://10.10.10.32:2380, https://10.10.10.32:2379</span><br><span class="line">7b8d79f533deb5ed, started, etcd3, https://10.10.10.33:2380, https://10.10.10.33:2379</span><br><span class="line">[root@k8s-master ~]# etcdctl member list -w table</span><br><span class="line">+------------------+---------+-------+--------------------------+--------------------------+</span><br><span class="line">|        ID        | STATUS  | NAME  |        PEER ADDRS        |       CLIENT ADDRS       |</span><br><span class="line">+------------------+---------+-------+--------------------------+--------------------------+</span><br><span class="line">|  a01381d0afc19e9 | started | etcd1 | https://10.10.10.31:2380 | https://10.10.10.31:2379 |</span><br><span class="line">| 53807b9bddd14168 | started | etcd2 | https://10.10.10.32:2380 | https://10.10.10.32:2379 |</span><br><span class="line">| 7b8d79f533deb5ed | started | etcd3 | https://10.10.10.33:2380 | https://10.10.10.33:2379 |</span><br><span class="line">+------------------+---------+-------+--------------------------+--------------------------+</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">集群状态,集群状态主要是etcdctl endpoint status 和etcdctl endpoint health两条命令。</span></span><br><span class="line">etcdctl endpoint health</span><br><span class="line">etcdctl endpoint status --write-out=table 或etcdctl endpoint status -w table</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">----示例</span></span><br><span class="line">[root@k8s-master ~]# etcdctl endpoint status -w table</span><br><span class="line">+--------------------------+------------------+---------+---------+--------</span><br><span class="line">|         ENDPOINT         |        ID        | VERSION | DB SIZE |   .....</span><br><span class="line">+--------------------------+------------------+---------+---------+--------</span><br><span class="line">| https://10.10.10.31:2379 |  a01381d0afc19e9 |  3.3.10 |  3.8 MB |   .....</span><br><span class="line">| https://10.10.10.32:2379 | 53807b9bddd14168 |  3.3.10 |  3.8 MB |   .....</span><br><span class="line">| https://10.10.10.33:2379 | 7b8d79f533deb5ed |  3.3.10 |  3.8 MB |   .....</span><br><span class="line">+--------------------------+------------------+---------+---------+--------</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>kubernetes</category>
      </categories>
      <tags>
        <tag>etcd</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux 配置 Git 命令提示符</title>
    <url>/2020/07/Linux-%E9%85%8D%E7%BD%AE-Git-%E5%91%BD%E4%BB%A4%E6%8F%90%E7%A4%BA%E7%AC%A6/index.html</url>
    <content><![CDATA[<h2 id="linux-配置 git 命令提示符">Linux 配置 Git 命令提示符</h2>
<h3 id="git-命令补全设置">Git 命令补全设置</h3>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">这个目录是源码包解压后的目录</span></span><br><span class="line">cd ./contrib/completion</span><br><span class="line">cp git-completion.bash git-prompt.sh /etc/profile.d/</span><br><span class="line">cd /etc/profile.d/ &amp;&amp; ln -s git-completion.bash git-completion.sh</span><br></pre></td></tr></table></figure>
<h3 id="定制git命令提示符">定制git命令提示符</h3>
<blockquote>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cat &lt;&lt; &#x27;EOF&#x27; &gt; /etc/profile.d/git.sh</span><br><span class="line">export GIT_PS1_SHOWDIRTYSTATE=1</span><br><span class="line">export GIT_PS1_SHOWSTASHSTATE=1</span><br><span class="line">export GIT_PS1_SHOWUNTRACKEDFILES=1</span><br><span class="line">export GIT_PS1_SHOWUPSTREAM=&quot;verbose git svn&quot;</span><br><span class="line">export GIT_HOME=/usr/local/git</span><br><span class="line">export PATH=$PATH:$GIT_HOME/bin</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>
<p>主要是 $(__git_ps1 “(%s)”)</p>
<p>写法一</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cat &lt;&lt; &#x27;EOF&#x27; &gt;&gt; /etc/bashrc</span><br><span class="line">export PS1=&#x27;\[\e[1;32m\][\u@\h \W\[\033[1;31m\]$(__git_ps1 &quot;(%s)&quot;)\[\e[1;32m\]]\$ \[\e[0m\]&#x27;</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>
<p><img src="/images/2022-07/1.png" alt=""></p>
<p>写法二</p>
<p>最好自定义的这些参数都写在if里面，避免非登陆时的bash中变量多次叠加。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">if shopt -q login_shell ; then</span><br><span class="line">    export PS1=&#x27;\[\e[1;32m\][\u@\h \W]\$ \[\e[0m\]&#x27;</span><br><span class="line">    export PS1=&#x27;$(__git_ps1 &quot;(%s)&quot;)&#x27;$PS1</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>
<p>这个每次执行bash都会叠加命令提示符号<br>
<img src="/images/2022-07/2.png" alt=""><br>
这个便不会，主要是写在了if里面 ：if shopt -q login_shell ; then<br>
<img src="/images/2022-07/3.png" alt=""><br>
写法三</p>
<p>个人更喜欢这种写法，有git和无git按个人环境配置即可</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">if shopt -q login_shell ; then</span><br><span class="line">    # export PS1=&#x27;\[\e[1;32m\][\u@\h \W]\$ \[\e[0m\]&#x27;  # 无Git环境</span><br><span class="line">    export PS1=&#x27;\[\e[1;32m\][\u@\h \W\[\033[1;31m\]$(__git_ps1 &quot;(%s)&quot;)\[\e[1;32m\]]\$ \[\e[0m\]&#x27;  # 有Git环境</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>
<p><img src="/images/2022-07/4.png" alt=""></p>
</blockquote>
<h4 id="附：">附：</h4>
<blockquote>
<p>CentOS 默认PS1变量</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">PS1=[\u@\h \W]\$</span><br></pre></td></tr></table></figure>
</blockquote>
]]></content>
      <categories>
        <category>服务</category>
        <category>Git</category>
      </categories>
      <tags>
        <tag>Git</tag>
      </tags>
  </entry>
  <entry>
    <title>Nginx配置yum源</title>
    <url>/2020/11/Nginx%E9%85%8D%E7%BD%AEyum%E6%BA%90/index.html</url>
    <content><![CDATA[<h3 id="nginx-配置文件">Nginx 配置文件</h3>
<blockquote>
<p>我这里使用的是虚拟主机</p>
</blockquote>
<figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span>       <span class="number">80</span>;</span><br><span class="line">    <span class="attribute">server_name</span>  mirrors.local.com;</span><br><span class="line"></span><br><span class="line">    <span class="section">location</span> / &#123;</span><br><span class="line">        <span class="attribute">root</span>   /opt/mirrors/html;</span><br><span class="line">        <span class="attribute">index</span>  index.html index.htm;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="section">location</span><span class="regexp"> ^~</span> /centos &#123;</span><br><span class="line">        <span class="attribute">alias</span> /opt/mirrors/centos/;</span><br><span class="line">        <span class="attribute">autoindex</span> <span class="literal">on</span>;</span><br><span class="line">        <span class="attribute">autoindex_exact_size</span> <span class="literal">off</span>;</span><br><span class="line">        <span class="attribute">autoindex_localtime</span> <span class="literal">on</span>;</span><br><span class="line">        <span class="attribute">charset</span> utf-<span class="number">8</span>,gbk;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="制作友好提示页面">制作友好提示页面</h3>
<p>在<code>/opt/mirrors/html</code>放置<code>index.html</code>作为首页帮助文件</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot;</span> <span class="string">&quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.w3.org/1999/xhtml&quot;</span> <span class="attr">lang</span>=<span class="string">&quot;zh&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;content-type&quot;</span> <span class="attr">content</span>=<span class="string">&quot;text/html; charset=utf-8&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>yum源<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">......</span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>服务</category>
        <category>Nginx</category>
      </categories>
      <tags>
        <tag>Nginx</tag>
        <tag>yum</tag>
      </tags>
  </entry>
  <entry>
    <title>Python优雅写法</title>
    <url>/2020/05/Python%E4%BC%98%E9%9B%85%E5%86%99%E6%B3%95/index.html</url>
    <content><![CDATA[<h2 id="python优雅写法">Python优雅写法</h2>
<p>为多个变量赋值</p>
<p>有时，有多个变量需要赋值，这时你会怎么赋值呢？</p>
<p>常规方法：</p>
<p>常规方法是给变量逐个赋值。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">a = 0</span><br><span class="line">b = 1</span><br><span class="line">c = 2</span><br></pre></td></tr></table></figure>
<p>优雅方法：</p>
<p>直接按顺序对应一一赋值。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">a, b, c = 0, 1, 2</span><br></pre></td></tr></table></figure>
<p>序列解包</p>
<p>需要取出列表中的元素。</p>
<p>常规方法：</p>
<p>一般我们知道可以通过下标获取具体元素。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">info = [&#x27;brucepk&#x27;, &#x27;man&#x27;, &#x27;python&#x27;]</span><br><span class="line">name = info[0]</span><br><span class="line">sex = info[1]</span><br><span class="line">tech = info[2]</span><br><span class="line">print(name,sex,tech)</span><br><span class="line"># 结果</span><br><span class="line">brucepk man python</span><br></pre></td></tr></table></figure>
<p>优雅方法：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">给出对应变量接收所有元素。</span><br><span class="line">info = [&#x27;brucepk&#x27;, &#x27;man&#x27;, &#x27;python&#x27;]</span><br><span class="line">name,sex,tech = info</span><br><span class="line">print(name,sex,tech)</span><br><span class="line"># 结果</span><br><span class="line">brucepk man python</span><br></pre></td></tr></table></figure>
<p>优雅你的判断语句</p>
<p>我们用判断语句来定义一个绝对值函数。</p>
<p>常规方法：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">x = -6</span><br><span class="line">if x &lt; 0:</span><br><span class="line">    y = -x</span><br><span class="line">else:</span><br><span class="line">    y = x</span><br><span class="line">print(y)</span><br><span class="line"># 结果</span><br><span class="line">6</span><br></pre></td></tr></table></figure>
<p>优雅方法：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">x = -6</span><br><span class="line">y = -x if x&lt;0 else x</span><br><span class="line">print(y)</span><br><span class="line"># 结果</span><br><span class="line">6</span><br></pre></td></tr></table></figure>
<p>区间判断</p>
<p>使用 and 连续两次判断的语句，条件都符合时才执行语句。</p>
<p>常规方法：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">score = 82</span><br><span class="line">if score &gt;=80 and score &lt; 90:</span><br><span class="line">    level = &#x27;B&#x27;</span><br><span class="line">print(level)</span><br><span class="line"># 结果</span><br><span class="line">B</span><br></pre></td></tr></table></figure>
<p>优雅方法：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">使用链式判断。</span><br><span class="line">score = 82</span><br><span class="line">if  80 &lt;= score &lt; 90:</span><br><span class="line">    level = &#x27;B&#x27;</span><br><span class="line">print(level)</span><br><span class="line"># 结果</span><br><span class="line">B</span><br></pre></td></tr></table></figure>
<p>多个值符合条件判断</p>
<p>多个值任意一个值符合条件即为 True 的情况。</p>
<p>常规方法：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">num = 1</span><br><span class="line">if num == 1 or num == 3 or num == 5:</span><br><span class="line">    type = &#x27;奇数&#x27;</span><br><span class="line">print(type)</span><br><span class="line"># 结果</span><br><span class="line">奇数</span><br></pre></td></tr></table></figure>
<p>优雅方法：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">使用关键字 in，让你的语句更优雅。</span><br><span class="line">num = 1</span><br><span class="line">if num in(1,3,5):</span><br><span class="line">    type = &#x27;奇数&#x27;</span><br><span class="line">print(type)</span><br><span class="line"># 结果</span><br><span class="line">奇数</span><br></pre></td></tr></table></figure>
<p>判断是否为空</p>
<p>判断元素是空还是非空。</p>
<p>常规方法：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">一般我们想到的是 len() 方法来判断元素长度，大于 0 则为非空。</span><br><span class="line">A,B,C =[1,3,5],&#123;&#125;,&#x27;&#x27;</span><br><span class="line">if len(A) &gt; 0:</span><br><span class="line">    print(&#x27;A 为非空&#x27;)</span><br><span class="line">if len(B) &gt; 0:</span><br><span class="line">    print(&#x27;B 为非空&#x27;)</span><br><span class="line">if len(C) &gt; 0:</span><br><span class="line">    print(&#x27;C 为非空&#x27;)</span><br><span class="line"># 结果</span><br><span class="line">A 为非空</span><br></pre></td></tr></table></figure>
<p>优雅方法：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">在之前的文章 零基础学 python 之 if 语句 中讲过，if 后面的执行条件是可以简写的，只要条件 是非零数值、非空字符串、非空 list 等，就判断为 True，否则为 False。</span><br><span class="line">A,B,C =[1,3,5],&#123;&#125;,&#x27;&#x27;</span><br><span class="line">if A:</span><br><span class="line">    print(&#x27;A 为非空&#x27;)</span><br><span class="line">if B:</span><br><span class="line">    print(&#x27;B 为非空&#x27;)</span><br><span class="line">if C:</span><br><span class="line">    print(&#x27;C 为非空&#x27;)</span><br><span class="line"># 结果</span><br><span class="line">A 为非空</span><br></pre></td></tr></table></figure>
<p>多条件内容判断至少一个成立</p>
<p>常规方法：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">用 or 连接多个条件。</span><br><span class="line">math,English,computer =90,80,88</span><br><span class="line">if math&lt;60 or English&lt;60 or computer&lt;60:</span><br><span class="line">    print(&#x27;not pass&#x27;)</span><br><span class="line"># 结果</span><br><span class="line">not pass</span><br></pre></td></tr></table></figure>
<p>优雅方法：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">使用 any 语句。</span><br><span class="line">math,English,computer =90,59,88</span><br><span class="line">if any([math&lt;60,English&lt;60,computer&lt;60]):</span><br><span class="line">    print(&#x27;not pass&#x27;)</span><br><span class="line"># 结果</span><br><span class="line">not pass</span><br></pre></td></tr></table></figure>
<p>多条件内容判断全部成立</p>
<p>常规方法：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">使用 and 连接条件做判断。</span><br><span class="line">math,English,computer =90,80,88</span><br><span class="line">if math&gt;60 and English&gt;60 and computer&gt;60:</span><br><span class="line">    print(&#x27;pass&#x27;)</span><br><span class="line"># 结果</span><br><span class="line">pass</span><br></pre></td></tr></table></figure>
<p>优雅方法：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">使用 all 方法。</span><br><span class="line">math,English,computer =90,80,88</span><br><span class="line">if all([math&gt;60,English&gt;60,computer&gt;60]):</span><br><span class="line">    print(&#x27;pass&#x27;)</span><br><span class="line"># 结果</span><br><span class="line">pass</span><br></pre></td></tr></table></figure>
<p>遍历序列的元素和元素下标</p>
<p>常规方法：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">使用 for 循环进行遍历元素和下标。</span><br><span class="line">L =[&#x27;math&#x27;, &#x27;English&#x27;, &#x27;computer&#x27;, &#x27;Physics&#x27;]</span><br><span class="line">for i in range(len(L)):</span><br><span class="line">    print(i, &#x27;:&#x27;, L[i])</span><br><span class="line"># 结果</span><br><span class="line">0 : math</span><br><span class="line">1 : English</span><br><span class="line">2 : computer</span><br><span class="line">3 : Physics</span><br></pre></td></tr></table></figure>
<p>优雅方法：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">使用 enumerate 函数。</span><br><span class="line">L =[&#x27;math&#x27;, &#x27;English&#x27;, &#x27;computer&#x27;, &#x27;Physics&#x27;]</span><br><span class="line">for k,v in enumerate(L):</span><br><span class="line">    print(k, &#x27;:&#x27;, v)</span><br><span class="line"># 结果</span><br><span class="line">0 : math</span><br><span class="line">1 : English</span><br><span class="line">2 : computer</span><br><span class="line">3 : Physics</span><br></pre></td></tr></table></figure>
<p>循环语句优化</p>
<p>之前的文章 零基础学 Python 之列表生成式 中讲过列表生成时的用法，举例：生成 [1x1,2x2,3x3，4x4，5x5]。</p>
<p>常规方法：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">使用简单的 for 循环可以达到目的。</span><br><span class="line">L = []</span><br><span class="line">for i in range(1, 6):</span><br><span class="line">    L.append(i*i)</span><br><span class="line">print(L) </span><br><span class="line">#结果：</span><br><span class="line">[1, 4, 9, 16, 25]</span><br></pre></td></tr></table></figure>
<p>优雅方法：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">使用列表生成式，一行代码搞定。</span><br><span class="line">print([x*x for x in range(1, 6)]) </span><br><span class="line">#结果：</span><br><span class="line">[1, 4, 9, 16, 25]</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>脚本</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>git学习笔记</title>
    <url>/2020/06/git%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/index.html</url>
    <content><![CDATA[<html xmlns:v="urn:schemas-microsoft-com:vml"
xmlns:o="urn:schemas-microsoft-com🏢office"
xmlns:w="urn:schemas-microsoft-com🏢word"
xmlns:m="http://schemas.microsoft.com/office/2004/12/omml"
xmlns="http://www.w3.org/TR/REC-html40">
<head>
<meta http-equiv=Content-Type content="text/html; charset=gb2312">
<meta name=ProgId content=Word.Document>
<meta name=Generator content="Microsoft Word 15">
<meta name=Originator content="Microsoft Word 15">
<link rel=File-List href="版本控制器Git.files/filelist.xml">
<link rel=Edit-Time-Data href="版本控制器Git.files/editdata.mso">
<link rel=OLE-Object-Data href="版本控制器Git.files/oledata.mso">
<!--[if !mso]>
<style>
v\:* {behavior:url(#default#VML);}
o\:* {behavior:url(#default#VML);}
w\:* {behavior:url(#default#VML);}
.shape {behavior:url(#default#VML);}
</style>
<![endif]--><!--[if gte mso 9]><xml>
 <o:DocumentProperties>
  <o:Author>outsrkem</o:Author>
  <o:LastAuthor>bi jianyong</o:LastAuthor>
  <o:Revision>2</o:Revision>
  <o:TotalTime>741</o:TotalTime>
  <o:LastPrinted>2021-02-16T04:29:00Z</o:LastPrinted>
  <o:Created>2022-11-13T11:29:00Z</o:Created>
  <o:LastSaved>2022-11-13T11:29:00Z</o:LastSaved>
  <o:Pages>18</o:Pages>
  <o:Words>1786</o:Words>
  <o:Characters>10185</o:Characters>
  <o:Lines>84</o:Lines>
  <o:Paragraphs>23</o:Paragraphs>
  <o:CharactersWithSpaces>11948</o:CharactersWithSpaces>
  <o:Version>16.00</o:Version>
 </o:DocumentProperties>
 <o:OfficeDocumentSettings>
  <o:RelyOnVML/>
  <o:AllowPNG/>
 </o:OfficeDocumentSettings>
</xml><![endif]-->
<link rel=dataStoreItem href="版本控制器Git.files/item0001.xml"
target="版本控制器Git.files/props002.xml">
<link rel=themeData href="版本控制器Git.files/themedata.thmx">
<link rel=colorSchemeMapping href="版本控制器Git.files/colorschememapping.xml">
<!--[if gte mso 9]><xml>
 <w:WordDocument>
  <w:TrackMoves>false</w:TrackMoves>
  <w:TrackFormatting/>
  <w:PunctuationKerning/>
  <w:DefaultTableStyle>代码样式</w:DefaultTableStyle>
  <w:DrawingGridHorizontalSpacing>5.25 磅</w:DrawingGridHorizontalSpacing>
  <w:DrawingGridVerticalSpacing>7.8 磅</w:DrawingGridVerticalSpacing>
  <w:DisplayHorizontalDrawingGridEvery>0</w:DisplayHorizontalDrawingGridEvery>
  <w:DisplayVerticalDrawingGridEvery>2</w:DisplayVerticalDrawingGridEvery>
  <w:ValidateAgainstSchemas/>
  <w:SaveIfXMLInvalid>false</w:SaveIfXMLInvalid>
  <w:IgnoreMixedContent>false</w:IgnoreMixedContent>
  <w:AlwaysShowPlaceholderText>false</w:AlwaysShowPlaceholderText>
  <w:DoNotPromoteQF/>
  <w:LidThemeOther>EN-US</w:LidThemeOther>
  <w:LidThemeAsian>ZH-CN</w:LidThemeAsian>
  <w:LidThemeComplexScript>X-NONE</w:LidThemeComplexScript>
  <w:Compatibility>
   <w:SpaceForUL/>
   <w:BalanceSingleByteDoubleByteWidth/>
   <w:DoNotLeaveBackslashAlone/>
   <w:ULTrailSpace/>
   <w:DoNotExpandShiftReturn/>
   <w:AdjustLineHeightInTable/>
   <w:BreakWrappedTables/>
   <w:SnapToGridInCell/>
   <w:WrapTextWithPunct/>
   <w:UseAsianBreakRules/>
   <w:DontGrowAutofit/>
   <w:SplitPgBreakAndParaMark/>
   <w:EnableOpenTypeKerning/>
   <w:DontFlipMirrorIndents/>
   <w:OverrideTableStyleHps/>
   <w:UseFELayout/>
  </w:Compatibility>
  <m:mathPr>
   <m:mathFont m:val="Cambria Math"/>
   <m:brkBin m:val="before"/>
   <m:brkBinSub m:val="&#45;-"/>
   <m:smallFrac m:val="off"/>
   <m:dispDef/>
   <m:lMargin m:val="0"/>
   <m:rMargin m:val="0"/>
   <m:defJc m:val="centerGroup"/>
   <m:wrapIndent m:val="1440"/>
   <m:intLim m:val="subSup"/>
   <m:naryLim m:val="undOvr"/>
  </m:mathPr></w:WordDocument>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:LatentStyles DefLockedState="false" DefUnhideWhenUsed="false"
  DefSemiHidden="false" DefQFormat="false" DefPriority="99"
  LatentStyleCount="376">
  <w:LsdException Locked="false" Priority="0" QFormat="true" Name="Normal"/>
  <w:LsdException Locked="false" Priority="9" Name="heading 1"/>
  <w:LsdException Locked="false" Priority="9" SemiHidden="true"
   UnhideWhenUsed="true" Name="heading 2"/>
  <w:LsdException Locked="false" Priority="9" SemiHidden="true"
   UnhideWhenUsed="true" Name="heading 3"/>
  <w:LsdException Locked="false" Priority="9" SemiHidden="true"
   UnhideWhenUsed="true" Name="heading 4"/>
  <w:LsdException Locked="false" Priority="9" SemiHidden="true"
   UnhideWhenUsed="true" QFormat="true" Name="heading 5"/>
  <w:LsdException Locked="false" Priority="9" SemiHidden="true"
   UnhideWhenUsed="true" QFormat="true" Name="heading 6"/>
  <w:LsdException Locked="false" Priority="9" SemiHidden="true"
   UnhideWhenUsed="true" QFormat="true" Name="heading 7"/>
  <w:LsdException Locked="false" Priority="9" SemiHidden="true"
   UnhideWhenUsed="true" QFormat="true" Name="heading 8"/>
  <w:LsdException Locked="false" Priority="9" SemiHidden="true"
   UnhideWhenUsed="true" QFormat="true" Name="heading 9"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="index 1"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="index 2"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="index 3"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="index 4"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="index 5"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="index 6"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="index 7"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="index 8"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="index 9"/>
  <w:LsdException Locked="false" Priority="39" SemiHidden="true"
   UnhideWhenUsed="true" Name="toc 1"/>
  <w:LsdException Locked="false" Priority="39" SemiHidden="true"
   UnhideWhenUsed="true" Name="toc 2"/>
  <w:LsdException Locked="false" Priority="39" SemiHidden="true"
   UnhideWhenUsed="true" Name="toc 3"/>
  <w:LsdException Locked="false" Priority="39" SemiHidden="true"
   UnhideWhenUsed="true" Name="toc 4"/>
  <w:LsdException Locked="false" Priority="39" SemiHidden="true"
   UnhideWhenUsed="true" Name="toc 5"/>
  <w:LsdException Locked="false" Priority="39" SemiHidden="true"
   UnhideWhenUsed="true" Name="toc 6"/>
  <w:LsdException Locked="false" Priority="39" SemiHidden="true"
   UnhideWhenUsed="true" Name="toc 7"/>
  <w:LsdException Locked="false" Priority="39" SemiHidden="true"
   UnhideWhenUsed="true" Name="toc 8"/>
  <w:LsdException Locked="false" Priority="39" SemiHidden="true"
   UnhideWhenUsed="true" Name="toc 9"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Normal Indent"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="footnote text"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="annotation text"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="header"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="footer"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="index heading"/>
  <w:LsdException Locked="false" Priority="35" SemiHidden="true"
   UnhideWhenUsed="true" QFormat="true" Name="caption"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="table of figures"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="envelope address"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="envelope return"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="footnote reference"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="annotation reference"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="line number"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="page number"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="endnote reference"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="endnote text"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="table of authorities"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="macro"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="toa heading"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="List"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="List Bullet"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="List Number"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="List 2"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="List 3"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="List 4"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="List 5"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="List Bullet 2"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="List Bullet 3"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="List Bullet 4"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="List Bullet 5"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="List Number 2"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="List Number 3"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="List Number 4"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="List Number 5"/>
  <w:LsdException Locked="false" Priority="10" Name="Title"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Closing"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Signature"/>
  <w:LsdException Locked="false" Priority="1" SemiHidden="true"
   UnhideWhenUsed="true" Name="Default Paragraph Font"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Body Text"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Body Text Indent"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="List Continue"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="List Continue 2"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="List Continue 3"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="List Continue 4"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="List Continue 5"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Message Header"/>
  <w:LsdException Locked="false" Priority="11" Name="Subtitle"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Salutation"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Date"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Body Text First Indent"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Body Text First Indent 2"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Note Heading"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Body Text 2"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Body Text 3"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Body Text Indent 2"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Body Text Indent 3"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Block Text"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Hyperlink"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="FollowedHyperlink"/>
  <w:LsdException Locked="false" Priority="22" QFormat="true" Name="Strong"/>
  <w:LsdException Locked="false" Priority="20" Name="Emphasis"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Document Map"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Plain Text"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="E-mail Signature"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="HTML Top of Form"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="HTML Bottom of Form"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Normal (Web)"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="HTML Acronym"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="HTML Address"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="HTML Cite"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="HTML Code"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="HTML Definition"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="HTML Keyboard"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="HTML Preformatted"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="HTML Sample"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="HTML Typewriter"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="HTML Variable"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Normal Table"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="annotation subject"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="No List"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Outline List 1"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Outline List 2"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Outline List 3"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Simple 1"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Simple 2"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Simple 3"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Classic 1"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Classic 2"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Classic 3"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Classic 4"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Colorful 1"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Colorful 2"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Colorful 3"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Columns 1"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Columns 2"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Columns 3"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Columns 4"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Columns 5"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Grid 1"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Grid 2"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Grid 3"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Grid 4"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Grid 5"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Grid 6"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Grid 7"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Grid 8"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table List 1"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table List 2"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table List 3"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table List 4"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table List 5"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table List 6"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table List 7"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table List 8"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table 3D effects 1"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table 3D effects 2"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table 3D effects 3"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Contemporary"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Elegant"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Professional"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Subtle 1"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Subtle 2"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Web 1"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Web 2"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Web 3"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Balloon Text"/>
  <w:LsdException Locked="false" Priority="39" Name="Table Grid"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Theme"/>
  <w:LsdException Locked="false" SemiHidden="true" Name="Placeholder Text"/>
  <w:LsdException Locked="false" Priority="1" Name="No Spacing"/>
  <w:LsdException Locked="false" Priority="60" Name="Light Shading"/>
  <w:LsdException Locked="false" Priority="61" Name="Light List"/>
  <w:LsdException Locked="false" Priority="62" Name="Light Grid"/>
  <w:LsdException Locked="false" Priority="63" Name="Medium Shading 1"/>
  <w:LsdException Locked="false" Priority="64" Name="Medium Shading 2"/>
  <w:LsdException Locked="false" Priority="65" Name="Medium List 1"/>
  <w:LsdException Locked="false" Priority="66" Name="Medium List 2"/>
  <w:LsdException Locked="false" Priority="67" Name="Medium Grid 1"/>
  <w:LsdException Locked="false" Priority="68" Name="Medium Grid 2"/>
  <w:LsdException Locked="false" Priority="69" Name="Medium Grid 3"/>
  <w:LsdException Locked="false" Priority="70" Name="Dark List"/>
  <w:LsdException Locked="false" Priority="71" Name="Colorful Shading"/>
  <w:LsdException Locked="false" Priority="72" Name="Colorful List"/>
  <w:LsdException Locked="false" Priority="73" Name="Colorful Grid"/>
  <w:LsdException Locked="false" Priority="60" Name="Light Shading Accent 1"/>
  <w:LsdException Locked="false" Priority="61" Name="Light List Accent 1"/>
  <w:LsdException Locked="false" Priority="62" Name="Light Grid Accent 1"/>
  <w:LsdException Locked="false" Priority="63" Name="Medium Shading 1 Accent 1"/>
  <w:LsdException Locked="false" Priority="64" Name="Medium Shading 2 Accent 1"/>
  <w:LsdException Locked="false" Priority="65" Name="Medium List 1 Accent 1"/>
  <w:LsdException Locked="false" SemiHidden="true" Name="Revision"/>
  <w:LsdException Locked="false" Priority="34" Name="List Paragraph"/>
  <w:LsdException Locked="false" Priority="29" Name="Quote"/>
  <w:LsdException Locked="false" Priority="30" Name="Intense Quote"/>
  <w:LsdException Locked="false" Priority="66" Name="Medium List 2 Accent 1"/>
  <w:LsdException Locked="false" Priority="67" Name="Medium Grid 1 Accent 1"/>
  <w:LsdException Locked="false" Priority="68" Name="Medium Grid 2 Accent 1"/>
  <w:LsdException Locked="false" Priority="69" Name="Medium Grid 3 Accent 1"/>
  <w:LsdException Locked="false" Priority="70" Name="Dark List Accent 1"/>
  <w:LsdException Locked="false" Priority="71" Name="Colorful Shading Accent 1"/>
  <w:LsdException Locked="false" Priority="72" Name="Colorful List Accent 1"/>
  <w:LsdException Locked="false" Priority="73" Name="Colorful Grid Accent 1"/>
  <w:LsdException Locked="false" Priority="60" Name="Light Shading Accent 2"/>
  <w:LsdException Locked="false" Priority="61" Name="Light List Accent 2"/>
  <w:LsdException Locked="false" Priority="62" Name="Light Grid Accent 2"/>
  <w:LsdException Locked="false" Priority="63" Name="Medium Shading 1 Accent 2"/>
  <w:LsdException Locked="false" Priority="64" Name="Medium Shading 2 Accent 2"/>
  <w:LsdException Locked="false" Priority="65" Name="Medium List 1 Accent 2"/>
  <w:LsdException Locked="false" Priority="66" Name="Medium List 2 Accent 2"/>
  <w:LsdException Locked="false" Priority="67" Name="Medium Grid 1 Accent 2"/>
  <w:LsdException Locked="false" Priority="68" Name="Medium Grid 2 Accent 2"/>
  <w:LsdException Locked="false" Priority="69" Name="Medium Grid 3 Accent 2"/>
  <w:LsdException Locked="false" Priority="70" Name="Dark List Accent 2"/>
  <w:LsdException Locked="false" Priority="71" Name="Colorful Shading Accent 2"/>
  <w:LsdException Locked="false" Priority="72" Name="Colorful List Accent 2"/>
  <w:LsdException Locked="false" Priority="73" Name="Colorful Grid Accent 2"/>
  <w:LsdException Locked="false" Priority="60" Name="Light Shading Accent 3"/>
  <w:LsdException Locked="false" Priority="61" Name="Light List Accent 3"/>
  <w:LsdException Locked="false" Priority="62" Name="Light Grid Accent 3"/>
  <w:LsdException Locked="false" Priority="63" Name="Medium Shading 1 Accent 3"/>
  <w:LsdException Locked="false" Priority="64" Name="Medium Shading 2 Accent 3"/>
  <w:LsdException Locked="false" Priority="65" Name="Medium List 1 Accent 3"/>
  <w:LsdException Locked="false" Priority="66" Name="Medium List 2 Accent 3"/>
  <w:LsdException Locked="false" Priority="67" Name="Medium Grid 1 Accent 3"/>
  <w:LsdException Locked="false" Priority="68" Name="Medium Grid 2 Accent 3"/>
  <w:LsdException Locked="false" Priority="69" Name="Medium Grid 3 Accent 3"/>
  <w:LsdException Locked="false" Priority="70" Name="Dark List Accent 3"/>
  <w:LsdException Locked="false" Priority="71" Name="Colorful Shading Accent 3"/>
  <w:LsdException Locked="false" Priority="72" Name="Colorful List Accent 3"/>
  <w:LsdException Locked="false" Priority="73" Name="Colorful Grid Accent 3"/>
  <w:LsdException Locked="false" Priority="60" Name="Light Shading Accent 4"/>
  <w:LsdException Locked="false" Priority="61" Name="Light List Accent 4"/>
  <w:LsdException Locked="false" Priority="62" Name="Light Grid Accent 4"/>
  <w:LsdException Locked="false" Priority="63" Name="Medium Shading 1 Accent 4"/>
  <w:LsdException Locked="false" Priority="64" Name="Medium Shading 2 Accent 4"/>
  <w:LsdException Locked="false" Priority="65" Name="Medium List 1 Accent 4"/>
  <w:LsdException Locked="false" Priority="66" Name="Medium List 2 Accent 4"/>
  <w:LsdException Locked="false" Priority="67" Name="Medium Grid 1 Accent 4"/>
  <w:LsdException Locked="false" Priority="68" Name="Medium Grid 2 Accent 4"/>
  <w:LsdException Locked="false" Priority="69" Name="Medium Grid 3 Accent 4"/>
  <w:LsdException Locked="false" Priority="70" Name="Dark List Accent 4"/>
  <w:LsdException Locked="false" Priority="71" Name="Colorful Shading Accent 4"/>
  <w:LsdException Locked="false" Priority="72" Name="Colorful List Accent 4"/>
  <w:LsdException Locked="false" Priority="73" Name="Colorful Grid Accent 4"/>
  <w:LsdException Locked="false" Priority="60" Name="Light Shading Accent 5"/>
  <w:LsdException Locked="false" Priority="61" Name="Light List Accent 5"/>
  <w:LsdException Locked="false" Priority="62" Name="Light Grid Accent 5"/>
  <w:LsdException Locked="false" Priority="63" Name="Medium Shading 1 Accent 5"/>
  <w:LsdException Locked="false" Priority="64" Name="Medium Shading 2 Accent 5"/>
  <w:LsdException Locked="false" Priority="65" Name="Medium List 1 Accent 5"/>
  <w:LsdException Locked="false" Priority="66" Name="Medium List 2 Accent 5"/>
  <w:LsdException Locked="false" Priority="67" Name="Medium Grid 1 Accent 5"/>
  <w:LsdException Locked="false" Priority="68" Name="Medium Grid 2 Accent 5"/>
  <w:LsdException Locked="false" Priority="69" Name="Medium Grid 3 Accent 5"/>
  <w:LsdException Locked="false" Priority="70" Name="Dark List Accent 5"/>
  <w:LsdException Locked="false" Priority="71" Name="Colorful Shading Accent 5"/>
  <w:LsdException Locked="false" Priority="72" Name="Colorful List Accent 5"/>
  <w:LsdException Locked="false" Priority="73" Name="Colorful Grid Accent 5"/>
  <w:LsdException Locked="false" Priority="60" Name="Light Shading Accent 6"/>
  <w:LsdException Locked="false" Priority="61" Name="Light List Accent 6"/>
  <w:LsdException Locked="false" Priority="62" Name="Light Grid Accent 6"/>
  <w:LsdException Locked="false" Priority="63" Name="Medium Shading 1 Accent 6"/>
  <w:LsdException Locked="false" Priority="64" Name="Medium Shading 2 Accent 6"/>
  <w:LsdException Locked="false" Priority="65" Name="Medium List 1 Accent 6"/>
  <w:LsdException Locked="false" Priority="66" Name="Medium List 2 Accent 6"/>
  <w:LsdException Locked="false" Priority="67" Name="Medium Grid 1 Accent 6"/>
  <w:LsdException Locked="false" Priority="68" Name="Medium Grid 2 Accent 6"/>
  <w:LsdException Locked="false" Priority="69" Name="Medium Grid 3 Accent 6"/>
  <w:LsdException Locked="false" Priority="70" Name="Dark List Accent 6"/>
  <w:LsdException Locked="false" Priority="71" Name="Colorful Shading Accent 6"/>
  <w:LsdException Locked="false" Priority="72" Name="Colorful List Accent 6"/>
  <w:LsdException Locked="false" Priority="73" Name="Colorful Grid Accent 6"/>
  <w:LsdException Locked="false" Priority="19" Name="Subtle Emphasis"/>
  <w:LsdException Locked="false" Priority="21" Name="Intense Emphasis"/>
  <w:LsdException Locked="false" Priority="31" Name="Subtle Reference"/>
  <w:LsdException Locked="false" Priority="32" Name="Intense Reference"/>
  <w:LsdException Locked="false" Priority="33" Name="Book Title"/>
  <w:LsdException Locked="false" Priority="37" SemiHidden="true"
   UnhideWhenUsed="true" Name="Bibliography"/>
  <w:LsdException Locked="false" Priority="39" SemiHidden="true"
   UnhideWhenUsed="true" QFormat="true" Name="TOC Heading"/>
  <w:LsdException Locked="false" Priority="41" Name="Plain Table 1"/>
  <w:LsdException Locked="false" Priority="42" Name="Plain Table 2"/>
  <w:LsdException Locked="false" Priority="43" Name="Plain Table 3"/>
  <w:LsdException Locked="false" Priority="44" Name="Plain Table 4"/>
  <w:LsdException Locked="false" Priority="45" Name="Plain Table 5"/>
  <w:LsdException Locked="false" Priority="40" Name="Grid Table Light"/>
  <w:LsdException Locked="false" Priority="46" Name="Grid Table 1 Light"/>
  <w:LsdException Locked="false" Priority="47" Name="Grid Table 2"/>
  <w:LsdException Locked="false" Priority="48" Name="Grid Table 3"/>
  <w:LsdException Locked="false" Priority="49" Name="Grid Table 4"/>
  <w:LsdException Locked="false" Priority="50" Name="Grid Table 5 Dark"/>
  <w:LsdException Locked="false" Priority="51" Name="Grid Table 6 Colorful"/>
  <w:LsdException Locked="false" Priority="52" Name="Grid Table 7 Colorful"/>
  <w:LsdException Locked="false" Priority="46"
   Name="Grid Table 1 Light Accent 1"/>
  <w:LsdException Locked="false" Priority="47" Name="Grid Table 2 Accent 1"/>
  <w:LsdException Locked="false" Priority="48" Name="Grid Table 3 Accent 1"/>
  <w:LsdException Locked="false" Priority="49" Name="Grid Table 4 Accent 1"/>
  <w:LsdException Locked="false" Priority="50" Name="Grid Table 5 Dark Accent 1"/>
  <w:LsdException Locked="false" Priority="51"
   Name="Grid Table 6 Colorful Accent 1"/>
  <w:LsdException Locked="false" Priority="52"
   Name="Grid Table 7 Colorful Accent 1"/>
  <w:LsdException Locked="false" Priority="46"
   Name="Grid Table 1 Light Accent 2"/>
  <w:LsdException Locked="false" Priority="47" Name="Grid Table 2 Accent 2"/>
  <w:LsdException Locked="false" Priority="48" Name="Grid Table 3 Accent 2"/>
  <w:LsdException Locked="false" Priority="49" Name="Grid Table 4 Accent 2"/>
  <w:LsdException Locked="false" Priority="50" Name="Grid Table 5 Dark Accent 2"/>
  <w:LsdException Locked="false" Priority="51"
   Name="Grid Table 6 Colorful Accent 2"/>
  <w:LsdException Locked="false" Priority="52"
   Name="Grid Table 7 Colorful Accent 2"/>
  <w:LsdException Locked="false" Priority="46"
   Name="Grid Table 1 Light Accent 3"/>
  <w:LsdException Locked="false" Priority="47" Name="Grid Table 2 Accent 3"/>
  <w:LsdException Locked="false" Priority="48" Name="Grid Table 3 Accent 3"/>
  <w:LsdException Locked="false" Priority="49" Name="Grid Table 4 Accent 3"/>
  <w:LsdException Locked="false" Priority="50" Name="Grid Table 5 Dark Accent 3"/>
  <w:LsdException Locked="false" Priority="51"
   Name="Grid Table 6 Colorful Accent 3"/>
  <w:LsdException Locked="false" Priority="52"
   Name="Grid Table 7 Colorful Accent 3"/>
  <w:LsdException Locked="false" Priority="46"
   Name="Grid Table 1 Light Accent 4"/>
  <w:LsdException Locked="false" Priority="47" Name="Grid Table 2 Accent 4"/>
  <w:LsdException Locked="false" Priority="48" Name="Grid Table 3 Accent 4"/>
  <w:LsdException Locked="false" Priority="49" Name="Grid Table 4 Accent 4"/>
  <w:LsdException Locked="false" Priority="50" Name="Grid Table 5 Dark Accent 4"/>
  <w:LsdException Locked="false" Priority="51"
   Name="Grid Table 6 Colorful Accent 4"/>
  <w:LsdException Locked="false" Priority="52"
   Name="Grid Table 7 Colorful Accent 4"/>
  <w:LsdException Locked="false" Priority="46"
   Name="Grid Table 1 Light Accent 5"/>
  <w:LsdException Locked="false" Priority="47" Name="Grid Table 2 Accent 5"/>
  <w:LsdException Locked="false" Priority="48" Name="Grid Table 3 Accent 5"/>
  <w:LsdException Locked="false" Priority="49" Name="Grid Table 4 Accent 5"/>
  <w:LsdException Locked="false" Priority="50" Name="Grid Table 5 Dark Accent 5"/>
  <w:LsdException Locked="false" Priority="51"
   Name="Grid Table 6 Colorful Accent 5"/>
  <w:LsdException Locked="false" Priority="52"
   Name="Grid Table 7 Colorful Accent 5"/>
  <w:LsdException Locked="false" Priority="46"
   Name="Grid Table 1 Light Accent 6"/>
  <w:LsdException Locked="false" Priority="47" Name="Grid Table 2 Accent 6"/>
  <w:LsdException Locked="false" Priority="48" Name="Grid Table 3 Accent 6"/>
  <w:LsdException Locked="false" Priority="49" Name="Grid Table 4 Accent 6"/>
  <w:LsdException Locked="false" Priority="50" Name="Grid Table 5 Dark Accent 6"/>
  <w:LsdException Locked="false" Priority="51"
   Name="Grid Table 6 Colorful Accent 6"/>
  <w:LsdException Locked="false" Priority="52"
   Name="Grid Table 7 Colorful Accent 6"/>
  <w:LsdException Locked="false" Priority="46" Name="List Table 1 Light"/>
  <w:LsdException Locked="false" Priority="47" Name="List Table 2"/>
  <w:LsdException Locked="false" Priority="48" Name="List Table 3"/>
  <w:LsdException Locked="false" Priority="49" Name="List Table 4"/>
  <w:LsdException Locked="false" Priority="50" Name="List Table 5 Dark"/>
  <w:LsdException Locked="false" Priority="51" Name="List Table 6 Colorful"/>
  <w:LsdException Locked="false" Priority="52" Name="List Table 7 Colorful"/>
  <w:LsdException Locked="false" Priority="46"
   Name="List Table 1 Light Accent 1"/>
  <w:LsdException Locked="false" Priority="47" Name="List Table 2 Accent 1"/>
  <w:LsdException Locked="false" Priority="48" Name="List Table 3 Accent 1"/>
  <w:LsdException Locked="false" Priority="49" Name="List Table 4 Accent 1"/>
  <w:LsdException Locked="false" Priority="50" Name="List Table 5 Dark Accent 1"/>
  <w:LsdException Locked="false" Priority="51"
   Name="List Table 6 Colorful Accent 1"/>
  <w:LsdException Locked="false" Priority="52"
   Name="List Table 7 Colorful Accent 1"/>
  <w:LsdException Locked="false" Priority="46"
   Name="List Table 1 Light Accent 2"/>
  <w:LsdException Locked="false" Priority="47" Name="List Table 2 Accent 2"/>
  <w:LsdException Locked="false" Priority="48" Name="List Table 3 Accent 2"/>
  <w:LsdException Locked="false" Priority="49" Name="List Table 4 Accent 2"/>
  <w:LsdException Locked="false" Priority="50" Name="List Table 5 Dark Accent 2"/>
  <w:LsdException Locked="false" Priority="51"
   Name="List Table 6 Colorful Accent 2"/>
  <w:LsdException Locked="false" Priority="52"
   Name="List Table 7 Colorful Accent 2"/>
  <w:LsdException Locked="false" Priority="46"
   Name="List Table 1 Light Accent 3"/>
  <w:LsdException Locked="false" Priority="47" Name="List Table 2 Accent 3"/>
  <w:LsdException Locked="false" Priority="48" Name="List Table 3 Accent 3"/>
  <w:LsdException Locked="false" Priority="49" Name="List Table 4 Accent 3"/>
  <w:LsdException Locked="false" Priority="50" Name="List Table 5 Dark Accent 3"/>
  <w:LsdException Locked="false" Priority="51"
   Name="List Table 6 Colorful Accent 3"/>
  <w:LsdException Locked="false" Priority="52"
   Name="List Table 7 Colorful Accent 3"/>
  <w:LsdException Locked="false" Priority="46"
   Name="List Table 1 Light Accent 4"/>
  <w:LsdException Locked="false" Priority="47" Name="List Table 2 Accent 4"/>
  <w:LsdException Locked="false" Priority="48" Name="List Table 3 Accent 4"/>
  <w:LsdException Locked="false" Priority="49" Name="List Table 4 Accent 4"/>
  <w:LsdException Locked="false" Priority="50" Name="List Table 5 Dark Accent 4"/>
  <w:LsdException Locked="false" Priority="51"
   Name="List Table 6 Colorful Accent 4"/>
  <w:LsdException Locked="false" Priority="52"
   Name="List Table 7 Colorful Accent 4"/>
  <w:LsdException Locked="false" Priority="46"
   Name="List Table 1 Light Accent 5"/>
  <w:LsdException Locked="false" Priority="47" Name="List Table 2 Accent 5"/>
  <w:LsdException Locked="false" Priority="48" Name="List Table 3 Accent 5"/>
  <w:LsdException Locked="false" Priority="49" Name="List Table 4 Accent 5"/>
  <w:LsdException Locked="false" Priority="50" Name="List Table 5 Dark Accent 5"/>
  <w:LsdException Locked="false" Priority="51"
   Name="List Table 6 Colorful Accent 5"/>
  <w:LsdException Locked="false" Priority="52"
   Name="List Table 7 Colorful Accent 5"/>
  <w:LsdException Locked="false" Priority="46"
   Name="List Table 1 Light Accent 6"/>
  <w:LsdException Locked="false" Priority="47" Name="List Table 2 Accent 6"/>
  <w:LsdException Locked="false" Priority="48" Name="List Table 3 Accent 6"/>
  <w:LsdException Locked="false" Priority="49" Name="List Table 4 Accent 6"/>
  <w:LsdException Locked="false" Priority="50" Name="List Table 5 Dark Accent 6"/>
  <w:LsdException Locked="false" Priority="51"
   Name="List Table 6 Colorful Accent 6"/>
  <w:LsdException Locked="false" Priority="52"
   Name="List Table 7 Colorful Accent 6"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Mention"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Smart Hyperlink"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Hashtag"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Unresolved Mention"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Smart Link"/>
 </w:LatentStyles>
</xml><![endif]-->
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;
	mso-font-charset:2;
	mso-generic-font-family:auto;
	mso-font-pitch:variable;
	mso-font-signature:0 268435456 0 0 -2147483648 0;}
@font-face
	{font-family:宋体;
	panose-1:2 1 6 0 3 1 1 1 1 1;
	mso-font-alt:SimSun;
	mso-font-charset:134;
	mso-generic-font-family:auto;
	mso-font-pitch:variable;
	mso-font-signature:3 680460288 22 0 262145 0;}
@font-face
	{font-family:"Cambria Math";
	panose-1:2 4 5 3 5 4 6 3 2 4;
	mso-font-charset:0;
	mso-generic-font-family:roman;
	mso-font-pitch:variable;
	mso-font-signature:3 0 0 0 1 0;}
@font-face
	{font-family:楷体;
	panose-1:2 1 6 9 6 1 1 1 1 1;
	mso-font-charset:134;
	mso-generic-font-family:modern;
	mso-font-pitch:fixed;
	mso-font-signature:-2147482945 953122042 22 0 262145 0;}
@font-face
	{font-family:隶书;
	panose-1:2 1 5 9 6 1 1 1 1 1;
	mso-font-charset:134;
	mso-generic-font-family:modern;
	mso-font-pitch:fixed;
	mso-font-signature:1 135135232 16 0 262144 0;}
@font-face
	{font-family:"\@楷体";
	mso-font-charset:134;
	mso-generic-font-family:modern;
	mso-font-pitch:fixed;
	mso-font-signature:-2147482945 953122042 22 0 262145 0;}
@font-face
	{font-family:"\@宋体";
	panose-1:2 1 6 0 3 1 1 1 1 1;
	mso-font-charset:134;
	mso-generic-font-family:auto;
	mso-font-pitch:variable;
	mso-font-signature:3 680460288 22 0 262145 0;}
@font-face
	{font-family:"\@隶书";
	mso-font-charset:134;
	mso-generic-font-family:modern;
	mso-font-pitch:fixed;
	mso-font-signature:1 135135232 16 0 262144 0;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{mso-style-unhide:no;
	mso-style-qformat:yes;
	mso-style-parent:"";
	margin-top:7.8pt;
	margin-right:0cm;
	margin-bottom:7.8pt;
	margin-left:0cm;
	mso-para-margin-top:.5gd;
	mso-para-margin-right:0cm;
	mso-para-margin-bottom:.5gd;
	mso-para-margin-left:0cm;
	text-align:justify;
	text-justify:inter-ideograph;
	mso-pagination:none;
	word-break:break-all;
	font-size:9.0pt;
	font-family:"Times New Roman",serif;
	mso-fareast-font-family:宋体;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:minor-bidi;
	mso-font-kerning:1.0pt;}
h1
	{mso-style-priority:9;
	mso-style-unhide:no;
	mso-style-link:"标题 1 字符";
	mso-style-next:正文;
	margin-top:17.0pt;
	margin-right:0cm;
	margin-bottom:16.5pt;
	margin-left:0cm;
	mso-para-margin-top:.5gd;
	mso-para-margin-right:0cm;
	mso-para-margin-bottom:.5gd;
	mso-para-margin-left:0cm;
	text-align:justify;
	text-justify:inter-ideograph;
	line-height:240%;
	mso-pagination:lines-together;
	page-break-after:avoid;
	mso-outline-level:1;
	word-break:break-all;
	font-size:16.0pt;
	font-family:"Times New Roman",serif;
	mso-fareast-font-family:宋体;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:minor-bidi;
	mso-font-kerning:22.0pt;
	font-weight:bold;}
h2
	{mso-style-priority:9;
	mso-style-link:"标题 2 字符";
	mso-style-next:正文;
	margin-top:13.0pt;
	margin-right:0cm;
	margin-bottom:13.0pt;
	margin-left:0cm;
	mso-para-margin-top:.5gd;
	mso-para-margin-right:0cm;
	mso-para-margin-bottom:.5gd;
	mso-para-margin-left:0cm;
	text-align:justify;
	text-justify:inter-ideograph;
	line-height:172%;
	mso-pagination:lines-together;
	page-break-after:avoid;
	mso-outline-level:2;
	word-break:break-all;
	font-size:14.0pt;
	font-family:"等线 Light";
	mso-ascii-font-family:"等线 Light";
	mso-ascii-theme-font:major-latin;
	mso-fareast-font-family:"等线 Light";
	mso-fareast-theme-font:major-fareast;
	mso-hansi-font-family:"等线 Light";
	mso-hansi-theme-font:major-latin;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:major-bidi;
	mso-font-kerning:1.0pt;
	font-weight:bold;}
h3
	{mso-style-priority:9;
	mso-style-link:"标题 3 字符";
	mso-style-next:正文;
	margin-top:13.0pt;
	margin-right:0cm;
	margin-bottom:13.0pt;
	margin-left:0cm;
	mso-para-margin-top:.5gd;
	mso-para-margin-right:0cm;
	mso-para-margin-bottom:.5gd;
	mso-para-margin-left:0cm;
	text-align:justify;
	text-justify:inter-ideograph;
	line-height:173%;
	mso-pagination:lines-together;
	page-break-after:avoid;
	mso-outline-level:3;
	word-break:break-all;
	font-size:16.0pt;
	font-family:"Times New Roman",serif;
	mso-fareast-font-family:宋体;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:minor-bidi;
	mso-font-kerning:1.0pt;
	font-weight:bold;}
h4
	{mso-style-noshow:yes;
	mso-style-priority:9;
	mso-style-link:"标题 4 字符";
	mso-style-next:正文;
	margin-top:14.0pt;
	margin-right:0cm;
	margin-bottom:14.5pt;
	margin-left:0cm;
	mso-para-margin-top:.5gd;
	mso-para-margin-right:0cm;
	mso-para-margin-bottom:.5gd;
	mso-para-margin-left:0cm;
	text-align:justify;
	text-justify:inter-ideograph;
	line-height:156%;
	mso-pagination:lines-together;
	page-break-after:avoid;
	mso-outline-level:4;
	word-break:break-all;
	font-size:14.0pt;
	font-family:"等线 Light";
	mso-ascii-font-family:"等线 Light";
	mso-ascii-theme-font:major-latin;
	mso-fareast-font-family:"等线 Light";
	mso-fareast-theme-font:major-fareast;
	mso-hansi-font-family:"等线 Light";
	mso-hansi-theme-font:major-latin;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:major-bidi;
	mso-font-kerning:1.0pt;
	font-weight:bold;}
p.MsoHeader, li.MsoHeader, div.MsoHeader
	{mso-style-priority:99;
	mso-style-link:"页眉 字符";
	margin-top:7.8pt;
	margin-right:0cm;
	margin-bottom:7.8pt;
	margin-left:0cm;
	mso-para-margin-top:.5gd;
	mso-para-margin-right:0cm;
	mso-para-margin-bottom:.5gd;
	mso-para-margin-left:0cm;
	text-align:center;
	mso-pagination:none;
	tab-stops:center 207.65pt right 415.3pt;
	layout-grid-mode:char;
	word-break:break-all;
	border:none;
	mso-border-bottom-alt:solid windowtext .75pt;
	padding:0cm;
	mso-padding-alt:0cm 0cm 1.0pt 0cm;
	font-size:9.0pt;
	font-family:"Times New Roman",serif;
	mso-fareast-font-family:宋体;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:minor-bidi;
	mso-font-kerning:1.0pt;}
p.MsoFooter, li.MsoFooter, div.MsoFooter
	{mso-style-priority:99;
	mso-style-link:"页脚 字符";
	margin-top:7.8pt;
	margin-right:0cm;
	margin-bottom:7.8pt;
	margin-left:0cm;
	mso-para-margin-top:.5gd;
	mso-para-margin-right:0cm;
	mso-para-margin-bottom:.5gd;
	mso-para-margin-left:0cm;
	mso-pagination:none;
	tab-stops:center 207.65pt right 415.3pt;
	layout-grid-mode:char;
	word-break:break-all;
	font-size:9.0pt;
	font-family:"Times New Roman",serif;
	mso-fareast-font-family:宋体;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:minor-bidi;
	mso-font-kerning:1.0pt;}
p.MsoTitle, li.MsoTitle, div.MsoTitle
	{mso-style-priority:10;
	mso-style-unhide:no;
	mso-style-link:"标题 字符";
	mso-style-next:正文;
	margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.0pt;
	margin-left:0cm;
	mso-para-margin-top:.5gd;
	mso-para-margin-right:0cm;
	mso-para-margin-bottom:.5gd;
	mso-para-margin-left:0cm;
	text-align:center;
	mso-pagination:none;
	mso-outline-level:1;
	word-break:break-all;
	font-size:16.0pt;
	font-family:"等线 Light";
	mso-ascii-font-family:"等线 Light";
	mso-ascii-theme-font:major-latin;
	mso-fareast-font-family:"等线 Light";
	mso-fareast-theme-font:major-fareast;
	mso-hansi-font-family:"等线 Light";
	mso-hansi-theme-font:major-latin;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:major-bidi;
	mso-font-kerning:1.0pt;
	font-weight:bold;}
a:link, span.MsoHyperlink
	{mso-style-priority:99;
	color:blue;
	text-decoration:underline;
	text-underline:single;}
a:visited, span.MsoHyperlinkFollowed
	{mso-style-noshow:yes;
	mso-style-priority:99;
	color:#954F72;
	mso-themecolor:followedhyperlink;
	text-decoration:underline;
	text-underline:single;}
p
	{mso-style-noshow:yes;
	mso-style-priority:99;
	mso-margin-top-alt:auto;
	margin-right:0cm;
	mso-margin-bottom-alt:auto;
	margin-left:0cm;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:宋体;
	mso-bidi-font-family:宋体;}
code
	{mso-style-noshow:yes;
	mso-style-priority:99;
	mso-ansi-font-size:12.0pt;
	mso-bidi-font-size:12.0pt;
	font-family:宋体;
	mso-ascii-font-family:宋体;
	mso-fareast-font-family:宋体;
	mso-hansi-font-family:宋体;
	mso-bidi-font-family:宋体;}
pre
	{mso-style-noshow:yes;
	mso-style-priority:99;
	mso-style-link:"HTML 预设格式 字符";
	margin:0cm;
	mso-pagination:widow-orphan;
	tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt;
	font-size:12.0pt;
	font-family:宋体;
	mso-bidi-font-family:宋体;}
p.MsoListParagraph, li.MsoListParagraph, div.MsoListParagraph
	{mso-style-priority:34;
	mso-style-unhide:no;
	margin-top:7.8pt;
	margin-right:0cm;
	margin-bottom:7.8pt;
	margin-left:0cm;
	mso-para-margin-top:.5gd;
	mso-para-margin-right:0cm;
	mso-para-margin-bottom:.5gd;
	mso-para-margin-left:0cm;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:21.0pt;
	mso-char-indent-count:2.0;
	mso-pagination:none;
	word-break:break-all;
	font-size:9.0pt;
	font-family:"Times New Roman",serif;
	mso-fareast-font-family:宋体;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:minor-bidi;
	mso-font-kerning:1.0pt;}
span.1
	{mso-style-name:"标题 1 字符";
	mso-style-priority:9;
	mso-style-unhide:no;
	mso-style-locked:yes;
	mso-style-link:"标题 1";
	mso-ansi-font-size:16.0pt;
	mso-bidi-font-size:16.0pt;
	mso-font-kerning:22.0pt;
	font-weight:bold;}
span.2
	{mso-style-name:"标题 2 字符";
	mso-style-priority:9;
	mso-style-unhide:no;
	mso-style-locked:yes;
	mso-style-link:"标题 2";
	mso-ansi-font-size:14.0pt;
	mso-bidi-font-size:14.0pt;
	font-family:"等线 Light";
	mso-ascii-font-family:"等线 Light";
	mso-ascii-theme-font:major-latin;
	mso-fareast-font-family:"等线 Light";
	mso-fareast-theme-font:major-fareast;
	mso-hansi-font-family:"等线 Light";
	mso-hansi-theme-font:major-latin;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:major-bidi;
	font-weight:bold;}
span.a
	{mso-style-name:"标题 字符";
	mso-style-priority:10;
	mso-style-unhide:no;
	mso-style-locked:yes;
	mso-style-link:标题;
	mso-ansi-font-size:16.0pt;
	mso-bidi-font-size:16.0pt;
	font-family:"等线 Light";
	mso-ascii-font-family:"等线 Light";
	mso-ascii-theme-font:major-latin;
	mso-fareast-font-family:"等线 Light";
	mso-fareast-theme-font:major-fareast;
	mso-hansi-font-family:"等线 Light";
	mso-hansi-theme-font:major-latin;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:major-bidi;
	font-weight:bold;}
span.3
	{mso-style-name:"标题 3 字符";
	mso-style-priority:9;
	mso-style-unhide:no;
	mso-style-locked:yes;
	mso-style-link:"标题 3";
	mso-ansi-font-size:16.0pt;
	mso-bidi-font-size:16.0pt;
	font-weight:bold;}
p.a0, li.a0, div.a0
	{mso-style-name:二级标题;
	mso-style-unhide:no;
	mso-style-qformat:yes;
	mso-style-link:"二级标题 字符";
	margin-top:7.8pt;
	margin-right:0cm;
	margin-bottom:7.8pt;
	margin-left:22.7pt;
	mso-para-margin-top:.5gd;
	mso-para-margin-right:0cm;
	mso-para-margin-bottom:.5gd;
	mso-para-margin-left:22.7pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:-22.7pt;
	line-height:200%;
	mso-pagination:none;
	mso-outline-level:2;
	mso-list:l17 level2 lfo7;
	word-break:break-all;
	font-size:9.0pt;
	font-family:"Times New Roman",serif;
	mso-fareast-font-family:宋体;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:minor-bidi;
	mso-font-kerning:1.0pt;
	font-weight:bold;}
p.a1, li.a1, div.a1
	{mso-style-name:代码;
	mso-style-unhide:no;
	mso-style-qformat:yes;
	mso-style-parent:二级标题;
	mso-style-link:"代码 字符";
	margin:0cm;
	text-align:justify;
	text-justify:inter-ideograph;
	line-height:10.0pt;
	mso-line-height-rule:exactly;
	mso-pagination:none;
	word-break:break-all;
	font-size:7.5pt;
	mso-bidi-font-size:9.0pt;
	font-family:"Courier New";
	mso-fareast-font-family:楷体;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:minor-bidi;
	color:blue;
	mso-font-kerning:1.0pt;
	font-weight:bold;}
span.a2
	{mso-style-name:"二级标题 字符";
	mso-style-unhide:no;
	mso-style-locked:yes;
	mso-style-link:二级标题;
	mso-ansi-font-size:9.0pt;
	mso-bidi-font-size:9.0pt;
	font-family:"Times New Roman",serif;
	mso-ascii-font-family:"Times New Roman";
	mso-fareast-font-family:宋体;
	mso-hansi-font-family:"Times New Roman";
	font-weight:bold;}
p.a3, li.a3, div.a3
	{mso-style-name:一级标题;
	mso-style-unhide:no;
	mso-style-qformat:yes;
	mso-style-parent:二级标题;
	mso-style-link:"一级标题 字符";
	margin-top:7.8pt;
	margin-right:0cm;
	margin-bottom:7.8pt;
	margin-left:17.0pt;
	mso-para-margin-top:.5gd;
	mso-para-margin-right:0cm;
	mso-para-margin-bottom:.5gd;
	mso-para-margin-left:17.0pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:-17.0pt;
	line-height:200%;
	mso-pagination:none;
	mso-outline-level:1;
	mso-list:l17 level1 lfo7;
	word-break:break-all;
	font-size:14.0pt;
	font-family:"Times New Roman",serif;
	mso-fareast-font-family:楷体;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:minor-bidi;
	mso-font-kerning:1.0pt;
	font-weight:bold;}
span.a4
	{mso-style-name:"代码 字符";
	mso-style-unhide:no;
	mso-style-locked:yes;
	mso-style-parent:"二级标题 字符";
	mso-style-link:代码;
	mso-ansi-font-size:7.5pt;
	mso-bidi-font-size:9.0pt;
	font-family:"Courier New";
	mso-ascii-font-family:"Courier New";
	mso-fareast-font-family:楷体;
	mso-hansi-font-family:"Courier New";
	color:blue;
	font-weight:bold;}
span.a5
	{mso-style-name:"一级标题 字符";
	mso-style-unhide:no;
	mso-style-locked:yes;
	mso-style-parent:"二级标题 字符";
	mso-style-link:一级标题;
	mso-ansi-font-size:14.0pt;
	mso-bidi-font-size:14.0pt;
	font-family:"Times New Roman",serif;
	mso-ascii-font-family:"Times New Roman";
	mso-fareast-font-family:楷体;
	mso-hansi-font-family:"Times New Roman";
	font-weight:bold;}
p.a6, li.a6, div.a6
	{mso-style-name:三级标题;
	mso-style-unhide:no;
	mso-style-qformat:yes;
	mso-style-link:"三级标题 字符";
	margin-top:7.8pt;
	margin-right:0cm;
	margin-bottom:7.8pt;
	margin-left:0cm;
	mso-para-margin-top:.5gd;
	mso-para-margin-right:0cm;
	mso-para-margin-bottom:.5gd;
	mso-para-margin-left:0cm;
	text-align:justify;
	text-justify:inter-ideograph;
	line-height:150%;
	mso-pagination:none;
	mso-outline-level:3;
	word-break:break-all;
	font-size:9.0pt;
	font-family:"Times New Roman",serif;
	mso-fareast-font-family:宋体;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:minor-bidi;
	mso-font-kerning:1.0pt;}
span.a7
	{mso-style-name:"三级标题 字符";
	mso-style-unhide:no;
	mso-style-locked:yes;
	mso-style-link:三级标题;
	mso-ansi-font-size:9.0pt;
	mso-bidi-font-size:9.0pt;
	font-family:宋体;
	mso-ascii-font-family:宋体;
	mso-fareast-font-family:宋体;
	mso-hansi-font-family:宋体;}
span.a8
	{mso-style-name:"页眉 字符";
	mso-style-priority:99;
	mso-style-unhide:no;
	mso-style-locked:yes;
	mso-style-link:页眉;
	mso-ansi-font-size:9.0pt;
	mso-bidi-font-size:9.0pt;
	font-family:宋体;
	mso-ascii-font-family:宋体;
	mso-fareast-font-family:宋体;
	mso-hansi-font-family:宋体;}
span.a9
	{mso-style-name:"页脚 字符";
	mso-style-priority:99;
	mso-style-unhide:no;
	mso-style-locked:yes;
	mso-style-link:页脚;
	mso-ansi-font-size:9.0pt;
	mso-bidi-font-size:9.0pt;
	font-family:宋体;
	mso-ascii-font-family:宋体;
	mso-fareast-font-family:宋体;
	mso-hansi-font-family:宋体;}
span.md-plain
	{mso-style-name:md-plain;
	mso-style-unhide:no;}
p.aa, li.aa, div.aa
	{mso-style-name:列表样式;
	mso-style-unhide:no;
	mso-style-qformat:yes;
	mso-style-link:"列表样式 字符";
	margin:0cm;
	text-align:justify;
	text-justify:inter-ideograph;
	mso-pagination:none;
	word-break:break-all;
	font-size:9.0pt;
	font-family:"Times New Roman",serif;
	mso-fareast-font-family:宋体;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:minor-bidi;
	mso-font-kerning:1.0pt;}
span.ab
	{mso-style-name:"列表样式 字符";
	mso-style-unhide:no;
	mso-style-locked:yes;
	mso-style-link:列表样式;
	mso-ansi-font-size:9.0pt;
	mso-bidi-font-size:9.0pt;
	font-family:宋体;
	mso-ascii-font-family:宋体;
	mso-fareast-font-family:宋体;
	mso-hansi-font-family:宋体;}
span.4
	{mso-style-name:"标题 4 字符";
	mso-style-noshow:yes;
	mso-style-priority:9;
	mso-style-unhide:no;
	mso-style-locked:yes;
	mso-style-link:"标题 4";
	mso-ansi-font-size:14.0pt;
	mso-bidi-font-size:14.0pt;
	font-family:"等线 Light";
	mso-ascii-font-family:"等线 Light";
	mso-ascii-theme-font:major-latin;
	mso-fareast-font-family:"等线 Light";
	mso-fareast-theme-font:major-fareast;
	mso-hansi-font-family:"等线 Light";
	mso-hansi-theme-font:major-latin;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:major-bidi;
	font-weight:bold;}
span.HTML
	{mso-style-name:"HTML 预设格式 字符";
	mso-style-noshow:yes;
	mso-style-priority:99;
	mso-style-unhide:no;
	mso-style-locked:yes;
	mso-style-link:"HTML 预设格式";
	mso-ansi-font-size:12.0pt;
	mso-bidi-font-size:12.0pt;
	font-family:宋体;
	mso-ascii-font-family:宋体;
	mso-fareast-font-family:宋体;
	mso-hansi-font-family:宋体;
	mso-bidi-font-family:宋体;
	mso-font-kerning:0pt;}
.MsoChpDefault
	{mso-style-type:export-only;
	mso-default-props:yes;
	font-family:等线;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:minor-bidi;}
 /* Page Definitions */
 @page
	{mso-page-border-surround-header:no;
	mso-page-border-surround-footer:no;
	mso-footnote-separator:url("版本控制器Git.files/header.htm") fs;
	mso-footnote-continuation-separator:url("版本控制器Git.files/header.htm") fcs;
	mso-endnote-separator:url("版本控制器Git.files/header.htm") es;
	mso-endnote-continuation-separator:url("版本控制器Git.files/header.htm") ecs;}
@page WordSection1
	{size:595.3pt 841.9pt;
	margin:72.0pt 54.0pt 72.0pt 54.0pt;
	mso-header-margin:42.55pt;
	mso-footer-margin:49.6pt;
	mso-even-header:url("版本控制器Git.files/header.htm") eh1;
	mso-header:url("版本控制器Git.files/header.htm") h1;
	mso-even-footer:url("版本控制器Git.files/header.htm") ef1;
	mso-footer:url("版本控制器Git.files/header.htm") f1;
	mso-first-header:url("版本控制器Git.files/header.htm") fh1;
	mso-first-footer:url("版本控制器Git.files/header.htm") ff1;
	mso-paper-source:0;
	layout-grid:15.6pt;}
div.WordSection1
	{page:WordSection1;}
@page WordSection2
	{size:595.3pt 841.9pt;
	margin:72.0pt 54.0pt 72.0pt 54.0pt;
	mso-header-margin:42.55pt;
	mso-footer-margin:49.6pt;
	mso-even-header:url("版本控制器Git.files/header.htm") eh1;
	mso-header:url("版本控制器Git.files/header.htm") h1;
	mso-even-footer:url("版本控制器Git.files/header.htm") ef1;
	mso-footer:url("版本控制器Git.files/header.htm") f1;
	mso-first-header:url("版本控制器Git.files/header.htm") fh1;
	mso-first-footer:url("版本控制器Git.files/header.htm") ff1;
	mso-paper-source:0;
	layout-grid:15.6pt;}
div.WordSection2
	{page:WordSection2;}
@page WordSection3
	{size:595.3pt 841.9pt;
	margin:72.0pt 54.0pt 72.0pt 54.0pt;
	mso-header-margin:42.55pt;
	mso-footer-margin:49.6pt;
	mso-even-header:url("版本控制器Git.files/header.htm") eh1;
	mso-header:url("版本控制器Git.files/header.htm") h1;
	mso-even-footer:url("版本控制器Git.files/header.htm") ef1;
	mso-footer:url("版本控制器Git.files/header.htm") f1;
	mso-first-header:url("版本控制器Git.files/header.htm") fh1;
	mso-first-footer:url("版本控制器Git.files/header.htm") ff1;
	mso-paper-source:0;
	layout-grid:15.6pt;}
div.WordSection3
	{page:WordSection3;}
@page WordSection4
	{size:595.3pt 841.9pt;
	margin:72.0pt 54.0pt 72.0pt 54.0pt;
	mso-header-margin:42.55pt;
	mso-footer-margin:49.6pt;
	mso-even-header:url("版本控制器Git.files/header.htm") eh1;
	mso-header:url("版本控制器Git.files/header.htm") h1;
	mso-even-footer:url("版本控制器Git.files/header.htm") ef1;
	mso-footer:url("版本控制器Git.files/header.htm") f1;
	mso-first-header:url("版本控制器Git.files/header.htm") fh1;
	mso-first-footer:url("版本控制器Git.files/header.htm") ff1;
	mso-paper-source:0;
	layout-grid:15.6pt;}
div.WordSection4
	{page:WordSection4;}
@page WordSection5
	{size:595.3pt 841.9pt;
	margin:72.0pt 54.0pt 72.0pt 54.0pt;
	mso-header-margin:42.55pt;
	mso-footer-margin:49.6pt;
	mso-even-header:url("版本控制器Git.files/header.htm") eh1;
	mso-header:url("版本控制器Git.files/header.htm") h1;
	mso-even-footer:url("版本控制器Git.files/header.htm") ef1;
	mso-footer:url("版本控制器Git.files/header.htm") f1;
	mso-first-header:url("版本控制器Git.files/header.htm") fh1;
	mso-first-footer:url("版本控制器Git.files/header.htm") ff1;
	mso-paper-source:0;
	layout-grid:15.6pt;}
div.WordSection5
	{page:WordSection5;}
@page WordSection6
	{size:595.3pt 841.9pt;
	margin:72.0pt 54.0pt 72.0pt 54.0pt;
	mso-header-margin:42.55pt;
	mso-footer-margin:49.6pt;
	mso-even-header:url("版本控制器Git.files/header.htm") eh1;
	mso-header:url("版本控制器Git.files/header.htm") h1;
	mso-even-footer:url("版本控制器Git.files/header.htm") ef1;
	mso-footer:url("版本控制器Git.files/header.htm") f1;
	mso-first-header:url("版本控制器Git.files/header.htm") fh1;
	mso-first-footer:url("版本控制器Git.files/header.htm") ff1;
	mso-paper-source:0;
	layout-grid:15.6pt;}
div.WordSection6
	{page:WordSection6;}
 /* List Definitions */
 @list l0
	{mso-list-id:6493160;
	mso-list-type:hybrid;
	mso-list-template-ids:-1645960130 67698703 67698713 67698715 67698703 67698713 67698715 67698703 67698713 67698715;}
@list l0:level1
	{mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:21.0pt;
	text-indent:-21.0pt;}
@list l0:level2
	{mso-level-number-format:alpha-lower;
	mso-level-text:"%2\)";
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:42.0pt;
	text-indent:-21.0pt;}
@list l0:level3
	{mso-level-number-format:roman-lower;
	mso-level-tab-stop:none;
	mso-level-number-position:right;
	margin-left:63.0pt;
	text-indent:-21.0pt;}
@list l0:level4
	{mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:84.0pt;
	text-indent:-21.0pt;}
@list l0:level5
	{mso-level-number-format:alpha-lower;
	mso-level-text:"%5\)";
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:105.0pt;
	text-indent:-21.0pt;}
@list l0:level6
	{mso-level-number-format:roman-lower;
	mso-level-tab-stop:none;
	mso-level-number-position:right;
	margin-left:126.0pt;
	text-indent:-21.0pt;}
@list l0:level7
	{mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:147.0pt;
	text-indent:-21.0pt;}
@list l0:level8
	{mso-level-number-format:alpha-lower;
	mso-level-text:"%8\)";
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:168.0pt;
	text-indent:-21.0pt;}
@list l0:level9
	{mso-level-number-format:roman-lower;
	mso-level-tab-stop:none;
	mso-level-number-position:right;
	margin-left:189.0pt;
	text-indent:-21.0pt;}
@list l1
	{mso-list-id:55587870;
	mso-list-type:hybrid;
	mso-list-template-ids:831042464 67698703 67698713 67698715 67698703 67698713 67698715 67698703 67698713 67698715;}
@list l1:level1
	{mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:21.0pt;
	text-indent:-21.0pt;}
@list l1:level2
	{mso-level-number-format:alpha-lower;
	mso-level-text:"%2\)";
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:42.0pt;
	text-indent:-21.0pt;}
@list l1:level3
	{mso-level-number-format:roman-lower;
	mso-level-tab-stop:none;
	mso-level-number-position:right;
	margin-left:63.0pt;
	text-indent:-21.0pt;}
@list l1:level4
	{mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:84.0pt;
	text-indent:-21.0pt;}
@list l1:level5
	{mso-level-number-format:alpha-lower;
	mso-level-text:"%5\)";
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:105.0pt;
	text-indent:-21.0pt;}
@list l1:level6
	{mso-level-number-format:roman-lower;
	mso-level-tab-stop:none;
	mso-level-number-position:right;
	margin-left:126.0pt;
	text-indent:-21.0pt;}
@list l1:level7
	{mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:147.0pt;
	text-indent:-21.0pt;}
@list l1:level8
	{mso-level-number-format:alpha-lower;
	mso-level-text:"%8\)";
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:168.0pt;
	text-indent:-21.0pt;}
@list l1:level9
	{mso-level-number-format:roman-lower;
	mso-level-tab-stop:none;
	mso-level-number-position:right;
	margin-left:189.0pt;
	text-indent:-21.0pt;}
@list l2
	{mso-list-id:213932280;
	mso-list-type:hybrid;
	mso-list-template-ids:-548521216 67698703 67698713 67698715 67698703 67698713 67698715 67698703 67698713 67698715;}
@list l2:level1
	{mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:21.0pt;
	text-indent:-21.0pt;}
@list l2:level2
	{mso-level-number-format:alpha-lower;
	mso-level-text:"%2\)";
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:42.0pt;
	text-indent:-21.0pt;}
@list l2:level3
	{mso-level-number-format:roman-lower;
	mso-level-tab-stop:none;
	mso-level-number-position:right;
	margin-left:63.0pt;
	text-indent:-21.0pt;}
@list l2:level4
	{mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:84.0pt;
	text-indent:-21.0pt;}
@list l2:level5
	{mso-level-number-format:alpha-lower;
	mso-level-text:"%5\)";
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:105.0pt;
	text-indent:-21.0pt;}
@list l2:level6
	{mso-level-number-format:roman-lower;
	mso-level-tab-stop:none;
	mso-level-number-position:right;
	margin-left:126.0pt;
	text-indent:-21.0pt;}
@list l2:level7
	{mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:147.0pt;
	text-indent:-21.0pt;}
@list l2:level8
	{mso-level-number-format:alpha-lower;
	mso-level-text:"%8\)";
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:168.0pt;
	text-indent:-21.0pt;}
@list l2:level9
	{mso-level-number-format:roman-lower;
	mso-level-tab-stop:none;
	mso-level-number-position:right;
	margin-left:189.0pt;
	text-indent:-21.0pt;}
@list l3
	{mso-list-id:295842739;
	mso-list-template-ids:1474099072;}
@list l3:level1
	{mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:11.35pt;
	text-indent:-11.35pt;}
@list l3:level2
	{mso-level-text:"%1\.%2\.";
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:22.7pt;
	text-indent:-22.7pt;}
@list l3:level3
	{mso-level-text:"%1\.%2\.%3\.";
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:35.45pt;
	text-indent:-35.45pt;}
@list l3:level4
	{mso-level-text:"%1\.%2\.%3\.%4\.";
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:42.55pt;
	text-indent:-42.55pt;}
@list l3:level5
	{mso-level-text:"%1\.%2\.%3\.%4\.%5\.";
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:49.6pt;
	text-indent:-49.6pt;}
@list l3:level6
	{mso-level-text:"%1\.%2\.%3\.%4\.%5\.%6\.";
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:2.0cm;
	text-indent:-2.0cm;}
@list l3:level7
	{mso-level-text:"%1\.%2\.%3\.%4\.%5\.%6\.%7\.";
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:63.8pt;
	text-indent:-63.8pt;}
@list l3:level8
	{mso-level-text:"%1\.%2\.%3\.%4\.%5\.%6\.%7\.%8\.";
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:70.9pt;
	text-indent:-70.9pt;}
@list l3:level9
	{mso-level-text:"%1\.%2\.%3\.%4\.%5\.%6\.%7\.%8\.%9\.";
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:77.95pt;
	text-indent:-77.95pt;}
@list l4
	{mso-list-id:319622518;
	mso-list-type:hybrid;
	mso-list-template-ids:1532235448 67698705 67698713 67698715 67698703 67698713 67698715 67698703 67698713 67698715;}
@list l4:level1
	{mso-level-text:"%1\)";
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:21.0pt;
	text-indent:-21.0pt;}
@list l4:level2
	{mso-level-number-format:alpha-lower;
	mso-level-text:"%2\)";
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:42.0pt;
	text-indent:-21.0pt;}
@list l4:level3
	{mso-level-number-format:roman-lower;
	mso-level-tab-stop:none;
	mso-level-number-position:right;
	margin-left:63.0pt;
	text-indent:-21.0pt;}
@list l4:level4
	{mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:84.0pt;
	text-indent:-21.0pt;}
@list l4:level5
	{mso-level-number-format:alpha-lower;
	mso-level-text:"%5\)";
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:105.0pt;
	text-indent:-21.0pt;}
@list l4:level6
	{mso-level-number-format:roman-lower;
	mso-level-tab-stop:none;
	mso-level-number-position:right;
	margin-left:126.0pt;
	text-indent:-21.0pt;}
@list l4:level7
	{mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:147.0pt;
	text-indent:-21.0pt;}
@list l4:level8
	{mso-level-number-format:alpha-lower;
	mso-level-text:"%8\)";
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:168.0pt;
	text-indent:-21.0pt;}
@list l4:level9
	{mso-level-number-format:roman-lower;
	mso-level-tab-stop:none;
	mso-level-number-position:right;
	margin-left:189.0pt;
	text-indent:-21.0pt;}
@list l5
	{mso-list-id:362294264;
	mso-list-template-ids:966414904;}
@list l5:level1
	{mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:11.35pt;
	text-indent:-11.35pt;}
@list l5:level2
	{mso-level-text:"%1\.%2\.";
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:22.7pt;
	text-indent:-22.7pt;
	mso-ansi-font-size:9.0pt;
	mso-bidi-font-size:9.0pt;}
@list l5:level3
	{mso-level-text:"%1\.%2\.%3\.";
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:35.45pt;
	text-indent:-35.45pt;}
@list l5:level4
	{mso-level-text:"%1\.%2\.%3\.%4\.";
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:42.55pt;
	text-indent:-42.55pt;}
@list l5:level5
	{mso-level-text:"%1\.%2\.%3\.%4\.%5\.";
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:49.6pt;
	text-indent:-49.6pt;}
@list l5:level6
	{mso-level-text:"%1\.%2\.%3\.%4\.%5\.%6\.";
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:2.0cm;
	text-indent:-2.0cm;}
@list l5:level7
	{mso-level-text:"%1\.%2\.%3\.%4\.%5\.%6\.%7\.";
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:63.8pt;
	text-indent:-63.8pt;}
@list l5:level8
	{mso-level-text:"%1\.%2\.%3\.%4\.%5\.%6\.%7\.%8\.";
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:70.9pt;
	text-indent:-70.9pt;}
@list l5:level9
	{mso-level-text:"%1\.%2\.%3\.%4\.%5\.%6\.%7\.%8\.%9\.";
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:77.95pt;
	text-indent:-77.95pt;}
@list l6
	{mso-list-id:383330230;
	mso-list-type:hybrid;
	mso-list-template-ids:1722480416 67698703 67698713 67698715 67698703 67698713 67698715 67698703 67698713 67698715;}
@list l6:level1
	{mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:21.0pt;
	text-indent:-21.0pt;}
@list l6:level2
	{mso-level-number-format:alpha-lower;
	mso-level-text:"%2\)";
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:42.0pt;
	text-indent:-21.0pt;}
@list l6:level3
	{mso-level-number-format:roman-lower;
	mso-level-tab-stop:none;
	mso-level-number-position:right;
	margin-left:63.0pt;
	text-indent:-21.0pt;}
@list l6:level4
	{mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:84.0pt;
	text-indent:-21.0pt;}
@list l6:level5
	{mso-level-number-format:alpha-lower;
	mso-level-text:"%5\)";
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:105.0pt;
	text-indent:-21.0pt;}
@list l6:level6
	{mso-level-number-format:roman-lower;
	mso-level-tab-stop:none;
	mso-level-number-position:right;
	margin-left:126.0pt;
	text-indent:-21.0pt;}
@list l6:level7
	{mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:147.0pt;
	text-indent:-21.0pt;}
@list l6:level8
	{mso-level-number-format:alpha-lower;
	mso-level-text:"%8\)";
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:168.0pt;
	text-indent:-21.0pt;}
@list l6:level9
	{mso-level-number-format:roman-lower;
	mso-level-tab-stop:none;
	mso-level-number-position:right;
	margin-left:189.0pt;
	text-indent:-21.0pt;}
@list l7
	{mso-list-id:406080202;
	mso-list-type:hybrid;
	mso-list-template-ids:-962402774 67698699 67698691 67698693 67698689 67698691 67698693 67698689 67698691 67698693;}
@list l7:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0D8;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:21.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l7:level2
	{mso-level-number-format:bullet;
	mso-level-text:\F06E;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:42.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l7:level3
	{mso-level-number-format:bullet;
	mso-level-text:\F075;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:63.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l7:level4
	{mso-level-number-format:bullet;
	mso-level-text:\F06C;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:84.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l7:level5
	{mso-level-number-format:bullet;
	mso-level-text:\F06E;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:105.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l7:level6
	{mso-level-number-format:bullet;
	mso-level-text:\F075;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:126.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l7:level7
	{mso-level-number-format:bullet;
	mso-level-text:\F06C;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:147.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l7:level8
	{mso-level-number-format:bullet;
	mso-level-text:\F06E;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:168.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l7:level9
	{mso-level-number-format:bullet;
	mso-level-text:\F075;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:189.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l8
	{mso-list-id:519900266;
	mso-list-type:hybrid;
	mso-list-template-ids:-545498766 67698703 67698713 67698715 67698703 67698713 67698715 67698703 67698713 67698715;}
@list l8:level1
	{mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:21.0pt;
	text-indent:-21.0pt;}
@list l8:level2
	{mso-level-number-format:alpha-lower;
	mso-level-text:"%2\)";
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:42.0pt;
	text-indent:-21.0pt;}
@list l8:level3
	{mso-level-number-format:roman-lower;
	mso-level-tab-stop:none;
	mso-level-number-position:right;
	margin-left:63.0pt;
	text-indent:-21.0pt;}
@list l8:level4
	{mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:84.0pt;
	text-indent:-21.0pt;}
@list l8:level5
	{mso-level-number-format:alpha-lower;
	mso-level-text:"%5\)";
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:105.0pt;
	text-indent:-21.0pt;}
@list l8:level6
	{mso-level-number-format:roman-lower;
	mso-level-tab-stop:none;
	mso-level-number-position:right;
	margin-left:126.0pt;
	text-indent:-21.0pt;}
@list l8:level7
	{mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:147.0pt;
	text-indent:-21.0pt;}
@list l8:level8
	{mso-level-number-format:alpha-lower;
	mso-level-text:"%8\)";
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:168.0pt;
	text-indent:-21.0pt;}
@list l8:level9
	{mso-level-number-format:roman-lower;
	mso-level-tab-stop:none;
	mso-level-number-position:right;
	margin-left:189.0pt;
	text-indent:-21.0pt;}
@list l9
	{mso-list-id:589704032;
	mso-list-type:hybrid;
	mso-list-template-ids:-1442818526 67698699 67698691 67698693 67698689 67698691 67698693 67698689 67698691 67698693;}
@list l9:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0D8;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:21.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l9:level2
	{mso-level-number-format:bullet;
	mso-level-text:\F06E;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:42.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l9:level3
	{mso-level-number-format:bullet;
	mso-level-text:\F075;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:63.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l9:level4
	{mso-level-number-format:bullet;
	mso-level-text:\F06C;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:84.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l9:level5
	{mso-level-number-format:bullet;
	mso-level-text:\F06E;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:105.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l9:level6
	{mso-level-number-format:bullet;
	mso-level-text:\F075;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:126.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l9:level7
	{mso-level-number-format:bullet;
	mso-level-text:\F06C;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:147.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l9:level8
	{mso-level-number-format:bullet;
	mso-level-text:\F06E;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:168.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l9:level9
	{mso-level-number-format:bullet;
	mso-level-text:\F075;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:189.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l10
	{mso-list-id:770007531;
	mso-list-type:hybrid;
	mso-list-template-ids:-750716162 67698703 67698713 67698715 67698703 67698713 67698715 67698703 67698713 67698715;}
@list l10:level1
	{mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:21.0pt;
	text-indent:-21.0pt;}
@list l10:level2
	{mso-level-number-format:alpha-lower;
	mso-level-text:"%2\)";
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:42.0pt;
	text-indent:-21.0pt;}
@list l10:level3
	{mso-level-number-format:roman-lower;
	mso-level-tab-stop:none;
	mso-level-number-position:right;
	margin-left:63.0pt;
	text-indent:-21.0pt;}
@list l10:level4
	{mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:84.0pt;
	text-indent:-21.0pt;}
@list l10:level5
	{mso-level-number-format:alpha-lower;
	mso-level-text:"%5\)";
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:105.0pt;
	text-indent:-21.0pt;}
@list l10:level6
	{mso-level-number-format:roman-lower;
	mso-level-tab-stop:none;
	mso-level-number-position:right;
	margin-left:126.0pt;
	text-indent:-21.0pt;}
@list l10:level7
	{mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:147.0pt;
	text-indent:-21.0pt;}
@list l10:level8
	{mso-level-number-format:alpha-lower;
	mso-level-text:"%8\)";
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:168.0pt;
	text-indent:-21.0pt;}
@list l10:level9
	{mso-level-number-format:roman-lower;
	mso-level-tab-stop:none;
	mso-level-number-position:right;
	margin-left:189.0pt;
	text-indent:-21.0pt;}
@list l11
	{mso-list-id:792793973;
	mso-list-type:hybrid;
	mso-list-template-ids:1071024426 67698699 67698691 67698693 67698689 67698691 67698693 67698689 67698691 67698693;}
@list l11:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0D8;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:21.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l11:level2
	{mso-level-number-format:bullet;
	mso-level-text:\F06E;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:42.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l11:level3
	{mso-level-number-format:bullet;
	mso-level-text:\F075;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:63.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l11:level4
	{mso-level-number-format:bullet;
	mso-level-text:\F06C;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:84.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l11:level5
	{mso-level-number-format:bullet;
	mso-level-text:\F06E;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:105.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l11:level6
	{mso-level-number-format:bullet;
	mso-level-text:\F075;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:126.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l11:level7
	{mso-level-number-format:bullet;
	mso-level-text:\F06C;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:147.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l11:level8
	{mso-level-number-format:bullet;
	mso-level-text:\F06E;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:168.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l11:level9
	{mso-level-number-format:bullet;
	mso-level-text:\F075;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:189.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l12
	{mso-list-id:1286692283;
	mso-list-type:hybrid;
	mso-list-template-ids:1266582574 67698699 67698699 67698693 67698689 67698691 67698693 67698689 67698691 67698693;}
@list l12:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0D8;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:21.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l12:level2
	{mso-level-number-format:bullet;
	mso-level-text:\F0D8;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:42.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l12:level3
	{mso-level-number-format:bullet;
	mso-level-text:\F075;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:63.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l12:level4
	{mso-level-number-format:bullet;
	mso-level-text:\F06C;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:84.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l12:level5
	{mso-level-number-format:bullet;
	mso-level-text:\F06E;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:105.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l12:level6
	{mso-level-number-format:bullet;
	mso-level-text:\F075;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:126.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l12:level7
	{mso-level-number-format:bullet;
	mso-level-text:\F06C;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:147.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l12:level8
	{mso-level-number-format:bullet;
	mso-level-text:\F06E;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:168.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l12:level9
	{mso-level-number-format:bullet;
	mso-level-text:\F075;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:189.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l13
	{mso-list-id:1379354277;
	mso-list-template-ids:67698717;}
@list l13:level1
	{mso-level-text:%1;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:21.25pt;
	text-indent:-21.25pt;}
@list l13:level2
	{mso-level-text:"%1\.%2";
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:49.6pt;
	text-indent:-1.0cm;}
@list l13:level3
	{mso-level-text:"%1\.%2\.%3";
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:70.9pt;
	text-indent:-1.0cm;}
@list l13:level4
	{mso-level-text:"%1\.%2\.%3\.%4";
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:99.2pt;
	text-indent:-35.4pt;}
@list l13:level5
	{mso-level-text:"%1\.%2\.%3\.%4\.%5";
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:127.55pt;
	text-indent:-42.5pt;}
@list l13:level6
	{mso-level-text:"%1\.%2\.%3\.%4\.%5\.%6";
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:163.0pt;
	text-indent:-2.0cm;}
@list l13:level7
	{mso-level-text:"%1\.%2\.%3\.%4\.%5\.%6\.%7";
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:191.35pt;
	text-indent:-63.8pt;}
@list l13:level8
	{mso-level-text:"%1\.%2\.%3\.%4\.%5\.%6\.%7\.%8";
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:219.7pt;
	text-indent:-70.9pt;}
@list l13:level9
	{mso-level-text:"%1\.%2\.%3\.%4\.%5\.%6\.%7\.%8\.%9";
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:255.1pt;
	text-indent:-85.0pt;}
@list l14
	{mso-list-id:1414858746;
	mso-list-type:hybrid;
	mso-list-template-ids:1643544876 67698699 67698691 67698693 67698689 67698691 67698693 67698689 67698691 67698693;}
@list l14:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0D8;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:21.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l14:level2
	{mso-level-number-format:bullet;
	mso-level-text:\F06E;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:42.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l14:level3
	{mso-level-number-format:bullet;
	mso-level-text:\F075;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:63.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l14:level4
	{mso-level-number-format:bullet;
	mso-level-text:\F06C;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:84.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l14:level5
	{mso-level-number-format:bullet;
	mso-level-text:\F06E;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:105.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l14:level6
	{mso-level-number-format:bullet;
	mso-level-text:\F075;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:126.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l14:level7
	{mso-level-number-format:bullet;
	mso-level-text:\F06C;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:147.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l14:level8
	{mso-level-number-format:bullet;
	mso-level-text:\F06E;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:168.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l14:level9
	{mso-level-number-format:bullet;
	mso-level-text:\F075;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:189.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l15
	{mso-list-id:1559196863;
	mso-list-type:hybrid;
	mso-list-template-ids:910746942 67698703 67698713 67698715 67698703 67698713 67698715 67698703 67698713 67698715;}
@list l15:level1
	{mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:21.0pt;
	text-indent:-21.0pt;}
@list l15:level2
	{mso-level-number-format:alpha-lower;
	mso-level-text:"%2\)";
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:42.0pt;
	text-indent:-21.0pt;}
@list l15:level3
	{mso-level-number-format:roman-lower;
	mso-level-tab-stop:none;
	mso-level-number-position:right;
	margin-left:63.0pt;
	text-indent:-21.0pt;}
@list l15:level4
	{mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:84.0pt;
	text-indent:-21.0pt;}
@list l15:level5
	{mso-level-number-format:alpha-lower;
	mso-level-text:"%5\)";
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:105.0pt;
	text-indent:-21.0pt;}
@list l15:level6
	{mso-level-number-format:roman-lower;
	mso-level-tab-stop:none;
	mso-level-number-position:right;
	margin-left:126.0pt;
	text-indent:-21.0pt;}
@list l15:level7
	{mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:147.0pt;
	text-indent:-21.0pt;}
@list l15:level8
	{mso-level-number-format:alpha-lower;
	mso-level-text:"%8\)";
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:168.0pt;
	text-indent:-21.0pt;}
@list l15:level9
	{mso-level-number-format:roman-lower;
	mso-level-tab-stop:none;
	mso-level-number-position:right;
	margin-left:189.0pt;
	text-indent:-21.0pt;}
@list l16
	{mso-list-id:1593388700;
	mso-list-type:hybrid;
	mso-list-template-ids:-1092071868 67698699 67698699 67698693 67698689 67698691 67698693 67698689 67698691 67698693;}
@list l16:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0D8;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:21.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l16:level2
	{mso-level-number-format:bullet;
	mso-level-text:\F0D8;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:42.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l16:level3
	{mso-level-number-format:bullet;
	mso-level-text:\F075;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:63.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l16:level4
	{mso-level-number-format:bullet;
	mso-level-text:\F06C;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:84.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l16:level5
	{mso-level-number-format:bullet;
	mso-level-text:\F06E;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:105.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l16:level6
	{mso-level-number-format:bullet;
	mso-level-text:\F075;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:126.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l16:level7
	{mso-level-number-format:bullet;
	mso-level-text:\F06C;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:147.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l16:level8
	{mso-level-number-format:bullet;
	mso-level-text:\F06E;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:168.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l16:level9
	{mso-level-number-format:bullet;
	mso-level-text:\F075;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:189.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l17
	{mso-list-id:1626303566;
	mso-list-template-ids:-1199003386;}
@list l17:level1
	{mso-level-style-link:一级标题;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:17.0pt;
	text-indent:-17.0pt;}
@list l17:level2
	{mso-level-style-link:二级标题;
	mso-level-text:"%1\.%2\.";
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:22.7pt;
	text-indent:-22.7pt;
	mso-ansi-font-size:9.0pt;
	mso-bidi-font-size:9.0pt;}
@list l17:level3
	{mso-level-text:"%1\.%2\.%3\.";
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:35.45pt;
	text-indent:-35.45pt;}
@list l17:level4
	{mso-level-text:"%1\.%2\.%3\.%4\.";
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:42.55pt;
	text-indent:-42.55pt;}
@list l17:level5
	{mso-level-text:"%1\.%2\.%3\.%4\.%5\.";
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:49.6pt;
	text-indent:-49.6pt;}
@list l17:level6
	{mso-level-text:"%1\.%2\.%3\.%4\.%5\.%6\.";
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:2.0cm;
	text-indent:-2.0cm;}
@list l17:level7
	{mso-level-text:"%1\.%2\.%3\.%4\.%5\.%6\.%7\.";
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:63.8pt;
	text-indent:-63.8pt;}
@list l17:level8
	{mso-level-text:"%1\.%2\.%3\.%4\.%5\.%6\.%7\.%8\.";
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:70.9pt;
	text-indent:-70.9pt;}
@list l17:level9
	{mso-level-text:"%1\.%2\.%3\.%4\.%5\.%6\.%7\.%8\.%9\.";
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:77.95pt;
	text-indent:-77.95pt;}
@list l18
	{mso-list-id:1715227659;
	mso-list-type:hybrid;
	mso-list-template-ids:-383238484 67698689 67698691 67698693 67698689 67698691 67698693 67698689 67698691 67698693;}
@list l18:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F06C;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:21.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l18:level2
	{mso-level-number-format:bullet;
	mso-level-text:\F06E;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:42.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l18:level3
	{mso-level-number-format:bullet;
	mso-level-text:\F075;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:63.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l18:level4
	{mso-level-number-format:bullet;
	mso-level-text:\F06C;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:84.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l18:level5
	{mso-level-number-format:bullet;
	mso-level-text:\F06E;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:105.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l18:level6
	{mso-level-number-format:bullet;
	mso-level-text:\F075;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:126.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l18:level7
	{mso-level-number-format:bullet;
	mso-level-text:\F06C;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:147.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l18:level8
	{mso-level-number-format:bullet;
	mso-level-text:\F06E;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:168.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l18:level9
	{mso-level-number-format:bullet;
	mso-level-text:\F075;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:189.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l19
	{mso-list-id:1749187423;
	mso-list-type:hybrid;
	mso-list-template-ids:-1576639266 67698699 67698691 67698693 67698689 67698691 67698693 67698689 67698691 67698693;}
@list l19:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0D8;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:42.05pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l19:level2
	{mso-level-number-format:bullet;
	mso-level-text:\F06E;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:63.05pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l19:level3
	{mso-level-number-format:bullet;
	mso-level-text:\F075;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:84.05pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l19:level4
	{mso-level-number-format:bullet;
	mso-level-text:\F06C;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:105.05pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l19:level5
	{mso-level-number-format:bullet;
	mso-level-text:\F06E;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:126.05pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l19:level6
	{mso-level-number-format:bullet;
	mso-level-text:\F075;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:147.05pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l19:level7
	{mso-level-number-format:bullet;
	mso-level-text:\F06C;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:168.05pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l19:level8
	{mso-level-number-format:bullet;
	mso-level-text:\F06E;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:189.05pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l19:level9
	{mso-level-number-format:bullet;
	mso-level-text:\F075;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:210.05pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l20
	{mso-list-id:1782846025;
	mso-list-type:hybrid;
	mso-list-template-ids:-1058537064 67698707 67698713 67698715 67698703 67698713 67698715 67698703 67698713 67698715;}
@list l20:level1
	{mso-level-number-format:chinese-counting-thousand;
	mso-level-text:%1、;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:21.0pt;
	text-indent:-21.0pt;}
@list l20:level2
	{mso-level-number-format:alpha-lower;
	mso-level-text:"%2\)";
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:42.0pt;
	text-indent:-21.0pt;}
@list l20:level3
	{mso-level-number-format:roman-lower;
	mso-level-tab-stop:none;
	mso-level-number-position:right;
	margin-left:63.0pt;
	text-indent:-21.0pt;}
@list l20:level4
	{mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:84.0pt;
	text-indent:-21.0pt;}
@list l20:level5
	{mso-level-number-format:alpha-lower;
	mso-level-text:"%5\)";
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:105.0pt;
	text-indent:-21.0pt;}
@list l20:level6
	{mso-level-number-format:roman-lower;
	mso-level-tab-stop:none;
	mso-level-number-position:right;
	margin-left:126.0pt;
	text-indent:-21.0pt;}
@list l20:level7
	{mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:147.0pt;
	text-indent:-21.0pt;}
@list l20:level8
	{mso-level-number-format:alpha-lower;
	mso-level-text:"%8\)";
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:168.0pt;
	text-indent:-21.0pt;}
@list l20:level9
	{mso-level-number-format:roman-lower;
	mso-level-tab-stop:none;
	mso-level-number-position:right;
	margin-left:189.0pt;
	text-indent:-21.0pt;}
@list l21
	{mso-list-id:1817069136;
	mso-list-type:hybrid;
	mso-list-template-ids:1836205748 -1953751084 67698691 67698693 67698689 67698691 67698693 67698689 67698691 67698693;}
@list l21:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0D8;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:45.8pt;
	text-indent:-21.0pt;
	font-family:Wingdings;
	color:windowtext;}
@list l21:level2
	{mso-level-number-format:bullet;
	mso-level-text:\F06E;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:66.8pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l21:level3
	{mso-level-number-format:bullet;
	mso-level-text:\F075;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:87.8pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l21:level4
	{mso-level-number-format:bullet;
	mso-level-text:\F06C;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:108.8pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l21:level5
	{mso-level-number-format:bullet;
	mso-level-text:\F06E;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:129.8pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l21:level6
	{mso-level-number-format:bullet;
	mso-level-text:\F075;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:150.8pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l21:level7
	{mso-level-number-format:bullet;
	mso-level-text:\F06C;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:171.8pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l21:level8
	{mso-level-number-format:bullet;
	mso-level-text:\F06E;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:192.8pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l21:level9
	{mso-level-number-format:bullet;
	mso-level-text:\F075;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:213.8pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
ol
	{margin-bottom:0cm;}
ul
	{margin-bottom:0cm;}
-->
</style>
<!--[if gte mso 10]>
<style>
 /* Style Definitions */
 table.MsoNormalTable
	{mso-style-name:普通表格;
	mso-tstyle-rowband-size:0;
	mso-tstyle-colband-size:0;
	mso-style-noshow:yes;
	mso-style-priority:99;
	mso-style-parent:"";
	mso-padding-alt:0cm 5.4pt 0cm 5.4pt;
	mso-para-margin:0cm;
	mso-pagination:widow-orphan;
	font-size:10.5pt;
	mso-bidi-font-size:11.0pt;
	font-family:等线;
	mso-ascii-font-family:等线;
	mso-ascii-theme-font:minor-latin;
	mso-fareast-font-family:等线;
	mso-fareast-theme-font:minor-fareast;
	mso-hansi-font-family:等线;
	mso-hansi-theme-font:minor-latin;
	mso-font-kerning:1.0pt;}
table.MsoTableGrid
	{mso-style-name:网格型;
	mso-tstyle-rowband-size:0;
	mso-tstyle-colband-size:0;
	mso-style-priority:39;
	mso-style-unhide:no;
	border:solid windowtext 1.0pt;
	mso-border-alt:solid windowtext .5pt;
	mso-padding-alt:0cm 5.4pt 0cm 5.4pt;
	mso-border-insideh:.5pt solid windowtext;
	mso-border-insidev:.5pt solid windowtext;
	mso-para-margin:0cm;
	mso-pagination:widow-orphan;
	font-size:10.5pt;
	mso-bidi-font-size:11.0pt;
	font-family:等线;
	mso-ascii-font-family:等线;
	mso-ascii-theme-font:minor-latin;
	mso-fareast-font-family:等线;
	mso-fareast-theme-font:minor-fareast;
	mso-hansi-font-family:等线;
	mso-hansi-theme-font:minor-latin;
	mso-font-kerning:1.0pt;}
table.MsoTable15List7ColorfulAccent4
	{mso-style-name:"清单表 7 彩色 - 着色 4";
	mso-tstyle-rowband-size:1;
	mso-tstyle-colband-size:1;
	mso-style-priority:52;
	mso-style-unhide:no;
	mso-padding-alt:0cm 5.4pt 0cm 5.4pt;
	mso-para-margin:0cm;
	mso-pagination:widow-orphan;
	font-size:10.5pt;
	mso-bidi-font-size:11.0pt;
	font-family:等线;
	mso-ascii-font-family:等线;
	mso-ascii-theme-font:minor-latin;
	mso-fareast-font-family:等线;
	mso-fareast-theme-font:minor-fareast;
	mso-hansi-font-family:等线;
	mso-hansi-theme-font:minor-latin;
	color:#BF8F00;
	mso-themecolor:accent4;
	mso-themeshade:191;
	mso-font-kerning:1.0pt;}
table.MsoTable15List7ColorfulAccent4FirstRow
	{mso-style-name:"清单表 7 彩色 - 着色 4";
	mso-table-condition:first-row;
	mso-style-priority:52;
	mso-style-unhide:no;
	mso-tstyle-shading:white;
	mso-tstyle-shading-themecolor:background1;
	mso-tstyle-border-bottom:.5pt solid #FFC000;
	mso-tstyle-border-bottom-themecolor:accent4;
	font-size:13.0pt;
	mso-ansi-font-size:13.0pt;
	font-family:"等线 Light";
	mso-ascii-font-family:"等线 Light";
	mso-ascii-theme-font:major-latin;
	mso-fareast-font-family:"等线 Light";
	mso-fareast-theme-font:major-fareast;
	mso-hansi-font-family:"等线 Light";
	mso-hansi-theme-font:major-latin;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:major-bidi;
	mso-ansi-font-style:italic;
	mso-bidi-font-style:italic;}
table.MsoTable15List7ColorfulAccent4LastRow
	{mso-style-name:"清单表 7 彩色 - 着色 4";
	mso-table-condition:last-row;
	mso-style-priority:52;
	mso-style-unhide:no;
	mso-tstyle-shading:white;
	mso-tstyle-shading-themecolor:background1;
	mso-tstyle-border-top:.5pt solid #FFC000;
	mso-tstyle-border-top-themecolor:accent4;
	font-size:13.0pt;
	mso-ansi-font-size:13.0pt;
	font-family:"等线 Light";
	mso-ascii-font-family:"等线 Light";
	mso-ascii-theme-font:major-latin;
	mso-fareast-font-family:"等线 Light";
	mso-fareast-theme-font:major-fareast;
	mso-hansi-font-family:"等线 Light";
	mso-hansi-theme-font:major-latin;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:major-bidi;
	mso-ansi-font-style:italic;
	mso-bidi-font-style:italic;}
table.MsoTable15List7ColorfulAccent4FirstCol
	{mso-style-name:"清单表 7 彩色 - 着色 4";
	mso-table-condition:first-column;
	mso-style-priority:52;
	mso-style-unhide:no;
	mso-tstyle-shading:white;
	mso-tstyle-shading-themecolor:background1;
	mso-tstyle-border-right:.5pt solid #FFC000;
	mso-tstyle-border-right-themecolor:accent4;
	text-align:right;
	font-size:13.0pt;
	mso-ansi-font-size:13.0pt;
	font-family:"等线 Light";
	mso-ascii-font-family:"等线 Light";
	mso-ascii-theme-font:major-latin;
	mso-fareast-font-family:"等线 Light";
	mso-fareast-theme-font:major-fareast;
	mso-hansi-font-family:"等线 Light";
	mso-hansi-theme-font:major-latin;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:major-bidi;
	mso-ansi-font-style:italic;
	mso-bidi-font-style:italic;}
table.MsoTable15List7ColorfulAccent4LastCol
	{mso-style-name:"清单表 7 彩色 - 着色 4";
	mso-table-condition:last-column;
	mso-style-priority:52;
	mso-style-unhide:no;
	mso-tstyle-shading:white;
	mso-tstyle-shading-themecolor:background1;
	mso-tstyle-border-left:.5pt solid #FFC000;
	mso-tstyle-border-left-themecolor:accent4;
	font-size:13.0pt;
	mso-ansi-font-size:13.0pt;
	font-family:"等线 Light";
	mso-ascii-font-family:"等线 Light";
	mso-ascii-theme-font:major-latin;
	mso-fareast-font-family:"等线 Light";
	mso-fareast-theme-font:major-fareast;
	mso-hansi-font-family:"等线 Light";
	mso-hansi-theme-font:major-latin;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:major-bidi;
	mso-ansi-font-style:italic;
	mso-bidi-font-style:italic;}
table.MsoTable15List7ColorfulAccent4OddColumn
	{mso-style-name:"清单表 7 彩色 - 着色 4";
	mso-table-condition:odd-column;
	mso-style-priority:52;
	mso-style-unhide:no;
	mso-tstyle-shading:#FFF2CC;
	mso-tstyle-shading-themecolor:accent4;
	mso-tstyle-shading-themetint:51;}
table.MsoTable15List7ColorfulAccent4OddRow
	{mso-style-name:"清单表 7 彩色 - 着色 4";
	mso-table-condition:odd-row;
	mso-style-priority:52;
	mso-style-unhide:no;
	mso-tstyle-shading:#FFF2CC;
	mso-tstyle-shading-themecolor:accent4;
	mso-tstyle-shading-themetint:51;}
table.MsoTable15List7ColorfulAccent4NECell
	{mso-style-name:"清单表 7 彩色 - 着色 4";
	mso-table-condition:ne-cell;
	mso-style-priority:52;
	mso-style-unhide:no;
	mso-tstyle-border-left:cell-none;}
table.MsoTable15List7ColorfulAccent4NWCell
	{mso-style-name:"清单表 7 彩色 - 着色 4";
	mso-table-condition:nw-cell;
	mso-style-priority:52;
	mso-style-unhide:no;
	mso-tstyle-border-right:cell-none;}
table.MsoTable15List7ColorfulAccent4SECell
	{mso-style-name:"清单表 7 彩色 - 着色 4";
	mso-table-condition:se-cell;
	mso-style-priority:52;
	mso-style-unhide:no;
	mso-tstyle-border-left:cell-none;}
table.MsoTable15List7ColorfulAccent4SWCell
	{mso-style-name:"清单表 7 彩色 - 着色 4";
	mso-table-condition:sw-cell;
	mso-style-priority:52;
	mso-style-unhide:no;
	mso-tstyle-border-right:cell-none;}
table.ac
	{mso-style-name:代码样式;
	mso-tstyle-rowband-size:0;
	mso-tstyle-colband-size:0;
	mso-style-priority:99;
	mso-style-unhide:no;
	mso-padding-alt:2.85pt 2.85pt 2.85pt 2.85pt;
	mso-tstyle-shading:#D9D9D9;
	mso-tstyle-shading-themecolor:background1;
	mso-tstyle-shading-themeshade:217;
	mso-para-margin:0cm;
	mso-pagination:widow-orphan;
	font-size:10.5pt;
	mso-bidi-font-size:11.0pt;
	font-family:等线;
	mso-ascii-font-family:等线;
	mso-ascii-theme-font:minor-latin;
	mso-fareast-font-family:等线;
	mso-fareast-theme-font:minor-fareast;
	mso-hansi-font-family:等线;
	mso-hansi-theme-font:minor-latin;
	mso-font-kerning:1.0pt;}
</style>
<![endif]--><!--[if gte mso 9]><xml>
 <o:shapedefaults v:ext="edit" spidmax="2050"/>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <o:shapelayout v:ext="edit">
  <o:idmap v:ext="edit" data="2"/>
 </o:shapelayout></xml><![endif]-->
</head>
<body lang=ZH-CN link=blue vlink="#954F72" style='tab-interval:21.0pt;
word-wrap:break-word;text-justify-trim:punctuation'>
<div class=WordSection1 style='layout-grid:15.6pt'>
<p class=a3 style='mso-list:l17 level1 lfo7'><![if !supportLists]><span
lang=EN-US style='mso-fareast-font-family:"Times New Roman";mso-bidi-font-family:
"Times New Roman"'><span style='mso-list:Ignore'>1.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span lang=EN-US>git</span><span
style='font-family:楷体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>基础概念</span></p>
<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>git</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>客户端并不只是提取最新版本的文件快照，而是把代码仓库完整的镜像下来</span><span lang=EN-US>,git</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>核心本质上是一个键值对数据库。可以向该数据库插入任意类型的内容，他会返回一个键值，通过该值可以在任意时刻再次检索该内容。</span></p>
<p class=a0 style='mso-list:l17 level2 lfo7'><![if !supportLists]><span
lang=EN-US style='mso-fareast-font-family:"Times New Roman";mso-bidi-font-family:
"Times New Roman"'><span style='mso-list:Ignore'>1.1.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span lang=EN-US>Git</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>发展史</span></p>
<p class=MsoNormal align=center style='text-align:center'><span lang=EN-US><v:shapetype
 id="_x0000_t75" coordsize="21600,21600" o:spt="75" o:preferrelative="t"
 path="m@4@5l@4@11@9@11@9@5xe" filled="f" stroked="f">
 <v:stroke joinstyle="miter"/>
 <v:formulas>
  <v:f eqn="if lineDrawn pixelLineWidth 0"/>
  <v:f eqn="sum @0 1 0"/>
  <v:f eqn="sum 0 0 @1"/>
  <v:f eqn="prod @2 1 2"/>
  <v:f eqn="prod @3 21600 pixelWidth"/>
  <v:f eqn="prod @3 21600 pixelHeight"/>
  <v:f eqn="sum @0 0 1"/>
  <v:f eqn="prod @6 1 2"/>
  <v:f eqn="prod @7 21600 pixelWidth"/>
  <v:f eqn="sum @8 21600 0"/>
  <v:f eqn="prod @7 21600 pixelHeight"/>
  <v:f eqn="sum @10 21600 0"/>
 </v:formulas>
 <v:path o:extrusionok="f" gradientshapeok="t" o:connecttype="rect"/>
 <o:lock v:ext="edit" aspectratio="t"/>
</v:shapetype><v:shape id="_x0000_i1025" type="#_x0000_t75" style='width:285.75pt;
 height:207.75pt' o:ole="">
 <v:imagedata src="版本控制器Git.files/image001.emz" o:title="" croptop="5381f"
  cropbottom="16335f" cropleft="20353f" cropright="11333f"/>
</v:shape><!--[if gte mso 9]><xml>
 <o:OLEObject Type="Embed" ProgID="PowerPoint.Show.12" ShapeID="_x0000_i1025"
  DrawAspect="Content" ObjectID="_1729872945">
 </o:OLEObject>
</xml><![endif]--></span></p>
<p class=a0 style='mso-list:l17 level2 lfo7'><![if !supportLists]><span
lang=EN-US style='mso-fareast-font-family:"Times New Roman";mso-bidi-font-family:
"Times New Roman"'><span style='mso-list:Ignore'>1.2.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>工作区</span></p>
<p class=MsoNormal><span lang=EN-US style='color:black;mso-color-alt:windowtext;
background:white'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";color:black;mso-color-alt:windowtext;background:white'>工作区是当前工作空间，也是当前能在本地文件夹下面看到的文件结构。初始化工作空间或者工作空间</span><span
lang=EN-US style='color:black;mso-color-alt:windowtext;background:white'> clean
</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman";color:black;mso-color-alt:windowtext;
background:white'>的时候，文件内容和</span><span lang=EN-US style='color:black;
mso-color-alt:windowtext;background:white'> index </span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";color:black;mso-color-alt:windowtext;background:white'>暂存区是一致的，随着修改，工作区文件在没有添加到暂存区时候，工作区将和暂存区是不一致的。</span></p>
<p class=a0 style='mso-list:l17 level2 lfo7'><![if !supportLists]><span
lang=EN-US style='mso-fareast-font-family:"Times New Roman";mso-bidi-font-family:
"Times New Roman"'><span style='mso-list:Ignore'>1.3.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>暂存区</span></p>
<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>暂存操作会对先每一个文件计算校验和</span><span lang=EN-US>checksum</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>（</span><span lang=EN-US>Git </span><span style='font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>使用</span><span
lang=EN-US>SHA-1 </span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>算法计算数据的校验和，通过对文件的内容或目录的结构计算出一个</span><span
lang=EN-US>SHA-1 </span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>哈希值，作为指纹字符串</span><span lang=EN-US>,</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>该字串由</span><span lang=EN-US>40 </span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>个十六进制字符</span><span lang=EN-US>,</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>并将此结果作为数据的唯一标识和索引），然后把当前版本的文件快照保存到本地</span><span lang=EN-US>Git
</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>仓库中（</span><span lang=EN-US>Git </span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>使用</span><span lang=EN-US>blob </span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>类型的对象存储这些文件内容快照），并将校验和加入暂存区域。<span style='color:red'>注意：所有保存在</span></span><span
lang=EN-US style='color:red'>Git </span><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman";color:red'>数据库中的东西都是用此哈希值来作索引的，不是靠文件名。</span></p>
<p class=a0 style='mso-list:l17 level2 lfo7'><![if !supportLists]><span
lang=EN-US style='mso-fareast-font-family:"Times New Roman";mso-bidi-font-family:
"Times New Roman"'><span style='mso-list:Ignore'>1.4.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>本地库</span></p>
<p class=MsoNormal><span lang=EN-US style='color:black;mso-color-alt:windowtext;
background:white'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>git
</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman";color:black;mso-color-alt:windowtext;
background:white'>是分布式版本控制系统，和其他版本控制系统不同的是他可以完全去中心化工作，你可以不用和中央服务器进行通信，在本地即可进行全部离线操作，包括</span><span
lang=EN-US style='color:black;mso-color-alt:windowtext;background:white'> log</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";color:black;mso-color-alt:windowtext;background:white'>，</span><span
lang=EN-US style='color:black;mso-color-alt:windowtext;background:white'>history</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";color:black;mso-color-alt:windowtext;background:white'>，</span><span
lang=EN-US style='color:black;mso-color-alt:windowtext;background:white'>commit</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";color:black;mso-color-alt:windowtext;background:white'>，</span><span
lang=EN-US style='color:black;mso-color-alt:windowtext;background:white'>diff </span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";color:black;mso-color-alt:windowtext;background:white'>等等。完成离线操作最核心是因为</span><span
lang=EN-US style='color:black;mso-color-alt:windowtext;background:white'> git </span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";color:black;mso-color-alt:windowtext;background:white'>有一个几乎和远程一样的本地仓库，所有本地离线操作都可以在本地完成，等需要的时候再和远程服务进行交互。</span><span
lang=EN-US style='background:white'><o:p></o:p></span></p>
<p class=a0 style='mso-list:l17 level2 lfo7'><![if !supportLists]><span
lang=EN-US style='mso-fareast-font-family:"Times New Roman";mso-bidi-font-family:
"Times New Roman"'><span style='mso-list:Ignore'>1.5.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>远程仓库</span><span
lang=EN-US style='font-size:18.0pt;line-height:200%'><o:p></o:p></span></p>
<p class=MsoNormal><span lang=EN-US style='color:black;mso-color-alt:windowtext;
background:white'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";color:black;mso-color-alt:windowtext;background:white'>中心化仓库，所有人共享，本地仓库会需要和远程仓库进行交互，也就能将其他所有人内容更新到本地仓库把自己内容上传分享给其他人。结构大体和本地仓库一样。</span></p>
</div>
<p><b><span lang=EN-US style='font-size:14.0pt;line-height:200%;font-family:"Times New Roman",serif;
mso-fareast-font-family:楷体;mso-bidi-theme-font:minor-bidi;mso-ansi-language:
EN-US;mso-fareast-language:ZH-CN;mso-bidi-language:AR-SA'><br clear=all
style='page-break-before:always;mso-break-type:section-break'><br>
</span></b></p>
<div class=WordSection2 style='layout-grid:15.6pt'>
<p class=a3 style='mso-list:l17 level1 lfo7'><![if !supportLists]><span
lang=EN-US style='mso-fareast-font-family:"Times New Roman";mso-bidi-font-family:
"Times New Roman"'><span style='mso-list:Ignore'>2.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span lang=EN-US>.git</span><span
style='font-family:楷体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>目录下文件的介绍</span></p>
<p class=aa><span lang=EN-US><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>hooks
<span style='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>(</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>钩子函数的一个库</span> <span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>类似于回调函数</span><span
lang=EN-US>)</span></p>
<p class=aa><span lang=EN-US><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>info<span
style='mso-tab-count:3'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>(</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>包含一个全局性的排除文件</span><span lang=EN-US>)</span></p>
<p class=aa><span lang=EN-US><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>objects
<span style='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>(</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>目录存储所有数据内容</span><span lang=EN-US>)</span></p>
<p class=aa><span lang=EN-US><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>refs<span
style='mso-tab-count:3'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>(</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>目录存储指向数据（分支）的提交对象的指针</span><span lang=EN-US>)</span></p>
<p class=aa><span lang=EN-US><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>config<span
style='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>(</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>文件包含项目特有的配置选项</span><span lang=EN-US>)</span></p>
<p class=aa><span lang=EN-US><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>description<span
style='mso-tab-count:1'> </span><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>(</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>显示对仓库的描述信息</span><span lang=EN-US>)</span></p>
<p class=aa><span lang=EN-US><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>HEAD
<span style='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>(</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>文件目前被检出的分支</span><span lang=EN-US>)</span></p>
<p class=aa><span lang=EN-US><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>logs
<span style='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>(</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>日志信息</span><span lang=EN-US>)</span></p>
<p class=aa><span lang=EN-US><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>index<span
style='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>(</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>文件保存暂存区的信息</span><span lang=EN-US>)</span></p>
</div>
<p><span lang=EN-US style='font-size:9.0pt;font-family:"Times New Roman",serif;
mso-fareast-font-family:宋体;mso-bidi-theme-font:minor-bidi;mso-ansi-language:
EN-US;mso-fareast-language:ZH-CN;mso-bidi-language:AR-SA'><br clear=all
style='page-break-before:always;mso-break-type:section-break'><br>
</span></p>
<div class=WordSection3 style='layout-grid:15.6pt'>
<p class=aa><span lang=EN-US><o:p>&nbsp;</o:p></span></p>
<p class=a3 style='mso-list:l17 level1 lfo7'><![if !supportLists]><span
class=md-plain><span lang=EN-US style='mso-fareast-font-family:"Times New Roman";
mso-bidi-font-family:"Times New Roman"'><span style='mso-list:Ignore'>3.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span></span><![endif]><span
class=md-plain><span lang=EN-US>Git</span></span><span class=md-plain><span
style='font-family:楷体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>的四个对象</span><span lang=EN-US><o:p></o:p></span></span></p>
<p class=MsoNormal><span lang=EN-US style='color:black;mso-color-alt:windowtext;
background:white'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>git
</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman";color:black;mso-color-alt:windowtext;
background:white'>主要有四个对象，分别是</span><span lang=EN-US style='color:black;
mso-color-alt:windowtext;background:white'> Blob</span><span style='font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman";
color:black;mso-color-alt:windowtext;background:white'>，</span><span
lang=EN-US style='color:black;mso-color-alt:windowtext;background:white'>Tree</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";color:black;mso-color-alt:windowtext;background:white'>，</span><span
lang=EN-US style='color:black;mso-color-alt:windowtext;background:white'>
Commit</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman";color:black;mso-color-alt:windowtext;
background:white'>，</span><span lang=EN-US style='color:black;mso-color-alt:
windowtext;background:white'> Tag </span><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman";
color:black;mso-color-alt:windowtext;background:white'>他们都用</span><span
lang=EN-US style='color:black;mso-color-alt:windowtext;background:white'> SHA-1
</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman";color:black;mso-color-alt:windowtext;
background:white'>进行命名。可以用</span><span style='color:black;mso-color-alt:windowtext;
background:white'> </span><span class=a4><span lang=EN-US style='font-size:
7.5pt;mso-bidi-font-size:9.0pt;mso-bidi-font-family:"Times New Roman";
mso-bidi-theme-font:minor-bidi'>git cat-file -t</span></span><span lang=EN-US
style='color:black;mso-color-alt:windowtext;background:white'> </span><span
class=a4><span lang=EN-US style='font-size:7.5pt;mso-bidi-font-size:9.0pt;
mso-bidi-font-family:"Times New Roman";mso-bidi-theme-font:minor-bidi'>{hash}</span></span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";color:black;mso-color-alt:windowtext;background:white'>查看每个</span><span
lang=EN-US style='color:black;mso-color-alt:windowtext;background:white'> SHA-1
</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman";color:black;mso-color-alt:windowtext;
background:white'>的类型，用</span><span style='color:black;mso-color-alt:windowtext;
background:white'> </span><span class=a4><span lang=EN-US style='font-size:
7.5pt;mso-bidi-font-size:9.0pt;mso-bidi-font-family:"Times New Roman";
mso-bidi-theme-font:minor-bidi'>git cat-file -p {hash}</span></span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";color:black;mso-color-alt:windowtext;background:white'>查看每个对象的内容和简单的数据结构。</span><span
class=a4><span lang=EN-US style='font-size:7.5pt;mso-bidi-font-size:9.0pt;
mso-bidi-font-family:"Times New Roman";mso-bidi-theme-font:minor-bidi'>git
cat-file </span></span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman";color:black;mso-color-alt:windowtext;
background:white'>是</span><span lang=EN-US style='color:black;mso-color-alt:
windowtext;background:white'> git </span><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman";
color:black;mso-color-alt:windowtext;background:white'>的瑞士军刀，是底层核心命令。</span></p>
<p class=a0 style='mso-list:l17 level2 lfo7'><![if !supportLists]><span
lang=EN-US style='mso-fareast-font-family:"Times New Roman";mso-bidi-font-family:
"Times New Roman"'><span style='mso-list:Ignore'>3.1.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span lang=EN-US>git </span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>对象</span></p>
<p class=MsoNormal><span lang=EN-US style='color:black;mso-color-alt:windowtext;
background:white'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>git</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";color:black;mso-color-alt:windowtext;background:white'>对象的类型为</span><span
lang=EN-US style='color:black;mso-color-alt:windowtext;background:white'>blob</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";color:black;mso-color-alt:windowtext;background:white'>。他只用于存储单个文件内容，一般都是压缩过二进制的数据文件，不包含任何其他文件信息，比如不包含文件名和其他元数据。</span></p>
<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>可以用下面命令返回一个内容的</span><span lang=EN-US>hash</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>值用来标识这句话，但是并没有实际保存。内容不一样对应的</span><span lang=EN-US>hash</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>值不一样。</span></p>
<p class=a1><span lang=EN-US><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>echo &quot;hello&quot;
| git hash-object --stdin </span></p>
<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>下面命令使用</span> <span lang=EN-US>-w </span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>的选项，同样会返回一个</span><span lang=EN-US>hash</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>值用来标识这句话，但也会实际保存一个</span><span lang=EN-US>blob</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>对象的文件。</span></p>
<p class=a1><span lang=EN-US><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>echo &quot;hello&quot;
| git hash-object -w --stdin </span></p>
<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>查看有没有存在</span> <span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>可以通过</span><span
class=a4><span lang=EN-US style='font-size:7.5pt;mso-bidi-font-size:9.0pt;
mso-bidi-font-family:"Times New Roman";mso-bidi-theme-font:minor-bidi'> find .
-type f</span></span><span lang=EN-US> </span><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>找对应</span><span
lang=EN-US>hash</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>的文件，里面的内容是压缩的，通过</span><span class=a4><span
lang=EN-US style='font-size:7.5pt;mso-bidi-font-size:9.0pt;mso-bidi-font-family:
"Times New Roman";mso-bidi-theme-font:minor-bidi'> git cat-file -p {hash} </span></span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>查看内容。使用</span> <span class=a4><span lang=EN-US
style='font-size:7.5pt;mso-bidi-font-size:9.0pt;mso-bidi-font-family:"Times New Roman";
mso-bidi-theme-font:minor-bidi'>git cat-file -t <a name="_Hlk45915862">{hash} </a></span></span><span
style='mso-bookmark:_Hlk45915862'></span><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>查看</span><span
lang=EN-US>git</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>对象的类型为</span><span lang=EN-US> blob</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>。</span></p>
<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>上面的操作都是通过标准输入执行，下面我们新建一个名为</span><span lang=EN-US>a.txt</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>的文件，并将其添加到</span><span lang=EN-US>git</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>数据库中生成一个</span><span lang=EN-US>git</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>对象。</span></p>
<p class=a1><span lang=EN-US><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>git hash-object -w
a.txt</span></p>
<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>如果文件更改</span><span lang=EN-US>git</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>数据库里面不会自动的添加要手动添加过去</span> <span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>这时会再添加一个</span><span
lang=EN-US>git</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>对象，也就是说文件的改动不会修改原</span><span
lang=EN-US>blob</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>对象，</span> <span style='font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>他会再次把该文件添加为一个新的</span><span
lang=EN-US>blob</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>对象。使用下面命令添加修改过的文件。</span></p>
<p class=a1><span lang=EN-US><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>git hash-object -w
a.txt</span></p>
<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>实质上</span><span lang=EN-US>Git</span><span style='font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>对象是一个</span><span
lang=EN-US>KYE</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>：</span><span lang=EN-US>VALUE </span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>（</span><span lang=EN-US>hash/value</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）类型数据库，</span><span lang=EN-US>git</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>对象不能当作项目的一次快照，只是组成项目的一部分，那么将存在下面问题。记住文件的每一个（版本）对应的</span><span
lang=EN-US>hash</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>值并不现实，在</span><span lang=EN-US>git</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>中，文件名并没有被保存，只能通过</span><span lang=EN-US>hash</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>检索。而且。<span style='color:red'>注意：此时的操作只是针对本地库进行操作，并不涉及暂存区。</span></span></p>
<p class=a0 style='mso-list:l17 level2 lfo7'><![if !supportLists]><span
lang=EN-US style='mso-fareast-font-family:"Times New Roman";mso-bidi-font-family:
"Times New Roman"'><span style='mso-list:Ignore'>3.2.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>树对象</span></p>
<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>树对象类型为</span><span lang=EN-US>Tree</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>。对应文件系统的目录结构，里面主要有：子目录</span><span lang=EN-US> (tree)</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>，文件列表</span><span lang=EN-US> (blob)</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>，文件类型以及一些数据文件权限模型等。树对象能够解决文件名保存的问题，也允许我们将多个文件组织到一起。暂存区中文件名字不变，如果改变文件的内容，就会重新生成一个</span><span
lang=EN-US>hash</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>。可以通过</span><span lang=EN-US>update-index</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>、</span><span lang=EN-US>write-tree</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>，</span><span lang=EN-US>read-tree </span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>等命令构建树对象。树对象存在以下问题：</span></p>
<p class=aa style='margin-left:42.0pt;text-indent:-21.0pt;mso-list:l16 level2 lfo11'><![if !supportLists]><span
lang=EN-US style='font-family:Wingdings;mso-fareast-font-family:Wingdings;
mso-bidi-font-family:Wingdings'><span style='mso-list:Ignore'>&Oslash;<span
style='font:7.0pt "Times New Roman"'>&nbsp; </span></span></span><![endif]><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>不知道</span><span lang=EN-US>hash</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>值对应的是哪一个版本</span></p>
<p class=aa style='margin-left:42.0pt;text-indent:-21.0pt;mso-list:l16 level2 lfo11'><![if !supportLists]><span
lang=EN-US style='font-family:Wingdings;mso-fareast-font-family:Wingdings;
mso-bidi-font-family:Wingdings'><span style='mso-list:Ignore'>&Oslash;<span
style='font:7.0pt "Times New Roman"'>&nbsp; </span></span></span><![endif]><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>不知道这个版本的一些基础信息</span></p>
<p class=a0 style='mso-list:l17 level2 lfo7'><![if !supportLists]><span
lang=EN-US style='mso-fareast-font-family:"Times New Roman";mso-bidi-font-family:
"Times New Roman"'><span style='mso-list:Ignore'>3.3.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>提交对象</span></p>
<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>提交对象类型为</span><span lang=EN-US>Commit</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>。他是一次修改的集合，是当前所有修改的文件的一个集合，可以类比一批操作的“事务”。是修改过的文件集的一个快照，随着一次提交（</span><span
lang=EN-US>commit</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>）操作，修改过的文件将会被提交到本地库中。通过提交对象，在版本化中可以检索出每次修改内容，是版本化的基石。提交对象有如下特点：</span></p>
<p class=aa style='margin-left:42.0pt;text-indent:-21.0pt;mso-list:l12 level2 lfo12'><![if !supportLists]><span
lang=EN-US style='font-family:Wingdings;mso-fareast-font-family:Wingdings;
mso-bidi-font-family:Wingdings'><span style='mso-list:Ignore'>&Oslash;<span
style='font:7.0pt "Times New Roman"'>&nbsp; </span></span></span><![endif]><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>提交对象完美的解决了上面的问题</span></p>
<p class=aa style='margin-left:42.0pt;text-indent:-21.0pt;mso-list:l12 level2 lfo12'><![if !supportLists]><span
lang=EN-US style='font-family:Wingdings;mso-fareast-font-family:Wingdings;
mso-bidi-font-family:Wingdings'><span style='mso-list:Ignore'>&Oslash;<span
style='font:7.0pt "Times New Roman"'>&nbsp; </span></span></span><![endif]><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>本质就是给树对象做一层包裹包含项目的基础信息</span></p>
<p class=aa style='margin-left:42.0pt;text-indent:-21.0pt;mso-list:l12 level2 lfo12'><![if !supportLists]><span
lang=EN-US style='font-family:Wingdings;mso-fareast-font-family:Wingdings;
mso-bidi-font-family:Wingdings'><span style='mso-list:Ignore'>&Oslash;<span
style='font:7.0pt "Times New Roman"'>&nbsp; </span></span></span><![endif]><span
lang=EN-US>commit-tree</span><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>创建一个提交对象，为此需要指定一个树对象的</span><span
lang=EN-US>hash</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>值</span><span lang=EN-US>,</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>以及该提交的父提交对象</span><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp; </span></span></p>
<p class=aa style='margin-left:42.0pt;text-indent:-21.0pt;mso-list:l12 level2 lfo12'><![if !supportLists]><span
lang=EN-US style='font-family:Wingdings;mso-fareast-font-family:Wingdings;
mso-bidi-font-family:Wingdings'><span style='mso-list:Ignore'>&Oslash;<span
style='font:7.0pt "Times New Roman"'>&nbsp; </span></span></span><![endif]><span
lang=EN-US>echo &quot;First commit&quot; | git commit-tree 019fb2c52 -p d248eb19a125c</span></p>
<p class=aa style='margin-left:42.0pt;text-indent:-21.0pt;mso-list:l12 level2 lfo12'><![if !supportLists]><span
lang=EN-US style='font-family:Wingdings;mso-fareast-font-family:Wingdings;
mso-bidi-font-family:Wingdings'><span style='mso-list:Ignore'>&Oslash;<span
style='font:7.0pt "Times New Roman"'>&nbsp; </span></span></span><![endif]><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>真正代表一个项目的是一个提交对象（数据和基本信息）这是一个链式的！！</span></p>
<p class=a0 style='mso-list:l17 level2 lfo7'><![if !supportLists]><span
lang=EN-US style='mso-fareast-font-family:"Times New Roman";mso-bidi-font-family:
"Times New Roman"'><span style='mso-list:Ignore'>3.4.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span lang=EN-US>tag </span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>对象</span></p>
<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>tag
</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>是一个“固化的分支”，一旦打上</span><span
lang=EN-US> tag </span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>之后，这个</span><span lang=EN-US> tag </span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>代表的内容将永远不可变，因为</span><span lang=EN-US> tag </span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>只会关联当时版本库中最后一个</span><span lang=EN-US> commit </span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>对象。分支随着不断的提交，内容会不断的改变，因为分支指向的最后一个</span><span lang=EN-US>
commit </span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>不断改变。所以一般应用或者软件版本的发布一般用</span><span
lang=EN-US> tag</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>。</span></p>
<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>tag
</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>的两种类型</span></p>
<p class=MsoListParagraph style='margin-left:21.0pt;text-indent:-21.0pt;
mso-char-indent-count:0;mso-list:l11 level1 lfo6'><![if !supportLists]><span
lang=EN-US style='font-family:Wingdings;mso-fareast-font-family:Wingdings;
mso-bidi-font-family:Wingdings'><span style='mso-list:Ignore'>&Oslash;<span
style='font:7.0pt "Times New Roman"'>&nbsp; </span></span></span><![endif]><span
lang=EN-US>ightweight (</span><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>轻量级</span><span
lang=EN-US>)</span></p>
<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>创建命令：</span><span class=a4><span lang=EN-US
style='font-size:7.5pt;mso-bidi-font-size:9.0pt;mso-bidi-font-family:"Times New Roman";
mso-bidi-theme-font:minor-bidi'>git tag tagName</span></span></p>
<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>这种方式创建的</span><span lang=EN-US> Tag</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>，</span><span lang=EN-US>git </span><span style='font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>底层不会创建一个真正意义上的</span><span
lang=EN-US> tag </span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>对象，而是直接指向一个提交对象，此时如果使用</span><span
lang=EN-US> git cat-file -t tagName </span><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>会返回一个</span><span
lang=EN-US> commit </span><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>对象。</span></p>
<p class=MsoNormal align=center style='text-align:center'><span lang=EN-US
style='mso-no-proof:yes'><v:shape id="图片_x0020_2" o:spid="_x0000_i1043" type="#_x0000_t75"
 style='width:368.25pt;height:94.5pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="版本控制器Git.files/image002.png" o:title="" croptop="33544f"/>
</v:shape></span></p>
<p class=MsoListParagraph style='margin-left:21.0pt;text-indent:-21.0pt;
mso-char-indent-count:0;mso-list:l11 level1 lfo6'><![if !supportLists]><span
lang=EN-US style='font-family:Wingdings;mso-fareast-font-family:Wingdings;
mso-bidi-font-family:Wingdings'><span style='mso-list:Ignore'>&Oslash;<span
style='font:7.0pt "Times New Roman"'>&nbsp; </span></span></span><![endif]><span
lang=EN-US>annotated (</span><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>含附注</span><span
lang=EN-US>)</span></p>
<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>创建命令：</span><span class=a4><span lang=EN-US
style='font-size:7.5pt;mso-bidi-font-size:9.0pt;mso-bidi-font-family:"Times New Roman";
mso-bidi-theme-font:minor-bidi'>git tag -a tagName -m ''</span></span></p>
<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>这种方式创建的标签，</span><span lang=EN-US>git </span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>底层会创建一个</span><span lang=EN-US> tag </span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>对象，</span><span lang=EN-US>tag </span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>对象会包含相关的提交对象信息和标签等额外信息，此时如果使用</span><span lang=EN-US> git cat-file
-t tagName </span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>会返回一个</span><span lang=EN-US> tag </span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>对象。如果想对之前的提交打标签，那么只需要找到对应的</span><span lang=EN-US>hash</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>即可。</span></p>
<p class=MsoNormal align=center style='text-align:center'><span lang=EN-US
style='mso-no-proof:yes'><v:shape id="图片_x0020_4" o:spid="_x0000_i1042" type="#_x0000_t75"
 style='width:369pt;height:78.75pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="版本控制器Git.files/image003.png" o:title=""/>
</v:shape></span></p>
</div>
<p><span lang=EN-US style='font-size:9.0pt;font-family:"Times New Roman",serif;
mso-fareast-font-family:宋体;mso-bidi-theme-font:minor-bidi;mso-ansi-language:
EN-US;mso-fareast-language:ZH-CN;mso-bidi-language:AR-SA'><br clear=all
style='page-break-before:always;mso-break-type:section-break'><br>
</span></p>
<div class=WordSection4 style='layout-grid:15.6pt'>
<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>
<p class=a3 style='mso-list:l17 level1 lfo7'><![if !supportLists]><span
lang=EN-US style='mso-fareast-font-family:"Times New Roman";mso-bidi-font-family:
"Times New Roman"'><span style='mso-list:Ignore'>4.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:楷体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>仓库配置</span></p>
<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>在进行仓库配置的时候，如果指定</span> <span lang=EN-US>--system </span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>，则是系统级别的配置，将会对所有的用户生效。指定</span><span lang=EN-US> -global </span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>的时候，会对当前用户生效。没有指定</span> <span lang=EN-US>--system </span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>或者</span> <span lang=EN-US>--global </span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>的时候，只在当前仓库生效。</span></p>
<p class=a0 style='mso-list:l17 level2 lfo7'><![if !supportLists]><span
lang=EN-US style='mso-fareast-font-family:"Times New Roman";mso-bidi-font-family:
"Times New Roman"'><span style='mso-list:Ignore'>4.1.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>中文配置</span></p>
<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>git
status</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>查看有改动但未提交的文件时总只显示数字串，显示不出中文文件名。在默认设置下，中文文件名在工作区状态输出，中文名不能正确显示，而是显示为八进制的字符编码。将</span><span
lang=EN-US>git </span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>配置文件</span><span lang=EN-US>
core.quotepath</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>项设置为</span><span lang=EN-US>false</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>，即可解决。</span><span lang=EN-US>quotepath</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>表示引用路径。</span></p>
<table class=ac border=0 cellspacing=0 cellpadding=0 style='border-collapse:
 collapse;mso-yfti-tbllook:1184;mso-padding-alt:2.85pt 2.85pt 2.85pt 2.85pt'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td width=650 valign=top style='width:487.3pt;background:#D9D9D9;mso-background-themecolor:
  background1;mso-background-themeshade:217;padding:2.85pt 2.85pt 2.85pt 2.85pt'>
  <p class=a1><span lang=EN-US>git config --system core.quotepath false</span></p>
  </td>
 </tr>
</table>
<p class=a0 style='mso-list:l17 level2 lfo7'><![if !supportLists]><span
lang=EN-US style='mso-fareast-font-family:"Times New Roman";mso-bidi-font-family:
"Times New Roman"'><span style='mso-list:Ignore'>4.2.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>项目级别</span></p>
<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>仓库级别仅在当前本地库范围内有效，信息保存位置：</span><span
lang=EN-US>.git/config </span><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>文件</span></p>
<table class=ac border=0 cellspacing=0 cellpadding=0 style='border-collapse:
 collapse;mso-yfti-tbllook:1184;mso-padding-alt:2.85pt 2.85pt 2.85pt 2.85pt'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td width=649 valign=top style='width:486.8pt;background:#D9D9D9;mso-background-themecolor:
  background1;mso-background-themeshade:217;padding:2.85pt 2.85pt 2.85pt 2.85pt'>
  <p class=a1><span lang=EN-US>git config user.name zhangsan</span></p>
  <p class=a1><span lang=EN-US>git config user.email zsadmin@admin.com</span></p>
  </td>
 </tr>
</table>
<p class=a0 style='mso-list:l17 level2 lfo7'><![if !supportLists]><span
lang=EN-US style='mso-fareast-font-family:"Times New Roman";mso-bidi-font-family:
"Times New Roman"'><span style='mso-list:Ignore'>4.3.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>系统用户级别</span></p>
<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>登录当前操作系统的用户范围，信息保存位置：</span><span
lang=EN-US>~/.gitconfig </span><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>文件。注意用户名称和邮箱不一定是一样的。</span></p>
<table class=ac border=0 cellspacing=0 cellpadding=0 style='border-collapse:
 collapse;mso-yfti-tbllook:1184;mso-padding-alt:2.85pt 2.85pt 2.85pt 2.85pt'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td width=649 valign=top style='width:486.8pt;background:#D9D9D9;mso-background-themecolor:
  background1;mso-background-themeshade:217;padding:2.85pt 2.85pt 2.85pt 2.85pt'>
  <p class=a1><span lang=EN-US>git config --global user.name zhangsan</span></p>
  <p class=a1><span lang=EN-US>git config --global user.email zsadmin@admin.com</span></p>
  </td>
 </tr>
</table>
<p class=a0 style='mso-list:l17 level2 lfo7'><![if !supportLists]><span
lang=EN-US style='mso-fareast-font-family:"Times New Roman";mso-bidi-font-family:
"Times New Roman"'><span style='mso-list:Ignore'>4.4.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>命令别名配置</span></p>
<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>将</span><span lang=EN-US>git log
--oneline --decorate --graph --all </span><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>配置别名为：</span><span
lang=EN-US> git logall<span style='mso-spacerun:yes'>&nbsp; </span></span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>（用户级别配置）</span></p>
<table class=ac border=0 cellspacing=0 cellpadding=0 style='border-collapse:
 collapse;mso-yfti-tbllook:1184;mso-padding-alt:2.85pt 2.85pt 2.85pt 2.85pt'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td width=650 valign=top style='width:487.3pt;background:#D9D9D9;mso-background-themecolor:
  background1;mso-background-themeshade:217;padding:2.85pt 2.85pt 2.85pt 2.85pt'>
  <p class=a1><span lang=EN-US>git config --global alias.logall &quot;log
  --oneline --decorate --graph --all&quot;</span></p>
  </td>
 </tr>
</table>
<p class=a0 style='mso-list:l17 level2 lfo7'><![if !supportLists]><span
lang=EN-US style='mso-fareast-font-family:"Times New Roman";mso-bidi-font-family:
"Times New Roman"'><span style='mso-list:Ignore'>4.5.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>查看配置</span></p>
<table class=ac border=0 cellspacing=0 cellpadding=0 style='border-collapse:
 collapse;mso-yfti-tbllook:1184;mso-padding-alt:2.85pt 2.85pt 2.85pt 2.85pt'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td width=650 valign=top style='width:487.3pt;background:#D9D9D9;mso-background-themecolor:
  background1;mso-background-themeshade:217;padding:2.85pt 2.85pt 2.85pt 2.85pt'>
  <p class=a1><span style='font-family:楷体;mso-ascii-font-family:"Courier New";
  mso-hansi-font-family:"Courier New"'>查看系统</span><span lang=EN-US>config</span></p>
  <p class=a1><span lang=EN-US><span
  style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>git config --system --list</span></p>
  <p class=a1><span style='font-family:楷体;mso-ascii-font-family:"Courier New";
  mso-hansi-font-family:"Courier New"'>查看当前用户（</span><span lang=EN-US>global</span><span
  style='font-family:楷体;mso-ascii-font-family:"Courier New";mso-hansi-font-family:
  "Courier New"'>）配置</span></p>
  <p class=a1><span lang=EN-US><span
  style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>git config --global<span
  style='mso-spacerun:yes'>&nbsp; </span>--list</span></p>
  <p class=a1><span style='font-family:楷体;mso-ascii-font-family:"Courier New";
  mso-hansi-font-family:"Courier New"'>查看当前仓库配置信息</span></p>
  <p class=a1><span lang=EN-US><span
  style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>git config --local<span
  style='mso-spacerun:yes'>&nbsp; </span>--list</span></p>
  </td>
 </tr>
</table>
<p class=a6 style='margin-left:35.45pt;text-indent:-35.45pt;mso-list:l17 level3 lfo7'><![if !supportLists]><span
lang=EN-US style='mso-fareast-font-family:"Times New Roman";mso-bidi-font-family:
"Times New Roman"'><span style='mso-list:Ignore'>4.5.1.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>可以使用如下方式</span></p>
<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>这种方式可以查看同时也可以编辑</span></p>
<table class=ac border=0 cellspacing=0 cellpadding=0 style='border-collapse:
 collapse;mso-yfti-tbllook:1184;mso-padding-alt:2.85pt 2.85pt 2.85pt 2.85pt'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td width=650 valign=top style='width:487.3pt;background:#D9D9D9;mso-background-themecolor:
  background1;mso-background-themeshade:217;padding:2.85pt 2.85pt 2.85pt 2.85pt'>
  <p class=a1><span lang=EN-US>git config --global --edit</span></p>
  </td>
 </tr>
</table>
<p class=a0 style='mso-list:l17 level2 lfo7'><![if !supportLists]><span
lang=EN-US style='mso-fareast-font-family:"Times New Roman";mso-bidi-font-family:
"Times New Roman"'><span style='mso-list:Ignore'>4.6.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>其他配置</span></p>
<p class=a6 style='margin-left:35.45pt;text-indent:-35.45pt;mso-list:l17 level3 lfo7'><![if !supportLists]><span
lang=EN-US style='mso-fareast-font-family:"Times New Roman";mso-bidi-font-family:
"Times New Roman"'><span style='mso-list:Ignore'>4.6.1.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>配置</span><span
lang=EN-US>ssl</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>证书</span></p>
<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>该项建议添加为系统级别配置。</span><span lang=EN-US>/etc/pki/git/ca.crt </span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>为实际证书绝对路径。也可以忽略</span><span lang=EN-US>ssl</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>验证，两者选一即可。建议添加</span><span lang=EN-US>CA</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>证书，如果找不到</span><span lang=EN-US>CA</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>证书，就只能忽略</span><span lang=EN-US>ssl</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>验证。</span></p>
<table class=ac border=0 cellspacing=0 cellpadding=0 style='border-collapse:
 collapse;mso-yfti-tbllook:1184;mso-padding-alt:2.85pt 2.85pt 2.85pt 2.85pt'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td width=650 valign=top style='width:487.3pt;background:#D9D9D9;mso-background-themecolor:
  background1;mso-background-themeshade:217;padding:2.85pt 2.85pt 2.85pt 2.85pt'>
  <p class=a1><span lang=EN-US># </span><span style='font-family:楷体;mso-ascii-font-family:
  "Courier New";mso-hansi-font-family:"Courier New"'>配置</span><span lang=EN-US>CA</span><span
  style='font-family:楷体;mso-ascii-font-family:"Courier New";mso-hansi-font-family:
  "Courier New"'>证书</span></p>
  <p class=a1><span lang=EN-US>git config --system http.sslcainfo &quot;/etc/pki/git/ca.crt&quot;</span></p>
  <p class=a1><span lang=EN-US><o:p>&nbsp;</o:p></span></p>
  <p class=a1><span lang=EN-US># </span><span style='font-family:楷体;mso-ascii-font-family:
  "Courier New";mso-hansi-font-family:"Courier New"'>或略</span><span lang=EN-US>ssl</span><span
  style='font-family:楷体;mso-ascii-font-family:"Courier New";mso-hansi-font-family:
  "Courier New"'>验证</span></p>
  <p class=a1><span lang=EN-US>git config --system http.sslverify false</span></p>
  </td>
 </tr>
</table>
<p class=a6 style='margin-left:35.45pt;text-indent:-35.45pt;mso-list:l17 level3 lfo17'><![if !supportLists]><span
lang=EN-US style='mso-fareast-font-family:"Times New Roman";mso-bidi-font-family:
"Times New Roman"'><span style='mso-list:Ignore'>4.6.1.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span lang=EN-US>Git </span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>换行符自动转换</span></p>
<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>在各操作系统下，文本文件所使用的换行符是不一样的。</span><span lang=EN-US>UNIX/Linux </span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>使用的是</span><span lang=EN-US> 0x0A</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>（</span><span lang=EN-US>LF</span><span style='font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>）。但</span><span
lang=EN-US> DOS/Windows </span><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>一直使用</span><span
lang=EN-US> 0x0D0A</span><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>（</span><span
lang=EN-US>CRLF</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>）作为换行符。</span><span lang=EN-US>Git</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>提供了一个“换行符自动转换”功能。这个功能默认处于“自动模式”，当你在签出（拉取）文件时，它试图将</span><span
lang=EN-US> UNIX </span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>换行符（</span><span lang=EN-US>LF</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）替换为</span><span lang=EN-US> Windows </span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>的换行符（</span><span lang=EN-US>CRLF</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>）；当你在提交文件时，它又试图将</span><span lang=EN-US> CRLF </span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>替换为</span><span lang=EN-US> LF</span><span style='font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>。可以关闭它，按个人需求设置。</span></p>
<table class=ac border=0 cellspacing=0 cellpadding=0 style='border-collapse:
 collapse;mso-yfti-tbllook:1184;mso-padding-alt:2.85pt 2.85pt 2.85pt 2.85pt'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td width=650 valign=top style='width:487.3pt;background:#D9D9D9;mso-background-themecolor:
  background1;mso-background-themeshade:217;padding:2.85pt 2.85pt 2.85pt 2.85pt'>
  <p class=a1><span lang=EN-US>#</span><span style='font-family:楷体;mso-ascii-font-family:
  "Courier New";mso-hansi-font-family:"Courier New"'>提交检出均不转换（不建议配置）</span></p>
  <p class=a1><span lang=EN-US>git config --global core.autocrlf false</span></p>
  <p class=a1><span lang=EN-US><o:p>&nbsp;</o:p></span></p>
  <p class=a1><span lang=EN-US>#</span><span style='font-family:楷体;mso-ascii-font-family:
  "Courier New";mso-hansi-font-family:"Courier New"'>提交时转换为</span><span
  lang=EN-US>LF</span><span style='font-family:楷体;mso-ascii-font-family:"Courier New";
  mso-hansi-font-family:"Courier New"'>，检出时转换为</span><span lang=EN-US>CRLF</span><span
  style='font-family:楷体;mso-ascii-font-family:"Courier New";mso-hansi-font-family:
  "Courier New"'>（建议配置）</span></p>
  <p class=a1><span lang=EN-US>git config --global core.autocrlf true</span></p>
  <p class=a1><span lang=EN-US><o:p>&nbsp;</o:p></span></p>
  <p class=a1><span lang=EN-US>#</span><span style='font-family:楷体;mso-ascii-font-family:
  "Courier New";mso-hansi-font-family:"Courier New"'>提交时转换为</span><span
  lang=EN-US>LF</span><span style='font-family:楷体;mso-ascii-font-family:"Courier New";
  mso-hansi-font-family:"Courier New"'>，检出时不转换（建议配置，推荐配置）</span></p>
  <p class=a1><span lang=EN-US>git config --global core.autocrlf input</span></p>
  <p class=a1><span lang=EN-US><o:p>&nbsp;</o:p></span></p>
  <p class=a1><span lang=EN-US>#</span><span style='font-family:楷体;mso-ascii-font-family:
  "Courier New";mso-hansi-font-family:"Courier New"'>拒绝提交包含混合换行符的文件</span><span
  lang=EN-US>(</span><span style='font-family:楷体;mso-ascii-font-family:"Courier New";
  mso-hansi-font-family:"Courier New"'>建议设置</span><span lang=EN-US>)</span></p>
  <p class=a1><span lang=EN-US>git config --global core.safecrlf true</span></p>
  </td>
 </tr>
</table>
<p class=a1><span lang=EN-US><o:p>&nbsp;</o:p></span></p>
<p class=a0 style='mso-list:l17 level2 lfo7'><![if !supportLists]><span
lang=EN-US style='mso-fareast-font-family:"Times New Roman";mso-bidi-font-family:
"Times New Roman"'><span style='mso-list:Ignore'>4.7.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>级别优先级</span></p>
<p class=aa><span lang=EN-US><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>就近原则：项目级别优先于系统用户级别，</span> <span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>二者都有时采用项目级别的签名，如果只有系统用户级别的签名，就以系统用户级别的签名为准，二者都没有不允许</span></p>
<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>
</div>
<p><span lang=EN-US style='font-size:9.0pt;font-family:"Times New Roman",serif;
mso-fareast-font-family:宋体;mso-bidi-theme-font:minor-bidi;mso-ansi-language:
EN-US;mso-fareast-language:ZH-CN;mso-bidi-language:AR-SA'><br clear=all
style='page-break-before:always;mso-break-type:section-break'><br>
</span></p>
<div class=WordSection5 style='layout-grid:15.6pt'>
<p class=a3 style='mso-list:l17 level1 lfo7'><![if !supportLists]><span
lang=EN-US style='mso-fareast-font-family:"Times New Roman";mso-bidi-font-family:
"Times New Roman"'><span style='mso-list:Ignore'>5.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:楷体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>基本操作</span> </p>
<p class=a0 style='mso-list:l17 level2 lfo7'><![if !supportLists]><span
lang=EN-US style='mso-fareast-font-family:"Times New Roman";mso-bidi-font-family:
"Times New Roman"'><span style='mso-list:Ignore'>5.1.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>底层命令</span></p>
<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>调用底层命令完成一次版本的提交。初始化版本库，创建一个文件</span><span lang=EN-US>a.txt</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>。作为初始版本。调用</span><span lang=EN-US>git cat-file</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>命令查看仓库中对象实体的类型、大小和内容的信息。</span></p>
<table class=ac border=0 cellspacing=0 cellpadding=0 style='border-collapse:
 collapse;mso-yfti-tbllook:1184;mso-padding-alt:2.85pt 2.85pt 2.85pt 2.85pt'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td width=650 valign=top style='width:487.3pt;background:#D9D9D9;mso-background-themecolor:
  background1;mso-background-themeshade:217;padding:2.85pt 2.85pt 2.85pt 2.85pt'>
  <p class=a1><span lang=EN-US>git cat-file&nbsp;<strong><span
  style='font-family:"Courier New";mso-bidi-font-family:"Times New Roman";
  mso-bidi-theme-font:minor-bidi'>(-</span></strong>t&nbsp;<strong><span
  style='font-family:"Courier New";mso-bidi-font-family:"Times New Roman";
  mso-bidi-theme-font:minor-bidi'>|</span></strong>&nbsp;-s&nbsp;<strong><span
  style='font-family:"Courier New";mso-bidi-font-family:"Times New Roman";
  mso-bidi-theme-font:minor-bidi'>|</span></strong>&nbsp;-e&nbsp;<strong><span
  style='font-family:"Courier New";mso-bidi-font-family:"Times New Roman";
  mso-bidi-theme-font:minor-bidi'>|</span></strong>&nbsp;-p&nbsp;<strong><span
  style='font-family:"Courier New";mso-bidi-font-family:"Times New Roman";
  mso-bidi-theme-font:minor-bidi'>|</span></strong>&nbsp;<strong><span
  style='font-family:"Courier New";mso-bidi-font-family:"Times New Roman";
  mso-bidi-theme-font:minor-bidi'>&lt;</span></strong>type<strong><span
  style='font-family:"Courier New";mso-bidi-font-family:"Times New Roman";
  mso-bidi-theme-font:minor-bidi'>&gt;</span></strong>&nbsp;<strong><span
  style='font-family:"Courier New";mso-bidi-font-family:"Times New Roman";
  mso-bidi-theme-font:minor-bidi'>|</span></strong>&nbsp;<strong><span
  style='font-family:"Courier New";mso-bidi-font-family:"Times New Roman";
  mso-bidi-theme-font:minor-bidi'>--</span></strong>textconv&nbsp;<strong><span
  style='font-family:"Courier New";mso-bidi-font-family:"Times New Roman";
  mso-bidi-theme-font:minor-bidi'>)</span></strong>&nbsp;<strong><span
  style='font-family:"Courier New";mso-bidi-font-family:"Times New Roman";
  mso-bidi-theme-font:minor-bidi'>&lt;</span></strong>object<strong><span
  style='font-family:"Courier New";mso-bidi-font-family:"Times New Roman";
  mso-bidi-theme-font:minor-bidi'>&gt; ...<o:p></o:p></span></strong></span></p>
  <p class=a1><span lang=EN-US>&lt;type&gt; can be one of: blob, tree, commit,
  tag</span></p>
  <p class=a1><span lang=EN-US><span
  style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>-t<span
  style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </span>show object type (</span><span style='font-family:楷体;mso-ascii-font-family:
  "Courier New";mso-hansi-font-family:"Courier New"'>查看类型</span><span
  lang=EN-US>)</span></p>
  <p class=a1><span lang=EN-US><span
  style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>-s<span
  style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </span>show object size</span><span style='font-family:楷体;mso-ascii-font-family:
  "Courier New";mso-hansi-font-family:"Courier New"'>（查看大小）</span></p>
  <p class=a1><span lang=EN-US><span
  style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>-p<span
  style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </span>pretty-print object's content</span><span style='font-family:楷体;
  mso-ascii-font-family:"Courier New";mso-hansi-font-family:"Courier New"'>（查看内容）</span></p>
  <p class=a1><span lang=EN-US>......</span></p>
  </td>
 </tr>
</table>
<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>创建</span><span lang=EN-US>a.txr </span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>内容为</span><span lang=EN-US>version 1</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>，并创建为</span><span lang=EN-US>blob</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>对象。</span></p>
<table class=ac border=0 cellspacing=0 cellpadding=0 style='border-collapse:
 collapse;mso-yfti-tbllook:1184;mso-padding-alt:2.85pt 2.85pt 2.85pt 2.85pt'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td width=650 valign=top style='width:487.3pt;background:#D9D9D9;mso-background-themecolor:
  background1;mso-background-themeshade:217;padding:2.85pt 2.85pt 2.85pt 2.85pt'>
  <p class=a1><span lang=EN-US>echo &quot;version 1&quot; &gt;&gt; a.txt </span></p>
  <p class=a1><span lang=EN-US>git hash-object -w a.txt </span></p>
  </td>
 </tr>
</table>
<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>使用</span><span lang=EN-US>update-index</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>为</span> <span lang=EN-US>a.txt </span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>的首个版本创建一个暂存区，并通过</span><span lang=EN-US>write-tree</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>生成树对象。</span></p>
<table class=ac border=0 cellspacing=0 cellpadding=0 style='border-collapse:
 collapse;mso-yfti-tbllook:1184;mso-padding-alt:2.85pt 2.85pt 2.85pt 2.85pt'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td width=650 valign=top style='width:487.3pt;background:#D9D9D9;mso-background-themecolor:
  background1;mso-background-themeshade:217;padding:2.85pt 2.85pt 2.85pt 2.85pt'>
  <p class=a1><span lang=EN-US>git update-index --add --cacheinfo 100644 83baae61804e65cc73a7201a7252750c76066a30
  a.txt </span></p>
  <p class=a1><span lang=EN-US>git ls-files -s</span></p>
  <p class=a1><span lang=EN-US>git write-tree</span></p>
  </td>
 </tr>
</table>
<p class=aa align=center style='text-align:center'><strong><span lang=EN-US
style='mso-bidi-font-family:"Times New Roman";mso-bidi-theme-font:minor-bidi;
font-weight:normal;mso-no-proof:yes'><v:shape id="图片_x0020_13" o:spid="_x0000_i1041"
 type="#_x0000_t75" style='width:317.25pt;height:134.25pt;visibility:visible;
 mso-wrap-style:square'>
 <v:imagedata src="版本控制器Git.files/image004.png" o:title="" cropbottom="8330f"/>
</v:shape></span></strong></p>
<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>命令说明：</span></p>
<p class=aa><span lang=EN-US><span style='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>文件模式为</span><span lang=EN-US>100644 </span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>表明这是一个普通文件</span></p>
<p class=aa><span lang=EN-US><span style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;
</span><span style='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>文件模式为</span><span lang=EN-US>100755 </span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>表明这是一个可执行文件</span></p>
<p class=aa><span lang=EN-US><span style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;
</span><span style='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>文件模式为</span><span lang=EN-US>120000 </span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>表明这是一个符号连接</span></p>
<p class=aa><span lang=EN-US><span style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;
</span><span style='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>--add
</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>因为此前该文件并没有在暂存区中</span> <span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>首次要加</span><span lang=EN-US>add</span></p>
<p class=aa><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>--cacheinfo
</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>因为要添加的文件在</span><span lang=EN-US>git</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>数据库中，没有位于当前目录下</span></p>
<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>新增</span><span lang=EN-US>new.txt</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>，将</span><span lang=EN-US>new.txt</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>和</span><span lang=EN-US>a.txt </span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>文件的第二个版本分别塞进暂存区。并通过</span><span lang=EN-US>write-tree</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>生成第二个树对象。</span></p>
<table class=ac border=0 cellspacing=0 cellpadding=0 style='border-collapse:
 collapse;mso-yfti-tbllook:1184;mso-padding-alt:2.85pt 2.85pt 2.85pt 2.85pt'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td width=650 valign=top style='width:487.3pt;background:#D9D9D9;mso-background-themecolor:
  background1;mso-background-themeshade:217;padding:2.85pt 2.85pt 2.85pt 2.85pt'>
  <p class=a1><span lang=EN-US>echo 'new file' &gt;&gt; new.txt </span></p>
  <p class=a1><span lang=EN-US>echo 'version 2' &gt;&gt; a.txt </span></p>
  <p class=a1><span lang=EN-US>git hash-object -w a.txt </span></p>
  <p class=a1><span lang=EN-US>git update-index --cacheinfo 100644
  0c1e7391ca4e59584f8b773ecdbbb9467eba1547 <span
  style='mso-spacerun:yes'>&nbsp;</span>a.txt </span></p>
  <p class=a1><span lang=EN-US>git hash-object -w new.txt </span></p>
  <p class=a1><span lang=EN-US>git update-index --add --cacheinfo 100644
  fa49b077972391ad58037050f2a75f74e3671e92 new.txt </span></p>
  <p class=a1><span lang=EN-US>git ls-files -s</span></p>
  <p class=a1><span lang=EN-US>git write-tree </span></p>
  </td>
 </tr>
</table>
<p class=aa align=center style='text-align:center'><span lang=EN-US
style='mso-no-proof:yes'><v:shape id="图片_x0020_14" o:spid="_x0000_i1040"
 type="#_x0000_t75" style='width:317.25pt;height:205.5pt;visibility:visible;
 mso-wrap-style:square'>
 <v:imagedata src="版本控制器Git.files/image005.png" o:title=""/>
</v:shape></span></p>
<p class=MsoNormal><strong><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
"Times New Roman";mso-bidi-theme-font:minor-bidi;font-weight:normal'>将第一个树对象加入到第二个树对象，使之成为一个新的树对象。</span></strong><strong><span
lang=EN-US style='mso-bidi-font-family:"Times New Roman";mso-bidi-theme-font:
minor-bidi;font-weight:normal'><o:p></o:p></span></strong></p>
<table class=ac border=0 cellspacing=0 cellpadding=0 style='border-collapse:
 collapse;mso-yfti-tbllook:1184;mso-padding-alt:2.85pt 2.85pt 2.85pt 2.85pt'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td width=650 valign=top style='width:487.3pt;background:#D9D9D9;mso-background-themecolor:
  background1;mso-background-themeshade:217;padding:2.85pt 2.85pt 2.85pt 2.85pt'>
  <p class=a1><strong><span lang=EN-US style='font-family:"Courier New";
  mso-bidi-font-family:"Times New Roman";mso-bidi-theme-font:minor-bidi'>git
  read-tree --prefix=bak</span></strong><span lang=EN-US> 4d146fee4a1d58fb49e94a4b5fbec352653fce30
  </span></p>
  <p class=a1><span lang=EN-US>git ls-files -s </span></p>
  <p class=a1><span lang=EN-US>git write-tree<strong><span style='font-family:
  "Courier New";mso-bidi-font-family:"Times New Roman";mso-bidi-theme-font:
  minor-bidi'><o:p></o:p></span></strong></span></p>
  </td>
 </tr>
</table>
<p class=aa align=center style='text-align:center'><span lang=EN-US
style='mso-no-proof:yes'><v:shape id="图片_x0020_15" o:spid="_x0000_i1039"
 type="#_x0000_t75" style='width:317.25pt;height:101.25pt;visibility:visible;
 mso-wrap-style:square'>
 <v:imagedata src="版本控制器Git.files/image006.png" o:title=""/>
</v:shape></span><strong><span lang=EN-US style='mso-bidi-font-family:"Times New Roman";
mso-bidi-theme-font:minor-bidi;font-weight:normal'><o:p></o:p></span></strong></p>
<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>生成树对象即是对暂存区做一个快照放到</span><span lang=EN-US>git</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>数据库中，对象类型是一个树对象，树对象里面的内容是暂存区的快照，即项目快照。可以认为是项目的一个版本。</span></p>
<p class=MsoNormal align=left style='text-align:left'><span lang=EN-US><span
style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>使用</span><span lang=EN-US>commit-tree </span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>命令创建一个提交对象，为此需要指定一个树对象的哈希值，以及该提交对象的父提交对象，第一次没有则无需指定。</span></p>
<table class=ac border=0 cellspacing=0 cellpadding=0 style='border-collapse:
 collapse;mso-yfti-tbllook:1184;mso-padding-alt:2.85pt 2.85pt 2.85pt 2.85pt'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td width=650 valign=top style='width:487.3pt;background:#D9D9D9;mso-background-themecolor:
  background1;mso-background-themeshade:217;padding:2.85pt 2.85pt 2.85pt 2.85pt'>
  <p class=a1><span lang=EN-US>echo &quot;First commit&quot; | git commit-tree
  4d146fee4a1d </span></p>
  <p class=a1><span lang=EN-US>echo &quot;Second commit&quot; | git commit-tree
  3a85019f136e -p 361fb3efc75bae5</span></p>
  <p class=a1><span lang=EN-US>echo &quot;Third commit&quot; | git commit-tree
  34111a1c2fae -p a1b377723c0ef861 </span></p>
  </td>
 </tr>
</table>
<p class=aa align=center style='text-align:center'><span lang=EN-US
style='mso-no-proof:yes'><v:shape id="图片_x0020_18" o:spid="_x0000_i1038"
 type="#_x0000_t75" style='width:317.25pt;height:172.5pt;visibility:visible;
 mso-wrap-style:square'>
 <v:imagedata src="版本控制器Git.files/image007.png" o:title=""/>
</v:shape></span></p>
<table class=ac border=0 cellspacing=0 cellpadding=0 style='border-collapse:
 collapse;mso-yfti-tbllook:1184;mso-padding-alt:2.85pt 2.85pt 2.85pt 2.85pt'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td width=650 valign=top style='width:487.3pt;background:#D9D9D9;mso-background-themecolor:
  background1;mso-background-themeshade:217;padding:2.85pt 2.85pt 2.85pt 2.85pt'>
  <p class=a1><span lang=EN-US>83baae61804e65cc73a7201a7252750c76066a30 <span
  style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span
  style='font-family:楷体;mso-ascii-font-family:"Courier New";mso-hansi-font-family:
  "Courier New"'>文件</span><span lang=EN-US>a.txt </span><span style='font-family:
  楷体;mso-ascii-font-family:"Courier New";mso-hansi-font-family:"Courier New"'>第一个版本</span></p>
  <p class=a1><span lang=EN-US>4d146fee4a1d58fb49e94a4b5fbec352653fce30<span
  style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
  style='font-family:楷体;mso-ascii-font-family:"Courier New";mso-hansi-font-family:
  "Courier New"'>第一个树对象的哈希</span></p>
  <p class=a1><span lang=EN-US>0c1e7391ca4e59584f8b773ecdbbb9467eba1547 <span
  style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span
  style='font-family:楷体;mso-ascii-font-family:"Courier New";mso-hansi-font-family:
  "Courier New"'>文件</span><span lang=EN-US>a.txt </span><span style='font-family:
  楷体;mso-ascii-font-family:"Courier New";mso-hansi-font-family:"Courier New"'>第二个版本</span></p>
  <p class=a1><span lang=EN-US>fa49b077972391ad58037050f2a75f74e3671e92 <span
  style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span
  style='font-family:楷体;mso-ascii-font-family:"Courier New";mso-hansi-font-family:
  "Courier New"'>文件</span><span lang=EN-US>new.txt</span><span
  style='font-family:楷体;mso-ascii-font-family:"Courier New";mso-hansi-font-family:
  "Courier New"'>的第一个版本</span></p>
  <p class=a1><span lang=EN-US>3a85019f136efc5b9f75fd21c9d458df8ea23d3a <span
  style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span
  style='font-family:楷体;mso-ascii-font-family:"Courier New";mso-hansi-font-family:
  "Courier New"'>第二个树对象的哈希</span></p>
  <p class=a1><span lang=EN-US>34111a1c2fae9d429e173d91d90cae6c7b679e31<span
  style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
  style='font-family:楷体;mso-ascii-font-family:"Courier New";mso-hansi-font-family:
  "Courier New"'>第三个树对象的哈希</span></p>
  <p class=a1><span lang=EN-US>361fb3efc75bae5e683497d09cb72c3a2a1d6810<span
  style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
  style='font-family:楷体;mso-ascii-font-family:"Courier New";mso-hansi-font-family:
  "Courier New"'>第一个提交对象</span></p>
  <p class=a1><span lang=EN-US>a1b377723c0ef8614b3380772ec35539bbb958c1<span
  style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
  style='font-family:楷体;mso-ascii-font-family:"Courier New";mso-hansi-font-family:
  "Courier New"'>第二个提交对象</span></p>
  <p class=a1><span lang=EN-US>a898a5484ce29891fa50a61c36cde47f25638152<span
  style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
  style='font-family:楷体;mso-ascii-font-family:"Courier New";mso-hansi-font-family:
  "Courier New"'>第三个提交对象</span></p>
  </td>
 </tr>
</table>
<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>此时我们版本库结构如下，共有三次提交，三个项目版本。</span></p>
<p class=MsoNormal align=center style='text-align:center'><span lang=EN-US><v:shape
 id="_x0000_i1026" type="#_x0000_t75" style='width:329.25pt;height:173.25pt'
 o:ole="">
 <v:imagedata src="版本控制器Git.files/image008.emz" o:title="" croptop="10194f"
  cropbottom="13350f" cropleft="12425f" cropright=".125"/>
</v:shape><!--[if gte mso 9]><xml>
 <o:OLEObject Type="Embed" ProgID="PowerPoint.Show.12" ShapeID="_x0000_i1026"
  DrawAspect="Content" ObjectID="_1729872946">
 </o:OLEObject>
</xml><![endif]--></span></p>
<p class=MsoNormal align=left style='text-align:left'><span lang=EN-US><span
style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>使用如下命令，更新</span><span lang=EN-US>master</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>（如果你在其他分支上，则需要指定为其他分支）分支的指针，指向我们的提交对象对象，完成一次真正的提交工作。</span></p>
<table class=ac border=0 cellspacing=0 cellpadding=0 style='border-collapse:
 collapse;mso-yfti-tbllook:1184;mso-padding-alt:2.85pt 2.85pt 2.85pt 2.85pt'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td width=650 valign=top style='width:487.3pt;background:#D9D9D9;mso-background-themecolor:
  background1;mso-background-themeshade:217;padding:2.85pt 2.85pt 2.85pt 2.85pt'>
  <p class=a1><span lang=EN-US>git update-ref refs/heads/master 361fb3efc75</span></p>
  <p class=a1><span lang=EN-US>git update-ref refs/heads/master a1b377723c0</span></p>
  <p class=a1><span lang=EN-US>git update-ref refs/heads/master a898a5484ce</span></p>
  </td>
 </tr>
</table>
<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>通过底层命令我们得知，生成树对象，就意味着一次版本的生成，暂存区的文件是会被覆盖的，也就是说将文件添加到暂存区是生成树对象的过程，<span
style='color:red'>且该过程并不是将工作区文件塞到暂存区，而是先存到本地库，然后在从本地库读到暂存区。</span>对于本地库每次操作都是新增，所以才能恢复到任意时刻的版本，只要找到对应的哈希，前提是文件已提交到本地库。对于上面的操作，只需要使用两个上层命令即可完成。</span></p>
<p class=a0 style='mso-list:l17 level2 lfo7'><![if !supportLists]><span
lang=EN-US style='mso-fareast-font-family:"Times New Roman";mso-bidi-font-family:
"Times New Roman"'><span style='mso-list:Ignore'>5.2.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>上层命令</span></p>
<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>通过底层命令我们完成版本控制，但是该过程及其的繁琐，如果一次哈希或文件名写错，将会污染整个版本库，所以日常我们使用上层命令操作即可，其实上层命令即使对底层命令的分装。</span></p>
<p class=a6><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>查</span><span class=a7>看工作区、暂存区状</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>态</span></p>
<table class=ac border=0 cellspacing=0 cellpadding=0 style='border-collapse:
 collapse;mso-yfti-tbllook:1184;mso-padding-alt:2.85pt 2.85pt 2.85pt 2.85pt'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td width=650 valign=top style='width:487.3pt;background:#D9D9D9;mso-background-themecolor:
  background1;mso-background-themeshade:217;padding:2.85pt 2.85pt 2.85pt 2.85pt'>
  <p class=a1><span lang=EN-US>git status</span></p>
  </td>
 </tr>
</table>
<p class=a6><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>将工作区的“新建</span><span lang=EN-US>/</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>修改</span><span lang=EN-US>”</span><span style='font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>添加到暂存区</span></p>
<table class=ac border=0 cellspacing=0 cellpadding=0 style='border-collapse:
 collapse;mso-yfti-tbllook:1184;mso-padding-alt:2.85pt 2.85pt 2.85pt 2.85pt'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td width=650 valign=top style='width:487.3pt;background:#D9D9D9;mso-background-themecolor:
  background1;mso-background-themeshade:217;padding:2.85pt 2.85pt 2.85pt 2.85pt'>
  <p class=a1><span lang=EN-US>git add [file name]</span></p>
  <p class=a1><span lang=EN-US>git ls-files -s<span
  style='mso-spacerun:yes'>&nbsp; </span></span><span style='font-family:楷体;
  mso-ascii-font-family:"Courier New";mso-hansi-font-family:"Courier New"'>查看暂存区的当前状态</span></p>
  </td>
 </tr>
</table>
<p class=a6><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>提交到本地库</span></p>
<table class=ac border=0 cellspacing=0 cellpadding=0 style='border-collapse:
 collapse;mso-yfti-tbllook:1184;mso-padding-alt:2.85pt 2.85pt 2.85pt 2.85pt'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td width=650 valign=top style='width:487.3pt;background:#D9D9D9;mso-background-themecolor:
  background1;mso-background-themeshade:217;padding:2.85pt 2.85pt 2.85pt 2.85pt'>
  <p class=a1><span lang=EN-US>git commit -m &quot;commit message&quot; [file
  name]</span></p>
  <p class=a1><span lang=EN-US>git log</span></p>
  </td>
 </tr>
</table>
<p class=a6><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>修改提交信息</span></p>
<table class=ac border=0 cellspacing=0 cellpadding=0 style='border-collapse:
 collapse;mso-yfti-tbllook:1184;mso-padding-alt:2.85pt 2.85pt 2.85pt 2.85pt'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td width=650 valign=top style='width:487.3pt;background:#D9D9D9;mso-background-themecolor:
  background1;mso-background-themeshade:217;padding:2.85pt 2.85pt 2.85pt 2.85pt'>
  <p class=a1><span lang=EN-US>git commit --amend</span></p>
  </td>
 </tr>
</table>
<p class=a6><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>修正本次提交所使用的用户身份</span></p>
<table class=ac border=0 cellspacing=0 cellpadding=0 style='border-collapse:
 collapse;mso-yfti-tbllook:1184;mso-padding-alt:2.85pt 2.85pt 2.85pt 2.85pt'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td width=650 valign=top style='width:487.3pt;background:#D9D9D9;mso-background-themecolor:
  background1;mso-background-themeshade:217;padding:2.85pt 2.85pt 2.85pt 2.85pt'>
  <p class=a1><span lang=EN-US>git commit --amend --reset-autho</span></p>
  </td>
 </tr>
</table>
<p class=a6><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>查看日志</span></p>
<table class=ac border=0 cellspacing=0 cellpadding=0 style='border-collapse:
 collapse;mso-yfti-tbllook:1184;mso-padding-alt:2.85pt 2.85pt 2.85pt 2.85pt'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td width=650 valign=top style='width:487.3pt;background:#D9D9D9;mso-background-themecolor:
  background1;mso-background-themeshade:217;padding:2.85pt 2.85pt 2.85pt 2.85pt'>
  <p class=a1><span lang=EN-US>git log</span></p>
  <p class=a1><span lang=EN-US>git log --pretty=oneline --abbrev-commit</span></p>
  <p class=a1><span lang=EN-US>git log --pretty=oneline</span></p>
  <p class=a1><span lang=EN-US>git log --oneline</span></p>
  <p class=a1><span lang=EN-US>git reflog</span></p>
  </td>
 </tr>
</table>
<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>
<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_3"
 o:spid="_x0000_i1037" type="#_x0000_t75" style='width:487.5pt;height:61.5pt;
 visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="版本控制器Git.files/image009.png" o:title=""/>
</v:shape></span></p>
<p class=MsoNormal><span lang=EN-US>HEAD@{</span><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>移动到当前版本需要多少步</span><span
lang=EN-US>}</span></p>
<p class=a6><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>前进后退</span></p>
<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>本质是</span><span lang=EN-US>HEAD</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>指针的移动</span></p>
<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_1"
 o:spid="_x0000_i1036" type="#_x0000_t75" style='width:487.5pt;height:48.75pt;
 visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="版本控制器Git.files/image010.png" o:title=""/>
</v:shape></span></p>
<p class=MsoListParagraph style='margin-left:21.0pt;text-indent:-21.0pt;
mso-char-indent-count:0;mso-list:l18 level1 lfo3'><![if !supportLists]><span
lang=EN-US style='font-family:Wingdings;mso-fareast-font-family:Wingdings;
mso-bidi-font-family:Wingdings'><span style='mso-list:Ignore'>l<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span></span><![endif]><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>基于索引值操作</span><span lang=EN-US>[</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>推荐</span><span lang=EN-US>]</span></p>
<table class=ac border=0 cellspacing=0 cellpadding=0 style='margin-left:21.0pt;
 border-collapse:collapse;mso-yfti-tbllook:1184;mso-padding-alt:2.85pt 2.85pt 2.85pt 2.85pt'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td width=650 valign=top style='width:487.3pt;background:#D9D9D9;mso-background-themecolor:
  background1;mso-background-themeshade:217;padding:2.85pt 2.85pt 2.85pt 2.85pt'>
  <p class=a1><span lang=EN-US>git reset --hard [</span><span style='font-family:
  楷体;mso-ascii-font-family:"Courier New";mso-hansi-font-family:"Courier New"'>局部索引值</span><span
  lang=EN-US>]</span></p>
  <p class=a1><span lang=EN-US>git reset --hard a6ace91</span></p>
  </td>
 </tr>
</table>
<p class=MsoListParagraph style='margin-left:21.0pt;text-indent:-21.0pt;
mso-char-indent-count:0;mso-list:l18 level1 lfo3'><![if !supportLists]><span
lang=EN-US style='font-family:Wingdings;mso-fareast-font-family:Wingdings;
mso-bidi-font-family:Wingdings'><span style='mso-list:Ignore'>l<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span></span><![endif]><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>使用</span><span lang=EN-US>^</span><span style='font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>符号：只能后退</span></p>
<table class=ac border=0 cellspacing=0 cellpadding=0 style='margin-left:21.0pt;
 border-collapse:collapse;mso-yfti-tbllook:1184;mso-padding-alt:2.85pt 2.85pt 2.85pt 2.85pt'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td width=650 valign=top style='width:487.3pt;background:#D9D9D9;mso-background-themecolor:
  background1;mso-background-themeshade:217;padding:2.85pt 2.85pt 2.85pt 2.85pt'>
  <p class=a1><span lang=EN-US>git reset --hard HEAD^</span></p>
  <p class=a1><span style='font-family:楷体;mso-ascii-font-family:"Courier New";
  mso-hansi-font-family:"Courier New"'>注：一个</span><span lang=EN-US>^</span><span
  style='font-family:楷体;mso-ascii-font-family:"Courier New";mso-hansi-font-family:
  "Courier New"'>表示后退一步，</span><span lang=EN-US>n </span><span
  style='font-family:楷体;mso-ascii-font-family:"Courier New";mso-hansi-font-family:
  "Courier New"'>个表示后退</span><span lang=EN-US> n </span><span style='font-family:
  楷体;mso-ascii-font-family:"Courier New";mso-hansi-font-family:"Courier New"'>步</span></p>
  </td>
 </tr>
</table>
<p class=MsoListParagraph style='margin-left:21.0pt;text-indent:-21.0pt;
mso-char-indent-count:0;mso-list:l18 level1 lfo3'><![if !supportLists]><span
lang=EN-US style='font-family:Wingdings;mso-fareast-font-family:Wingdings;
mso-bidi-font-family:Wingdings'><span style='mso-list:Ignore'>l<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span></span><![endif]><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>使用</span><span lang=EN-US>~</span><span style='font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>符号：只能后退</span></p>
<table class=ac border=0 cellspacing=0 cellpadding=0 style='margin-left:21.0pt;
 border-collapse:collapse;mso-yfti-tbllook:1184;mso-padding-alt:2.85pt 2.85pt 2.85pt 2.85pt'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td width=650 valign=top style='width:487.3pt;background:#D9D9D9;mso-background-themecolor:
  background1;mso-background-themeshade:217;padding:2.85pt 2.85pt 2.85pt 2.85pt'>
  <p class=a1><span lang=EN-US>git reset --hard HEAD~n</span></p>
  <p class=a1><span style='font-family:楷体;mso-ascii-font-family:"Courier New";
  mso-hansi-font-family:"Courier New"'>注：表示后退</span><span lang=EN-US> n </span><span
  style='font-family:楷体;mso-ascii-font-family:"Courier New";mso-hansi-font-family:
  "Courier New"'>步</span></p>
  </td>
 </tr>
</table>
<p class=a6><span lang=EN-US>Reset </span><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>三个参数的比较</span></p>
<p class=MsoNormal><span lang=EN-US>--soft </span><span style='font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>参数</span></p>
<p class=aa><span lang=EN-US><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>仅仅在本地库移动</span><span lang=EN-US>HEAD</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>指针</span></p>
<p class=aa><span lang=EN-US><v:shape id="_x0000_i1027" type="#_x0000_t75"
 style='width:243.75pt;height:128.25pt' o:ole="">
 <v:imagedata src="版本控制器Git.files/image011.emz" o:title="" croptop="13758f"
  cropbottom="6033f" cropleft="11037f" cropright="5518f"/>
</v:shape><!--[if gte mso 9]><xml>
 <o:OLEObject Type="Embed" ProgID="PowerPoint.Show.12" ShapeID="_x0000_i1027"
  DrawAspect="Content" ObjectID="_1729872947">
 </o:OLEObject>
</xml><![endif]--></span></p>
<p class=MsoNormal><span lang=EN-US>--mixed </span><span style='font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>参数</span></p>
<p class=aa><span lang=EN-US><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>在本地库移动</span><span lang=EN-US>HEAD</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>指针</span></p>
<p class=aa><span lang=EN-US><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>重置暂存区</span></p>
<p class=aa><span lang=EN-US><v:shape id="_x0000_i1028" type="#_x0000_t75"
 style='width:246pt;height:122.25pt' o:ole="">
 <v:imagedata src="版本控制器Git.files/image012.emz" o:title="" croptop="15561f"
  cropbottom="6135f" cropleft="10332f" cropright="5488f"/>
</v:shape><!--[if gte mso 9]><xml>
 <o:OLEObject Type="Embed" ProgID="PowerPoint.Show.12" ShapeID="_x0000_i1028"
  DrawAspect="Content" ObjectID="_1729872948">
 </o:OLEObject>
</xml><![endif]--></span></p>
<p class=MsoNormal><span lang=EN-US>--hard </span><span style='font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>参数（建议使用该参数）</span></p>
<p class=aa><span lang=EN-US><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>在本地库移动</span><span lang=EN-US>HEAD</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>指针</span></p>
<p class=aa><span lang=EN-US><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>重置暂存区</span></p>
<p class=aa><span lang=EN-US><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>重置工作区</span></p>
<p class=aa><span lang=EN-US><v:shape id="_x0000_i1029" type="#_x0000_t75"
 style='width:261.75pt;height:129.75pt' o:ole="">
 <v:imagedata src="版本控制器Git.files/image013.emz" o:title="" croptop="16241f"
  cropbottom="7046f" cropleft="11677f" cropright="6067f"/>
</v:shape><!--[if gte mso 9]><xml>
 <o:OLEObject Type="Embed" ProgID="PowerPoint.Show.12" ShapeID="_x0000_i1029"
  DrawAspect="Content" ObjectID="_1729872949">
 </o:OLEObject>
</xml><![endif]--></span></p>
<p class=a6><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>删除文件并找回</span></p>
<p class=aa style='margin-left:42.55pt;text-indent:-21.0pt;mso-list:l11 level1 lfo6'><![if !supportLists]><span
lang=EN-US style='font-family:Wingdings;mso-fareast-font-family:Wingdings;
mso-bidi-font-family:Wingdings'><span style='mso-list:Ignore'>&Oslash;<span
style='font:7.0pt "Times New Roman"'>&nbsp; </span></span></span><![endif]><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>前提：删除前，文件已经提交到本地库</span></p>
<p class=aa style='margin-left:42.55pt;text-indent:-21.0pt;mso-list:l11 level1 lfo6'><![if !supportLists]><span
class=a4><span lang=EN-US style='mso-ansi-font-size:9.0pt;font-family:Wingdings;
mso-fareast-font-family:Wingdings;mso-bidi-font-family:Wingdings;color:windowtext;
font-weight:normal'><span style='mso-list:Ignore'>&Oslash;<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span></span></span><![endif]><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>操作：</span><span
class=a4><span lang=EN-US style='font-size:7.5pt;mso-bidi-font-size:9.0pt;
mso-bidi-font-family:"Times New Roman";mso-bidi-theme-font:minor-bidi'>git
reset --hard [</span></span><span class=a4><span style='font-size:7.5pt;
mso-bidi-font-size:9.0pt;font-family:楷体;mso-ascii-font-family:"Courier New";
mso-hansi-font-family:"Courier New";mso-bidi-font-family:"Times New Roman";
mso-bidi-theme-font:minor-bidi'>指针位置（即</span></span><span class=a4><span
lang=EN-US style='font-size:7.5pt;mso-bidi-font-size:9.0pt;mso-bidi-font-family:
"Times New Roman";mso-bidi-theme-font:minor-bidi'>commit</span></span><span
class=a4><span style='font-size:7.5pt;mso-bidi-font-size:9.0pt;font-family:
楷体;mso-ascii-font-family:"Courier New";mso-hansi-font-family:"Courier New";
mso-bidi-font-family:"Times New Roman";mso-bidi-theme-font:minor-bidi'>哈希值）</span></span><span
class=a4><span lang=EN-US style='font-size:7.5pt;mso-bidi-font-size:9.0pt;
mso-bidi-font-family:"Times New Roman";mso-bidi-theme-font:minor-bidi'>]</span></span><span
class=a4><span lang=EN-US style='mso-ansi-font-size:9.0pt;font-family:"Times New Roman",serif;
mso-fareast-font-family:宋体;mso-bidi-theme-font:minor-bidi;color:windowtext;
font-weight:normal'><o:p></o:p></span></span></p>
<p class=aa style='margin-left:63.8pt;text-indent:-21.0pt;mso-list:l11 level1 lfo6'><![if !supportLists]><span
lang=EN-US style='font-family:Wingdings;mso-fareast-font-family:Wingdings;
mso-bidi-font-family:Wingdings'><span style='mso-list:Ignore'>&Oslash;<span
style='font:7.0pt "Times New Roman"'>&nbsp; </span></span></span><![endif]><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>删除操作已经提交到本地库：指正位置指向历史记录</span></p>
<p class=aa style='margin-left:63.8pt;text-indent:-21.0pt;mso-list:l11 level1 lfo6'><![if !supportLists]><span
lang=EN-US style='font-family:Wingdings;mso-fareast-font-family:Wingdings;
mso-bidi-font-family:Wingdings'><span style='mso-list:Ignore'>&Oslash;<span
style='font:7.0pt "Times New Roman"'>&nbsp; </span></span></span><![endif]><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>删除操作尚未提交到本地库：指正位置使用</span><span lang=EN-US>HEAD</span></p>
<p class=aa style='margin-left:63.8pt;text-indent:-21.0pt;mso-list:l11 level1 lfo6'><![if !supportLists]><span
lang=EN-US style='font-family:Wingdings;mso-fareast-font-family:Wingdings;
mso-bidi-font-family:Wingdings'><span style='mso-list:Ignore'>&Oslash;<span
style='font:7.0pt "Times New Roman"'>&nbsp; </span></span></span><![endif]><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>可在</span><span lang=EN-US>.git/logs/HEAD</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>查看所有</span><span lang=EN-US>commit</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>的哈希值。</span></p>
<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>比较文件差异</span></p>
<p class=a1 style='margin-left:45.8pt;text-indent:-21.0pt;mso-list:l21 level1 lfo14'><a
name="_Hlk45974701"><![if !supportLists]><span lang=EN-US style='font-family:
Wingdings;mso-fareast-font-family:Wingdings;mso-bidi-font-family:Wingdings;
color:windowtext;font-weight:normal;mso-bidi-font-weight:bold'><span
style='mso-list:Ignore'>&Oslash;<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;
</span></span></span><![endif]><span lang=EN-US>git diff</span></a><span
lang=EN-US> [</span><span style='font-family:楷体;mso-ascii-font-family:"Courier New";
mso-hansi-font-family:"Courier New"'>文件名</span><span lang=EN-US>]</span></p>
<p class=aa><span lang=EN-US><span style='mso-tab-count:3'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>将工作区的文件和暂存区的文件进行比较</span></p>
<p class=a1 style='margin-left:45.8pt;text-indent:-21.0pt;mso-list:l21 level1 lfo14'><![if !supportLists]><span
lang=EN-US style='font-family:Wingdings;mso-fareast-font-family:Wingdings;
mso-bidi-font-family:Wingdings;color:windowtext;font-weight:normal;mso-bidi-font-weight:
bold'><span style='mso-list:Ignore'>&Oslash;<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;
</span></span></span><![endif]><span lang=EN-US>git diff[</span><span
style='font-family:楷体;mso-ascii-font-family:"Courier New";mso-hansi-font-family:
"Courier New"'>本地库中历史版本</span><span lang=EN-US>][</span><span style='font-family:
楷体;mso-ascii-font-family:"Courier New";mso-hansi-font-family:"Courier New"'>文件名</span><span
lang=EN-US>]</span></p>
<p class=aa><span lang=EN-US><span style='mso-tab-count:3'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>将工作区中的文件和本地库历史记录比较</span></p>
<p class=aa style='margin-left:45.8pt;text-indent:-21.0pt;mso-list:l21 level1 lfo14'><![if !supportLists]><span
lang=EN-US style='font-family:Wingdings;mso-fareast-font-family:Wingdings;
mso-bidi-font-family:Wingdings'><span style='mso-list:Ignore'>&Oslash;<span
style='font:7.0pt "Times New Roman"'>&nbsp; </span></span></span><![endif]><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>不带文件名则比较多个文件</span></p>
<p class=a6><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>标签操作</span></p>
<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>为某一历史提交打标签：</span></p>
<p class=a1><span lang=EN-US><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>git
log --pretty=oneline --abbrev-commit </span></p>
<p class=a1><span lang=EN-US><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>git
tag <span style='mso-spacerun:yes'>&nbsp;</span>-a v0.9 f52c633 -m </span><span
class=a4><span lang=EN-US style='mso-bidi-font-family:"Times New Roman";
mso-bidi-theme-font:minor-bidi;font-weight:normal'><span
style='mso-spacerun:yes'>&nbsp;</span>'</span></span><span class=a4><span
style='font-family:楷体;mso-ascii-font-family:"Courier New";mso-hansi-font-family:
"Courier New";mso-bidi-font-family:"Times New Roman";mso-bidi-theme-font:minor-bidi;
font-weight:normal'>第一次发布</span></span><span class=a4><span lang=EN-US
style='mso-bidi-font-family:"Times New Roman";mso-bidi-theme-font:minor-bidi;
font-weight:normal'>'<o:p></o:p></span></span></p>
<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>如果标签打错了，也可以删除：</span><span class=a4><span
lang=EN-US style='font-size:7.5pt;mso-bidi-font-size:9.0pt;mso-bidi-font-family:
"Times New Roman";mso-bidi-theme-font:minor-bidi;color:windowtext'><o:p></o:p></span></span></p>
<p class=a1><span lang=EN-US><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>git
tag -d 0.1</span></p>
<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>因为创建的标签都只存储在本地，不会自动推送到远程。所以，打错的标签可以在本地安全删除。如果要推送某个标签到远程，使用命令</span><span
lang=EN-US>git push origin &lt;tagname&gt;</span></p>
<p class=a1><span lang=EN-US><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>git
push origin v1.0</span></p>
<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>或者，一次性推送全部尚未推送到远程的本地标签：</span></p>
<p class=a1><span lang=EN-US><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>git
push origin --tags</span></p>
<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>如果标签已经推送到远程，要删除远程标签就麻烦一点，先从本地删除，然后在删除远程。要看看是否真的从远程库删除了标签，可以登陆远程</span><span
lang=EN-US>git</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>查看。</span></p>
<p class=a1><span lang=EN-US><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>git
tag -d v0.9</span></p>
<p class=a1><span lang=EN-US><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>git
push origin :refs/tags/v0.9</span></p>
<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>切换到某个标签</span></p>
<p class=a1><span lang=EN-US><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>git
checkout v0.9</span></p>
<p class=a6><span lang=EN-US>Rebase<b><o:p></o:p></b></span></p>
<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>https://www.liaoxuefeng.com/wiki/896043488029600/1216289527823648</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>分支管理</span></p>
<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>切换分支一定要确保暂存区是干净的。</span></p>
<p class=a6><span class=md-plain><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>存储</span></span></p>
<p class=aa style='margin-left:45.35pt;text-indent:-17.0pt;mso-list:l7 level1 lfo15'><![if !supportLists]><span
lang=EN-US style='font-family:Wingdings;mso-fareast-font-family:Wingdings;
mso-bidi-font-family:Wingdings'><span style='mso-list:Ignore'>&Oslash;<span
style='font:7.0pt "Times New Roman"'>&nbsp; </span></span></span><![endif]><span
lang=EN-US>git stash save &quot;save message&quot; </span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>执行存储时，添加备注，方便查找。</span></p>
<p class=aa style='margin-left:45.35pt;text-indent:-17.0pt;mso-list:l7 level1 lfo15'><![if !supportLists]><span
lang=EN-US style='font-family:Wingdings;mso-fareast-font-family:Wingdings;
mso-bidi-font-family:Wingdings'><span style='mso-list:Ignore'>&Oslash;<span
style='font:7.0pt "Times New Roman"'>&nbsp; </span></span></span><![endif]><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>解决的问题</span> <span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>不想过多的创建提交比如</span><span
lang=EN-US>iss53</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>那个分支</span></p>
<p class=aa style='margin-left:45.35pt;text-indent:-17.0pt;mso-list:l7 level1 lfo15'><![if !supportLists]><span
lang=EN-US style='font-family:Wingdings;mso-fareast-font-family:Wingdings;
mso-bidi-font-family:Wingdings'><span style='mso-list:Ignore'>&Oslash;<span
style='font:7.0pt "Times New Roman"'>&nbsp; </span></span></span><![endif]><span
lang=EN-US>git stash list </span><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>查看存储</span> </p>
<p class=aa style='margin-left:45.35pt;text-indent:-17.0pt;mso-list:l7 level1 lfo15'><![if !supportLists]><span
lang=EN-US style='font-family:Wingdings;mso-fareast-font-family:Wingdings;
mso-bidi-font-family:Wingdings'><span style='mso-list:Ignore'>&Oslash;<span
style='font:7.0pt "Times New Roman"'>&nbsp; </span></span></span><![endif]><span
lang=EN-US>git stash apply<span style='mso-spacerun:yes'>&nbsp; </span></span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>拿出栈顶的元素</span> <span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>但是不会消除</span></p>
<p class=aa style='margin-left:45.35pt;text-indent:-17.0pt;mso-list:l7 level1 lfo15'><![if !supportLists]><span
lang=EN-US style='font-family:Wingdings;mso-fareast-font-family:Wingdings;
mso-bidi-font-family:Wingdings'><span style='mso-list:Ignore'>&Oslash;<span
style='font:7.0pt "Times New Roman"'>&nbsp; </span></span></span><![endif]><span
lang=EN-US>git stash drop stash@{0} </span></p>
<p class=a0 style='mso-list:l17 level2 lfo7'><![if !supportLists]><span
lang=EN-US style='mso-fareast-font-family:"Times New Roman";mso-bidi-font-family:
"Times New Roman"'><span style='mso-list:Ignore'>5.3.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>什么是分支</span></p>
<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>在版本控制过程中，使用多条线同时推进多个任务。</span></p>
<p class=MsoNormal><span lang=EN-US><v:shape id="_x0000_i1030" type="#_x0000_t75"
 style='width:480pt;height:133.5pt' o:ole="">
 <v:imagedata src="版本控制器Git.files/image014.emz" o:title="" croptop="12925f"
  cropbottom="20104f"/>
</v:shape><!--[if gte mso 9]><xml>
 <o:OLEObject Type="Embed" ProgID="PowerPoint.Show.12" ShapeID="_x0000_i1030"
  DrawAspect="Content" ObjectID="_1729872950">
 </o:OLEObject>
</xml><![endif]--></span></p>
<p class=a0 style='mso-list:l17 level2 lfo7'><![if !supportLists]><span
lang=EN-US style='mso-fareast-font-family:"Times New Roman";mso-bidi-font-family:
"Times New Roman"'><span style='mso-list:Ignore'>5.4.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>分支的好处</span></p>
<p class=MsoListParagraph style='margin-left:21.0pt;text-indent:-21.0pt;
mso-char-indent-count:0;mso-list:l9 level1 lfo4'><![if !supportLists]><span
lang=EN-US style='font-family:Wingdings;mso-fareast-font-family:Wingdings;
mso-bidi-font-family:Wingdings'><span style='mso-list:Ignore'>&Oslash;<span
style='font:7.0pt "Times New Roman"'>&nbsp; </span></span></span><![endif]><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>同时并行推进多个功能开发，提高开发效率</span></p>
<p class=MsoListParagraph style='margin-left:21.0pt;text-indent:-21.0pt;
mso-char-indent-count:0;mso-list:l9 level1 lfo4'><![if !supportLists]><span
lang=EN-US style='font-family:Wingdings;mso-fareast-font-family:Wingdings;
mso-bidi-font-family:Wingdings'><span style='mso-list:Ignore'>&Oslash;<span
style='font:7.0pt "Times New Roman"'>&nbsp; </span></span></span><![endif]><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>各个分支在开发过程中，</span> <span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>如果某一个分支开发失败，</span> <span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>不会对其他分支有任何影响。失败的分支删除重新开始即可。</span></p>
<p class=a0 style='mso-list:l17 level2 lfo7'><![if !supportLists]><span
lang=EN-US style='mso-fareast-font-family:"Times New Roman";mso-bidi-font-family:
"Times New Roman"'><span style='mso-list:Ignore'>5.5.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>分支的操作</span></p>
<p class=MsoListParagraph style='margin-left:21.0pt;text-indent:-21.0pt;
mso-char-indent-count:0;mso-list:l4 level1 lfo5'><![if !supportLists]><span
lang=EN-US style='mso-fareast-font-family:"Times New Roman";mso-bidi-font-family:
"Times New Roman"'><span style='mso-list:Ignore'>1)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>创建分支</span></p>
<table class=ac border=0 cellspacing=0 cellpadding=0 style='border-collapse:
 collapse;mso-yfti-tbllook:1184;mso-padding-alt:2.85pt 2.85pt 2.85pt 2.85pt'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td width=650 valign=top style='width:487.3pt;background:#D9D9D9;mso-background-themecolor:
  background1;mso-background-themeshade:217;padding:2.85pt 2.85pt 2.85pt 2.85pt'>
  <p class=a1><span lang=EN-US>git branch [</span><span style='font-family:
  楷体;mso-ascii-font-family:"Courier New";mso-hansi-font-family:"Courier New"'>分支名</span><span
  lang=EN-US>]</span></p>
  </td>
 </tr>
</table>
<p class=MsoListParagraph style='margin-left:21.0pt;text-indent:-21.0pt;
mso-char-indent-count:0;mso-list:l4 level1 lfo5'><![if !supportLists]><span
lang=EN-US style='mso-fareast-font-family:"Times New Roman";mso-bidi-font-family:
"Times New Roman"'><span style='mso-list:Ignore'>2)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>查看分支</span></p>
<table class=ac border=0 cellspacing=0 cellpadding=0 style='border-collapse:
 collapse;mso-yfti-tbllook:1184;mso-padding-alt:2.85pt 2.85pt 2.85pt 2.85pt'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td width=650 valign=top style='width:487.3pt;background:#D9D9D9;mso-background-themecolor:
  background1;mso-background-themeshade:217;padding:2.85pt 2.85pt 2.85pt 2.85pt'>
  <p class=a1><span lang=EN-US>git branch -v</span></p>
  </td>
 </tr>
</table>
<p class=MsoListParagraph style='margin-left:21.0pt;text-indent:-21.0pt;
mso-char-indent-count:0;mso-list:l4 level1 lfo5'><![if !supportLists]><span
lang=EN-US style='mso-fareast-font-family:"Times New Roman";mso-bidi-font-family:
"Times New Roman"'><span style='mso-list:Ignore'>3)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>切换分支</span></p>
<table class=ac border=0 cellspacing=0 cellpadding=0 style='border-collapse:
 collapse;mso-yfti-tbllook:1184;mso-padding-alt:2.85pt 2.85pt 2.85pt 2.85pt'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td width=650 valign=top style='width:487.3pt;background:#D9D9D9;mso-background-themecolor:
  background1;mso-background-themeshade:217;padding:2.85pt 2.85pt 2.85pt 2.85pt'>
  <p class=a1><span lang=EN-US>git checkout [</span><span style='font-family:
  楷体;mso-ascii-font-family:"Courier New";mso-hansi-font-family:"Courier New"'>分支名</span><span
  lang=EN-US>]</span></p>
  </td>
 </tr>
</table>
<p class=MsoListParagraph style='margin-left:21.0pt;text-indent:-21.0pt;
mso-char-indent-count:0;mso-list:l4 level1 lfo5'><![if !supportLists]><span
lang=EN-US style='mso-fareast-font-family:"Times New Roman";mso-bidi-font-family:
"Times New Roman"'><span style='mso-list:Ignore'>4)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>合并分支</span></p>
<table class=ac border=0 cellspacing=0 cellpadding=0 style='border-collapse:
 collapse;mso-yfti-tbllook:1184;mso-padding-alt:2.85pt 2.85pt 2.85pt 2.85pt'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td width=650 valign=top style='width:487.3pt;background:#D9D9D9;mso-background-themecolor:
  background1;mso-background-themeshade:217;padding:2.85pt 2.85pt 2.85pt 2.85pt'>
  <p class=a1><span style='font-family:楷体;mso-ascii-font-family:"Courier New";
  mso-hansi-font-family:"Courier New"'>第一步：切换到接受修改的分支（被合并，增加新内容）上</span></p>
  <p class=a1><span lang=EN-US><span
  style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>git checkout [</span><span
  style='font-family:楷体;mso-ascii-font-family:"Courier New";mso-hansi-font-family:
  "Courier New"'>被合并分支名</span><span lang=EN-US>]</span></p>
  <p class=a1><span style='font-family:楷体;mso-ascii-font-family:"Courier New";
  mso-hansi-font-family:"Courier New"'>第二步：执行</span><span lang=EN-US> merge </span><span
  style='font-family:楷体;mso-ascii-font-family:"Courier New";mso-hansi-font-family:
  "Courier New"'>命令</span></p>
  <p class=a1><span lang=EN-US><span
  style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>git merge [</span><span
  style='font-family:楷体;mso-ascii-font-family:"Courier New";mso-hansi-font-family:
  "Courier New"'>有新内容分支名</span><span lang=EN-US>]</span></p>
  </td>
 </tr>
</table>
<p class=MsoListParagraph style='margin-left:21.0pt;text-indent:-21.0pt;
mso-char-indent-count:0;mso-list:l4 level1 lfo5'><![if !supportLists]><span
lang=EN-US style='mso-fareast-font-family:"Times New Roman";mso-bidi-font-family:
"Times New Roman"'><span style='mso-list:Ignore'>5)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>删除分支</span></p>
<table class=ac border=0 cellspacing=0 cellpadding=0 style='border-collapse:
 collapse;mso-yfti-tbllook:1184;mso-padding-alt:2.85pt 2.85pt 2.85pt 2.85pt'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td width=650 valign=top style='width:487.3pt;background:#D9D9D9;mso-background-themecolor:
  background1;mso-background-themeshade:217;padding:2.85pt 2.85pt 2.85pt 2.85pt'>
  <p class=a1><span lang=EN-US>git branch -d home<span
  style='mso-spacerun:yes'>&nbsp; </span><span style='mso-tab-count:3'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>#
  </span><span style='font-family:楷体;mso-ascii-font-family:"Courier New";
  mso-hansi-font-family:"Courier New"'>删除本地分支</span> <span lang=EN-US>(home)</span></p>
  <p class=a1><span lang=EN-US>git push origin --delete home <span
  style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp; </span># </span><span
  style='font-family:楷体;mso-ascii-font-family:"Courier New";mso-hansi-font-family:
  "Courier New"'>删除远程分支</span> <span lang=EN-US>(home)</span></p>
  </td>
 </tr>
</table>
<p class=MsoNormal align=center style='text-align:center'><span lang=EN-US
style='mso-no-proof:yes'><v:shape id="图片_x0020_5" o:spid="_x0000_i1035" type="#_x0000_t75"
 style='width:318pt;height:97.5pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="版本控制器Git.files/image015.png" o:title=""/>
</v:shape></span></p>
<p class=MsoListParagraph style='margin-left:21.0pt;text-indent:-21.0pt;
mso-char-indent-count:0;mso-list:l4 level1 lfo5'><![if !supportLists]><span
lang=EN-US style='mso-fareast-font-family:"Times New Roman";mso-bidi-font-family:
"Times New Roman"'><span style='mso-list:Ignore'>6)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>解决冲突</span></p>
<p class=MsoNormal><span lang=EN-US>&#61550; </span><span style='font-family:宋体;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>冲突的表现</span></p>
<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style='mso-no-proof:yes'><v:shape id="图片_x0020_10" o:spid="_x0000_i1034"
 type="#_x0000_t75" style='width:317.25pt;height:107.25pt;visibility:visible;
 mso-wrap-style:square'>
 <v:imagedata src="版本控制器Git.files/image016.png" o:title=""/>
</v:shape></span></span></p>
<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>冲突的解决</span></p>
<p class=MsoNormal><span lang=EN-US><span style='mso-spacerun:yes'>&nbsp;
</span><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style='mso-spacerun:yes'>&nbsp;</span><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>第一步：编辑文件，删除特殊符号</span></p>
<p class=MsoNormal><span lang=EN-US>&#61557; <span style='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>第二步：把文件修改到满意的程度，保存退出</span></p>
<p class=MsoNormal><span lang=EN-US>&#61557; <span style='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>第三步：</span><span lang=EN-US>git add [</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>文件名</span><span lang=EN-US>]</span></p>
<p class=MsoNormal><span lang=EN-US>&#61557; <span style='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>第四步：</span><span lang=EN-US>git commit -m &quot;</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>日志信息</span><span lang=EN-US>&quot;</span></p>
<p class=MsoNormal><span lang=EN-US>&#61548; <span style='mso-tab-count:3'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>注意：此时</span><span lang=EN-US> commit </span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>一定不能带具体文件名。这种操作会导致分支较乱。会产生下图效果。最好的方法是使用</span><span
lang=EN-US>rebase</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>。</span> <span style='font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>这样操作后分支始终保持一条线。</span></p>
<p class=MsoNormal align=center style='text-align:center'><span lang=EN-US
style='mso-no-proof:yes'><v:shape id="图片_x0020_22" o:spid="_x0000_i1033"
 type="#_x0000_t75" style='width:267.75pt;height:134.25pt;visibility:visible;
 mso-wrap-style:square'>
 <v:imagedata src="版本控制器Git.files/image017.png" o:title=""/>
</v:shape></span></p>
<p class=MsoNormal><span lang=EN-US><a
href="https://blog.lilydjwg.me/2015/2/8/create-git-commits-with-plumbing-commands.79611.html">https://blog.lilydjwg.me/2015/2/8/create-git-commits-with-plumbing-commands.79611.html</a></span></p>
<p class=MsoNormal><span lang=EN-US>git ls-tree -r master </span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>相当于（</span><span lang=EN-US>git ls-tree -r 'master^{tree}' </span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>分支名实际上是指向这个分支上的最后一个对象的符号引用）</span></p>
<p class=a0 style='mso-list:l17 level2 lfo7'><![if !supportLists]><span
lang=EN-US style='mso-fareast-font-family:"Times New Roman";mso-bidi-font-family:
"Times New Roman"'><span style='mso-list:Ignore'>5.6.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>导出代码</span></p>
<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>生成一个可供发布的压缩包，</span><span style='font-size:10.5pt;
font-family:宋体;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;
mso-bidi-font-family:Arial;color:#333333'>从命名树创建文件的存档。创建包含指定树的树结构的指定格式的存档，并将其写入标准输出。如果指定了</span><span
lang=EN-US style='font-size:10.5pt;font-family:"Arial",sans-serif;color:#333333'>&lt;</span><span
style='font-size:10.5pt;font-family:宋体;mso-ascii-font-family:Arial;mso-hansi-font-family:
Arial;mso-bidi-font-family:Arial;color:#333333'>前缀</span><span lang=EN-US
style='font-size:10.5pt;font-family:"Arial",sans-serif;color:#333333'>&gt;</span><span
style='font-size:10.5pt;font-family:宋体;mso-ascii-font-family:Arial;mso-hansi-font-family:
Arial;mso-bidi-font-family:Arial;color:#333333'>，则它将预置为归档文件中的文件名。</span><span
lang=EN-US style='font-size:10.5pt;font-family:"Arial",sans-serif;color:#333333'><o:p></o:p></span></p>
<p class=MsoNormal><span lang=EN-US>--format=&lt;fmt&gt;<span
style='mso-spacerun:yes'>&nbsp;&nbsp; </span></span></p>
<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>结果存档的格式：</span><span lang=EN-US>tar</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>或</span><span lang=EN-US>zip</span><span style='font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>。如果没有给出这个选项，并且指定了输出文件，那么如果可能的话，从文件名中推断格式（例如，写入“</span><span
lang=EN-US>foo.zip</span><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>”使得输出为</span><span
lang=EN-US>zip</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>格式）。否则，输出格式是</span><span lang=EN-US>tar</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>。</span></p>
<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>示例：创建一个包含当前分支上最新提交内容的</span><span
lang=EN-US>tar</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>归档文件，并将其提取到</span><span lang=EN-US>/var/tmp/junk</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>目录中。</span></p>
<table class=ac border=0 cellspacing=0 cellpadding=0 style='border-collapse:
 collapse;mso-yfti-tbllook:1184;mso-padding-alt:2.85pt 2.85pt 2.85pt 2.85pt'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td width=650 valign=top style='width:487.3pt;background:#D9D9D9;mso-background-themecolor:
  background1;mso-background-themeshade:217;padding:2.85pt 2.85pt 2.85pt 2.85pt'>
  <p class=a1><span lang=EN-US>git archive --format=tar --prefix=junk/ HEAD |
  (cd /var/tmp/ &amp;&amp; tar xf -)</span></p>
  </td>
 </tr>
</table>
<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>示例：为</span><span lang=EN-US>v1.4.0</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>版本创建一个压缩</span><span lang=EN-US>tarball</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>。</span></p>
<table class=ac border=0 cellspacing=0 cellpadding=0 style='border-collapse:
 collapse;mso-yfti-tbllook:1184;mso-padding-alt:2.85pt 2.85pt 2.85pt 2.85pt'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td width=650 valign=top style='width:487.3pt;background:#D9D9D9;mso-background-themecolor:
  background1;mso-background-themeshade:217;padding:2.85pt 2.85pt 2.85pt 2.85pt'>
  <p class=a1><span lang=EN-US>git archive --format=tar --prefix=git-1.4.0/
  v1.4.0 | gzip &gt;git-1.4.0.tar.gz</span></p>
  </td>
 </tr>
</table>
<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>示例：同上，但使用内置的</span><span lang=EN-US>tar.gz</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>处理。</span></p>
<table class=ac border=0 cellspacing=0 cellpadding=0 style='border-collapse:
 collapse;mso-yfti-tbllook:1184;mso-padding-alt:2.85pt 2.85pt 2.85pt 2.85pt'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td width=650 valign=top style='width:487.3pt;background:#D9D9D9;mso-background-themecolor:
  background1;mso-background-themeshade:217;padding:2.85pt 2.85pt 2.85pt 2.85pt'>
  <p class=a1><span lang=EN-US>git archive --format=tar.gz --prefix=git-1.4.0/
  v1.4.0 &gt; git-1.4.0.tar.gz</span></p>
  </td>
 </tr>
</table>
<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>示例：</span><span style='font-size:10.5pt;
font-family:宋体;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;
mso-bidi-font-family:Arial;color:#333333'>与上面相同，但格式是从输出文件中推断出来的。</span><span
lang=EN-US style='font-size:10.5pt;font-family:"Arial",sans-serif;color:#333333'><o:p></o:p></span></p>
<table class=ac border=0 cellspacing=0 cellpadding=0 style='border-collapse:
 collapse;mso-yfti-tbllook:1184;mso-padding-alt:2.85pt 2.85pt 2.85pt 2.85pt'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td width=650 valign=top style='width:487.3pt;background:#D9D9D9;mso-background-themecolor:
  background1;mso-background-themeshade:217;padding:2.85pt 2.85pt 2.85pt 2.85pt'>
  <p class=a1><span lang=EN-US>git archive --prefix=git-1.4.0/ -o
  git-1.4.0.tar.gz v1.4.0</span></p>
  </td>
 </tr>
</table>
<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>示例：配置一个“</span><span lang=EN-US>tar.xz</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>”格式来制作</span><span lang=EN-US>LZMA</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>压缩的</span><span lang=EN-US>tarfiles</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>。使用它来指定</span><span lang=EN-US>--format=tar.xz</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>或创建一个输出文件</span><span lang=EN-US>-o foo.tar.xz</span></p>
<table class=ac border=0 cellspacing=0 cellpadding=0 style='border-collapse:
 collapse;mso-yfti-tbllook:1184;mso-padding-alt:2.85pt 2.85pt 2.85pt 2.85pt'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td width=650 valign=top style='width:487.3pt;background:#D9D9D9;mso-background-themecolor:
  background1;mso-background-themeshade:217;padding:2.85pt 2.85pt 2.85pt 2.85pt'>
  <p class=a1><span lang=EN-US>git config tar.tar.xz.command &quot;xz -c&quot;</span></p>
  </td>
 </tr>
</table>
<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>示例：</span></p>
<table class=ac border=0 cellspacing=0 cellpadding=0 style='border-collapse:
 collapse;mso-yfti-tbllook:1184;mso-padding-alt:2.85pt 2.85pt 2.85pt 2.85pt'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td width=650 valign=top style='width:487.3pt;background:#D9D9D9;mso-background-themecolor:
  background1;mso-background-themeshade:217;padding:2.85pt 2.85pt 2.85pt 2.85pt'>
  <p class=a1><span lang=EN-US>git archive --prefix=git/ --output
  ./output.tar.gz master</span></p>
  <p class=a1><span lang=EN-US>git archive --prefix=git/ --format=tar master
  |gzip &gt;git-1.4.0.tar.gz</span></p>
  </td>
 </tr>
</table>
<p class=a1><span lang=EN-US><o:p>&nbsp;</o:p></span></p>
<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>
<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>
</div>
<p><b><span lang=EN-US style='font-size:14.0pt;line-height:200%;font-family:"Times New Roman",serif;
mso-fareast-font-family:楷体;mso-bidi-theme-font:minor-bidi;mso-ansi-language:
EN-US;mso-fareast-language:ZH-CN;mso-bidi-language:AR-SA'><br clear=all
style='page-break-before:always;mso-break-type:section-break'><br>
</span></b></p>
<div class=WordSection6 style='layout-grid:15.6pt'>
<p class=a3 style='mso-list:l17 level1 lfo7'><![if !supportLists]><span
lang=EN-US style='mso-fareast-font-family:"Times New Roman";mso-bidi-font-family:
"Times New Roman"'><span style='mso-list:Ignore'>6.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:楷体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>本地库配置远程仓库</span></p>
<p class=a0 style='mso-list:l17 level2 lfo7'><![if !supportLists]><span
lang=EN-US style='mso-fareast-font-family:"Times New Roman";mso-bidi-font-family:
"Times New Roman"'><span style='mso-list:Ignore'>6.1.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>配置远程仓库地址</span></p>
<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>配置远程地址后可以拉去远程代码，其中</span><span lang=EN-US>origin </span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>是一个别名，可以写别的。只是习惯这样写。</span></p>
<p class=a6 style='margin-left:35.45pt;text-indent:-35.45pt;mso-list:l17 level3 lfo17'><![if !supportLists]><span
lang=EN-US style='mso-fareast-font-family:"Times New Roman";mso-bidi-font-family:
"Times New Roman"'><span style='mso-list:Ignore'>6.1.1.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>添加一个远程地址</span></p>
<table class=ac border=0 cellspacing=0 cellpadding=0 style='border-collapse:
 collapse;mso-yfti-tbllook:1184;mso-padding-alt:2.85pt 2.85pt 2.85pt 2.85pt'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td width=650 valign=top style='width:487.3pt;background:#D9D9D9;mso-background-themecolor:
  background1;mso-background-themeshade:217;padding:2.85pt 2.85pt 2.85pt 2.85pt'>
  <p class=a1><span lang=EN-US>git remote add origin [url]</span></p>
  </td>
 </tr>
</table>
<p class=a6 style='margin-left:35.45pt;text-indent:-35.45pt;mso-list:l17 level3 lfo17'><![if !supportLists]><span
lang=EN-US style='mso-fareast-font-family:"Times New Roman";mso-bidi-font-family:
"Times New Roman"'><span style='mso-list:Ignore'>6.1.2.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>修改命令</span></p>
<table class=ac border=0 cellspacing=0 cellpadding=0 style='border-collapse:
 collapse;mso-yfti-tbllook:1184;mso-padding-alt:2.85pt 2.85pt 2.85pt 2.85pt'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td width=650 valign=top style='width:487.3pt;background:#D9D9D9;mso-background-themecolor:
  background1;mso-background-themeshade:217;padding:2.85pt 2.85pt 2.85pt 2.85pt'>
  <p class=a1><span lang=EN-US>git remote origin set-url [url]</span></p>
  </td>
 </tr>
</table>
<p class=a6 style='margin-left:35.45pt;text-indent:-35.45pt;mso-list:l17 level3 lfo17'><![if !supportLists]><span
lang=EN-US style='mso-fareast-font-family:"Times New Roman";mso-bidi-font-family:
"Times New Roman"'><span style='mso-list:Ignore'>6.1.3.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>删除远程地址</span></p>
<table class=ac border=0 cellspacing=0 cellpadding=0 style='border-collapse:
 collapse;mso-yfti-tbllook:1184;mso-padding-alt:2.85pt 2.85pt 2.85pt 2.85pt'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td width=650 valign=top style='width:487.3pt;background:#D9D9D9;mso-background-themecolor:
  background1;mso-background-themeshade:217;padding:2.85pt 2.85pt 2.85pt 2.85pt'>
  <p class=a1><span lang=EN-US>git remote rm origin</span></p>
  </td>
 </tr>
</table>
<p class=a6 style='margin-left:35.45pt;text-indent:-35.45pt;mso-list:l17 level3 lfo17'><![if !supportLists]><span
lang=EN-US style='mso-fareast-font-family:"Times New Roman";mso-bidi-font-family:
"Times New Roman"'><span style='mso-list:Ignore'>6.1.4.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>查看远程地址配置</span></p>
<table class=ac border=0 cellspacing=0 cellpadding=0 style='border-collapse:
 collapse;mso-yfti-tbllook:1184;mso-padding-alt:2.85pt 2.85pt 2.85pt 2.85pt'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td width=650 valign=top style='width:487.3pt;background:#D9D9D9;mso-background-themecolor:
  background1;mso-background-themeshade:217;padding:2.85pt 2.85pt 2.85pt 2.85pt'>
  <p class=a1><span lang=EN-US>git<span style='mso-spacerun:yes'>&nbsp;
  </span>remote -v</span></p>
  </td>
 </tr>
</table>
<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_24"
 o:spid="_x0000_i1032" type="#_x0000_t75" style='width:487.5pt;height:49.5pt;
 visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="版本控制器Git.files/image018.png" o:title=""/>
</v:shape></span></p>
<p class=a0 style='mso-list:l17 level2 lfo7'><![if !supportLists]><span
lang=EN-US style='mso-fareast-font-family:"Times New Roman";mso-bidi-font-family:
"Times New Roman"'><span style='mso-list:Ignore'>6.2.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>远程跟踪分支</span></p>
<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>从远程分支</span><span lang=EN-US> checkout </span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>出来的本地分支，称为跟踪分支</span><span lang=EN-US> (tracking branch)</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>。跟踪分支是一种和某个远程分支有直接联系的本地分支。在跟踪分支里输入</span><span lang=EN-US>
git push</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>，</span><span lang=EN-US>Git </span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>会自行推断应该向哪个服务器的哪个分支推送数据。同样，在这些分支里运行</span><span lang=EN-US>
git pull </span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>会获取所有远程索引，并把它们的数据都合并到本地分支中来。</span></p>
<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>在克隆仓库时，</span><span lang=EN-US>Git </span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>通常会自动创建一个名为</span><span lang=EN-US> master </span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>的分支来跟踪</span><span lang=EN-US> origin/master</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>。这正是</span><span lang=EN-US> git push </span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>和</span><span lang=EN-US> git pull </span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>一开始就能正常工作的原因。当然，你可以随心所欲地设定为其它跟踪分支，比如</span><span lang=EN-US>
origin </span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>上除了</span><span lang=EN-US> master</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>之外的其它分支。刚才我们已经看到了这样的一个例子：</span><span lang=EN-US>git
checkout -b [</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>分支名</span><span lang=EN-US>] [</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>远程名</span><span lang=EN-US>]/[</span><span style='font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>分支名</span><span
lang=EN-US>]</span><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>。如果你有</span><span lang=EN-US> 1.6.2 </span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>以上版本的</span><span lang=EN-US> Git</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>，还可以用</span><span lang=EN-US> --track </span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>选项简化，本地分支可以和远程分支不同名。</span></p>
<table class=ac border=0 cellspacing=0 cellpadding=0 style='border-collapse:
 collapse;mso-yfti-tbllook:1184;mso-padding-alt:2.85pt 2.85pt 2.85pt 2.85pt'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td width=650 valign=top style='width:487.3pt;background:#D9D9D9;mso-background-themecolor:
  background1;mso-background-themeshade:217;padding:2.85pt 2.85pt 2.85pt 2.85pt'>
  <p class=a1><span lang=EN-US>git checkout --track origin/develop</span></p>
  </td>
 </tr>
</table>
<p class=a6 style='margin-left:35.45pt;text-indent:-35.45pt;mso-list:l17 level3 lfo17'><![if !supportLists]><span
lang=EN-US style='mso-fareast-font-family:"Times New Roman";mso-bidi-font-family:
"Times New Roman"'><span style='mso-list:Ignore'>6.2.1.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>配置远程跟踪分支</span></p>
<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>其中</span> <span lang=EN-US>&lt;branch&gt; </span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>填写实际远程分支名，但一般情况远程分支和本地分支名字相同，便于区分。</span></p>
<table class=ac border=0 cellspacing=0 cellpadding=0 style='border-collapse:
 collapse;mso-yfti-tbllook:1184;mso-padding-alt:2.85pt 2.85pt 2.85pt 2.85pt'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td width=650 valign=top style='width:487.3pt;background:#D9D9D9;mso-background-themecolor:
  background1;mso-background-themeshade:217;padding:2.85pt 2.85pt 2.85pt 2.85pt'>
  <p class=a1><span lang=EN-US>git branch --set-upstream-to=origin/&lt;branch&gt;
  develop</span></p>
  </td>
 </tr>
</table>
<p class=a6 style='margin-left:35.45pt;text-indent:-35.45pt;mso-list:l17 level3 lfo17'><![if !supportLists]><span
lang=EN-US style='mso-fareast-font-family:"Times New Roman";mso-bidi-font-family:
"Times New Roman"'><span style='mso-list:Ignore'>6.2.2.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>查看本地分支关联的远程分支</span></p>
<table class=ac border=0 cellspacing=0 cellpadding=0 style='border-collapse:
 collapse;mso-yfti-tbllook:1184;mso-padding-alt:2.85pt 2.85pt 2.85pt 2.85pt'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td width=650 valign=top style='width:487.3pt;background:#D9D9D9;mso-background-themecolor:
  background1;mso-background-themeshade:217;padding:2.85pt 2.85pt 2.85pt 2.85pt'>
  <p class=a1><span lang=EN-US>git branch -vv</span></p>
  </td>
 </tr>
</table>
<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_9"
 o:spid="_x0000_i1031" type="#_x0000_t75" style='width:486.75pt;height:44.25pt;
 visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="版本控制器Git.files/image019.png" o:title=""/>
</v:shape></span></p>
<p class=a0 style='mso-list:l17 level2 lfo7'><![if !supportLists]><span
lang=EN-US style='mso-fareast-font-family:"Times New Roman";mso-bidi-font-family:
"Times New Roman"'><span style='mso-list:Ignore'>6.3.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>代码的拉取和推送</span></p>
<p class=a6 style='margin-left:35.45pt;text-indent:-35.45pt;mso-list:l17 level3 lfo17'><![if !supportLists]><span
lang=EN-US style='mso-fareast-font-family:"Times New Roman";mso-bidi-font-family:
"Times New Roman"'><span style='mso-list:Ignore'>6.3.1.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>拉取代码</span></p>
<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>拉取代码到本地的远程跟踪分支</span><span lang=EN-US>origin/&lt;branch&gt;</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>，然后在合并到本地分支</span><span lang=EN-US>&lt;branch&gt;</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>，实际上这两步操作可以合并成一个操作，即</span> <span lang=EN-US>git pull = git
fetch + git merge</span></p>
<table class=ac border=0 cellspacing=0 cellpadding=0 style='border-collapse:
 collapse;mso-yfti-tbllook:1184;mso-padding-alt:2.85pt 2.85pt 2.85pt 2.85pt'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td width=650 valign=top style='width:487.3pt;background:#D9D9D9;mso-background-themecolor:
  background1;mso-background-themeshade:217;padding:2.85pt 2.85pt 2.85pt 2.85pt'>
  <p class=a1><span lang=EN-US>git fetch</span></p>
  <p class=a1><span lang=EN-US>git merge</span></p>
  </td>
 </tr>
</table>
<p class=a6 style='margin-left:35.45pt;text-indent:-35.45pt;mso-list:l17 level3 lfo17'><![if !supportLists]><span
lang=EN-US style='mso-fareast-font-family:"Times New Roman";mso-bidi-font-family:
"Times New Roman"'><span style='mso-list:Ignore'>6.3.2.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>推送代码</span></p>
<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>推送代码到远程分支，使用如下命令，将本地</span><span lang=EN-US>develop</span><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>推送至远程仓库，如果远程库没有这个分支，将自动新建。</span></p>
<table class=ac border=0 cellspacing=0 cellpadding=0 style='border-collapse:
 collapse;mso-yfti-tbllook:1184;mso-padding-alt:2.85pt 2.85pt 2.85pt 2.85pt'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td width=650 valign=top style='width:487.3pt;background:#D9D9D9;mso-background-themecolor:
  background1;mso-background-themeshade:217;padding:2.85pt 2.85pt 2.85pt 2.85pt'>
  <p class=a1><span lang=EN-US>git push origin develop</span></p>
  <p class=a1><span lang=EN-US><o:p>&nbsp;</o:p></span></p>
  <p class=a1><span lang=EN-US># </span><span style='font-family:楷体;mso-ascii-font-family:
  "Courier New";mso-hansi-font-family:"Courier New"'>将本地</span><span
  lang=EN-US>develop</span><span style='font-family:楷体;mso-ascii-font-family:
  "Courier New";mso-hansi-font-family:"Courier New"'>分支推送至远程</span><span
  lang=EN-US>master</span><span style='font-family:楷体;mso-ascii-font-family:
  "Courier New";mso-hansi-font-family:"Courier New"'>分支</span></p>
  <p class=a1><span lang=EN-US>git push origin develop:master </span></p>
  </td>
 </tr>
</table>
<p class=a1><span lang=EN-US><o:p>&nbsp;</o:p></span></p>
</div>
</body>
</html>
]]></content>
      <categories>
        <category>系统</category>
      </categories>
      <tags>
        <tag>Git</tag>
      </tags>
  </entry>
  <entry>
    <title>iptables基础规则配置</title>
    <url>/2020/09/iptables%E5%9F%BA%E7%A1%80%E8%A7%84%E5%88%99%E9%85%8D%E7%BD%AE/index.html</url>
    <content><![CDATA[<p><strong>设置默认规则</strong></p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">iptables -P INPUT ACCEPT</span><br><span class="line">iptables -P FORWARD ACCEPT</span><br><span class="line">iptables -P OUTPUT ACCEPT</span><br></pre></td></tr></table></figure>
<p><strong>INPUT</strong></p>
<ul>
<li>
<p>允许已建立的或相关连接的通行，即允许我发出去的数据包入站</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">iptables -I INPUT -m state --state RELATED,ESTABLISHED -j ACCEPT</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>允许80(HTTP)/443(HTTPS)</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">iptables -A INPUT -p tcp -m state --state NEW -m multiport --dports 80,143 -m comment --comment HTTP -j ACCEPT</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>允许访问<code>NTP</code>服务</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">iptables -A INPUT -p udp -m udp --dport 123 -j ACCEPT</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>允许访问<code>DNS</code>服务</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">iptables -A INPUT -p udp -m udp --sport 53 -j ACCEPT</span><br><span class="line">iptables -A INPUT -p tcp -m tcp --sport 53 -j ACCEPT</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>允许回环网卡</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">iptables -A INPUT -i lo -j ACCEPT</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>允许<code>SSH</code>端口的连接,脚本自动侦测目前的<code>SSH</code>端口,否则默认为22端口</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> grep <span class="string">&quot;^Port&quot;</span> /etc/ssh/sshd_config&gt;/dev/null;<span class="keyword">then</span></span><br><span class="line">    sshdport=`grep <span class="string">&quot;^Port&quot;</span> /etc/ssh/sshd_config | sed <span class="string">&quot;s/Port\s//g&quot;</span> `</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    sshdport=22</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">iptables -A INPUT -p tcp -m state --state NEW,ESTABLISHED -m tcp --dport <span class="variable">$&#123;sshdport&#125;</span> -m comment --comment SSH -j ACCEPT</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>允许被ping</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">iptables -A INPUT -p icmp -j ACCEPT</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>拒绝所有并且发送一条<code>Destination Host Prohibited</code>的消息给被拒绝的主机</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">iptables -A INPUT -j REJECT --reject-with icmp-host-prohibite</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>OUTPUT</strong></p>
<ul>
<li>
<p>允许已建立的或相关连接的通行</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">iptables -I OUTPUT 1 -m state --state ESTABLISHED,RELATED -j ACCEPT</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>允许回环网卡</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">iptables -A OUTPUT -o lo -j ACCEPT</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>允许机器可以进行<code>DNS</code>查询</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">iptables -A OUTPUT -p udp -m udp -j ACCEPT</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>默认规则和保存</strong></p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">iptables -Z; iptables-save &gt; /etc/sysconfig/iptables</span><br></pre></td></tr></table></figure>
<p><strong>脚本</strong></p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">iptables -P INPUT ACCEPT</span><br><span class="line">iptables -P FORWARD ACCEPT</span><br><span class="line">iptables -P OUTPUT ACCEPT</span><br><span class="line">iptables -F</span><br><span class="line"></span><br><span class="line">iptables -I INPUT -m state --state RELATED,ESTABLISHED -j ACCEPT</span><br><span class="line">iptables -A INPUT -p tcp -m state --state NEW -m multiport --dports 80,143 -m comment --comment HTTP -j ACCEPT</span><br><span class="line">iptables -A INPUT -p udp -m udp --dport 123 -j ACCEPT</span><br><span class="line">iptables -A INPUT -p udp -m udp --dport 53 -j ACCEPT</span><br><span class="line">iptables -A INPUT -p tcp -m tcp --dport 53 -j ACCEPT</span><br><span class="line">iptables -A INPUT -i lo -j ACCEPT</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> grep <span class="string">&quot;^Port&quot;</span> /etc/ssh/sshd_config&gt;/dev/null;<span class="keyword">then</span></span><br><span class="line">    sshdport=`grep <span class="string">&quot;^Port&quot;</span> /etc/ssh/sshd_config | sed <span class="string">&quot;s/Port\s//g&quot;</span> `</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    sshdport=22</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">iptables -A INPUT -p tcp -m state --state NEW,ESTABLISHED -m tcp --dport <span class="variable">$&#123;sshdport&#125;</span> -m comment --comment SSH -j ACCEPT</span><br><span class="line"></span><br><span class="line">iptables -A INPUT -p icmp -j ACCEPT</span><br><span class="line">iptables -A INPUT -j REJECT --reject-with icmp-host-prohibited</span><br><span class="line"></span><br><span class="line">iptables -I OUTPUT 1 -m state --state ESTABLISHED,RELATED -j ACCEPT</span><br><span class="line">iptables -A OUTPUT -o lo -j ACCEPT</span><br><span class="line">iptables -A OUTPUT -p udp -m udp -j ACCEPT</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>系统</category>
      </categories>
      <tags>
        <tag>iptables</tag>
      </tags>
  </entry>
  <entry>
    <title>iptablse服务管理</title>
    <url>/2020/07/iptables%E6%93%8D%E4%BD%9C/index.html</url>
    <content><![CDATA[<p>iptablse服务管理</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">service iptables start|stop|restart|status</span><br><span class="line">service iptables save   //定义的所有内容，在重启时都会失效。调用save命令可以把规则保存到文件/etc/sysconfig/iptables中。</span><br><span class="line">iptables-save           //保存规则</span><br><span class="line">iptables-restore        //加载规则。开机的时候，会自动加载/etc/sysconfig/iptables</span><br><span class="line">iptables-restore &lt; /etc/sysconfig/iptables2     //加载自定义的规则文件</span><br><span class="line">//iptables服务配置文件：   /etc/sysconfig/iptables-config</span><br><span class="line">//iptables规则文件：       /etc/sysconfig/iptables</span><br><span class="line">echo &quot;1&quot;&gt;/proc/sys/net/ipv4/ip_forward   //打开iptables转发：</span><br></pre></td></tr></table></figure>
<p>COMMAND 命令选项</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">-A|--append  CHAIN                                 //链尾添加新规则</span><br><span class="line">-D|--delete  CHAIN [RULENUM]                       //删除链中规则，按需序号或内容确定要删除的规则</span><br><span class="line">-I|--insert  CHAIN [RULENUM]                       //在链中插入一条新的规则，默认插在开头</span><br><span class="line">-R|--replace CHAIN  RULENUM                        //替换、修改一条规则，按序号或内容确定</span><br><span class="line">-L|--list   [CHAIN [RULENUM]]                      //列出指定链或所有链中指定规则或所有规则</span><br><span class="line">-S|--list-urles [CHAIN [RULENUM]]                  //显示链中规则</span><br><span class="line">-F|--flush [CHAIN]                                 //清空指定链或所有链中规则</span><br><span class="line">-Z|--zero [CHAIN [RULENUM]]                        //重置指定链或所有链的计数器(匹配的数据包数和流量字节数)</span><br><span class="line">-N|--new-chain CHAIN                               //新建自定义规则链</span><br><span class="line">-X|--delete-cahin [CHAIN]                          //删除指定表中用户自定义的规则链</span><br><span class="line">-E|--rename-chain OLDCHAIN NEWCHAIN                //重命名链，移动任何引用</span><br><span class="line">-P|-policy CHAIN TARGET                            //设置链的默认策略，数据包未匹配任意一条规则就按此策略处理</span><br></pre></td></tr></table></figure>
<p>CRETIRIA 条件匹配</p>
<p>分为基本匹配和扩展匹配，扩展匹配又分为隐式匹配和显示匹配</p>
<p>基本匹配</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">-p|--proto  PROTO                      //按协议匹配，如tcp、udp、icmp，all表示所有协议。 （/etc/protocols中的协议名）</span><br><span class="line">-s|--source ADDRESS[/mask]...          //按数据包的源地址匹配，可使用IP地址、网络地址、主机名、域名</span><br><span class="line">-d|--destination ADDRESS[/mask]...     //按目标地址匹配，可使用IP地址、网络地址、主机名、域名</span><br><span class="line">-i|--in-interface INPUTNAME[ +]        //按入站接口(网卡)名匹配，+用于通配。如 eth0, eth+ 。一般用在INPUT和PREROUTING链</span><br><span class="line">-o|--out-interface OUTPUTNAME[+]       //按出站接口(网卡)名匹配，+用于通配。如 eth0, eth+ 。一般用在OUTPUT和POSTROUTING链</span><br><span class="line">可使用 ! 可以否定一个子句，如-p !tcp</span><br></pre></td></tr></table></figure>
<p>扩展匹配</p>
<p>-m|–match MATCHTYPE  EXTENSIONMATCH…    //扩展匹配，可能加载extension</p>
<p>如: -p tcp  -m tcp  --dport 80</p>
<p>隐式扩展匹配(对-p PROTO的扩展，或者说是-p PROTO的附加匹配条件)</p>
<p>-m PROTO 可以省略，所以叫隐式</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">-m tcp   //-p tcp的扩展</span><br><span class="line">　　　　--sport  [!]N[:M]                      //源端口, 服务名、端口、端口范围。</span><br><span class="line">　　　　--dport  [!]N[:M]                      //目标端口，服务名、端口、端口范围</span><br><span class="line">　　　　--tcp-flags CHECKFLAGS FLAGSOFTRUE  //TCP标志位:SYN(同步),ACK(应答),RST(重置),FIN(结束),URG(紧急),PSH(强迫推送)。多个标志位逗号分隔。</span><br><span class="line">　　　　　　　　　　　　　　　　　　　　　　　　　//CHECKFLAGS为要检查的标志位，FLAGSOFTRUE为必须为1的标志位（其余的应该为0）</span><br><span class="line">　　　　--syn                               //第一次握手。 等效于 --tcpflags syn,ack,fin,rst syn   四个标志中只有syn为1</span><br><span class="line">-m udp   //-p udp的扩展</span><br><span class="line">　　　　--sport N[-M] </span><br><span class="line">　　　　--dport N[-M]</span><br><span class="line">-m icmp  //隐含条件为-p icmp</span><br><span class="line">　　　　--icmp-type  N             //8:echo-request  0:echo-reply</span><br></pre></td></tr></table></figure>
<p>显示扩展匹配</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">-m state</span><br><span class="line">　　　　--state    //连接状态检测，NEW,ESTABLISHED,RELATED,INVALID</span><br><span class="line">-m multiport </span><br><span class="line">　　　　--source-ports   PORT[,PORT]...|N:M            //多个源端口，多个端口用逗号分隔，</span><br><span class="line">　　　　--destination-ports PORT[,PORT]...|N:M         //多个目的端口</span><br><span class="line">　　　　--ports     　　　　　　　　　　　　　　　　　　　　 //多个端口，每个包的源端口和目的端口相同才会匹配</span><br><span class="line">-m limit</span><br><span class="line">　　　　--limit   N/UNIT    //速率，如3/minute, 1/s, n/second , n/day</span><br><span class="line">　　　　--limit-burst N     //峰值速率，如100，表示最大不能超过100个数据包</span><br><span class="line">-m connlimit</span><br><span class="line">　　　　--connlimit-above N  //多于n个，前面加!取反</span><br><span class="line">-m iprange</span><br><span class="line">　　　　--src-range IP-IP</span><br><span class="line">　　　　--dst-range IP-IP</span><br><span class="line">-m mac                    </span><br><span class="line">　　　　--mac-source         //mac地址限制，不能用在OUTPUT和POSTROUTING规则链上，因为封包要送到网卡后，才能由网卡驱动程序透过ARP 通讯协议查出目的地的MAC 地址</span><br><span class="line">-m string</span><br><span class="line">　　　　--algo [bm|kmp]      //匹配算法</span><br><span class="line">　　　　--string &quot;PATTERN&quot;   //匹配字符模式</span><br><span class="line">-m recent</span><br><span class="line">　　　　--name               //设定列表名称，默认为DEFAULT</span><br><span class="line">　　　　--rsource            //源地址</span><br><span class="line">　　　　--rdest              //目的地址</span><br><span class="line">　　　　--set                //添加源地址的包到列表中</span><br><span class="line">　　　　--update             //每次建立连接都更新列表</span><br><span class="line">　　　　--rcheck             //检查地址是否在列表</span><br><span class="line">　　　　--seconds            //指定时间。必须与--rcheck或--update配合使用</span><br><span class="line">　　　　--hitcount           //命中次数。必须和--rcheck或--update配合使用</span><br><span class="line">　　　　--remove             //在列表中删除地址</span><br><span class="line">-m time</span><br><span class="line">　　　　--timestart h:mm</span><br><span class="line">　　　　--timestop  hh:mm</span><br><span class="line">　　　　--days DAYS          //Mon,Tue,Wed,Thu,Fri,Sat,Sun; 逗号分隔</span><br><span class="line">-m mark</span><br><span class="line">　　　　--mark N            //是否包含标记号N</span><br><span class="line">-m owner </span><br><span class="line">　　　　--uid-owner 500   //用来匹配来自本机的封包，是否为某特定使用者所产生的,可以避免服务器使用root或其它身分将敏感数据传送出</span><br><span class="line">　　　　--gid-owner O     //用来匹配来自本机的封包，是否为某特定使用者群组所产生的</span><br><span class="line">　　　　--pid-owner 78    //用来匹配来自本机的封包，是否为某特定进程所产生的</span><br><span class="line">　　　　--sid-owner 100   //用来匹配来自本机的封包，是否为某特定连接（Session ID）的响应封包</span><br></pre></td></tr></table></figure>
<p>ACTION 目标策略(TARGET)</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">-j|--jump TARGET                //跳转到目标规则，可能加载target extension</span><br><span class="line">-g|--goto  CHAIN                //跳转到指定链，不再返回</span><br><span class="line">ACCEPT             规则验证通过，不再检查当前链的后续规则，直接跳到下一个规则链。</span><br><span class="line">DROP                直接丢弃数据包，不给任何回应。中断过滤。</span><br><span class="line">REJECT             拒绝数据包通过，会返回响应信息。中断过滤。</span><br><span class="line">--reject-with  tcp-reset|port-unreachable|echo-reply</span><br><span class="line">LOG                  在/var/log/messages文件中记录日志，然后将数据包传递给下一条规则。详细位置可查看/etc/syslog.conf配置文件</span><br><span class="line">--log-prefix &quot;INPUT packets&quot;</span><br><span class="line">ULOG                更广范围的日志记录信息</span><br><span class="line">QUEUE              防火墙将数据包移交到用户空间，通过一个内核模块把包交给本地用户程序。中断过滤。</span><br><span class="line">RETURN            防火墙停止执行当前链中的后续规则，并返回到调用链。主要用在自定义链中。</span><br><span class="line">custom_chain    转向自定义规则链</span><br><span class="line">DNAT                目标地址转换，改变数据包的目标地址。外网访问内网资源，主要用在PREROUTING。完成后跳到下一个规则链</span><br><span class="line">--to-destination ADDRESS[-ADDRESS][:PORT[-PORT]]</span><br><span class="line">SNAT                源地址转换，改变数据包的源地址。内网访问外网资源。主机的IP地址必须是静态的，主要用在POSTROUTING。完成后跳到下一个规则链。</span><br><span class="line">--to-source ADDRESS[-ADDRESS][:PORT[-PORT]]</span><br><span class="line">MASQUERADE   源地址伪装，用于主机IP是ISP动态分配的情况，会从网卡读取主机IP。直接跳到下一个规则链。</span><br><span class="line">--to-ports 1024-31000</span><br><span class="line">REDIRECT        数据包重定向，主要是端口重定向，把包分流。处理完成后继续匹配其他规则。能会用这个功能来迫使站点上的所有Web流量都通过一个Web高速缓存，比如Squid。</span><br><span class="line">--to-ports 8080</span><br><span class="line">MARK                 打防火墙标记。继续匹配规则。</span><br><span class="line">--set-mark 2</span><br><span class="line">MIRROR           发送包之前交换IP源和目的地址，将数据包返回。中断过滤。</span><br></pre></td></tr></table></figure>
<p>辅助选项</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">-t|--table TABLE     //指定操作的表，默认的表为filter</span><br><span class="line">-n|--numeric         //用数字形式显示地址和端口，显示主机IP地址而不是主机名</span><br><span class="line">-x|--exact           //计数器显示精确值，不做单位换算</span><br><span class="line">-v|--verbose  (x3)   //查看规则列表时，显示更详细的信息</span><br><span class="line">-line-numbers        //查看规则表时，显示在链中的序号</span><br><span class="line">-V|--version </span><br><span class="line">-h|--help   </span><br><span class="line">[option]  --help     //查看特定选项的帮助，如iptables -p icmp --help</span><br><span class="line">--fragment -f               //match second or further fragments only</span><br><span class="line">--modprobe=&lt;command&gt;        //try to insert modules using this command</span><br><span class="line">--set-counters PKTS BYTES   //set the counter during insert/append</span><br></pre></td></tr></table></figure>
<p>state  TCP链接状态</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">NEW                 第一次握手，要起始一个连接（重设连接或将连接重导向） </span><br><span class="line">ESTABLISHED   数据包属于某个已经建立的连接。第二次和第三次握手   (ack=1)</span><br><span class="line">INVALID           数据包的连接编号（Session ID）无法辨识或编号不正确。如SYN=1 ACK=1 RST=1   </span><br><span class="line">RELATED          表示该封包是属于某个已经建立的连接，所建立的新连接。如有些服务使用两个相关的端口，如FTP，21和20端口一去一回，FTP数据传输(上传/下载)还会使用特殊的端口</span><br><span class="line">只允许NEW和ESTABLISHED进，只允许ESTABLISHED出可以阻止反弹式木马。</span><br></pre></td></tr></table></figure>
<p>使用示例</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">iptables -F           //删除iptables现有规则</span><br><span class="line">iptables -L [-v[vv] -n]   //查看iptables规则</span><br><span class="line">iptables -A INPUT -i eth0 -p tcp --dport 80 -m state --state NEW,ESTABLISHED -j ACCEPT       //在INPUT链尾添加一条规则</span><br><span class="line">iptables -I INPUT 2 -i eth0 -p tcp --dport 80 -m state --state NEW,ESTABLISHED -j ACCEPT     //在INPUT链中插入为第2条规则</span><br><span class="line">iptables -D  INPUT 2      //删除INPUT链中第2条规则</span><br><span class="line">iptables -R INPUT 3 -i eth0 -p tcp --dport 80 -m state --state NEW,ESTABLISHED -j ACCEPT    //替换修改第三条规则</span><br><span class="line">iptables -P INPUT DROP    //设置INPUT链的默认策略为DROP</span><br><span class="line">//允许远程主机进行SSH连接</span><br><span class="line">iptables -A INPUT -i eth0 -p tcp --dport 22 -m state --state NEW,ESTABLISHED -j ACCEPT </span><br><span class="line">iptables -A OUTPUT -o eth0 -p tcp --sport 22 -m state --state ESTABLISHED -j ACCEPT </span><br><span class="line">//允许本地主机进行SSH连接</span><br><span class="line">iptables -A OUTPUT -o eth0 -p tcp --dport 22 -m state --state NEW,ESTABLISHED -j ACCEPT </span><br><span class="line">iptables -A INTPUT -i eth0 -p tcp --sport 22 -m state --state ESTABLISHED -j ACCEPT </span><br><span class="line">//允许HTTP请求</span><br><span class="line">iptables -A INPUT -i eth0 -p tcp --dport 80 -m state --state NEW,ESTABLISHED -j ACCEPT </span><br><span class="line">iptables -A OUTPUT -o eth0 -p tcp --sport 80 -m state --state ESTABLISHED -j ACCEPT </span><br><span class="line">//限制ping 192.168.146.3主机的数据包数，平均2/s个，最多不能超过3个</span><br><span class="line">iptables -A INPUT -i eth0 -d 192.168.146.3 -p icmp --icmp-type 8 -m limit --limit 2/second --limit-burst 3 -j ACCEPT </span><br><span class="line">//限制SSH连接速率（默认策略是DROP）</span><br><span class="line">iptables -I INPUT 1 -p tcp --dport 22 -d 192.168.146.3 -m state --state ESTABLISHED -j ACCEPT  </span><br><span class="line">iptables -I INPUT 2 -p tcp --dport 22 -d 192.168.146.3 -m limit --limit 2/minute --limit-burst 2 -m state --state NEW -j ACCEPT </span><br><span class="line"> </span><br><span class="line">//防止syn攻击（限制syn的请求速度）</span><br><span class="line">iptables -N syn-flood </span><br><span class="line">iptables -A INPUT -p tcp --syn -j syn-flood </span><br><span class="line">iptables -A syn-flood -m limit --limit 1/s --limit-burst 4 -j RETURN </span><br><span class="line">iptables -A syn-flood -j DROP </span><br><span class="line">//防止syn攻击（限制单个ip的最大syn连接数）</span><br><span class="line">iptables –A INPUT –i eth0 –p tcp --syn -m connlimit --connlimit-above 15 -j DROP </span><br><span class="line"> </span><br><span class="line">iptables -I INPUT -p tcp -dport 22 -m connlimit --connlimit-above 3 -j DROP   //利用recent模块抵御DOS攻击</span><br><span class="line">iptables -I INPUT -p tcp --dport 22 -m state --state NEW -m recent --set --name SSH   //单个IP最多连接3个会话</span><br><span class="line">Iptables -I INPUT -p tcp --dport 22 -m state NEW -m recent --update --seconds 300 --hitcount 3 --name SSH -j DROP  //只要是新的连接请求，就把它加入到SSH列表中。5分钟内你的尝试次数达到3次，就拒绝提供SSH列表中的这个IP服务。被限制5分钟后即可恢复访问。</span><br><span class="line"> </span><br><span class="line">iptables -I INPUT -p tcp --dport 80 -m connlimit --connlimit-above 30 -j DROP    //防止单个IP访问量过大</span><br><span class="line">iptables –A OUTPUT –m state --state NEW –j DROP  //阻止反弹木马</span><br><span class="line">iptables -A INPUT -p icmp --icmp-type echo-request -m limit --limit 1/m -j ACCEPT   //防止ping攻击</span><br><span class="line"> </span><br><span class="line">//只允许自己ping别人，不允许别人ping自己</span><br><span class="line">iptables -A OUTPUT -p icmp --icmp-type 8 -j ACCEPT</span><br><span class="line">iptables -A INPUT -p icmp --icmp-type 0 -j ACCEPT</span><br><span class="line">//对于127.0.0.1比较特殊，我们需要明确定义它</span><br><span class="line">iptables -A INPUT -s 127.0.0.1 -d 127.0.0.1 -j ACCEPT</span><br><span class="line">iptables -A OUTPUT -s 127.0.0.1 -d 127.0.0.1 -j ACCEPT</span><br><span class="line"> </span><br><span class="line">//SNAT 基于原地址转换。许多内网用户通过一个外网 口上网的情况。将我们内网的地址转换为一个外网的IP，共用外网IP访问外网资源。</span><br><span class="line">iptables -t nat -A POSTROUTING -s 192.168.10.0/24 -j SNAT --to-source 172.16.100.1</span><br><span class="line">//当外网地址不是固定的时候。将外网地址换成 MASQUERADE(动态伪装):它可以实现自动读取外网网卡获取的IP地址。</span><br><span class="line">iptables -t nat -A POSTROUTING -s 192.168.10.0/24 -j MASQUERADE</span><br><span class="line">//DNAT 目标地址转换。目标地址转换要做在到达网卡之前进行转换,所以要做在PREROUTING这个位置上</span><br><span class="line">iptables -t nat -A PREROUTING -d 192.168.10.18 -p tcp --dport 80 -j DNAT --to-destination 172.16.100.2</span><br></pre></td></tr></table></figure>
<h3 id="linux-开启独立iptables日志">linux 开启独立iptables日志</h3>
<ul>
<li>在rsyslog.conf 添加配置，添加不同的日志级别（默认warn(=4））</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">vi /etc/rsyslog.conf</span><br><span class="line">kern.warning     /var/log/iptables.log</span><br><span class="line">kern.debug       /var/log/iptables.log</span><br><span class="line">kern.info        /var/log/iptables.log</span><br><span class="line">不过推荐全部日志都记录：  kern.*     /var/log/iptables.log</span><br></pre></td></tr></table></figure>
<ul>
<li>重启日志配置：</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">/etc/init.d/rsyslogd restart</span><br></pre></td></tr></table></figure>
<ul>
<li>让日志滚动，这一步是可选的</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">vim /etc/logrotate.d/syslog</span><br><span class="line">加入/var/log/iptables</span><br></pre></td></tr></table></figure>
<ul>
<li>在iptables添加日志选项</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">记录所有的记录了，只要通过了防火墙都会记录到日志里</span><br><span class="line">iptables -A INPUT  -j LOG --log-prefix &quot;iptables&quot;</span><br><span class="line">只记录tcp日志</span><br><span class="line">iptables -A INPUT  -p tcp -j LOG --log-prefix &quot;iptables icmp warn&quot;</span><br></pre></td></tr></table></figure>
<ul>
<li>然后保存并重启防火墙配置</li>
</ul>
]]></content>
      <categories>
        <category>系统</category>
      </categories>
      <tags>
        <tag>iptables</tag>
      </tags>
  </entry>
  <entry>
    <title>keepalived 常用配置</title>
    <url>/2020/12/keepalived/index.html</url>
    <content><![CDATA[<h2 id="keepalived-常用配置">keepalived 常用配置</h2>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">! Configuration File for keepalived</span><br><span class="line">global_defs &#123;</span><br><span class="line">    router_id R1</span><br><span class="line">&#125;</span><br><span class="line">vrrp_instance VI_1 &#123;</span><br><span class="line">    state BACKUP</span><br><span class="line">    interface eth0</span><br><span class="line">    virtual_router_id 51</span><br><span class="line">    priority 100</span><br><span class="line">    advert_int 1</span><br><span class="line">    nopreempt</span><br><span class="line">    authentication &#123;</span><br><span class="line">        auth_type PASS</span><br><span class="line">        auth_pass 1111</span><br><span class="line">    &#125;</span><br><span class="line">    virtual_ipaddress &#123;</span><br><span class="line">        10.10.10.100 dev eth0</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">virtual_server 10.10.10.100 6443 &#123;</span><br><span class="line">    delay_loop 3</span><br><span class="line">    lb_algo rr</span><br><span class="line">    lb_kind DR # NAT|DR|TUN</span><br><span class="line">    protocol TCP</span><br><span class="line"></span><br><span class="line">    real_server 10.10.10.31 6443 &#123;</span><br><span class="line">       weight 1</span><br><span class="line">       inhibit_on_failure</span><br><span class="line">       TCP_CHECK &#123;</span><br><span class="line">           connect_timeout 3</span><br><span class="line">           nb_get_retry 3</span><br><span class="line">           delay_before_retry 3</span><br><span class="line">       &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    real_server 10.10.10.32 6443 &#123;</span><br><span class="line">       weight 1</span><br><span class="line">       inhibit_on_failure</span><br><span class="line">       TCP_CHECK &#123;</span><br><span class="line">           connect_timeout 3</span><br><span class="line">           nb_get_retry 3</span><br><span class="line">           delay_before_retry 3</span><br><span class="line">       &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># real_server 分别执行</span><br><span class="line">echo &quot;1&quot; &gt;/proc/sys/net/ipv4/conf/lo/arp_ignore</span><br><span class="line">echo &quot;2&quot; &gt;/proc/sys/net/ipv4/conf/lo/arp_announce</span><br><span class="line">echo &quot;1&quot; &gt;/proc/sys/net/ipv4/conf/all/arp_ignore</span><br><span class="line">echo &quot;2&quot; &gt;/proc/sys/net/ipv4/conf/all/arp_announce</span><br><span class="line"></span><br><span class="line">ip addr add 10.10.10.100/32 dev lo:0 broadcast 10.10.10.100</span><br><span class="line">ip route add 10.10.10.100 dev lo:0</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>系统</category>
      </categories>
      <tags>
        <tag>keepalived</tag>
      </tags>
  </entry>
  <entry>
    <title>psutil库使用</title>
    <url>/2020/05/psutil%E5%BA%93%E4%BD%BF%E7%94%A8/index.html</url>
    <content><![CDATA[<h2 id="psutil库使用">psutil库使用</h2>
<p>psutil</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">yum install gcc python-devel</span><br><span class="line">tar xf psutil-2.1.3.tar.gz</span><br><span class="line">cd psutil-2.1.3</span><br><span class="line">python3.6 setup.py install</span><br></pre></td></tr></table></figure>
<p>导入库</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">import psutil</span><br></pre></td></tr></table></figure>
<p>查看cpu所有信息</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&gt;&gt;&gt; psutil.cpu_times()</span><br><span class="line">scputimes(user=11677.09, nice=57.93, system=148675.58, idle=2167147.79, iowait=260828.48, irq=7876.28, softirq=0.0, steal=3694.59, guest=0.0, guest_nice=0.0)</span><br></pre></td></tr></table></figure>
<p>显示cpu所有逻辑信息</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&gt;&gt;&gt; psutil.cpu_times(percpu=True)</span><br><span class="line">[scputimes(user=11684.17, nice=57.93, system=148683.01, idle=2168982.08, iowait=260833.18, irq=7882.35, softirq=0.0, steal=3697.3, guest=0.0, guest_nice=0.0)]</span><br></pre></td></tr></table></figure>
<p>查看用户的cpu时间比</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&gt;&gt;&gt; psutil.cpu_times().user</span><br><span class="line">11684.4</span><br></pre></td></tr></table></figure>
<p>查看cpu逻辑个数</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&gt;&gt;&gt; psutil.cpu_count()</span><br><span class="line">1</span><br></pre></td></tr></table></figure>
<p>查看cpu核心个数</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&gt;&gt;&gt; psutil.cpu_count(logical=False)</span><br><span class="line">1</span><br></pre></td></tr></table></figure>
<p>3.2查看系统内存</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&gt;&gt;&gt; import psutil</span><br><span class="line">&gt;&gt;&gt; mem = psutil.virtual_memory()</span><br><span class="line">&gt;&gt;&gt; mem</span><br><span class="line">#系统内存的所有信息</span><br><span class="line">svmem(total=1040662528, available=175054848, percent=83.2, used=965718016, free=74944512, active=566755328, inactive=59457536, buffers=9342976, cached=90767360)</span><br></pre></td></tr></table></figure>
<p>系统总计内存</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&gt;&gt;&gt; mem.total</span><br><span class="line">1040662528</span><br></pre></td></tr></table></figure>
<p>系统已经使用内存</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&gt;&gt;&gt; mem.used</span><br><span class="line">965718016</span><br></pre></td></tr></table></figure>
<p>系统空闲内存</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&gt;&gt;&gt; mem.free</span><br><span class="line">112779264</span><br></pre></td></tr></table></figure>
<p>获取swap内存信息</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&gt;&gt;&gt; psutil.swap_memory()</span><br><span class="line">sswap(total=0, used=0, free=0, percent=0, sin=0, sout=0)</span><br></pre></td></tr></table></figure>
<p>读取磁盘参数<br>
####磁盘利用率使用psutil.disk_usage方法获取，磁盘IO信息包括read_count(读IO数)，write_count(写IO数)read_bytes(IO写字节数)，read_time(磁盘读时间)，write_time(磁盘写时间),这些IO信息用</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">psutil.disk_io_counters()</span><br></pre></td></tr></table></figure>
<p>获取磁盘的完整信息</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">psutil.disk_partitions()</span><br></pre></td></tr></table></figure>
<p>获取分区表的参数</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">psutil.disk_usage(&#x27;/&#x27;)   #获取/分区的状态</span><br></pre></td></tr></table></figure>
<p>获取硬盘IO总个数</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">psutil.disk_io_counters()</span><br></pre></td></tr></table></figure>
<p>获取单个分区IO个数</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">psutil.disk_io_counters(perdisk=True)    #perdisk=True参数获取单个分区IO个数</span><br></pre></td></tr></table></figure>
<p>读取网络信息</p>
<p>####网络信息与磁盘IO信息类似,涉及到几个关键点，包括byes_sent(发送字节数),byte_recv=xxx(接受字节数),pack-ets_sent=xxx(发送字节数),pack-ets_recv=xxx(接收数据包数),这些网络信息用</p>
<p>获取网络总IO信息</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">psutil.net_io_counters()  </span><br></pre></td></tr></table></figure>
<p>输出网络每个接口信息</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">psutil.net_io_counters(pernic=True)     #pernic=True</span><br></pre></td></tr></table></figure>
<p>获取当前系统用户登录信息</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">psutil.users()</span><br></pre></td></tr></table></figure>
<p>获取开机时间</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">psutil.boot_time() #以linux时间格式返回</span><br><span class="line">datetime.datetime.fromtimestamp(psutil.boot_time()).strftime(&quot;%Y-%m-%d %H:%M:%S&quot;) #转换成自然时间格式</span><br></pre></td></tr></table></figure>
<p>系统进程管理<br>
####获取当前系统的进程信息,获取当前程序的运行状态,包括进程的启动时间,查看设置CPU亲和度,内存使用率,IO信息，socket连接,线程数等<br>
获取进程信息</p>
<p>查看系统全部进程</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">psutil.pids()</span><br></pre></td></tr></table></figure>
<p>查看单个进程</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">p = psutil.Process(2423) </span><br><span class="line">p.name()   #进程名</span><br><span class="line">p.exe()    #进程的bin路径</span><br><span class="line">p.cwd()    #进程的工作目录绝对路径</span><br><span class="line">p.status()   #进程状态</span><br><span class="line">p.create_time()  #进程创建时间</span><br><span class="line">p.uids()    #进程uid信息</span><br><span class="line">p.gids()    #进程的gid信息</span><br><span class="line">p.cpu_times()   #进程的cpu时间信息,包括user,system两个cpu信息</span><br><span class="line">p.cpu_affinity()  #get进程cpu亲和度,如果要设置cpu亲和度,将cpu号作为参考就好</span><br><span class="line">p.memory_percent()  #进程内存利用率</span><br><span class="line">p.memory_info()    #进程内存rss,vms信息</span><br><span class="line">p.io_counters()    #进程的IO信息,包括读写IO数字及参数</span><br><span class="line">p.connectios()   #返回进程列表</span><br><span class="line">p.num_threads()  #进程开启的线程数</span><br></pre></td></tr></table></figure>
<p>用psutil的Popen方法启动应用程序，可以跟踪程序的相关信息</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">from subprocess import PIPE</span><br><span class="line">p = psutil.Popen([&quot;/usr/bin/python&quot;, &quot;-c&quot;, &quot;print(&#x27;hello&#x27;)&quot;],stdout=PIPE)</span><br><span class="line">p.name()</span><br><span class="line">p.username()</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>脚本</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>shell 命令行处理时间(date)</title>
    <url>/2020/06/shell-%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%A4%84%E7%90%86%E6%97%B6%E9%97%B4-date/index.html</url>
    <content><![CDATA[<h6 id="获取时间戳">获取时间戳</h6>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 纳秒</span></span><br><span class="line"><span class="built_in">date</span> +%s%N</span><br><span class="line"><span class="comment"># 毫秒</span></span><br><span class="line"><span class="built_in">echo</span> $[$(<span class="built_in">date</span> +%s%N)/1000000]</span><br><span class="line"><span class="comment"># 秒</span></span><br><span class="line"><span class="built_in">date</span> +%s</span><br></pre></td></tr></table></figure>
<h6 id="获取当前时间">获取当前时间</h6>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">date</span>                          <span class="comment"># Tue Jun  9 18:54:00 CST 2020</span></span><br><span class="line"><span class="built_in">date</span> <span class="string">&quot;+%Y-%m-%d %H:%M:%S&quot;</span>     <span class="comment"># 2020-06-09 18:54:15</span></span><br><span class="line"><span class="built_in">date</span> <span class="string">&quot;+%Y-%m-%d %H:%M:%S %Z&quot;</span>  <span class="comment"># 2020-06-09 19:01:43 CST</span></span><br><span class="line"><span class="built_in">date</span> <span class="string">&quot;+%F %T %z&quot;</span>              <span class="comment"># 2020-06-09 19:02:40 +0800  # 使用小&quot;z&quot;,显示的时区更直观一些</span></span><br></pre></td></tr></table></figure>
<h6 id="获取过去的时间">获取过去的时间</h6>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 获取昨天时间</span></span><br><span class="line"><span class="built_in">date</span> -d yesterday <span class="string">&quot;+%Y-%m-%d %H:%M:%S&quot;</span>  <span class="comment">#  2020-06-08 18:58:19</span></span><br><span class="line"><span class="comment"># 获取前三天的时间</span></span><br><span class="line"><span class="built_in">date</span> -d -3day <span class="string">&quot;+%Y-%m-%d %H:%M:%S&quot;</span>      <span class="comment"># 2020-06-06 18:59:12</span></span><br></pre></td></tr></table></figure>
<h6 id="时间转时间戳">时间转时间戳</h6>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">date</span> -d <span class="string">&quot;2019-04-24T05:49:10Z&quot;</span> +%s           <span class="comment"># 1556084950</span></span><br><span class="line"><span class="built_in">date</span> -d <span class="string">&quot;Tue Jun  9 18:54:10 CST 2020&quot;</span> +%s   <span class="comment"># 1591700050</span></span><br><span class="line"><span class="comment"># 时间里面没有时区信息的会以当前系统的时区为标准</span></span><br><span class="line"><span class="built_in">date</span> -d <span class="string">&quot;2020-06-09 18:54:15&quot;</span> +%s            <span class="comment"># 1591700055</span></span><br></pre></td></tr></table></figure>
<h6 id="时间戳转时间">时间戳转时间</h6>
<blockquote>
<p>TZ 如果没有指定，则使用 /etc/localtime 中的设置</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">TZ=UTC-0 <span class="built_in">date</span> --<span class="built_in">date</span>=<span class="string">&#x27;@1591700055&#x27;</span> <span class="string">&quot;+%Y-%m-%d %H:%M:%S %z&quot;</span>  <span class="comment"># 2020-06-09 10:54:15 +0000</span></span><br><span class="line"><span class="built_in">date</span> --<span class="built_in">date</span>=<span class="string">&#x27;@1591700055&#x27;</span> <span class="string">&quot;+%Y-%m-%d %H:%M:%S %z&quot;</span>           <span class="comment"># 2020-06-09 18:54:15 +0800</span></span><br></pre></td></tr></table></figure>
<h6 id="时区转换">时区转换</h6>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 默认转换为当前系统的时区</span></span><br><span class="line"><span class="built_in">date</span> -d<span class="string">&quot;2019-04-24T05:49:10Z&quot;</span> +<span class="string">&quot;%Y-%m-%d %H:%M:%S %z&quot;</span>  <span class="comment"># 2019-04-24 13:49:10 +0800</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 如果设置了TZ=UTC-0，则输出的时间为UTC-0时间，“+8 hour”相当于在原本的时间基础上加了8小时</span></span><br><span class="line">TZ=UTC-0 <span class="built_in">date</span> --<span class="built_in">date</span>=<span class="string">&quot;2019-04-24T05:49:10Z +8 hour&quot;</span> +<span class="string">&quot;%Y-%m-%d %H:%M:%S %Z&quot;</span>  <span class="comment"># 2019-04-24 13:49:10 UTC</span></span><br></pre></td></tr></table></figure>
<h6 id="时区设置（tz）">时区设置（TZ）</h6>
<p><code>TZ</code>变量只会影响系统时钟，不会更改整个系统的时区设置。要更改整个系统的时区，需要使用其他工具，例如 <code>timedatectl</code>命令或 <code>tzselect</code>命令。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 以下是如何将 TZ变量设置为不同时区的几个示例</span></span><br><span class="line">TZ=UTC-0</span><br><span class="line">TZ=UTC-8</span><br><span class="line">TZ=Asia/Shanghai</span><br><span class="line"><span class="comment"># 直接按时区设置更方便</span></span><br><span class="line"><span class="comment"># 中时区 UTC-0</span></span><br><span class="line"><span class="comment"># 西1—12区 UTC+1 ... UTC+12</span></span><br><span class="line"><span class="comment"># 东1—12区 UTC-1 ... UTC-12</span></span><br><span class="line"><span class="comment"># 比如北京时间东八区 TZ=UTC-8</span></span><br><span class="line">TZ=UTC-8 <span class="built_in">date</span> +<span class="string">&quot;%Y-%m-%d %H:%M:%S %z&quot;</span>  <span class="comment"># 2020-06-09 21:02:40 +0800</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>常用命令</category>
      </categories>
      <tags>
        <tag>shell</tag>
        <tag>date</tag>
      </tags>
  </entry>
  <entry>
    <title>尚硅谷最新Git教程全套完整版(12h带你深入掌握git)</title>
    <url>/2020/05/%E5%B0%9A%E7%A1%85%E8%B0%B7%E6%9C%80%E6%96%B0Git%E6%95%99%E7%A8%8B%E5%85%A8%E5%A5%97%E5%AE%8C%E6%95%B4%E7%89%88(12h%E5%B8%A6%E4%BD%A0%E6%B7%B1%E5%85%A5%E6%8E%8C%E6%8F%A1git)/index.html</url>
    <content><![CDATA[<h2 id=""></h2>
<h3 id="git基础概念">git基础概念</h3>
<div class="highlight"><pre class="code" ><code><span class="hljs-bullet">* </span>客户端并不只是提取最新版本的文件快照，而是把代码仓库完整的镜像下来
<span class="hljs-bullet">* </span>git核心本质上是一个键值对数据库。可以向该数据库插入任意类型的内容，
<span class="hljs-code">  他会返回一个键值，通过该值可以在任意时刻再次检索该内容。</span>
</code></pre></div>
<h3 id="区域">区域</h3>
<div class="highlight"><pre class="code" ><code><span class="hljs-bullet">* </span>工作区 （沙箱环境 git不会管理 随便更改操作）

<span class="hljs-bullet">* </span>暂存区  （记录文件的操作）

<span class="hljs-bullet">* </span>版本库   （最终的代码实现提交到这里 .git目录就是版本库）
</code></pre></div>
<h3 id="git目录下文件的介绍">.git目录下文件的介绍</h3>
<div class="highlight"><pre class="code" ><code><span class="hljs-bullet">* </span>hooks (钩子函数的一个库 类似于回调函数)
<span class="hljs-bullet">* </span>info (包含一个全局性的排除文件)
<span class="hljs-bullet">* </span>objects (目录存储所有数据内容)
<span class="hljs-bullet">* </span>refs (目录存储指向数据（分支）的提交对象的指针)
<span class="hljs-bullet">* </span>config (文件包含项目特有的配置选项)
<span class="hljs-bullet">* </span>description (显示对仓库的描述信息)
<span class="hljs-bullet">* </span>HEAD (文件目前被检出的分支)
<span class="hljs-bullet">* </span>logs (日志信息)
<span class="hljs-bullet">* </span>index (文件保存暂存区的信息)
</code></pre></div>
<h3 id="基础linux命令">基础Linux命令</h3>
<div class="highlight"><pre class="code" ><code><span class="hljs-comment">* clear 清除屏幕</span>
<span class="hljs-comment">* echo &#x27;hello word &#x27;&gt;test.tet 命令台书写内容</span>
<span class="hljs-comment">* ll 将当前目录下的子目录展现出来</span>
<span class="hljs-comment">* find ./ 将当前目录下的子目录以及文件也展现出来</span>
<span class="hljs-comment">* find ./ -type f 只讲文件展现出来</span>
<span class="hljs-comment">* rm text.txt 删除文件</span>
<span class="hljs-comment">* MV a.txt b.txt 更名字</span>
<span class="hljs-comment">* cat a.txt 查看文件内容</span>
<span class="hljs-comment">* vim a.txt 编辑内容 i 插入 ese : wq 保存退出 :set nu 设置行号 q! 强制退出不保存</span>
</code></pre></div>
<h3 id="对象">对象</h3>
<div class="highlight"><pre class="code" ><code><span class="hljs-bullet">*</span> Git对象
<span class="hljs-bullet">    -</span> echo &quot;hello&quot; | git hash-object --stdin 
<span class="hljs-bullet">     -</span> 这句命令返回一个hash值用来标识这句话 但是并没有写到数据库中  
<span class="hljs-bullet">     -</span> 内容不一样对应的hash值不一样

<span class="hljs-bullet">    -</span> echo &quot;hello&quot; | git hash-object -w --stdin
<span class="hljs-bullet">     -</span> 这句命令返回一个hash值用来标识这句话 并写到数据库中  
<span class="hljs-bullet">     -</span> 查看有没有存在 可以通过 find ./ -type f 找对应hash的文件
<span class="hljs-bullet">     -</span> 里面的内容是压缩的 通过 git cat-file -p hash注意前面的那两个字母也加上
<span class="hljs-bullet">     -</span> git cat-file -t hash 查看git对象的类型 blob

<span class="hljs-bullet">    -</span> 将新创建的文件添加到git数据库中即生成一个git对象
<span class="hljs-bullet">     -</span> git hash-object -w ./a.txt

<span class="hljs-bullet">    -</span> 如果文件更改git数据库里面不会自动的添加要手动添加过去 这时会在添加一个git对象
<span class="hljs-bullet">     -</span> git hash-object -w ./a.txt

<span class="hljs-bullet">    -</span> 实质上Git对象是一个KYE：VALUE hash/value    
<span class="hljs-bullet">    -</span> git对象不能当作项目的一次快照 只是组成项目的一部分

<span class="hljs-bullet">    -</span> 存在的问题？
<span class="hljs-bullet">     -</span> 记住文件的每一个（版本）对应的hash值并不现实
<span class="hljs-bullet">     -</span> 在git中，文件名并没有被保存，只能通过hash

<span class="hljs-bullet">    -</span> 注意：此时的操作只是针对本地数据库进行操作，不涉及暂存区。


<span class="hljs-bullet">*</span> 树对象
<span class="hljs-bullet">    *</span> 树对象能够解决文件名保存的问题，也允许我们将多个文件组织到一起。

<span class="hljs-bullet">    *</span> 构建树对象
<span class="hljs-bullet">     -</span> git update-index --add --cacheinfo 100644 915c628f360b2d8c3edbe1ac65cf575b69029b61 test.txt
<span class="hljs-bullet">     -</span> 文件模式为100644 表明这是一个普通文件
<span class="hljs-bullet">     -</span> 文件模式为100755 表明这是一个可执行文件
<span class="hljs-bullet">     -</span> 文件模式为120000 表明这是一个符号连接
<span class="hljs-bullet">     -</span>  --add 因为此前该文件并没有在暂存区中 首次要加add
<span class="hljs-bullet">     -</span>  --cacheinfo 因为要添加的文件在git数据库中,没有位于当前目录下

<span class="hljs-bullet">    *</span> 暂存区做一个快照生成一个对象放到git数据库中
<span class="hljs-bullet">     -</span> git write-tree
<span class="hljs-code">        对象类型是一个树对象
        树对象里面的内容是暂存区的快照（项目的快照）
    * 暂存区中文件名字不变 如果改变文件的内容，就会重新生成一个hash
</span>
<span class="hljs-bullet">    *</span> 存在的问题？
<span class="hljs-bullet">     -</span> 不知道hash值对应的是哪一个版本
<span class="hljs-bullet">     -</span> 不知道这个版本的一些基础信息    

<span class="hljs-bullet">*</span> 提交对象    
<span class="hljs-bullet">    -</span> 提交对象完美的解决了上面的问题
<span class="hljs-bullet">    -</span> 本质就是给树对象做一层包裹包含项目的基础信息
<span class="hljs-bullet">    -</span> commit-tree创建一个提交对象，为此需要指定一个树对象的hash值,以及该提交的父提交对象  
<span class="hljs-bullet">    -</span> echo &quot;second commit&quot; | git commit-tree     019fb2c522b604cd94929085bbac93d60e2f2063 -p  d248eb19a125c

<span class="hljs-bullet">    -</span> 真正代表一个项目的是一个提交对象（数据和基本信息）这是一个链式的！！ 
</code></pre></div>
<hr>
<h3 id="初始化git">初始化git</h3>
<div class="highlight"><pre class="code" ><code>* git init （初始化仓库 生成.git文件）
* git <span class="hljs-built_in">config</span> <span class="hljs-comment">--global user.name &quot;Is zyd&quot;</span>
* git <span class="hljs-built_in">config</span> <span class="hljs-comment">--global user.email 1426593075@qq.com</span>
* git <span class="hljs-built_in">config</span> <span class="hljs-comment">--list</span>
</code></pre></div>
<h3 id="添加到暂存区">添加到暂存区</h3>
<div class="highlight"><pre class="code" ><code>* git <span class="hljs-built_in">add</span> ./   首先将工作区（文件）做成git对象放到版本库 然后再放到暂存区 但是这里没    有生成树对象
* git <span class="hljs-keyword">ls</span>-<span class="hljs-keyword">files</span> -s  查看暂存区的当前状态
</code></pre></div>
<h3 id="添加到版本库">添加到版本库</h3>
<div class="highlight"><pre class="code" ><code>* git <span class="hljs-keyword">commit</span> -m <span class="hljs-string">&#x27;提交的信息&#x27;</span>
</code></pre></div>
<h3 id="结论">结论</h3>
<div class="highlight"><pre class="code" ><code><span class="hljs-bullet">*</span> 一次完整的项目提交 包括至少一个提交对象 一个树对象 0或多个git对象
<span class="hljs-bullet">*</span> 工作目录中文件只有两种状态 已跟踪（只要第一次add就跟踪上了） 未跟踪
<span class="hljs-bullet">*</span> 已经跟踪的文件还有三种状态 已提交 已修改 已暂存
<span class="hljs-bullet">*</span> 如果一个已经提交的文件再次修改要重新添加到暂存区否则显示已修改状态
<span class="hljs-bullet">*</span> 如果一个文件暂存完了没有提交前还要在修改 这时会出现一个暂存一个已修改的情况需要重新add
<span class="hljs-bullet">*</span> 
<span class="hljs-bullet">*</span> 分支就是为了保护代码方便更改存在的 假如master里面的提交对象完美了就可以在创建一个分支   添加功能如果可以就可以master合并 不行的话就可以删除这个分支 这样对于master没有影响

<span class="hljs-bullet">*</span> 新建一个分支到一个提交对象上面 这样做的好处是实现版本回推但是不改边主仓库的东西 用完    删除这个分支就可以了特别方便

<span class="hljs-bullet">*</span> 合并分支一定要注意顺序 后面的可能会过期还会存在bug 会产生冲突
<span class="hljs-bullet">    -</span> 快速合并 一条分支
<span class="hljs-bullet">    -</span> 典型合并 多条分支 会有冲突（打开冲突文件看哪里要留 然后暂存提交）
<span class="hljs-bullet">    -</span> 同事之间的冲突才是最麻烦的
</code></pre></div>
<hr>
<h3 id="高级命令（crud）">高级命令（crud）</h3>
<div class="highlight"><pre class="code" ><code><span class="hljs-comment">* git init               初始化</span>
<span class="hljs-comment">* git add ./             添加暂存区   </span>
<span class="hljs-comment">* git commit -m &quot;注释&quot;     提交项目</span>
<span class="hljs-comment">* git status              查看当前状态</span>
<span class="hljs-comment">* git diff                查看当先做的哪些更新没有暂存</span>
<span class="hljs-comment">* git diff -cached        查看哪些已经更新好了准备下次提交</span>
<span class="hljs-comment">* git commit -a -m        git自动将已经跟踪过的文件暂存起来一并提交</span>
<span class="hljs-comment">* rm yd.txt               删除文件 暂存区里没有文集 版本库多了一个提交对象不过没有内容</span>
<span class="hljs-comment">* 删除文件属于修改操作 跟上面的提交步骤一样</span>
<span class="hljs-comment">* mv z.txt zx.txt         重新起名字跟已修改一样的操作</span>
<span class="hljs-comment">* git add ./</span>
<span class="hljs-comment">* git commit -m &quot;rename zx&quot;</span>
<span class="hljs-comment">* git log --oneline      查看提交历史记录</span>
</code></pre></div>
<h3 id="分支">分支</h3>
<div class="highlight"><pre class="code" ><code><span class="hljs-bullet">* </span>每一个功能都可以开一个分支，不影响主线的分支
<span class="hljs-bullet">* </span>分支就是一个活动的指针就在提交对象的前面指向最新提交
<span class="hljs-bullet">* </span>master默认是主分支
<span class="hljs-bullet">* </span>git branch test    会在当前的提交对象上创建一个分支
<span class="hljs-bullet">* </span>git checkout test  将分支转到test上面来
<span class="hljs-bullet">* </span>git branch -D test  删除分支 不能自己删自己 
<span class="hljs-bullet">* </span>git log --oneline --decorate --graph --all  查看完整的分支图（没删除前）
<span class="hljs-bullet">* </span>git config --global alias.all <span class="hljs-emphasis">&#x27;log --oneline --decorate --graph --all&#x27;</span> 配置别名
<span class="hljs-bullet">* </span>git branch -v  查看分支的最后一个提交
<span class="hljs-bullet">* </span>git branch test hash  新建一个分支到hash所对应的提交对象上去 很重要
<span class="hljs-bullet">* </span>git checkout -b test  创建分支并且切换过去
<span class="hljs-bullet">* </span>git checkout name     切换分支的时候一定要提交完的时候再切否则会出现问题
<span class="hljs-code">  每次切换分支前当前分支一定要是已提交状态 否则会污染主分支 如果第一次提交了再修改的时候没有提交他就不让切换分支了</span>
<span class="hljs-bullet">* </span>git merge hotbug(分支名)
<span class="hljs-bullet">* </span>git config --list 查看配置
</code></pre></div>
<h3 id="存储">存储</h3>
<div class="highlight"><pre class="code" ><code><span class="hljs-bullet">* </span>解决的问题 不想过多的创建提交比如iss53那个分支
<span class="hljs-bullet">* </span>git stash list 查看存储
<span class="hljs-bullet">* </span>git stash apply  拿出栈顶的元素 但是不会消除
<span class="hljs-bullet">* </span>git stash drop 名字
</code></pre></div>
<hr>
<h3 id="后悔药">后悔药</h3>
<div class="highlight"><pre class="code" ><code><span class="hljs-bullet">*</span> 工作区撤回在工作目录中的修改
<span class="hljs-bullet">  *</span> git checkout -- filename  本质是相当于重置
<span class="hljs-bullet">*</span> 暂存区撤回自己的暂存
<span class="hljs-bullet">  *</span> git reset HEAD filename
<span class="hljs-bullet">*</span> 提交区注释写错了修改注释
<span class="hljs-bullet">  *</span> git commit --amend   
</code></pre></div>
<h3 id="项目经理远程操作github仓库步骤">项目经理远程操作github仓库步骤</h3>
<div class="highlight"><pre class="code" ><code><span class="hljs-bullet">1.</span> 先在github上创建一个空的仓库new repository 注意不要有readme.md文件
<span class="hljs-bullet">2.</span> 创建本地仓库然后基础设置   git init
<span class="hljs-bullet">3.</span> 然后给github上面的地址起别名和用户别名
<span class="hljs-bullet">  *</span> git remote add use https://github.com/zhaoyuanmeng/git<span class="hljs-emphasis">_to_</span>use.git
<span class="hljs-bullet">  *</span> git config --list
<span class="hljs-bullet">4.</span> 注意如果是复制别人的github 要把.git删掉只复制项目部分代码到自己的本地仓库
<span class="hljs-bullet">5.</span> 注意凭据 本人是可以直接上传的
<span class="hljs-bullet">6.</span> 检查完毕后推送到远地仓库  git push use(别名) master（分支）
<span class="hljs-bullet">7.</span> 给员工开放权限通过github里面的manage access contributor
<span class="hljs-bullet">8.</span> 获取员工上传的代码 git fetch use(别名)
<span class="hljs-bullet">9.</span> 切换成远程跟踪分支 git checkout use/master
<span class="hljs-bullet">10.</span> 合并远程跟踪分支 git merge use/master 
<span class="hljs-bullet">11.</span> git pull  获取数据并合并
</code></pre></div>
<h3 id="员工拉取项目经理的仓库代码">员工拉取项目经理的仓库代码</h3>
<div class="highlight"><pre class="code" ><code><span class="hljs-number">1</span>. 本地不用创建仓库 直接克隆下来
  * git <span class="hljs-keyword">clone</span> <span class="hljs-title">https</span>://github.com/zhaoyuanmeng/git_to_use.git
<span class="hljs-number">2</span>. 它自动创建一个别名; 查看别名git remote -v       
<span class="hljs-number">3</span>. 创建新的文件 echo <span class="hljs-string">&quot;hello world&quot;</span>&gt;test.txt
<span class="hljs-number">4</span>. git add ./   
<span class="hljs-number">5</span>. git commit -m <span class="hljs-string">&quot;tijiao&quot;</span>
<span class="hljs-number">6</span>. git push origin <span class="hljs-keyword">master</span>
<span class="hljs-title"></span></code></pre></div>
<h3 id="本地分支-远程分支 远程跟踪分支">本地分支 远程分支 远程跟踪分支</h3>
<div class="highlight"><pre class="code" ><code><span class="hljs-bullet">* </span>本地分支是本机电脑的
<span class="hljs-bullet">* </span>远程分支是github上对应的分支
<span class="hljs-bullet">* </span>远程跟踪分支是本地与远程分支的一个映射
<span class="hljs-bullet">* </span>成员克隆远程仓库以后默认本地分支和对应的远程跟踪分支有同步关系
<span class="hljs-bullet">* </span>在push的时候会生成对应的远程跟踪分支
<span class="hljs-bullet">* </span>在fetch的时候把数据下载到远程跟踪分支里面
<span class="hljs-bullet">* </span>注意成员开辟新分支提交的时候 经理在fetch的时候要创建对应的分支不用加别名
<span class="hljs-bullet">* </span>主分支和远程跟踪分支自动绑定的功能(默认情况下push的时候)
<span class="hljs-bullet">* </span>建立同步关系 git branch -u (远程跟踪分支) 注意要在那个分支里面输入这个命令
<span class="hljs-bullet">* </span>git checkout --track remote别名/分支名  最自动创建本地分支并且与远程跟踪分支绑定
<span class="hljs-bullet">* </span>git checkout -b 分支名 remote别名/分支名 效果与上面一样     
</code></pre></div>
<h3 id="删除远程分支">删除远程分支</h3>
<div class="highlight"><pre class="code" ><code>* git <span class="hljs-keyword">push</span> <span class="hljs-keyword">use</span>(别名) --<span class="hljs-keyword">delete</span> (分支名)  删除远程分支
* git remote prune <span class="hljs-keyword">use</span> --dry-<span class="hljs-keyword">run</span>  列出仍在远程跟踪但是远程分支已经被删除的无用分支
* git remote prune <span class="hljs-keyword">use</span>    清除上面的命令列出来的远程跟宗
</code></pre></div>
<h3 id="冲突">冲突</h3>
<div class="highlight"><pre class="code" ><code><span class="hljs-comment">* git本地操作的冲突</span>
<span class="hljs-comment">    * 典型合并的时候</span>
    
<span class="hljs-comment">* git远程协作的时候</span>
<span class="hljs-comment">    * push</span>
<span class="hljs-comment">        * 两个人同时推（更改同一个文件）解决办法只能先把远程仓库拉下来 然后再更改那个    文件然后再add commit push  </span>
<span class="hljs-comment">    * pull</span>
<span class="hljs-comment">        * 更改完以后不push 直接pull会报错 远程仓库会覆盖更改的内容建议push 不过push还会出错就是上面那个错误</span>
</code></pre></div>
<h3 id="参加开源项目的步骤-（pull request）">参加开源项目的步骤 （pull request）</h3>
<div class="highlight"><pre class="code" ><code>* 如果参加某个项目时，但是没有推送权限，这时候可以通过对这个项目进行fork。这会在
  你的空间中创建一个完全属于你的项目副本，且你对其具有推送权限。通过这个方式项目的
  管理者不用忙着添加贡献者，人们可以fork这个项目将修改推送到项目副本上，并通过pull 
  request来将他们的改动进入源版本库

1. 先将源仓库fork到自己的仓库
2. 然后clone到本地仓库
3. 更改后提交到自己的远程仓库
4. pull request
5. 管理人审核 然后merge

* 不重新fork怎么解决
  * git 支持同时跟踪多个仓库
    git remote add 别名2 地址
    <span class="hljs-comment">&lt;!-- git remote rm 别名1 --&gt;</span>
    git fetch 别名2
    git branch -u 远程跟踪分支
    git merge 对应的远程跟踪分支
    git push (这里还是会提交到自己上面)
    然后pull request
</code></pre></div>
<h3 id="ssh">SSH</h3>
<div class="highlight"><pre class="code" ><code><span class="hljs-bullet">*</span> github特有的一种协议 走的不是验证密码的道路而是密匙
<span class="hljs-bullet">*</span> 配置步骤
<span class="hljs-bullet">  *</span> ssh -keygen -t rsa -C 邮箱名
<span class="hljs-bullet">  *</span> 在c:\users\Adminstor\.ssh下生成公私密匙
<span class="hljs-bullet">  *</span> ssh -T git@github.com 测试一下
<span class="hljs-bullet">  *</span> 把公共的密匙复制到github账户里面setting下
<span class="hljs-bullet">  *</span> 好处是不用每次输密码 而且项目经理不用设置贡献者 直接把他们的公共密匙复制到自己账户    就可以了
</code></pre></div>
<h3 id="gitnore文件">.gitnore文件</h3>
<div class="highlight"><pre class="code" ><code><span class="hljs-bullet">* </span>这个文件可以直接从github上下载
<span class="hljs-bullet">* </span>目的是不在git仓库上传不必要的文件
</code></pre></div>
<h3 id="视屏地址">视屏地址</h3>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">https://www.bilibili.com/video/BV15J411973T?p=1</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>系统</category>
      </categories>
      <tags>
        <tag>Git</tag>
      </tags>
  </entry>
  <entry>
    <title>Git 源码编译安装</title>
    <url>/2020/07/%E6%BA%90%E7%A0%81%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85/index.html</url>
    <content><![CDATA[<h2 id="git-源码编译安装">Git 源码编译安装</h2>
<ul>
<li>Git官网：<a href="https://git-scm.com">https://git-scm.com</a></li>
<li>淘宝镜像网站：<a href="https://npm.taobao.org/mirrors/git-for-windows">https://npm.taobao.org/mirrors/git-for-windows</a></li>
<li>仓库地址：<a href="https://github.com/git/git/tags">https://github.com/git/git/tags</a></li>
</ul>
<h3 id="git-依赖的库">Git 依赖的库</h3>
<blockquote>
<p>依赖库：autotools、curl、zlib、openssl、expat 和 libiconv</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">yum install dh-autoreconf curl-devel expat-devel gettext-devel  openssl-devel perl-devel zlib-devel</span><br></pre></td></tr></table></figure>
</blockquote>
<blockquote>
<p>为了添加文档的多种格式（doc、html、info），按需要以下附加的依赖</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">yum install asciidoc xmlto docbook2X</span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="编译安装">编译安装</h3>
<blockquote>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">./configure --prefix=/usr/local/git</span><br><span class="line">make -j$(nproc)</span><br><span class="line">make install</span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="配置环境变量">配置环境变量</h3>
<blockquote>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vi /etc/profile </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">在底部加上</span></span><br><span class="line">export PATH=$PATH:/usr/local/git/bin</span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="刷新环境变量">刷新环境变量</h3>
<blockquote>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">. /etc/profile</span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="卸载旧版git">卸载旧版Git</h3>
<blockquote>
<p>安装编译源码所需依赖(gettext-devel)的时候，yum自动帮你安装了git，这时候你需要先卸载这个旧版的git。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">yum -y remove git</span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="查看git是否安装完成">查看Git是否安装完成</h3>
<blockquote>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git --version</span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="附：">附：</h3>
<blockquote>
<p><a href="/2020/07/Linux-%E9%85%8D%E7%BD%AE-Git-%E5%91%BD%E4%BB%A4%E6%8F%90%E7%A4%BA%E7%AC%A6/index.html">Git优化配置：Linux 配置 Git 命令提示符</a></p>
</blockquote>
]]></content>
      <categories>
        <category>服务</category>
        <category>Git</category>
      </categories>
      <tags>
        <tag>Git</tag>
      </tags>
  </entry>
  <entry>
    <title>脚本常用逻辑和表达式</title>
    <url>/2020/05/%E8%84%9A%E6%9C%AC%E5%B8%B8%E7%94%A8%E9%80%BB%E8%BE%91%E5%92%8C%E8%A1%A8%E8%BE%BE%E5%BC%8F/index.html</url>
    <content><![CDATA[<p>用[[]]替代[]</p>
<p>使用[[]]能避免像异常的文件扩展名之类的问题，而且能带来很多语法上的改进，而且还增加了很多新功能：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">操作符	功能说明</span><br><span class="line">||	逻辑or(仅双中括号里使用)</span><br><span class="line">&amp;&amp;	逻辑and(仅双中括号里使用)</span><br><span class="line">&lt;	字符串比较(双中括号里不需要转移)</span><br><span class="line">-lt	数字比较</span><br><span class="line">=	字符串相等</span><br><span class="line">==	以Globbing方式进行字符串比较(仅双中括号里使用，参考下文)</span><br><span class="line">=~	用正则表达式进行字符串比较(仅双中括号里使用，参考下文)</span><br><span class="line">-n	非空字符串</span><br><span class="line">-z	空字符串</span><br><span class="line">-eq	数字相等</span><br><span class="line">-ne	数字不等</span><br></pre></td></tr></table></figure>
<p>单中括号：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[ &quot;$&#123;name&#125;&quot; \&gt; &quot;a&quot; -o $&#123;name&#125; \&lt; &quot;m&quot; ]</span><br></pre></td></tr></table></figure>
<p>双中括号</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[[ &quot;$&#123;name&#125;&quot; &gt; &quot;a&quot; &amp;&amp; &quot;$&#123;name&#125;&quot; &lt; &quot;m&quot;  ]]</span><br></pre></td></tr></table></figure>
<p>正则表达式/Globbing</p>
<p>使用双中括号带来的好处用下面几个例子最能表现：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">t=&quot;abc123&quot;</span><br><span class="line">[[ &quot;$t&quot; == abc* ]]        </span><br><span class="line"># true (globbing比较)</span><br><span class="line">[[ &quot;$t&quot; == &quot;abc*&quot; ]]      </span><br><span class="line"># false (字面比较)</span><br><span class="line">[[ &quot;$t&quot; =~ [abc]+[123]+ ]]</span><br><span class="line"># true (正则表达式比较)</span><br><span class="line">[[ &quot;$t&quot; =~ &quot;abc*&quot; ]]      </span><br><span class="line"># false (字面比较)</span><br></pre></td></tr></table></figure>
<p>注意，从bash 3.2版开始，正则表达式和globbing表达式都不能用引号包裹。如果你的表达式里有空格，你可以把它存储到一个变量里：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">r=&quot;a b+&quot;</span><br><span class="line">[[ &quot;a bbb&quot; =~ $r ]]        </span><br><span class="line"># true</span><br></pre></td></tr></table></figure>
<p>按Globbing方式的字符串比较也可以用到case语句中：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">case $t in</span><br><span class="line">abc*)  &lt;action&gt; ;;</span><br><span class="line">esac</span><br></pre></td></tr></table></figure>
<p>字符串操作</p>
<p>Bash里有各种各样操作字符串的方式，很多都是不可取的。</p>
<p>基本用户</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">f=&quot;path1/path2/file.ext&quot;</span><br><span class="line">len=&quot;$&#123;#f&#125;&quot; # = 20 (字符串长度)</span><br><span class="line"># 切片操作: $&#123;&lt;var&gt;:&lt;start&gt;&#125; or $&#123;&lt;var&gt;:&lt;start&gt;:&lt;length&gt;&#125;</span><br><span class="line">slice1=&quot;$&#123;f:6&#125;&quot;</span><br><span class="line"># = &quot;path2/file.ext&quot;</span><br><span class="line">slice2=&quot;$&#123;f:6:5&#125;&quot;</span><br><span class="line"># = &quot;path2&quot;</span><br><span class="line">slice3=&quot;$&#123;f: -8&#125;&quot;</span><br><span class="line"># = &quot;file.ext&quot;(注意：&quot;-&quot;前有空格)</span><br><span class="line">pos=6</span><br><span class="line">len=5</span><br><span class="line">slice4=&quot;$&#123;f:$&#123;pos&#125;:$&#123;len&#125;&#125;&quot;</span><br><span class="line"># = &quot;path2&quot;</span><br></pre></td></tr></table></figure>
<p>替换操作(使用globbing)</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">f=&quot;path1/path2/file.ext&quot;</span><br><span class="line">single_subst=&quot;$&#123;f/path?/x&#125;&quot;  </span><br><span class="line"># = &quot;x/path2/file.ext&quot;</span><br><span class="line">global_subst=&quot;$&#123;f//path?/x&#125;&quot;  </span><br><span class="line"># = &quot;x/x/file.ext&quot;</span><br><span class="line"># 字符串拆分</span><br><span class="line">readonly DIR_SEP=&quot;/&quot;</span><br><span class="line">array=($&#123;f//$&#123;DIR_SEP&#125;/ &#125;)</span><br><span class="line">second_dir=&quot;$&#123;arrray[1]&#125;&quot;    </span><br><span class="line"># = path2</span><br></pre></td></tr></table></figure>
<p>删除头部或尾部(使用globbing)</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">f=&quot;path1/path2/file.ext&quot;</span><br><span class="line"># 删除字符串头部</span><br><span class="line">extension=&quot;$&#123;f#*.&#125;&quot;  # = &quot;ext&quot;</span><br><span class="line"># 以贪婪匹配方式删除字符串头部</span><br><span class="line">filename=&quot;$&#123;f##*/&#125;&quot;  # = &quot;file.ext&quot;</span><br><span class="line"># 删除字符串尾部</span><br><span class="line">dirname=&quot;$&#123;f%/*&#125;&quot;    </span><br><span class="line"># = &quot;path1/path2&quot;</span><br><span class="line"># 以贪婪匹配方式删除字符串尾部</span><br><span class="line">root=&quot;$&#123;f%%/*&#125;&quot;      </span><br><span class="line"># = &quot;path1&quot;</span><br></pre></td></tr></table></figure>
<p>避免使用临时文件</p>
<p>有些命令需要以文件名为参数，这样一来就不能使用管道。这个时候?&lt;()?就显出用处了，它可以接受一个命令，并把它转换成可以当成文件名之类的什么东西：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 下载并比较两个网页</span><br><span class="line">diff &lt;(wget -O - url1) &lt;(wget -O - url2)</span><br></pre></td></tr></table></figure>
<p>还有一个非常有用处的是”here documents”，它能让你在标准输入上输入多行字符串。下面的’MARKER’可以替换成任何字词。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 任何字词都可以当作分界符</span><br><span class="line">command  &lt;&lt; MARKER</span><br><span class="line">...</span><br><span class="line">$&#123;var&#125;</span><br><span class="line">$(cmd)</span><br><span class="line">...</span><br><span class="line">MARKER</span><br></pre></td></tr></table></figure>
<p>如果文本里没有内嵌变量替换操作，你可以把第一个MARKER用单引号包起来：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">command &lt;&lt; &#x27;MARKER&#x27;</span><br><span class="line">...</span><br><span class="line">no substitution is happening here.</span><br><span class="line">$ (dollar sign) is passed through verbatim.</span><br><span class="line">...</span><br><span class="line">MARKER</span><br></pre></td></tr></table></figure>
<p>内置变量</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">变量	说明</span><br><span class="line">$0      脚本名称</span><br><span class="line">$n      传给脚本/函数的第n个参数</span><br><span class="line">$$      脚本的PID</span><br><span class="line">$!      上一个被执行的命令的PID(后台运行的进程)</span><br><span class="line">$?      上一个命令的退出状态(管道命令使用$&#123;PIPESTATUS&#125;)</span><br><span class="line">$#      传递给脚本/函数的参数个数</span><br><span class="line">$@      传递给脚本/函数的所有参数(识别每个参数)</span><br><span class="line">$*      传递给脚本/函数的所有参数(把所有参数当成一个字符串)</span><br></pre></td></tr></table></figure>
<p>提示</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">使用$*很少是正确的选择。</span><br><span class="line">$@能够处理空格参数，而且参数间的空格也能正确的处理。</span><br><span class="line">使用$@时应该用双引号括起来，像”$@”这样。</span><br></pre></td></tr></table></figure>
<p>调试</p>
<p>对脚本进行语法检查：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">bash -n myscript.sh</span><br></pre></td></tr></table></figure>
<p>跟踪脚本里每个命令的执行：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">bash -v myscripts.sh</span><br></pre></td></tr></table></figure>
<p>跟踪脚本里每个命令的执行并附加扩充信息：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">bash -x myscript.sh</span><br></pre></td></tr></table></figure>
<p>你可以在脚本头部使用set -o verbose和set -o xtrace来永久指定-v和-o。当在远程机器上执行脚本时，这样做非常有用，用它来输出远程信息。</p>
<p>什么时候不应该使用bash脚本</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">你的脚本太长，多达几百行</span><br><span class="line">你需要比数组更复杂的数据结构</span><br><span class="line">出现了复杂的转义问题</span><br><span class="line">有太多的字符串操作</span><br><span class="line">不太需要调用其它程序和跟其它程序管道交互</span><br><span class="line">担心性能</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>脚本</category>
      </categories>
      <tags>
        <tag>shell</tag>
      </tags>
  </entry>
  <entry>
    <title>获取k8s中yaml里面的信息</title>
    <url>/2020/06/%E8%8E%B7%E5%8F%96k8s%E4%B8%ADyaml%E9%87%8C%E9%9D%A2%E7%9A%84%E4%BF%A1%E6%81%AF/index.html</url>
    <content><![CDATA[<h2 id="查看k8s的deploy">查看k8s的deploy</h2>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@k8s-master ~]<span class="comment"># kubectl -n kube-system get deploy </span></span><br><span class="line">NAME             READY   UP-TO-DATE   AVAILABLE   AGE</span><br><span class="line">coredns          0/2     2            0           2y46d</span><br><span class="line">kuboard          1/1     1            1           55d</span><br><span class="line">metrics-server   1/1     1            1           55d</span><br></pre></td></tr></table></figure>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line">[<span class="string">root@k8s-master</span> <span class="string">~</span>]<span class="comment"># kubectl -n kube-system get deploy coredns -o yaml </span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">apps/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Deployment</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">annotations:</span></span><br><span class="line">    <span class="attr">deployment.kubernetes.io/revision:</span> <span class="string">&quot;3&quot;</span></span><br><span class="line">  <span class="attr">creationTimestamp:</span> <span class="string">&quot;2019-04-24T05:49:10Z&quot;</span></span><br><span class="line">  <span class="attr">generation:</span> <span class="number">3</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">k8s-app:</span> <span class="string">kube-dns</span></span><br><span class="line">  <span class="attr">managedFields:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">apiVersion:</span> <span class="string">apps/v1</span></span><br><span class="line">    <span class="attr">fieldsType:</span> <span class="string">FieldsV1</span></span><br><span class="line">    <span class="attr">fieldsV1:</span></span><br><span class="line">      <span class="attr">f:metadata:</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="获取这个deploy的创建时间">获取这个deploy的创建时间</h2>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 以下命令都可以 </span></span><br><span class="line"><span class="comment"># 结果为(UTC 时间)： 2019-04-24T05:49:10Z</span></span><br><span class="line">kubectl -n kube-system get deploy coredns --output=<span class="string">&quot;jsonpath=&#123;.metadata.creationTimestamp&#125;&quot;</span></span><br><span class="line">kubectl -n kube-system get deploy coredns -o jsonpath=&#123;.metadata.creationTimestamp&#125;</span><br><span class="line">kubectl -n kube-system get deploy coredns -o go-template=<span class="string">&#x27;&#123;&#123;.metadata.creationTimestamp&#125;&#125;&#x27;</span></span><br></pre></td></tr></table></figure>
<h2 id="按pod创建时间排序获取列表">按pod创建时间排序获取列表</h2>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">kubectl -n kube-system get pods --sort-by=.metadata.creationTimestamp</span><br><span class="line">NAME                                 READY   STATUS             RESTARTS   AGE</span><br><span class="line">kube-apiserver-k8s-master            1/1     Running            11         2y46d</span><br><span class="line">kube-proxy-ld577                     1/1     Running            5          2y46d</span><br><span class="line">kube-proxy-k9zxm                     1/1     Running            2          2y46d</span><br><span class="line">kube-proxy-zfrgc                     1/1     Running            2          2y46d</span><br><span class="line">kube-flannel-ds-amd64-tlhlp          1/1     Running            6          2y46d</span><br><span class="line">kube-flannel-ds-amd64-j27t8          1/1     Running            2          2y46d</span><br><span class="line">kube-flannel-ds-amd64-q5p5n          1/1     Running            2          2y46d</span><br><span class="line">kube-controller-manager-k8s-master   1/1     Running            4          2y46d</span><br><span class="line">kube-scheduler-k8s-master            1/1     Running            5          2y46d</span><br><span class="line">etcd-k8s-master                      1/1     Running            9          198d</span><br><span class="line">coredns-78499c79bb-8qbkt             0/1     CrashLoopBackOff   26         55d</span><br><span class="line">coredns-78499c79bb-pnsw2             0/1     CrashLoopBackOff   26         55d</span><br><span class="line">kuboard-7986796cf8-zctql             1/1     Running            0          55d</span><br><span class="line">metrics-server-677dcb8b4d-gwd4p      1/1     Running            0          55d</span><br></pre></td></tr></table></figure>
<h6 id="将pod的创建时间转换为时间戳">将pod的创建时间转换为时间戳</h6>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">creationTimestamp=`kubectl -n kube-system get deploy coredns -o go-template=<span class="string">&#x27;&#123;&#123;.metadata.creationTimestamp&#125;&#125;&#x27;</span>`</span><br><span class="line"><span class="built_in">date</span> -d <span class="string">&quot;<span class="variable">$creationTimestamp</span>&quot;</span> +%s</span><br></pre></td></tr></table></figure>
<p>参考：shell 时间转换 <a href="/2020/06/shell-%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%A4%84%E7%90%86%E6%97%B6%E9%97%B4-date/index.html" title="shell 命令行处理时间(date)">shell 命令行处理时间(date)</a></p>
]]></content>
      <categories>
        <category>kubernetes</category>
      </categories>
      <tags>
        <tag>kubernetes</tag>
      </tags>
  </entry>
  <entry>
    <title>pod进程的运行用户</title>
    <url>/2021/05/Kubernetes%E7%9A%84pod%E8%BF%90%E8%A1%8C%E6%97%B6%E7%9A%84%E7%9B%B8%E5%85%B3%E6%9D%83%E9%99%90/index.html</url>
    <content><![CDATA[<h2 id="pod进程的运行用户">pod进程的运行用户</h2>
<p>配置位置：Deployment.spec.template.spec.containers.securityContext</p>
<p>在k8s v1.16.2 中没有fsGroup</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">containers:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">redis</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">registry.cn-shanghai.aliyuncs.com/outsrkem/redis:5.0.2-tools</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">http</span></span><br><span class="line">      <span class="attr">containerPort:</span> <span class="number">6379</span></span><br><span class="line">      <span class="attr">protocol:</span> <span class="string">TCP</span></span><br><span class="line">    <span class="attr">volumeMounts:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">vol-logstash-volume</span></span><br><span class="line">      <span class="attr">mountPath:</span> <span class="string">/usr/local/redis/conf/conf.d/</span></span><br><span class="line">    <span class="attr">securityContext:</span></span><br><span class="line">      <span class="attr">runAsNonRoot:</span> <span class="literal">true</span></span><br><span class="line">      <span class="attr">runAsUser:</span> <span class="number">1200</span></span><br></pre></td></tr></table></figure>
<p>效果如下，相当于Dockerfile中的USER 参数指定的用户一样。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[redis@redis-pod-cm-1-7fb75f45bd-ts8mf redis]$ id</span><br><span class="line">uid=1200(redis) gid=1200(redis) groups=1200(redis)</span><br><span class="line">[redis@redis-pod-cm-1-7fb75f45bd-ts8mf redis]$ ps axu </span><br><span class="line">USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND</span><br><span class="line">redis         1  0.1  0.1  50248  2676 ?        Ssl  10:57   0:00 redis-server 0.0.0.0:6379</span><br><span class="line">redis       102  0.0  0.1  12364  2496 pts/0    Ss   11:05   0:00 bash</span><br></pre></td></tr></table></figure>
<h2 id="volumes配置权限">volumes配置权限</h2>
<p>为volumes配置权限Deployment.spec.template.spec.volumes.configMap.defaultMode，</p>
<p>此权限只针对挂载的文件生效，</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">containers:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">redis</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">registry.cn-shanghai.aliyuncs.com/outsrkem/redis:5.0.2-tools</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">http</span></span><br><span class="line">      <span class="attr">containerPort:</span> <span class="number">6379</span></span><br><span class="line">      <span class="attr">protocol:</span> <span class="string">TCP</span></span><br><span class="line">    <span class="attr">volumeMounts:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">vol-logstash-volume</span></span><br><span class="line">      <span class="attr">mountPath:</span> <span class="string">/usr/local/redis/conf/conf.d/</span></span><br><span class="line">    <span class="attr">securityContext:</span></span><br><span class="line">      <span class="attr">runAsUser:</span> <span class="number">1200</span></span><br><span class="line">  <span class="attr">volumes:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">vol-logstash-volume</span></span><br><span class="line">    <span class="attr">configMap:</span></span><br><span class="line">      <span class="attr">name:</span> <span class="string">logstash-config</span></span><br><span class="line">      <span class="attr">defaultMode:</span> <span class="number">0600</span></span><br></pre></td></tr></table></figure>
<p>效果如下</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[redis@redis-pod-cm-1-7fb75f45bd-ts8mf conf]$ find . -exec ls -l &#123;&#125; \;</span><br><span class="line">total 64</span><br><span class="line">drwxrwxrwx 3 root root   151 Nov  1 10:57 conf.d  # 挂载在这个目录下</span><br><span class="line">total 0</span><br><span class="line">lrwxrwxrwx 1 root root 26 Nov  1 10:57 02-beats-input.conf -&gt; ..data/02-beats-input.conf</span><br><span class="line">lrwxrwxrwx 1 root root 21 Nov  1 10:57 10-syslog.conf -&gt; ..data/10-syslog.conf</span><br><span class="line">lrwxrwxrwx 1 root root 20 Nov  1 10:57 11-nginx.conf -&gt; ..data/11-nginx.conf</span><br><span class="line">lrwxrwxrwx 1 root root 21 Nov  1 10:57 30-output.conf -&gt; ..data/30-output.conf</span><br><span class="line">total 16</span><br><span class="line">-rw------- 1 root root  41 Nov  1 10:57 02-beats-input.conf  # 这里是生效的权限</span><br><span class="line">-rw------- 1 root root 456 Nov  1 10:57 10-syslog.conf</span><br><span class="line">-rw------- 1 root root 113 Nov  1 10:57 11-nginx.conf</span><br><span class="line">-rw------- 1 root root 151 Nov  1 10:57 30-output.conf</span><br><span class="line">-rw------- 1 root root 41 Nov  1 10:57 ./conf.d/..2020_11_01_02_57_10.956627988/02-beats-input.conf</span><br><span class="line">-rw------- 1 root root 456 Nov  1 10:57 ./conf.d/..2020_11_01_02_57_10.956627988/10-syslog.conf</span><br><span class="line">-rw------- 1 root root 113 Nov  1 10:57 ./conf.d/..2020_11_01_02_57_10.956627988/11-nginx.conf</span><br><span class="line">-rw------- 1 root root 151 Nov  1 10:57 ./conf.d/..2020_11_01_02_57_10.956627988/30-output.conf</span><br><span class="line">lrwxrwxrwx 1 root root 21 Nov  1 10:57 ./conf.d/10-syslog.conf -&gt; ..data/10-syslog.conf</span><br><span class="line">lrwxrwxrwx 1 root root 20 Nov  1 10:57 ./conf.d/11-nginx.conf -&gt; ..data/11-nginx.conf</span><br><span class="line">lrwxrwxrwx 1 root root 21 Nov  1 10:57 ./conf.d/30-output.conf -&gt; ..data/30-output.conf</span><br><span class="line">lrwxrwxrwx 1 root root 26 Nov  1 10:57 ./conf.d/02-beats-input.conf -&gt; ..data/02-beats-input.conf</span><br><span class="line">lrwxrwxrwx 1 root root 31 Nov  1 10:57 ./conf.d/..data -&gt; ..2020_11_01_02_57_10.956627988</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>kubernetes</category>
      </categories>
      <tags>
        <tag>kubernetes</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux 采用 SSH CA 登陆验证</title>
    <url>/2021/05/Linux-%E9%87%87%E7%94%A8-SSH-CA-%E7%99%BB%E9%99%86%E9%AA%8C%E8%AF%81/index.html</url>
    <content><![CDATA[<h2 id="linux-采用 ssh ca 登陆验证">Linux 采用 SSH CA 登陆验证</h2>
<p>当配置大量的服务器有很多用户，保持SSH访问在线的基础设施可以变得复杂，SSH实际上具有使用证书颁发机构来验证服务器和客户端的功能。</p>
<p>这样的好处就是：</p>
<ul>
<li>可以控制登录的源ip</li>
<li>限制登录的用户</li>
<li>有新用户的时候不需要把客户机的pub公钥放到服务器上</li>
</ul>
<h2 id="步骤">步骤</h2>
<ul>
<li>生成 CA 证书</li>
<li>为目标服务端配置 SSH 服务的 CA 公钥信任</li>
<li>生产客户端 SSH 密钥对</li>
<li>给客户端SSH公钥进行签名</li>
<li>客户端采用客户端 SSH 私钥和签名公钥登陆目标主机</li>
</ul>
<h2 id="生成-ca 证书">生成 CA 证书</h2>
<p>目的：配置客户端认证服务器的证书，该证书允许我们的客户端连接到我们的服务器，而不需要质疑服务器的真实性。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">mkdir ca</span><br><span class="line">ssh-keygen -C &quot;ssh_server_ca&quot; -b 4096 -f ca/server_ca</span><br></pre></td></tr></table></figure>
<h2 id="为目标服务端配置-ssh 服务的 ca 公钥信任">为目标服务端配置 SSH 服务的 CA 公钥信任</h2>
<p>修改目标机的/etc/ssh/sshd_config文件，添加刚生产的server_ca.pub信任</p>
<p>将server_ca.pub复制到目标服务器的/etc/ssh/目录下，并修改sshd服务配置重启sshd</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cp ca/server_ca.pub /etc/ssh/</span><br><span class="line">echo &quot;TrustedUserCAKeys /etc/ssh/server_ca.pub&quot; &gt;&gt;/etc/ssh/sshd_config</span><br><span class="line">systemctl restart sshd</span><br></pre></td></tr></table></figure>
<h2 id="生产客户端-ssh 密钥对">生产客户端 SSH 密钥对</h2>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">mkdir rsa</span><br><span class="line">ssh-keygen -t rsa -b 4096 -f rsa/id_rsa -C host_cert</span><br></pre></td></tr></table></figure>
<h2 id="用刚才的ca给客户端ssh公钥进行签名">用刚才的ca给客户端SSH公钥进行签名</h2>
<p>生成id_rsa-cert.pub公钥签名文件。这里只需要客户机的公钥文件，所以也可以直接签署客户机提供的公钥。签名时需要使用ca的私钥。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd rsa</span><br><span class="line">ssh-keygen -s ../ca/server_ca -I client  -O source-address=10.10.10.11,10.10.10.12 -n root,develop -V +52w id_rsa.pub</span><br></pre></td></tr></table></figure>
<blockquote>
<p>说明：</p>
<ul>
<li>-s：CA 证书私钥</li>
<li>-I：识别证书的名称，相当于注释。 当证书用于认证时，它用于日志记录</li>
<li>-n：识别与此证书关联的名称（用户或主机），表示证书仅对该域名有效。如果有多个，则使用逗号分隔。上例中只有root和develop用户能够登录到目标服务器。</li>
<li>-V：指定证书的有效期。 在这种情况下，我们指定证书将在一年（52周）过期，默认情况下，证书是永远有效的。建议使用该参数指定有效期，并且有效期最好短一点，最长不超过 52 周。</li>
<li>-O option：source-address=address_list ：允许用户证书使用的客户端的地址，多个地址用逗号分隔，可以时候CIDR， 我们将设置这个来限制用户证书的使用范围。如： -O source-address=10.10.10.11,10.10.10.12</li>
</ul>
</blockquote>
<p>生成证书以后，可以使用下面的命令，查看证书的细节。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ssh-keygen -L -f id_rsa-cert.pub</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">大概如下</span></span><br><span class="line">id_rsa-cert.pub:</span><br><span class="line">        Type: ssh-rsa-cert-v01@openssh.com user certificate</span><br><span class="line">        Public key: RSA-CERT SHA256:HP71SBszAWUOgg1uOjkZCEkoeEaNgWU3eF9oCV0bctc</span><br><span class="line">        Signing CA: RSA SHA256:PpwLGScb0WQLDar94WyOD5DKkdTjzJohQS76wNRJQQg</span><br><span class="line">        Key ID: &quot;client&quot; # 此处则是 -I 指定的值</span><br><span class="line">        Serial: 0</span><br><span class="line">        Valid: from 2020-12-09T22:11:00 to 2021-12-08T22:12:27</span><br><span class="line">        Principals: # 此处则是 -n 指定的值</span><br><span class="line">                root</span><br><span class="line">                develop</span><br><span class="line">        Critical Options:  # 此处则是 -O 指定的值</span><br><span class="line">                source-address 10.10.10.11,10.10.10.12</span><br><span class="line">        Extensions: </span><br><span class="line">                permit-X11-forwarding</span><br><span class="line">                permit-agent-forwarding</span><br><span class="line">                permit-port-forwarding</span><br><span class="line">                permit-pty</span><br><span class="line">                permit-user-rc</span><br><span class="line">               </span><br></pre></td></tr></table></figure>
<h2 id="登陆">登陆</h2>
<p>将id_rsa、id_rsa-cert.pub、id_rsa.pub 全部上传到客户机</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ssh -i id_dsa root@ip  #即可登陆，默认会加载：id_dsa + id_dsa-cert.pub登陆测试机器</span><br></pre></td></tr></table></figure>
<blockquote>
<p>说明：</p>
<ul>
<li>-i 指定自己的私钥文件，默认会加载：id_dsa + id_dsa-cert.pub两个文件，默认读取 /root/.ssh/id_rsa</li>
</ul>
</blockquote>
<h2 id="python-实现">Python 实现</h2>
<p>依赖 paramiko&gt;=2.3.0 版本</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line">cat test_paramiko_cert_key.py</span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">依赖：</span></span><br><span class="line"><span class="string">    paramiko==2.3.3</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> paramiko</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> StringIO <span class="keyword">import</span> StringIO</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_ssh_ca_key</span>():</span><br><span class="line">    key_file = <span class="string">&quot;&quot;&quot;&lt;PRIVATE KEY&gt;&quot;&quot;&quot;</span></span><br><span class="line">    cert_pub_file = <span class="string">&quot;&quot;&quot;&lt;*-cert.pub&gt;&quot;&quot;&quot;</span></span><br><span class="line">    ip = <span class="string">&quot;&lt;ip&gt;&quot;</span></span><br><span class="line">    port = <span class="number">22</span></span><br><span class="line">    pkey = paramiko.DSSKey.from_private_key(StringIO(key_file))</span><br><span class="line">    pkey.load_certificate(cert_pub_file)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Client setup</span></span><br><span class="line">    ssh = paramiko.SSHClient()</span><br><span class="line">    ssh.load_system_host_keys()</span><br><span class="line">    ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())</span><br><span class="line">    ssh.connect(hostname=ip, port=port, username=<span class="string">&#x27;root&#x27;</span>, pkey=pkey)</span><br><span class="line"></span><br><span class="line">    stdin, stdout, stderr = ssh.exec_command(<span class="string">&quot;pwd&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span> stdin, stdout, stderr</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    test_ssh_ca_key()</span><br></pre></td></tr></table></figure>
<blockquote>
<p><a href="https://www.xiexianbin.cn/linux/ssh/2018-04-30-linux-ssh-ca-key-validate-hosts-and-clients/index.html">https://www.xiexianbin.cn/linux/ssh/2018-04-30-linux-ssh-ca-key-validate-hosts-and-clients/index.html</a></p>
</blockquote>
]]></content>
      <categories>
        <category>ssh</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>ssh</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux使用SNAT实现局域网上网</title>
    <url>/2021/12/Linux%E4%BD%BF%E7%94%A8SNAT%E5%AE%9E%E7%8E%B0%E5%B1%80%E5%9F%9F%E7%BD%91%E4%B8%8A%E7%BD%91/index.html</url>
    <content><![CDATA[<h2 id="1、一台能上网的linux机器">1、一台能上网的Linux机器</h2>
<p><img src="data:image/png;base64,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9crmyj7brrj2e6M4Es4WJSUlsXfv3uju7s5N6+nu7o69e/f2uxhwXyoqKqK5ublHFcqWLVviueeeG/K9pk2bFtu3b++x9sv27dtj2rRpw3qOxx57LN58881e19bU1MSyZct6hTOtra3R0tIS48aN63XN7t27Y8eOHUN+Ji4sAho4C/xlW9IjOP/5HgMAjIyVK1dGTU1NrlKkpqYmVq5cOax73XPPPfH1r389rrrqqigqKor6+vpIp9PDCnvmzp0bU6ZMiZtvvjnKy8ujtbU1Ghsb84YsAz1Hc3NzVFRU9FhbJuKTna3ybRteXl4eJ06c6HGstrY2Ivre/QlOZooTAADQr/ETynJfnP9SqVSkUqmYOnVqtLS05F5nLV++PAoKCmLcuHExbty4KCgo6BFApFKpXJBRWVnZ4/rsv2fby8vLY9myZVFaWhqpVCqamppi8+bNuXtVVlbmQo7W1tbc9StWrIgVK1ZEKpWKyspMpVc6nY5t27ZFdXV1pFKpqK6ujm3btuVCltra2ty5Az3H008/nXdL72eeeSbq6upy48h+nXxfGK7UiVMjPoDzzIxlr8euJ25MehgAMGom3fZURESPQOVI176IyExNmlAyflD3yU5x6us+ETHoe/Wlq/3IiNznXJF93qY1+xMeCXC2McUJAADOU9kw5VTZkACAs4cpTgAAAAAJU0EDAADnmQPb7uuntb+2nrJTpQA481TQAAAAACRMQAMAAACQMAENAAAAQMIENAAAAPTQ2dkZVVVVkUqlIpVKxcSJE6O2tnZE+6itrY1UKtVnW2FhYaRSqaisrIz29vZ+79Xc3ByFhYXR2tqat23ixIm552hubu73Xu3t7VFWVpb3edvb26OysjJSqVQUFhYO6nvS33N2d3dHVVVVVFZWDngfzn8WCQYAAM5559rW4XNWXz8i92las39E7nOyzs7OKC0tjUcffTS+853vRDqdjvb29li4cGEcP3481q1bd1r37+7ujpqamrjpppvytjc3N8eWLVuira0tioqKor6+PhYuXBj79uXfNr6+vj7a29tj8uTJeZ/l3nvvjU2bNkV5eXm0trZGdXV1XHXVVVFUVNTr/NbW1nj44YejoqIib18LFy6MhQsXxo4dO6KzszPmz58f1157bcyaNWvIz9nZ2RlLly6NOXPmRFNTU95zuLCooAEAACDn8ccfj5UrV8bixYsjnU5HRERJSUns2LEjGhsbT/v+7733XsyePTuqqqrytj///POxZs2aXICyePHiiIg+q2iOHz8eGzZsyNu2a9eumD9/fpSXl0dERHl5ecyfPz927dqV9/y33347Nm/eHGPHju3Vlu0/O56ioqJYs2ZNPP/888N6znfffTfWr18f11xzTd52LjwqaAAAgPPGhJLxSQ9hVJzJiqG6uro4evRor+PpdDoOHToUEZmqlePHj8fy5csjIlMtMm7cuDh69Ggu1KmtrY2xY8fmAo2skpKSKCkp6bP/nTt3RkNDQ49j8+bNizfeeCPvddkx5PPKK6/EPffc0+PYzTffHM8880yvcUVE3mNZb7zxRsybN6/HsVmzZsWdd96Z9/yBnjNbdZNvWhYXJhU0AAAARESmSqS4uDgXsvRlxowZsXv37tzrXbt2RWlpabz55pu5Y7t3744ZM2ZEa2trn2uw5HPs2LG8x48fPz7oe2R9+OGHQzren77672u8MFQCGgAAACIi4uOPP46JEycOeF5RUVGumiYi4tVXX401a9bEyy+/nDt26NChKCoqivLy8jhx4sQZGS+cTwQ0AAAARETE5Zdf3iN4ifhkF6LsV3ZKTkVFRe7f9+3bF7NmzYqdO3dGRGah3/nz54/u4OEcJ6ABAAAgIjKVMR988EF0dnbmji1fvjxOnDgRJ06ciJkzZ+aO33TTTbF9+/Zob2/P7XpUUVER7e3t8frrr8eNN944rDEUFBTkPZ5v4d6BXHbZZUM63p+++u9rvDBUFgkGAADOqFc2V/bbfsW13xulkTAYVVVVsXHjxgG3054xY0Y88cQTEZFZeDciYvbs2dHS0hI7d+4c9nbcFRUV0dzc3GPr6i1btsRzzz035HtNmzYttm/fntvFKSJi+/btMW3atCHf6ytf+UosXLiwx6LEzc3NfW7JDUOlggYAAICctWvXRl1dXdTW1uYqaTo7O6O2tjb27t0bl19+eUREbiHh/fv35wKQKVOmxJYtW6K4uHjY/d9zzz2xevXqXN/19fWRTqf73RGpL3Pnzo3GxsbcVKzW1tZobGyMuXPnDvleJSUlkU6no76+PiIy35PVq1f32iUKhktAAwAAjIrxE8p6fHF2SqfT0dbWFl1dXVFaWhqpVCoqKiqiq6srDh48GEVFRblzKyoqekwXSqfTkU6ne1SonLqLU2VlZW49m4jotbZNeXl5LFu2LNd3U1NTbN68ucf1tbW1EdFzfZyWlpaYOnVqpFKpXHs6nY5t27ZFdXV1pFKpqK6ujm3btvXYCryysrLHOFOpVKxYsSJWrFgRqVQq1x4RsXnz5mhqaopUKhWlpaWxbNmyXDg11OfMvp46dWq0tLT0OJcLU+qE5bSB89yMZa/HrieGNwcaAC5kk257KiKiR5hypGtfRHwyLWlCyfgB75Od4nRqKHPyvQZzn/50tR8Z9HjOB9nnbVqzP+GRACPFGjQAAEC/skFKPtmgAIDTY4oTAAAAQMJU0AAAAHkd2HZfP639tfWUnSoFQN9U0AAAAAAkTEADAAAAkDABDQAAAEDCBDQAAAAACRPQAAAAACRMQAMAAACQMAENAAAAQMIENAAAAAAJE9AAAAAAJExAAwAAAJAwAQ0AAABAwi5KegAAAACD8crmyn7br7j2e6M0EoCRp4IGAAAAIGEqaAAAgHPK+AllPV4f6dqX0EgARo4KGgAAAICECWgAAAAAEmaKEwAAMCr6m4rU1X5kFEcCcPZRQQMAAACQMBU0AADAGXVg230DnDFQe8ak2546/cEAnKVU0AAAAAAkTEADAAAAkDABDQAAAEDCBDQAAAAACRPQAAAAACRMQAMAAACQMAENAAAAQMIENAAAAAAJE9AAAAAAJExAAwAAAJAwAQ0AAABAwgQ0AAAAAAkT0AAAAAAkTEADAAAAkDABDQAAAEDCLkp6AAAAAENxpGtfn21d7UdGcSQAI0cFDQAAAEDCVNAAAADnhAPb7hvgjIHaAc5eKmgAAAAAEiagAQAAAEiYgAYAAAAgYQIaAAAAgIQJaAAAAAASJqABAAAASJiABgAAACBhAhoAAACAhAloAAAAABImoAEAAABImIAGAAAAIGECGgAAAICECWgAAAAAEiagAQAAAEiYgAYAAAAgYQIaAAAAgIQJaAAAAAASJqABAAAASJiABgAAACBhAhoAAACAhAloAAAAABImoAEAAABImIAGAAAAIGECGgAAAICECWgAAAAAEiagAQAAAEiYgAYAAAAgYQIaAAAAgIQJaAAAAAASJqABAAAASJiABgAAACBhAhoAAACAhAloAAAAABImoAEAAABImIAGAAAAIGECGgAAAICECWgAAAAAEiagAQAAAEiYgAYAAAAgYQIaAAAAgIQJaAAAAAASJqABAAAASJiABgAAACBhAhoAAACAhAloAAAAABImoAEAAABImIAGAAAAIGECGgAAAICECWgAAAAAEiagAQAAAEiYgAYAAAAgYQIaAAAAgIQJaAAAAAASJqABAAAASJiABgAAACBhAhoAAACAhAloAAAAABImoAEAAABImIAGAAAAIGECGgAAAICECWgAAAAAEiagAQAAAEiYgAYAAAAgYQIaAAAAgIQJaAAAAAASJqABAAAASJiABgAAACBhAhoAAACAhAloAAAAABImoAEAAABImIAGAAAAIGECGgAAAICECWgAAAAAEiagAQAAAEiYgAYAAAAgYQIaAAAAgIQJaAAAAAASJqABAAAASJiABgAAACBhAhoAAACAhAloAAAAABImoAEAAABImIAGAAAAIGECGgAAAICECWgAAAAAEiagAQAAAEiYgAYAAAAgYQIaAAAAgIQJaAAAAAASJqABAAAASJiABgAAACBhAhoAAACAhAloAAAAABImoAEAAABImIAGAAAAIGECGgAAAICECWgAAAAAEiagAQAAAEiYgAYAAAAgYQIaAAAAgIQJaAAAAAASJqABAAAASJiABgAAACBhAhoAAACAhAloAAAAABImoAEAAABImIAGAAAAIGECGgAAAICECWgAAAAAEiagAQAAAEiYgAYAAAAgYQIaAAAAgIQJaAAAAAASJqABAAAASNj/D+sKu1+5byVpAAAAAElFTkSuQmCC" alt=""></p>
<h2 id="2、操作步骤">2、操作步骤</h2>
<h3 id="host-10-11">host-10-11</h3>
<ul>
<li>
<p>配置snat，开启路由转发</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">iptables -t nat -A POSTROUTING -s 10.10.10.0/24 -o ens34 -j MASQUERADE</span><br><span class="line"><span class="comment"># -s 指定内网网段</span></span><br><span class="line"><span class="comment"># -o 指定能上公网的出口网卡名称</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;1&quot;</span> &gt; /proc/sys/net/ipv4/ip_forward</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="host-10-12">host-10-12</h3>
<ul>
<li>
<p>添加网关指向10.10.10.11</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">route add default gw 10.10.10.11</span><br><span class="line"><span class="comment"># 或者</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;GATEWAY=10.10.10.11&#x27;</span> &gt;&gt; /etc/sysconfig/network</span><br><span class="line"><span class="comment"># 重启网卡</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="备注">备注</h2>
<ul>
<li>
<p>永久开启路由转发</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;net.ipv4.ip_forward = 1&#x27;</span> &gt;&gt; /etc/sysctl.conf</span><br><span class="line">sysctl -p</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>地址伪装</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">iptables -t nat -A POSTROUTING -s 10.10.10.0/24 -o eth0 -j SNAT --to-source 218.29.30.31</span><br><span class="line">    <span class="comment"># 地址伪装——MASQUERADE </span></span><br><span class="line">    <span class="comment">#    适用于外网 IP 地址非固定的情况</span></span><br><span class="line">    <span class="comment">#    对于 ADSL 拨号连接，接口通常为 ppp0、ppp1</span></span><br><span class="line">    <span class="comment">#    将 SNAT 规则改为 MASQUERADE 即可，即将原地址实时的转换为动态的公网 IP,如下命令</span></span><br><span class="line">iptables -t nat -A POSTROUTING -s 10.10.10.0/24 -o eth0 -j MASQUERADE</span><br></pre></td></tr></table></figure>
</li>
</ul>
]]></content>
      <categories>
        <category>系统</category>
      </categories>
      <tags>
        <tag>iptables</tag>
      </tags>
  </entry>
  <entry>
    <title>Nginx配置之proxy_pass</title>
    <url>/2021/05/Nginx%E9%85%8D%E7%BD%AE%E4%B9%8Bproxy-pass/index.html</url>
    <content><![CDATA[<h2 id="nginx配置之proxy_pass">Nginx配置之proxy_pass</h2>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen      80;</span><br><span class="line">    server_name www.test.com;</span><br><span class="line"> </span><br><span class="line">    # 情形A</span><br><span class="line">    # 访问 http://www.test.com/testa/aaaa</span><br><span class="line">    # 后端的request_uri为: /testa/aaaa</span><br><span class="line">    location ^~ /testa/ &#123;</span><br><span class="line">        proxy_pass http://127.0.0.1:8801;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    # 情形B</span><br><span class="line">    # 访问 http://www.test.com/testb/bbbb</span><br><span class="line">    # 后端的request_uri为: /bbbb</span><br><span class="line">    location ^~ /testb/ &#123;</span><br><span class="line">        proxy_pass http://127.0.0.1:8801/;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    # 情形C</span><br><span class="line">    # 下面这段location是正确的</span><br><span class="line">    location ~ /testc &#123;</span><br><span class="line">        proxy_pass http://127.0.0.1:8801;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    # 情形D</span><br><span class="line">    # 下面这段location是错误的</span><br><span class="line">    #</span><br><span class="line">    # nginx -t 时，会报如下错误: </span><br><span class="line">    #</span><br><span class="line">    # nginx: [emerg] &quot;proxy_pass&quot; cannot have URI part in location given by regular </span><br><span class="line">    # expression, or inside named location, or inside &quot;if&quot; statement, or inside </span><br><span class="line">    # &quot;limit_except&quot; block in /opt/app/nginx/conf/vhost/test.conf:17</span><br><span class="line">    # </span><br><span class="line">    # 当location为正则表达式时，proxy_pass 不能包含URI部分。本例中包含了&quot;/&quot;</span><br><span class="line">    location ~ /testd &#123;</span><br><span class="line">        proxy_pass http://127.0.0.1:8801/;   # 记住，location为正则表达式时，最后不能有斜杠，不能这样写！！！</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    # 情形E</span><br><span class="line">    # 访问 http://www.test.com/ccc/bbbb</span><br><span class="line">    # 后端的request_uri为: /aaa/ccc/bbbb</span><br><span class="line">    location /ccc/ &#123;</span><br><span class="line">        proxy_pass http://127.0.0.1:8801/aaa$request_uri;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    # 情形F</span><br><span class="line">    # 访问 http://www.test.com/namea/ddd</span><br><span class="line">    # 后端的request_uri为: /yongfu?namea=ddd</span><br><span class="line">    location /namea/ &#123;</span><br><span class="line">        rewrite    /namea/([^/]+) /yongfu?namea=$1 break;</span><br><span class="line">        proxy_pass http://127.0.0.1:8801;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    # 情形G</span><br><span class="line">    # 访问 http://www.test.com/nameb/eee</span><br><span class="line">    # 后端的request_uri为: /yongfu?nameb=eee</span><br><span class="line">    location /nameb/ &#123;</span><br><span class="line">        rewrite    /nameb/([^/]+) /yongfu?nameb=$1 break;</span><br><span class="line">        proxy_pass http://127.0.0.1:8801/;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>服务</category>
      </categories>
      <tags>
        <tag>Nginx</tag>
      </tags>
  </entry>
  <entry>
    <title>Selinux安全上下文详解</title>
    <url>/2021/05/Selinux%E5%AE%89%E5%85%A8%E4%B8%8A%E4%B8%8B%E6%96%87%E8%AF%A6%E8%A7%A3/index.html</url>
    <content><![CDATA[<h1 id="selinux安全上下文详解">Selinux安全上下文详解</h1>
<h2 id="selinux介绍">SELinux介绍</h2>
<p>selinux 有一下特点：<br>
1、防篡改<br>
2、无旁路<br>
3、可验证</p>
<h3 id="dac- 和 mac">DAC  和 MAC</h3>
<ul>
<li>
<p>DAC：自由访问控制。环境下进程是无束缚的</p>
</li>
<li>
<p>MAC:  强制访问控制。环境下策略的规则决定控制的严格程度，环境下进程可以被限制</p>
</li>
</ul>
<p>策略被用来定义被限制的进程能够使用哪些资源（文件和端口）默认情况下，没有被明确允许的行为将被拒绝。</p>
<p><img src="/images/2021-0512/1.png" alt=""><br>
<img src="/images/2021-0512/2.png" alt=""></p>
<h3 id="selinux策略">Selinux策略</h3>
<p>对象：所有可以读取的对象，包括文件、目录和进程、端口等称之为对象（object）</p>
<p>主体：进程称为主体（subject）</p>
<p>Selinux中所有的文件都赋予一个type的文件类型标签，对于所有的进程也赋予格子衣domain的标签。domain标签能够执行的操作由安全策略里定。</p>
<p>当一个subject试图访问一个object，Kernel中的策略执行服务器将检查AVC(访问矢量缓存Access Vector Cache)，在AVC中，subject和object的权限被缓存，查找“应用+文件”的安全环境。然后根据查询结果允许或拒绝访问</p>
<p>安全策略：定义主体读取对象的规则类数据库，规则中记录了哪个类型的主体使用哪个方法读取哪一个对象是允许还是拒绝，并且定义了哪种行为是允许或拒绝。</p>
<h3 id="selinux安全上下文">Selinux安全上下文</h3>
<p>传统Linux,一切皆文件，由用户，组，权限控制访问</p>
<p>在Selinux中，一切皆对象（object），由存放在inode的扩展属性域的安全元素所控制其访问</p>
<p>所有文件和端口资源和进程都具备安全标签：安全上下文（security context）</p>
<p>安全上下文有五个安全元素组成：user:role:type:sensitivity:category。如 user_u:object_r:tmp_t:s0:c0</p>
<p>实际上下文：存放在文件系统中，ls -Z;ps -Z可以查看详细信息</p>
<p>期望（默认）上下文：存放在二进制的SElinux策略库（映射目录和期望安全上下文），可使用如下命令查看：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">semanage fcontext -l</span><br></pre></td></tr></table></figure>
<h4 id="五个安全元素">五个安全元素</h4>
<p>（1）User：指示登录系统的用户类型，如root,user_u,system_u,多数本地进程都属于自由（unconfined）进程</p>
<p>（2）Role：定义文件，进程和用户的用途：文件：object_r,进程和用户：system_r</p>
<p>（3）Type：指定数据类型，规则中定义何种进程类型访问何种文件Target策略基于type实现，多服务公用：public_conten_t</p>
<p>（4）Sensitivity：限制访问的需要，由组织定义的分层安全级别，如unclassified，secret,top,secret，一个对象有且只要一个sensitivity,分0-15级，s0最低，Target策略默认使用s0</p>
<p>（5）Category：对于特定组织划分不分层的分类，如FBI Secret，NSA secret,一个对象可以有多个catagroy,c0-c1-23共1024个分类，Target策略不适用category</p>
<h3 id="selinux配置文件">Selinux配置文件</h3>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">/etc/sysconfig/selinux    (是一个符号链接,指向/etc/selinux/config)</span><br><span class="line">lrwxrwxrwx. 1 root root 17 2019-05-30 20:41:26 /etc/sysconfig/selinux -&gt; ../selinux/config</span><br><span class="line">-rw-r--r--. 1 root root 545 2017-10-15 23:21:40 /etc/selinux/config</span><br></pre></td></tr></table></figure>
<h2 id="selinux-相关操作">Selinux 相关操作</h2>
<h3 id="selinux常用工具">Selinux常用工具</h3>
<h4 id="查看相关命令">查看相关命令</h4>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 查询当前 selinux 状态（详细）</span><br><span class="line">sestatus –v</span><br><span class="line"># 获取当前 selinux 状态</span><br><span class="line">getenforce</span><br><span class="line"># 临时开启（0 关闭）</span><br><span class="line">setenforce 1</span><br><span class="line"># 查看文件的 selinux 类型</span><br><span class="line">ls –Z</span><br></pre></td></tr></table></figure>
<h4 id="修改文件安全上下文">修改文件安全上下文</h4>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">chcon [OPTION]... CONTEXT FILE...</span><br><span class="line">chcon [OPTION]... [-u USER] [-r ROLE] [-l RANGE] [-t TYPE] FILE...</span><br><span class="line">chcon [OPTION]... --reference=RFILE FILE...</span><br></pre></td></tr></table></figure>
<p>说明：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">CONTEXT		为要设置的安全上下文</span><br><span class="line">FILE		对象（文件、端口等）</span><br><span class="line">options	 选项：</span><br><span class="line">    -f 		强制修改</span><br><span class="line">    -h 		修改软连接，不修改软连接对应的实际文件</span><br><span class="line">    -R 		递归修改对象的安全上下文</span><br><span class="line">    -r  	后面接角色，例如 system_r</span><br><span class="line">    -t  	后面接安全性本文的类型字段,例如 var_log_t</span><br><span class="line">    -u  	后面接身份识别，例如 system_u</span><br><span class="line">如设置log目录的上下文：</span><br><span class="line">chcon -R -t httpd_log_t  /usr/local/nginx/logs</span><br></pre></td></tr></table></figure>
<p>如果selinux策略的数据库中有对应的标签类型，使用restorecon后面跟/var/log/message直接恢复即可</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># semanage fcontext -l |grep /var/log/message</span><br><span class="line">/var/log/messages[^/]*     all files   system_u:object_r:var_log_t:s0</span><br><span class="line"># restorecon -Frvv /var/log/message</span><br></pre></td></tr></table></figure>
<p>我们可以直接将标签加到selinux的安全策略库中，这样以后所有在该目录下创建的文件都会自动打上标签，这个定义将存储在/etc/selinux/targeted/contexts/files/file_contexts中。这样更改将是持久的。这可以通过查看文件来验证。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">semanage fcontext -a -t httpd_log_t &#x27;/usr/local/nginx/logs(/.*)?&#x27;</span><br></pre></td></tr></table></figure>
<p>根据新定义，运行以下命令递归设置logs上下文，该命令要求启用selinux才能使用</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">restorecon -Frvv /usr/local/nginx/logs</span><br></pre></td></tr></table></figure>
<h3 id="selinux端口标签">Selinux端口标签</h3>
<p>查看端口标签</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">semanage port -l</span><br></pre></td></tr></table></figure>
<p>添加端口（需启用selinux）</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">semanage port -a -t [port_label] -p [tcp|upd] [PORT]</span><br><span class="line">semanage port -a -t http_port_t -p tcp  8998</span><br></pre></td></tr></table></figure>
<p>删除端口</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">semanage port -d -t [port_lable] -p [tcp|udp] [PORT]</span><br><span class="line">semanage port -d -t http_port_t -p tcp 8998</span><br></pre></td></tr></table></figure>
<p>修改现有端口为新标签</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">semanage port -m -t [port_lable] -p [tcp|udp] [PORT]</span><br><span class="line">semanage port -m -t http_port_t -p tcp 8998  </span><br></pre></td></tr></table></figure>
<h3 id="selinux的布尔值">Selinux的布尔值</h3>
<p>SEliux 布尔值就相当于一个开关，精确控制 SElinux 对某个服务的某个选项的保护，比如 samba 服务命令列出系统中可用的 SELinux 布尔值。</p>
<p>查看命令</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">getsebool -a</span><br><span class="line">semanage boolean -l</span><br><span class="line">semanage boolean -l -C 查看修改过的布尔值</span><br></pre></td></tr></table></figure>
<p>修改命令</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">命令用来改变 SELinux 布尔值</span><br><span class="line"># setsebool -P 参数</span><br><span class="line">如开启家目录是否能访问的控制 ：</span><br><span class="line">samba_create_home_dirs --&gt; off 默认值</span><br><span class="line"># setsebool -P samba_enable_home_dirs=1  开启家目录共享所有权限</span><br><span class="line">samba_export_all_ro --&gt; off 默认值</span><br><span class="line"># setsebool -P samba_export_all_ro=1  修改用户家目录samba的布尔值为只读（须关闭家目录共享所有权限）</span><br><span class="line"># setsebool -P samba_export_all_ro on 同上一条，也是开启</span><br></pre></td></tr></table></figure>
<p>做安全上下文。所有客体（文件、进程间通讯通道、套接字、网络主机等）和主体（进程）都有与其关联的安全上下文，一个</p>
<h3 id="进程的selinx上下文">进程的selinx上下文</h3>
<p>设置执行命令的上下文，使用systemctl命令启动服务，进程会获得selinx上下文。</p>
]]></content>
      <categories>
        <category>系统</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>CentOS</tag>
      </tags>
  </entry>
  <entry>
    <title>Typecho免插件实现文章浏览次数统计(Cookie Enabled)</title>
    <url>/2021/05/Typecho%E5%85%8D%E6%8F%92%E4%BB%B6%E5%AE%9E%E7%8E%B0%E6%96%87%E7%AB%A0%E6%B5%8F%E8%A7%88%E6%AC%A1%E6%95%B0%E7%BB%9F%E8%AE%A1(Cookie%20Enabled)/index.html</url>
    <content><![CDATA[<h2 id="typecho免插件实现文章浏览次数统计(cookie-enabled)">Typecho免插件实现文章浏览次数统计(Cookie Enabled)</h2>
<p>最近在打造新主题，想给主题增加统计功能，为了不使用Views插件，撸了下面的代码，使用自定义字段保存数据，不会改动数据库结构</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 获取浏览次数</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getViewsStr</span>(<span class="params"><span class="variable">$widget</span>, <span class="variable">$format</span> = <span class="string">&quot;&#123;views&#125; 次浏览&quot;</span></span>) </span>&#123;</span><br><span class="line">    <span class="variable">$fields</span> = <span class="title function_ invoke__">unserialize</span>(<span class="variable">$widget</span>-&gt;fields);</span><br><span class="line">    <span class="keyword">if</span> (<span class="title function_ invoke__">array_key_exists</span>(<span class="string">&#x27;views&#x27;</span>,<span class="variable">$fields</span>))</span><br><span class="line">        <span class="variable">$views</span> = (!<span class="keyword">empty</span>(<span class="variable">$fields</span>[<span class="string">&#x27;views&#x27;</span>])) ? <span class="title function_ invoke__">intval</span>(<span class="variable">$fields</span>[<span class="string">&#x27;views&#x27;</span>]) : <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="variable">$views</span> = <span class="number">0</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//增加浏览次数</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$widget</span>-&gt;<span class="title function_ invoke__">is</span>(<span class="string">&#x27;single&#x27;</span>)) &#123;</span><br><span class="line">        <span class="variable">$views</span> = <span class="variable">$views</span> + <span class="number">1</span>;</span><br><span class="line">        <span class="variable">$widget</span>-&gt;<span class="title function_ invoke__">setField</span>(<span class="string">&#x27;views&#x27;</span>, <span class="string">&#x27;str&#x27;</span>, <span class="title function_ invoke__">strval</span>(<span class="variable">$views</span>), <span class="variable">$widget</span>-&gt;cid);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_ invoke__">str_replace</span>(<span class="string">&quot;&#123;views&#125;&quot;</span>, <span class="variable">$views</span>, <span class="variable">$format</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>把以上代码放到functions.php最后，然后就可以在各个页面通过</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> <span class="title function_ invoke__">_e</span>(<span class="title function_ invoke__">getViewsStr</span>(<span class="variable">$this</span>)); <span class="comment">/* $this 是 Widget_Archive 对象 */</span> <span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p>输出统计次数。<br>
应用到主题后发现不太好，每刷新一次都会重复统计浏览次数，数字大了没什么用。<br>
所以我就通过Cookies“记住”浏览过的文章，下次再访问就部统计了，以下的代码也是放到functions.php最后</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 获取浏览次数(改进版)</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getViewsStr</span>(<span class="params"><span class="variable">$widget</span>, <span class="variable">$format</span> = <span class="string">&quot;&#123;views&#125; 次浏览&quot;</span></span>) </span>&#123;</span><br><span class="line">    <span class="variable">$fields</span> = <span class="title function_ invoke__">unserialize</span>(<span class="variable">$widget</span>-&gt;fields);</span><br><span class="line">    <span class="keyword">if</span> (<span class="title function_ invoke__">array_key_exists</span>(<span class="string">&#x27;views&#x27;</span>, <span class="variable">$fields</span>))</span><br><span class="line">        <span class="variable">$views</span> = (!<span class="keyword">empty</span>(<span class="variable">$fields</span>[<span class="string">&#x27;views&#x27;</span>])) ? <span class="title function_ invoke__">intval</span>(<span class="variable">$fields</span>[<span class="string">&#x27;views&#x27;</span>]) : <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="variable">$views</span> = <span class="number">0</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//增加浏览次数</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$widget</span>-&gt;<span class="title function_ invoke__">is</span>(<span class="string">&#x27;single&#x27;</span>)) &#123;</span><br><span class="line">        <span class="variable">$vieweds</span> = <span class="title class_">Typecho_Cookie</span>::<span class="title function_ invoke__">get</span>(<span class="string">&#x27;contents_viewed&#x27;</span>);</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">empty</span>(<span class="variable">$vieweds</span>))</span><br><span class="line">            <span class="variable">$vieweds</span> = <span class="keyword">array</span>();</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="variable">$vieweds</span> = <span class="title function_ invoke__">explode</span>(<span class="string">&#x27;,&#x27;</span>, <span class="variable">$vieweds</span>);</span><br><span class="line">        <span class="keyword">if</span> (!<span class="title function_ invoke__">in_array</span>(<span class="variable">$widget</span>-&gt;cid, <span class="variable">$vieweds</span>)) &#123;</span><br><span class="line">            <span class="variable">$views</span> = <span class="variable">$views</span> + <span class="number">1</span>;</span><br><span class="line">            <span class="variable">$widget</span>-&gt;<span class="title function_ invoke__">setField</span>(<span class="string">&#x27;views&#x27;</span>, <span class="string">&#x27;str&#x27;</span>, <span class="title function_ invoke__">strval</span>(<span class="variable">$views</span>), <span class="variable">$widget</span>-&gt;cid);</span><br><span class="line">            <span class="variable">$vieweds</span>[] = <span class="variable">$widget</span>-&gt;cid;</span><br><span class="line">            <span class="variable">$vieweds</span> = <span class="title function_ invoke__">implode</span>(<span class="string">&#x27;,&#x27;</span>, <span class="variable">$vieweds</span>);</span><br><span class="line">            <span class="title class_">Typecho_Cookie</span>::<span class="title function_ invoke__">set</span>(<span class="string">&quot;contents_viewed&quot;</span>,<span class="variable">$vieweds</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_ invoke__">str_replace</span>(<span class="string">&quot;&#123;views&#125;&quot;</span>, <span class="variable">$views</span>, <span class="variable">$format</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>系统</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>ansible的安装</title>
    <url>/2021/09/ansible%E7%9A%84%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/index.html</url>
    <content><![CDATA[<h1 id="ansible的安装">ansible的安装</h1>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">yum search epel</span><br><span class="line">yum install epel-release -y</span><br><span class="line">yum -y install ansible</span><br></pre></td></tr></table></figure>
<p>编辑配置文件</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 核心配置</span><br><span class="line">vim /etc/ansible/ansible.cfg</span><br><span class="line">[defaults]</span><br><span class="line">inventory      = /etc/ansible/hosts</span><br><span class="line">library        = /usr/share/my_modules/</span><br><span class="line">remote_tmp     = /tmp/.ansible/tmp</span><br><span class="line">local_tmp      = /tmp/.ansible/tmp</span><br><span class="line">forks          = 50</span><br><span class="line">poll_interval  = 15</span><br><span class="line">remote_port    = 22</span><br><span class="line">module_lang    = C</span><br><span class="line">host_key_checking = False</span><br><span class="line">log_path = /var/log/ansible.log</span><br></pre></td></tr></table></figure>
<p>使用</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ansible all -m setup</span><br><span class="line">ansible all -m ping</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>系统</category>
      </categories>
      <tags>
        <tag>ssh</tag>
      </tags>
  </entry>
  <entry>
    <title>http状态码</title>
    <url>/2021/01/http%E7%8A%B6%E6%80%81%E7%A0%81/index.html</url>
    <content><![CDATA[<h2 id="http状态码">Http状态码</h2>
<table>
<thead>
<tr>
<th>状态码</th>
<th>编码</th>
<th>状态说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>100</td>
<td>Continue</td>
<td>继续请求。这个临时响应用来通知客户端，它的部分请求已经被服务器接收，且仍未被拒绝。</td>
</tr>
<tr>
<td>101</td>
<td>Switching  rotocols</td>
<td>切换协议。只能切换到更高级的协议。例如，切换到HTTP的新版本协议。</td>
</tr>
<tr>
<td>201</td>
<td>Created</td>
<td>创建类的请求完全成功。</td>
</tr>
<tr>
<td>202</td>
<td>Accepted</td>
<td>已经接受请求，但未处理完成。</td>
</tr>
<tr>
<td>203</td>
<td>Non-Authoritative Information</td>
<td>非授权信息，请求成功。</td>
</tr>
<tr>
<td>204</td>
<td>NoContent</td>
<td>请求完全成功，同时HTTP响应不包含响应体。在响应OPTIONS方法的HTTP请求时返回此状态码。</td>
</tr>
<tr>
<td>205</td>
<td>Reset Content</td>
<td>重置内容，服务器处理成功。</td>
</tr>
<tr>
<td>206</td>
<td>Partial Content</td>
<td>服务器成功处理了部分GET请求。</td>
</tr>
<tr>
<td>300</td>
<td>Multiple Choices</td>
<td>多种选择。请求的资源可包括多个位置，相应可返回一个资源特征与地址的列表用于客户终端（例如：浏览器）选择。</td>
</tr>
<tr>
<td>301</td>
<td>Moved Permanently</td>
<td>永久移动，请求的资源已被永久的移动到新的URI，返回信息会包括新的URI。</td>
</tr>
<tr>
<td>302</td>
<td>Found</td>
<td>资源被临时移动。</td>
</tr>
<tr>
<td>303</td>
<td>See Other</td>
<td>查看其它地址。使用GET和POST请求查看。</td>
</tr>
<tr>
<td>304</td>
<td>Not Modified</td>
<td>所请求的资源未修改，服务器返回此状态码时，不会返回任何资源。</td>
</tr>
<tr>
<td>305</td>
<td>Use Proxy</td>
<td>所请求的资源必须通过代理访问。</td>
</tr>
<tr>
<td>306</td>
<td>Unused</td>
<td>已经被废弃的HTTP状态码。</td>
</tr>
<tr>
<td>400</td>
<td>BadRequest</td>
<td>非法请求。建议直接修改该请求，不要重试该请求。</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized</td>
<td>在客户端提供认证信息后，返回该状态码，表明服务端指出客户端所提供的认证信息不正确或非法。在客户端提供认证信息后，返回该状态码，表明服务端指出客户端所提供的认证信息不正确或非法。</td>
</tr>
<tr>
<td>402</td>
<td>Payment Required</td>
<td>保留请求。</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
<td>请求被拒绝访问。返回该状态码，表明请求能够到达服务端，且服务端能够理解客户请求，但是拒绝做更多的事情，因为该请求被设置为拒绝访问，建议直接修改该请求，不要重试该请求。</td>
</tr>
<tr>
<td>404</td>
<td>NotFound</td>
<td>所请求的资源不存在。建议直接修改该请求，不要重试该请求。</td>
</tr>
<tr>
<td>405</td>
<td>MethodNotAllowed</td>
<td>请求中带有该资源不支持的方法。建议直接修改该请求，不要重试该请求。</td>
</tr>
<tr>
<td>406</td>
<td>Not Acceptable</td>
<td>服务器无法根据客户端请求的内容特性完成请求。</td>
</tr>
<tr>
<td>407</td>
<td>Proxy Authentication Required</td>
<td>请求要求代理的身份认证，与401类似，但请求者应当使用代理进行授权。</td>
</tr>
<tr>
<td>408</td>
<td>Request Time-out</td>
<td>服务器等候请求时发生超时。客户端可以随时再次提交该请求而无需进行任何更改。</td>
</tr>
<tr>
<td>409</td>
<td>Conflict</td>
<td>服务器在完成请求时发生冲突。返回该状态码，表明客户端尝试创建的资源已经存在，或者由于冲突请求的更新操作不能被完成。</td>
</tr>
<tr>
<td>410</td>
<td>Gone</td>
<td>客户端请求的资源已经不存在。返回该状态码，表明请求的资源已被永久删除。</td>
</tr>
<tr>
<td>411</td>
<td>Length Required</td>
<td>服务器无法处理客户端发送的不带Content-Length的请求信息。</td>
</tr>
<tr>
<td>412</td>
<td>Precondition Failed</td>
<td>未满足前提条件，服务器未满足请求者在请求中设置的其中一个前提条件。</td>
</tr>
<tr>
<td>413</td>
<td>Request Entity Too Large</td>
<td>由于请求的实体过大，服务器无法处理，因此拒绝请求。为防止客户端的连续请求，服务器可能会关闭连接。如果只是服务器暂时无法处理，则会包含一个Retry-After的响应信息。</td>
</tr>
<tr>
<td>414</td>
<td>Request-URI Too Large</td>
<td>请求的URI过长（URI通常为网址），服务器无法处理。</td>
</tr>
<tr>
<td>415</td>
<td>Unsupported Media Type</td>
<td>服务器无法处理请求附带的媒体格式。</td>
</tr>
<tr>
<td>416</td>
<td>Requested range not satisfiable</td>
<td>客户端请求的范围无效。</td>
</tr>
<tr>
<td>417</td>
<td>Expectation Failed</td>
<td>服务器无法满足Expect的请求头信息。</td>
</tr>
<tr>
<td>422</td>
<td>UnprocessableEntity</td>
<td>请求格式正确，但是由于含有语义错误，无法响应。</td>
</tr>
<tr>
<td>429</td>
<td>TooManyRequests</td>
<td>表明请求超出了客户端访问频率的限制或者服务端接收到多于它能处理的请求。建议客户端读取相应的Retry-After首部，然后等待该首部指出的时间后再重试。</td>
</tr>
<tr>
<td>500</td>
<td>InternalServerError</td>
<td>表明服务端能被请求访问到，但是不能理解客户的请求。</td>
</tr>
<tr>
<td>501</td>
<td>Not Implemented</td>
<td>服务器不支持请求的功能，无法完成请求。</td>
</tr>
<tr>
<td>502</td>
<td>Bad Gateway</td>
<td>充当网关或代理的服务器，从远端服务器接收到了一个无效的请求。</td>
</tr>
<tr>
<td>503</td>
<td>ServiceUnavailable</td>
<td>被请求的服务无效。建议直接修改该请求，不要重试该请求。</td>
</tr>
<tr>
<td>504</td>
<td>ServerTimeout</td>
<td>请求在给定的时间内无法完成。客户端仅在为请求指定超时（Timeout）参数时会得到该响应。</td>
</tr>
<tr>
<td>505</td>
<td>HTTP Version not supported</td>
<td>服务器不支持请求的HTTP协议的版本，无法完成处理。</td>
</tr>
</tbody>
</table>
]]></content>
      <categories>
        <category>服务</category>
      </categories>
      <tags>
        <tag>Nginx</tag>
        <tag>http</tag>
        <tag>Apache</tag>
      </tags>
  </entry>
  <entry>
    <title>kubeadm部署k8s(v1.16)</title>
    <url>/2021/06/kubeadm%E9%83%A8%E7%BD%B2k8s/index.html</url>
    <content><![CDATA[<h2 id="kubeadm部署k8s(v116)">kubeadm部署k8s(v1.16)</h2>
<h2 id="一、系统初始化操作">一、系统初始化操作</h2>
<p>系统初始化操作是集群每个节点都要操作的步骤。</p>
<h3 id="群集环境">群集环境</h3>
<table>
<thead>
<tr>
<th>IP</th>
<th>主机名</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>10.10.10.31</td>
<td>k8s-master</td>
<td>master 节点</td>
</tr>
<tr>
<td>10.10.10.32</td>
<td>k8s-node1</td>
<td>node 节点</td>
</tr>
<tr>
<td>10.10.10.33</td>
<td>k8s-node2</td>
<td>node 节点</td>
</tr>
</tbody>
</table>
<h3 id="关闭相关防护及swap">关闭相关防护及swap</h3>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 关闭防火墙和 selinux</span><br><span class="line">systemctl stop firewalld &amp;&amp; systemctl disable firewalld</span><br><span class="line">sed -ri &#x27;/^[^#]*SELINUX=/s#=.+$#=disabled#&#x27; /etc/selinux/config &amp;&amp; setenforce 0</span><br><span class="line"></span><br><span class="line"># 关闭 swap (k8s默认不使用 swap，可以指定参数使用 swap)</span><br><span class="line">swapoff -a</span><br><span class="line">yes | cp /etc/fstab /etc/fstab_bak</span><br><span class="line">sed -ri &#x27;/^[^#]*swap/s@^@#@&#x27; /etc/fstab</span><br></pre></td></tr></table></figure>
<h3 id="配置时间同步">配置时间同步</h3>
<p>按照该指南配置： <a href="/2023/09/Linux-%E9%85%8D%E7%BD%AE%E6%97%B6%E9%97%B4%E5%90%8C%E6%AD%A5-chronyd%EF%BC%88%E5%AE%A2%E6%88%B7%E7%AB%AF%EF%BC%89/index.html" title="Linux 配置时间同步 chronyd（客户端）">Linux 配置时间同步 chronyd（客户端）</a></p>
<h3 id="基本配置">基本配置</h3>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 修改 /etc/hosts 文件</span><br><span class="line">cat &lt;&lt; EOF &gt;&gt; /etc/hosts</span><br><span class="line">10.10.10.31 k8s-master k8s-master.k8s.com</span><br><span class="line">10.10.10.32 k8s-node1 k8s-node1.k8s.com</span><br><span class="line">10.10.10.33 k8s-node2 k8s-node2.k8s.com</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line"># 修改主机名</span><br><span class="line">master节点:</span><br><span class="line">hostnamectl set-hostname k8s-master</span><br><span class="line"></span><br><span class="line">node1节点：</span><br><span class="line">hostnamectl set-hostname k8s-node1</span><br><span class="line"></span><br><span class="line">node2节点:</span><br><span class="line">hostnamectl set-hostname k8s-node2</span><br></pre></td></tr></table></figure>
<h3 id="修改-iptables 相关参数">修改 iptables 相关参数</h3>
<p>CentOS 7 上的一些用户报告了由于iptables被绕过而导致流量路由不正确的问题。创建/etc/sysctl.d/k8s.conf文件，添加如下内容：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cat &lt;&lt; EOF &gt;  /etc/sysctl.d/k8s.conf</span><br><span class="line">vm.swappiness = 0</span><br><span class="line">net.bridge.bridge-nf-call-ip6tables = 1</span><br><span class="line">net.bridge.bridge-nf-call-iptables = 1</span><br><span class="line">net.ipv4.ip_forward = 1</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line"># 使配置生效</span><br><span class="line">modprobe br_netfilter</span><br><span class="line">sysctl -p /etc/sysctl.d/k8s.conf</span><br></pre></td></tr></table></figure>
<h3 id="加载-ipvs 相关模块">加载 ipvs 相关模块</h3>
<p>由于ipvs已经加入到了内核的主干，所以为 kube-proxy 开启ipvs的前提需要加载以下的内核模块：<br>
在所有的Kubernetes节点执行以下脚本:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cat &lt;&lt; EOF &gt; /etc/sysconfig/modules/ipvs.modules</span><br><span class="line">#!/bin/bash</span><br><span class="line">modprobe -- ip_vs</span><br><span class="line">modprobe -- ip_vs_rr</span><br><span class="line">modprobe -- ip_vs_wrr</span><br><span class="line">modprobe -- ip_vs_sh</span><br><span class="line">modprobe -- nf_conntrack_ipv4</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line"># 执行脚本</span><br><span class="line">chmod 755 /etc/sysconfig/modules/ipvs.modules \</span><br><span class="line">&amp;&amp; bash /etc/sysconfig/modules/ipvs.modules \</span><br><span class="line">&amp;&amp; lsmod | grep -e ip_vs -e nf_conntrack_ipv4</span><br></pre></td></tr></table></figure>
<p>上面脚本创建了/etc/sysconfig/modules/ipvs.modules文件，保证在节点重启后能自动加载所需模块。 使用如下命令查看是否已经正确加载所需的内核模块。<br>
<code>lsmod | grep -e ip_vs -e nf_conntrack_ipv4 </code></p>
<p>接下来还需要确保各个节点上已经安装了ipset软件包。 为了便于查看ipvs的代理规则，最好安装一下管理工具ipvsadm。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">yum install ipset ipvsadm -y</span><br></pre></td></tr></table></figure>
<h3 id="安装docker">安装Docker</h3>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 安装要求的软件包</span><br><span class="line">yum install yum-utils device-mapper-persistent-data lvm2 -y </span><br><span class="line"></span><br><span class="line"># 添加Docker repository，这里改为国内阿里云repo</span><br><span class="line">yum-config-manager --add-repo http://mirrors.163.com/.help/CentOS7-Base-163.repo</span><br><span class="line">yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</span><br><span class="line"></span><br><span class="line"># 安装docker</span><br><span class="line"># 查询docker版本  yum list docker-ce --showduplicates|sort -r</span><br><span class="line"># 安装指定版本</span><br><span class="line">yum install docker-ce-18.09.8 -y  </span><br><span class="line"></span><br><span class="line"># 创建daemon.json配置文件</span><br><span class="line"># 注意，这里这指定了cgroupdriver=systemd，另外由于国内拉取镜像较慢，最后追加了阿里云镜像加速配置。</span><br><span class="line">mkdir /etc/docker</span><br><span class="line">cat &lt;&lt; EOF &gt; /etc/docker/daemon.json </span><br><span class="line">&#123;</span><br><span class="line">  &quot;exec-opts&quot;: [&quot;native.cgroupdriver=systemd&quot;],</span><br><span class="line">  &quot;log-driver&quot;: &quot;json-file&quot;,</span><br><span class="line">  &quot;log-opts&quot;: &#123;</span><br><span class="line">    &quot;max-size&quot;: &quot;100m&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;storage-driver&quot;: &quot;overlay2&quot;,</span><br><span class="line">  &quot;storage-opts&quot;: [</span><br><span class="line">    &quot;overlay2.override_kernel_check=true&quot;</span><br><span class="line">  ],</span><br><span class="line">  &quot;registry-mirrors&quot;: [&quot;https://uyah70su.mirror.aliyuncs.com&quot;]</span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line"># mkdir -p /etc/systemd/system/docker.service.d</span><br><span class="line"></span><br><span class="line"># 重启docker服务</span><br><span class="line">systemctl daemon-reload &amp;&amp; systemctl restart docker &amp;&amp; systemctl enable docker</span><br></pre></td></tr></table></figure>
<h3 id="安装kubeadm、kubelet、kubectl">安装kubeadm、kubelet、kubectl</h3>
<p>官方安装文档可以参考：<a href="https://kubernetes.io/docs/setup/independent/install-kubeadm/">https://kubernetes.io/docs/setup/independent/install-kubeadm/</a></p>
<ul>
<li>kubelet 在群集中所有节点上运行的核心组件, 用来执行如启动pods和containers等操作。</li>
<li>kubeadm 引导启动k8s集群的命令行工具，用于初始化 Cluster。</li>
<li>kubectl 是 Kubernetes 命令行工具。通过 kubectl 可以部署和管理应用，查看各种资源，创建、删除和更新各种组件。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 配置kubernetes.repo的源，由于官方源国内无法访问，这里使用阿里云yum源</span><br><span class="line"></span><br><span class="line">cat &lt;&lt; EOF &gt; /etc/yum.repos.d/kubernetes.repo</span><br><span class="line">[kubernetes]</span><br><span class="line">name=Kubernetes</span><br><span class="line">baseurl=https://mirrors.aliyun.com/kubernetes/yum/repos/kubernetes-el7-x86_64/</span><br><span class="line">enabled=1</span><br><span class="line">gpgcheck=1</span><br><span class="line">repo_gpgcheck=1</span><br><span class="line">gpgkey=https://mirrors.aliyun.com/kubernetes/yum/doc/yum-key.gpg https://mirrors.aliyun.com/kubernetes/yum/doc/rpm-package-key.gpg</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line"># 查询版本安装指定版本</span><br><span class="line"># yum list --showduplicates kubeadm --disableexcludes=kubernetes</span><br><span class="line"></span><br><span class="line"># 在所有节点上安装kubelet、kubeadm 和 kubectl</span><br><span class="line">yum install -y kubelet-1.16.2 kubeadm-1.16.2 kubectl-1.16.2</span><br><span class="line"></span><br><span class="line"># 启动kubelet服务</span><br><span class="line">systemctl enable kubelet &amp;&amp; systemctl start kubelet</span><br></pre></td></tr></table></figure>
<h2 id="二、正式部署kubernetes">二、正式部署kubernetes</h2>
<p>以下操作是分节点操作步骤。</p>
<h3 id="部署master节点">部署master节点</h3>
<h4 id="1、生成默认配置文件">1、生成默认配置文件</h4>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">kubeadm config print init-defaults &gt; kubeadm.yaml</span><br></pre></td></tr></table></figure>
<p>kubeadm-config.yaml组成部署说明：</p>
<ul>
<li>InitConfiguration： 用于定义一些初始化配置，如初始化使用的token以及apiserver地址等</li>
<li>ClusterConfiguration：用于定义apiserver、etcd、network、scheduler、controller-manager等master组件相关配置项</li>
<li>KubeletConfiguration：用于定义kubelet组件相关的配置项</li>
<li>KubeProxyConfiguration：用于定义kube-proxy组件相关的配置项\</li>
</ul>
<p>可以看到，在默认的kubeadm-config.yaml文件中只有InitConfiguration、ClusterConfiguration 两部分。我们可以通过如下操作生成另外两部分的示例文件：</p>
<blockquote>
<p><a href="https://www.cnblogs.com/breezey/p/11770780.html">https://www.cnblogs.com/breezey/p/11770780.html</a></p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">生成KubeletConfiguration示例文件</span> </span><br><span class="line">kubeadm config print init-defaults --component-configs KubeletConfiguration</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">生成KubeProxyConfiguration示例文件</span> </span><br><span class="line">kubeadm config print init-defaults --component-configs KubeProxyConfiguration</span><br></pre></td></tr></table></figure>
<h4 id="2、根据实际情况进行修改">2、根据实际情况进行修改</h4>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">apiVersion: kubeadm.k8s.io/v1beta2</span><br><span class="line">bootstrapTokens:</span><br><span class="line">- groups:</span><br><span class="line">  - system:bootstrappers:kubeadm:default-node-token</span><br><span class="line">  token: abcdef.0123456789abcdef</span><br><span class="line">  ttl: 24h0m0s</span><br><span class="line">  usages:</span><br><span class="line">  - signing</span><br><span class="line">  - authentication</span><br><span class="line">kind: InitConfiguration</span><br><span class="line">localAPIEndpoint:</span><br><span class="line">  advertiseAddress: 10.10.10.31    # 修改为API Server的地址</span><br><span class="line">  bindPort: 6443</span><br><span class="line">nodeRegistration:</span><br><span class="line">  criSocket: /var/run/dockershim.sock</span><br><span class="line">  name: k8s-master</span><br><span class="line">  taints:</span><br><span class="line">  - effect: NoSchedule</span><br><span class="line">    key: node-role.kubernetes.io/master</span><br><span class="line">---</span><br><span class="line">apiServer:</span><br><span class="line">  timeoutForControlPlane: 4m0s</span><br><span class="line">apiVersion: kubeadm.k8s.io/v1beta2</span><br><span class="line">certificatesDir: /etc/kubernetes/pki</span><br><span class="line">clusterName: kubernetes</span><br><span class="line">controllerManager: &#123;&#125;</span><br><span class="line">dns:</span><br><span class="line">  type: CoreDNS</span><br><span class="line">etcd:</span><br><span class="line">  local:</span><br><span class="line">    dataDir: /var/lib/etcd</span><br><span class="line">imageRepository: registry.aliyuncs.com/google_containers 	# 修改为阿里云镜像仓库</span><br><span class="line">kind: ClusterConfiguration</span><br><span class="line">kubernetesVersion: v1.16.2          # 当前版本</span><br><span class="line">networking:</span><br><span class="line">  dnsDomain: cluster.local</span><br><span class="line">  serviceSubnet: 10.96.0.0/12       # 修改Service的网络，这里使用默认ip</span><br><span class="line">  podSubnet: 10.244.0.0/16          # 修改Pod的网络，这个不指定会导致flannel起不来，这里使用默认ip</span><br><span class="line">scheduler: &#123;&#125;</span><br><span class="line"># 下面增加的配置，用于设置Kube-proxy使用LVS</span><br><span class="line">---</span><br><span class="line">apiVersion: kubeproxy.config.k8s.io/v1alpha1</span><br><span class="line">kind: KubeProxyConfiguration</span><br><span class="line">mode: &quot;ipvs&quot;</span><br><span class="line">ipvs:</span><br><span class="line">  excludeCIDRs: null</span><br><span class="line">  minSyncPeriod: 0s</span><br><span class="line">  scheduler: &quot;rr&quot;</span><br><span class="line">  strictARP: false</span><br><span class="line">  syncPeriod: 30s</span><br></pre></td></tr></table></figure>
<blockquote>
<h4 id="上面使用的是默认etcd，如果使用外部etcd，参照下面配置">上面使用的是默认etcd，如果使用外部etcd，参照下面配置</h4>
<p><dev><img align="left" src="/images/2021-06/1.png"></dev></p>
</blockquote>
<blockquote>
<h4 id="相关etcd操作">相关etcd操作</h4>
<p>操作etcd有命令行工具etcdctl，有两个api版本互不兼容的，系统默认的v2版本，kubernetes集群使用的是v3版本，v2版本下是看不到v3版本的数据的。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">使用环境变量定义api版本</span></span><br><span class="line">export ETCDCTL_API=3</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">申明etcd相关信息，etcdctl 默认连接的是http://127.0.0.1:2379，因无证书也能访问，建议关闭回环网卡监听。</span></span><br><span class="line">export PATH=/opt/kubernetes/bin:$PATH</span><br><span class="line">export ETCD_ENDPOINTS=https://10.10.10.31:2379,https://10.10.10.32:2379,https://10.10.10.33:2379</span><br><span class="line">export ETCD_CA_FILE=/opt/kubernetes/ssl/ca.pem</span><br><span class="line">export ETCD_cert_FILE=/opt/kubernetes/ssl/etcd.pem</span><br><span class="line">export ETCD_key_FILE=/opt/kubernetes/ssl/etcd-key.pem</span><br><span class="line"> 配置etcdctl别名</span><br><span class="line">alias etcdctl=&quot;etcdctl --endpoints=$ETCD_ENDPOINTS --cacert=$ETCD_CA_FILE --cert=$ETCD_cert_FILE --key=$ETCD_key_FILE&quot;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">etcd有目录结构类似linux文件系统，获取所有key。</span></span><br><span class="line">etcdctl get / --prefix --keys-only</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查询命名空间下所有部署的数据：</span></span><br><span class="line">etcdctl get /registry/deployments/default --prefix --keys-only</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">删除某个数据</span></span><br><span class="line">etcdctl del /registry/daemonsets/kube-system/kube-proxy</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">删除所有数据</span></span><br><span class="line">etcdctl del / --prefix</span><br></pre></td></tr></table></figure>
</blockquote>
<h4 id="3、执行初始化操作">3、执行初始化操作</h4>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">kubeadm init --config kubeadm.yaml --dry-run # 模拟操作</span><br><span class="line">kubeadm init --config kubeadm.yaml</span><br></pre></td></tr></table></figure>
<p>集群初始化如果遇到问题，可以使用kubeadm reset命令进行清理然后重新执行初始化，该命令会重置整个集群，慎用。</p>
<p>完整的官方文档可以参考：</p>
<blockquote>
<p><a href="https://kubernetes.io/docs/setup/independent/create-cluster-kubeadm/">https://kubernetes.io/docs/setup/independent/create-cluster-kubeadm/</a><br>
<a href="https://kubernetes.io/docs/reference/setup-tools/kubeadm/kubeadm-init/">https://kubernetes.io/docs/reference/setup-tools/kubeadm/kubeadm-init/</a></p>
</blockquote>
<h3 id="配置-kubectl">配置 kubectl</h3>
<p>kubectl 是管理 Kubernetes Cluster 的命令行工具， Master 初始化完成后需要做一些配置工作才能使用kubectl，，这里直接配置root用户:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">export KUBECONFIG=/etc/kubernetes/admin.conf</span><br></pre></td></tr></table></figure>
<p>普通用户可以参考 kubeadm init 最后提示</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mkdir -p $HOME/.kube</span><br><span class="line">cp -i /etc/kubernetes/admin.conf $HOME/.kube/config</span><br><span class="line">chown $(id -u):$(id -g) $HOME/.kube/config</span><br></pre></td></tr></table></figure>
<p>Kubernetes 集群默认需要加密方式访问，以上操作就是将刚刚部署生成的 Kubernetes 集群的安全配置文件保存到当前用户的.kube 目录下，kubectl  默认会使用<code>~/.kube/config</code>文件的授权信息访问 Kubernetes 集群。<br>
如果不这么做的话，我们每次都需要通过 export KUBECONFIG 环境变量告诉 kubectl 这个安全配置文件的位置或者执行kubectl  时指定该文件位置，如 <code>kubectl --kubeconfig=/etc/kubernetes/admin.conf get node</code>。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 启用 kubectl 命令自动补全功能(注销重新登录生效)</span><br><span class="line">yum install -y bash-completion</span><br><span class="line">echo &quot;source &lt;(kubectl completion bash)&quot; &gt;&gt; ~/.bashrc</span><br></pre></td></tr></table></figure>
<p>查看集群状态：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[centos@k8s-master ~]# kubectl get componentstatuses  (简写  kubectl get cs)</span><br><span class="line">NAME                 AGE</span><br><span class="line">scheduler            &lt;unknown&gt;</span><br><span class="line">controller-manager   &lt;unknown&gt;</span><br><span class="line">etcd-0               &lt;unknown&gt; </span><br></pre></td></tr></table></figure>
<p>最新版本的kubernetes在执行kubectl get cs时输出内容有一些变化，以前是这样的：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># kubectl get componentstatuses</span><br><span class="line">NAME                 STATUS    MESSAGE             ERROR</span><br><span class="line">controller-manager   Healthy   ok</span><br><span class="line">scheduler            Healthy   ok</span><br><span class="line">etcd-0               Healthy   &#123;&quot;health&quot;:&quot;true&quot;&#125;</span><br></pre></td></tr></table></figure>
<p>现在变成了：</p>
<blockquote>
<p>原因可参考  <a href="https://segmentfault.com/a/1190000020912684">https://segmentfault.com/a/1190000020912684</a></p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># kubectl get componentstatuses</span><br><span class="line">NAME                 Age    </span><br><span class="line">controller-manager   &lt;unknown&gt;</span><br><span class="line">scheduler            &lt;unknown&gt;</span><br><span class="line">etcd-0               &lt;unknown&gt;</span><br><span class="line"># 使用如下命令可以输出正常信息</span><br><span class="line">kubectl get cs -o=go-template=&#x27;&#123;&#123;printf &quot;|NAME|STATUS|MESSAGE|\n&quot;&#125;&#125;&#123;&#123;range .items&#125;&#125;&#123;&#123;$name:= .metadata.name&#125;&#125;&#123;&#123;range .conditions&#125;&#125;&#123;&#123;printf &quot;|%s|%s|%s|\n&quot; $name .status .message&#125;&#125;&#123;&#123;end&#125;&#125;&#123;&#123;end&#125;&#125;&#x27;</span><br></pre></td></tr></table></figure>
<p>确认各个组件都处于healthy状态。查看节点状态</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[centos@k8s-master ~]# kubectl get nodes </span><br><span class="line">NAME         STATUS     ROLES    AGE   VERSION</span><br><span class="line">k8s-master   NotReady   master   36m   v1.16.0</span><br><span class="line">[centos@k8s-master ~]# </span><br></pre></td></tr></table></figure>
<p>可以看到，当前只存在1个master节点，并且这个节点的状态是 NotReady。<br>
使用 kubectl describe 命令来查看这个节点（Node）对象的详细信息、状态和事件（Event）：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[centos@k8s-master ~]# kubectl describe node k8s-master </span><br><span class="line">......</span><br><span class="line">Events:</span><br><span class="line">  Type    Reason                   Age               </span><br><span class="line">----    ------                   ----               - ......</span><br><span class="line">  Normal  Starting                 33m               </span><br><span class="line">  Normal  NodeHasSufficientMemory  33m (x8 over 33m) </span><br><span class="line">  Normal  NodeHasNoDiskPressure    33m (x8 over 33m) </span><br><span class="line">  Normal  NodeHasSufficientPID     33m (x7 over 33m) </span><br><span class="line">  Normal  NodeAllocatableEnforced  33m               </span><br><span class="line">  Normal  Starting                 33m               </span><br></pre></td></tr></table></figure>
<p>通过 kubectl describe 指令的输出，我们可以看到 NodeNotReady 的原因在于，我们尚未部署任何网络插件，kube-proxy等组件还处于starting状态。<br>
另外，我们还可以通过 kubectl 检查这个节点上各个系统 Pod 的状态，其中，kube-system 是 Kubernetes 项目预留的系统 Pod 的工作空间（Namepsace，注意它并不是 Linux Namespace，它只是 Kubernetes 划分不同工作空间的单位）：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[centos@k8s-master ~]# kubectl -n kube-system get pod -o wide    </span><br><span class="line">NAME                                 READY   STATUS    RESTARTS  ......</span><br><span class="line">coredns-78d4cf999f-7jdx7             0/1     Pending   0</span><br><span class="line">coredns-78d4cf999f-s6mhk             0/1     Pending   0</span><br><span class="line">etcd-k8s-master                      1/1     Running   0</span><br><span class="line">kube-apiserver-k8s-master            1/1     Running   0</span><br><span class="line">kube-controller-manager-k8s-master   1/1     Running   0</span><br><span class="line">kube-proxy-przwf                     1/1     Running   0</span><br><span class="line">kube-scheduler-k8s-master            1/1     Running   0</span><br></pre></td></tr></table></figure>
<p>可以看到，CoreDNS依赖于网络的 Pod 都处于 Pending 状态，即调度失败。这当然是符合预期的：因为这个 Master 节点的网络尚未就绪。</p>
<h3 id="部署网络插件">部署网络插件</h3>
<p>要让 Kubernetes Cluster 能够工作，必须安装 Pod 网络，否则 Pod 之间无法通信。<br>
Kubernetes 支持多种网络方案，这里我们使用 flannel</p>
<p>执行如下命令部署 flannel：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># kubectl apply -f https://raw.githubusercontent.com/coreos/flannel/master/Documentation/kube-flannel.yml</span><br><span class="line"></span><br><span class="line"># 使用如下清单文件创建</span><br><span class="line">https://gitee.com/Outsrkem/flannel/tree/master/1.16.2</span><br></pre></td></tr></table></figure>
<p>部署完成后，我们可以通过 kubectl get 重新检查 Pod 的状态：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[centos@k8s-master ~]# kubectl get pod -n kube-system -o wide</span><br><span class="line">NAME                                 READY   STATUS   ......</span><br><span class="line">coredns-78d4cf999f-7jdx7             1/1     Running</span><br><span class="line">coredns-78d4cf999f-s6mhk             1/1     Running</span><br><span class="line">etcd-k8s-master                      1/1     Running</span><br><span class="line">kube-apiserver-k8s-master            1/1     Running</span><br><span class="line">kube-controller-manager-k8s-master   1/1     Running</span><br><span class="line">kube-flannel-ds-amd64-lkf2f          1/1     Running</span><br><span class="line">kube-proxy-przwf                     1/1     Running</span><br><span class="line">kube-scheduler-k8s-master            1/1     Running</span><br></pre></td></tr></table></figure>
<p>可以看到，所有的系统 Pod 都成功启动了，而刚刚部署的flannel网络插件则在 kube-system 下面新建了一个名叫kube-flannel-ds-amd64-lkf2f的 Pod，一般来说，这些 Pod 就是容器网络插件在每个节点上的控制组件。<br>
Kubernetes 支持容器网络插件，使用的是一个名叫 CNI 的通用接口，它也是当前容器网络的事实标准，市面上的所有容器网络开源项目都可以通过 CNI 接入 Kubernetes，比如 Flannel、Calico、Canal、Romana 等等，它们的部署方式也都是类似的“一键部署”。</p>
<p>至此，Kubernetes 的 Master 节点就部署完成了。如果只需要一个单节点的 Kubernetes，现在你就可以使用了。不过，在默认情况下，Kubernetes 的 Master 节点有污点 (taint) 存在是不能运行用户 Pod 的。可以通过以下步骤删除污点。而<strong>NoSchedule</strong>这个污点仅影响调度过程，对现存 Pod 无影响。</p>
<p>Taints 的删除和添加，正常部署无需操作，默认即可。</p>
<p>Ⅰ、查看 Taints</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">kubectl describe node k8s-master |grep Taints</span><br><span class="line">Taints:             node-role.kubernetes.io/master:NoSchedule</span><br></pre></td></tr></table></figure>
<p>Ⅱ、删除这个 Taints</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">kubectl taint nodes k8s-master node-role.kubernetes.io/master=:NoSchedule-</span><br></pre></td></tr></table></figure>
<p>Ⅲ、添加这样的 Taints</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">kubectl taint nodes k8s-master node-role.kubernetes.io/master=:NoSchedule</span><br></pre></td></tr></table></figure>
<h3 id="部署node节点">部署node节点</h3>
<p>Kubernetes 的工作节点与Master节点几乎是相同的，它们运行着的都是一个 kubelet 组件。唯一的区别在于，在 kubeadm init 的过程中，kubelet 启动后，Master 节点上还会自动运行 kube-apiserver、kube-scheduler、kube-controller-manger 这三个系统 Pod。<br>
在 k8s-node1 和 k8s-node2 上分别执行如下命令，将其注册到集群中：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 执行以下命令将节点接入集群</span><br><span class="line">kubeadm join 10.10.10.31:6443 --token 67kq55.8hxoga556caxty7s \</span><br><span class="line">    --discovery-token-ca-cert-hash ha256:7d50e704bbfe69661e37c5f3ad13b1b88032b6b2b703ebd4899e259477b5be69</span><br><span class="line"></span><br><span class="line"># 如果执行kubeadm init时没有记录下加入集群的命令，可以通过以下命令重新创建</span><br><span class="line"># --ttl 10m 生成10分钟有效期的token。</span><br><span class="line"># https://kubernetes.io/docs/reference/setup-tools/kubeadm/kubeadm-token/</span><br><span class="line">kubeadm token create --ttl 10m --print-join-command</span><br></pre></td></tr></table></figure>
<p>在k8s-node1上执行kubeadm join ：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@k8s-node1 ~]# kubeadm join 10.10.10.31:6443 --token 67kq55.8hxoga556caxty7s \</span><br><span class="line">    --discovery-token-ca-cert-hash sha256:7d50e704bbfe69661e37c5f3ad13b1b88032b6b2b703ebd4899e259477b5be69</span><br><span class="line">[preflight] Running pre-flight checks</span><br><span class="line">......</span><br><span class="line">This node has joined the cluster:</span><br><span class="line">* Certificate signing request was sent to apiserver and a response was received.</span><br><span class="line">* The Kubelet was informed of the new secure connection details.</span><br><span class="line"></span><br><span class="line">Run &#x27;kubectl get nodes&#x27; on the master to see this node join the cluster.</span><br></pre></td></tr></table></figure>
<p>重复执行以上操作将k8s-node2也加进去。</p>
<p>修改节点标签</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">kubectl label nodes k8s-node1 node-role.kubernetes.io/node=</span><br><span class="line">kubectl label nodes k8s-node2 node-role.kubernetes.io/node=</span><br></pre></td></tr></table></figure>
<p>然后根据提示，我们可以通过 kubectl get nodes 查看节点的状态：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[centos@k8s-master ~]# kubectl get nodes</span><br><span class="line">NAME         STATUS   ROLES    AGE    VERSION</span><br><span class="line">k8s-master   Ready    master   45m   v1.16.2</span><br><span class="line">k8s-node1    Ready    node     45m   v1.16.2</span><br><span class="line">k8s-node2    Ready    node     45m   v1.16.2</span><br></pre></td></tr></table></figure>
<p>nodes状态全部为ready，由于每个节点都需要启动若干组件，如果node节点的状态是 NotReady，可以查看所有节点pod状态，确保所有pod成功拉取到镜像并处于running状态：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[centos@k8s-master ~]# kubectl get pod --all-namespaces -o wide</span><br><span class="line">NAMESPACE     NAME                                 READY   STATUS    ......</span><br><span class="line">kube-system   coredns-78d4cf999f-7jdx7             1/1     Running</span><br><span class="line">kube-system   coredns-78d4cf999f-s6mhk             1/1     Running</span><br><span class="line">kube-system   etcd-k8s-master                      1/1     Running</span><br><span class="line">kube-system   kube-apiserver-k8s-master            1/1     Running</span><br><span class="line">kube-system   kube-controller-manager-k8s-master   1/1     Running</span><br><span class="line">kube-system   kube-flannel-ds-amd64-d2r8p          1/1     Running</span><br><span class="line">kube-system   kube-flannel-ds-amd64-d85c6          1/1     Running</span><br><span class="line">kube-system   kube-flannel-ds-amd64-lkf2f          1/1     Running</span><br><span class="line">kube-system   kube-proxy-k8jx8                     1/1     Running</span><br><span class="line">kube-system   kube-proxy-n95ck                     1/1     Running</span><br><span class="line">kube-system   kube-proxy-przwf                     1/1     Running</span><br><span class="line">kube-system   kube-scheduler-k8s-master            1/1     Running</span><br></pre></td></tr></table></figure>
<p>测试集群各个组件<br>
首先验证kube-apiserver, kube-controller-manager, kube-scheduler, pod network 是否正常：<br>
部署一个 Nginx Deployment，包含2个Pod 副本<br>
参考：<a href="https://kubernetes.io/docs/concepts/workloads/controllers/deployment/">https://kubernetes.io/docs/concepts/workloads/controllers/deployment/</a></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[centos@k8s-master ~]# kubectl create deployment nginx --image=nginx:alpine</span><br><span class="line">deployment.apps/nginx created</span><br><span class="line">[centos@k8s-master ~]$ kubectl scale deployment nginx --replicas=2</span><br><span class="line">deployment.extensions/nginx scaled</span><br><span class="line">[centos@k8s-master ~]#</span><br></pre></td></tr></table></figure>
<p>验证Nginx Pod是否正确运行，并且会分配10.244.开头的集群IP</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[centos@k8s-master ~]# kubectl get pods -l app=nginx -o wide</span><br><span class="line">NAME                     READY   STATUS    RESTARTS   AGE  ......</span><br><span class="line">nginx-54458cd494-p2qgx   1/1     Running   0          111s</span><br><span class="line">nginx-54458cd494-sdlm7   1/1     Running   0          103s</span><br></pre></td></tr></table></figure>
<p>再验证一下kube-proxy是否正常：</p>
<p>以 NodePort 方式对外提供服务（也是外部流量引入集群内部的方法）<br>
参考：<a href="https://kubernetes.io/docs/concepts/services-networking/connect-applications-service/">https://kubernetes.io/docs/concepts/services-networking/connect-applications-service/</a></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[centos@k8s-master ~]# kubectl expose deployment nginx --port=80 --type=NodePort</span><br><span class="line">service/nginx exposed</span><br><span class="line">[centos@k8s-master ~]$ kubectl get services nginx</span><br><span class="line">NAME    TYPE       CLUSTER-IP    EXTERNAL-IP   PORT(S)        AGE</span><br><span class="line">nginx   NodePort   10.108.17.2   &lt;none&gt;        80:30670/TCP   12s</span><br></pre></td></tr></table></figure>
<p>可以通过任意 NodeIP:Port 在集群外部访问这个服务：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[centos@k8s-master ~]# curl 10.10.10.31:30670</span><br><span class="line">[centos@k8s-master ~]# curl 10.10.10.32:30670</span><br><span class="line">[centos@k8s-master ~]# curl 10.10.10.33:30670</span><br></pre></td></tr></table></figure>
<h3 id="kube-proxy开启ipvs">kube-proxy开启ipvs</h3>
<p>修改ConfigMap的kube-system/kube-proxy中的config.conf，mode: “ipvs”。</p>
<p>如果此前已经开启则无需操作，使用 <code>curl localhost:10249/proxyMode</code>命令可查看，如果要更换为iptables ，则在ConfigMap中修改：mode: “” 为空即可。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[centos@k8s-master ~]# kubectl edit cm kube-proxy -n kube-system</span><br></pre></td></tr></table></figure>
<p>之后重启各个节点上的kube-proxy pod：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[centos@k8s-master ~]# kubectl get pod -n kube-system | grep kube-proxy | awk &#x27;&#123;system(&quot;kubectl delete pod &quot;$1&quot; -n kube-system&quot;)&#125;&#x27;</span><br><span class="line">pod &quot;kube-proxy-2w9sh&quot; deleted</span><br><span class="line">pod &quot;kube-proxy-gw4lx&quot; deleted</span><br><span class="line">pod &quot;kube-proxy-thv4c&quot; deleted</span><br><span class="line">[centos@k8s-master ~]# kubectl get pod -n kube-system | grep kube-proxy</span><br><span class="line">kube-proxy-6qlgv                        1/1     Running   0          65s</span><br><span class="line">kube-proxy-fdtjd                        1/1     Running   0          47s</span><br><span class="line">kube-proxy-m8zkx                        1/1     Running   0          52s</span><br></pre></td></tr></table></figure>
<p>查看日志：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[centos@k8s-master ~]# kubectl -n kube-system  logs kube-proxy-dpx74</span><br><span class="line">I1213 09:50:15.414493       1 server_others.go:189] Using ipvs Proxier.</span><br><span class="line">W1213 09:50:15.414908       1 proxier.go:365] IPVS scheduler not specified, use rr by default</span><br><span class="line">I1213 09:50:15.415021       1 server_others.go:216] Tearing down inactive rules.</span><br><span class="line">I1213 09:50:15.461658       1 server.go:464] Version: v1.13.0</span><br><span class="line">I1213 09:50:15.467827       1 conntrack.go:52] Setting nf_conntrack_max to 131072</span><br><span class="line">I1213 09:50:15.467997       1 config.go:202] Starting service config controller</span><br><span class="line">I1213 09:50:15.468010       1 controller_utils.go:1027] Waiting for caches to sync for service config </span><br><span class="line">......</span><br><span class="line"># 或者使用命令，返回ipvs也说明启用ipvs</span><br><span class="line">curl localhost:10249/proxyMode</span><br></pre></td></tr></table></figure>
<p>日志中打印出了 Using ipvs Proxier，说明 ipvs 模式已经开启。</p>
<p>移除节点和集群<br>
kubernetes集群移除节点<br>
以移除k8s-node2节点为例，在Master节点上运行：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">kubectl drain k8s-node2 --delete-local-data --force --ignore-daemonsets</span><br><span class="line">kubectl delete node k8s-node2</span><br></pre></td></tr></table></figure>
<p>上面两条命令执行完成后，在k8s-node2节点执行清理命令，重置kubeadm的安装状态：<br>
kubeadm reset<br>
在master上删除node并不会清理k8s-node2运行的容器，需要在删除节点上面手动运行清理命令。<br>
如果你想重新配置集群，使用新的参数重新运行kubeadm init或者kubeadm join即可。</p>
<p>至此3个节点的集群搭建完成，后续可以继续添加node节点，或者部署dashboard、helm包管理工具、EFK日志系统、Prometheus Operator监控系统、rook+ceph存储系统等组件。</p>
<p>参考：</p>
<p><a href="https://blog.csdn.net/wc1695040842/article/details/105841329">https://blog.csdn.net/wc1695040842/article/details/105841329</a></p>
]]></content>
      <categories>
        <category>kubernetes</category>
      </categories>
      <tags>
        <tag>kubernetes</tag>
      </tags>
  </entry>
  <entry>
    <title>kubectl config 子命令</title>
    <url>/2021/01/kubectl-config-%E5%AD%90%E5%91%BD%E4%BB%A4/index.html</url>
    <content><![CDATA[<h4 id="kubectl-config简介">kubectl config简介</h4>
<p><code>kubectl config</code>使用像&quot; <code>kubectl config set current-context my-context</code> &quot;的子命令修改kubeconfig文件:</p>
<p>加载顺序遵循以下规则:<br>
1）如果设置了<code>--kubeconfig</code>标志，则只加载该文件。该标志只能设置一次，并且不会发生合并。<br>
2）如果设置了<code>$KUBECONFIG</code>环境变量，则将其用作路径列表(系统的普通路径分隔规则)。这些路径被合并。当一个值被修改时，它将在定义节的文件中被修改。当创建一个值时，它是在存在的第一个文件中创建的。如果链中不存在文件，则创建列表中的最后一个文件。<br>
3）否则,<code>$&#123;HOME&#125;/.kube/config</code>，不进行合并。<br>
<code>kubectl config current-context</code>显示当前上下文。<br>
<code>kubectl config delete-context</code>从kubeconfig中删除指定的上下文。<br>
<code>kubectl config get-contexts</code>显示kubeconfig文件中的一个或多个上下文。<br>
<code>kubectl config rename-context</code>重命名kubeconfig文件中的上下文。CONTEXT_NAME是想要更改的上下文名称。NEW_NAME是想要设置的新名称。<br>
<strong>注意：</strong> 如果被重命名的上下文是’current-context’，该字段也将被更新。<br>
客户端证书标志：<code>--client-certificate =certfile --client-key =keyfile</code><br>
不记名令牌标志：<code>--token =bearer_token</code><br>
基本认证标志：<code>--username =basic_user --password =basic_password</code><br>
承载令牌和基本认证互斥。<br>
<code>kubectl config view</code>显示合并的kubeconfig设置或指定的kubeconfig文件。可以使用<code>--output jsonpath=&#123;…&#125;</code>使用jsonpath表达式来提取特定的值。</p>
<h4 id="kubectl-config命令">kubectl config命令</h4>
<p>1）显示当前上下文</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">kubectl config current-context</span><br></pre></td></tr></table></figure>
<p>2）删除minikube集群</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">kubectl config delete-cluster minikube</span><br></pre></td></tr></table></figure>
<p>3）删除minikube集群上下文</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">kubectl config delete-context minikube</span><br></pre></td></tr></table></figure>
<p>4）删除minikube用户</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">kubectl config delete-user minikube</span><br></pre></td></tr></table></figure>
<p>5）列出kubectl知道的集群</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">kubectl config get-clusters</span><br></pre></td></tr></table></figure>
<p>6）列出kubeconfig文件中的所有上下文</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">kubectl config get-contexts</span><br></pre></td></tr></table></figure>
<p>7）在kubeconfig文件中描述一个上下文</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">kubectl config get-contexts my-context</span><br></pre></td></tr></table></figure>
<p>8）列出kubectl知道的用户</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">kubectl config get-users</span><br></pre></td></tr></table></figure>
<p>9）在kubeconfig文件中将上下文’old-name’重命名为’new-name’</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">kubectl config rename-context old-name new-name</span><br></pre></td></tr></table></figure>
<p>10）在my-cluster集群上设置server字段为<code>https://1.2.3.4</code></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">kubectl config set clusters.my-cluster.server https://1.2.3.4</span><br></pre></td></tr></table></figure>
<p>11）在my-cluster集群上设置certificate-authority-data字段</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">kubectl config set clusters.my-cluster.certificate-authority-data $(echo &quot;cert_data_here&quot; | base64 -i -)</span><br></pre></td></tr></table></figure>
<p>12）将my-context上下文中的cluster字段设置为my-cluster</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">kubectl config set contexts.my-context.cluster my-cluster</span><br></pre></td></tr></table></figure>
<p>13）使用–set-raw-bytes选项设置cluster-admin用户的client-key-data字段</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">kubectl config set users.cluster-admin.client-key-data cert_data_here --set-raw-bytes=true</span><br></pre></td></tr></table></figure>
<p>14）只设置e2e集群条目上的server字段，不涉及其他值</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">kubectl config set-cluster e2e --server=https://1.2.3.4</span><br></pre></td></tr></table></figure>
<p>15）为e2e集群条目嵌入证书颁发机构数据</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">kubectl config set-cluster e2e --embed-certs --certificate-authority=~/.kube/e2e/kubernetes.ca.crt</span><br></pre></td></tr></table></figure>
<p>16）禁用dev集群条目的证书检查</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">kubectl config set-cluster e2e --insecure-skip-tls-verify=true</span><br></pre></td></tr></table></figure>
<p>17）设置自定义TLS服务器名称，以用于对端到端集群条目进行验证</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">kubectl config set-cluster e2e --tls-server-name=my-cluster-name</span><br></pre></td></tr></table></figure>
<p>18）在gce上下文条目上设置user字段，而不触及其他值</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">kubectl config set-context gce --user=cluster-admin</span><br></pre></td></tr></table></figure>
<p>19）只在cluster-admin上设置client-key字段</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">kubectl config set-credentials cluster-admin --client-key=~/.kube/admin.key</span><br></pre></td></tr></table></figure>
<p>20）为“cluster-admin”条目设置基本认证</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">kubectl config set-credentials cluster-admin --username=admin --password=password</span><br></pre></td></tr></table></figure>
<p>21）将客户端证书数据嵌入到“cluster-admin”条目中</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">kubectl config set-credentials cluster-admin --client-certificate=~/.kube/admin.crt --embed-certs=true</span><br></pre></td></tr></table></figure>
<p>22）为“cluster-admin”条目启用谷歌计算平台认证提供程序</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">kubectl config set-credentials cluster-admin --auth-provider=gcp</span><br></pre></td></tr></table></figure>
<p>23）使用附加参数为“cluster-admin”条目启用OpenID Connect认证提供程序</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">kubectl config set-credentials cluster-admin --auth-provider=oidc --auth-provider-arg=client-id=cjavapy --auth-provider-arg=client-secret=bar</span><br></pre></td></tr></table></figure>
<p>24）删除“cluster-admin”条目的OpenID Connect认证提供程序的“client-secret”配置值</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">kubectl config set-credentials cluster-admin --auth-provider=oidc --auth-provider-arg=client-secret-</span><br></pre></td></tr></table></figure>
<p>25）为“cluster-admin”条目启用新的exec认证插件</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">kubectl config set-credentials cluster-admin --exec-command=/path/to/the/executable --exec-api-version=client.authentication.k8s.io/v1beta1</span><br></pre></td></tr></table></figure>
<p>26）为“cluster-admin”条目定义新的exec auth插件args</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">kubectl config set-credentials cluster-admin --exec-env=key1=val1 --exec-env=key2=val2</span><br></pre></td></tr></table></figure>
<p>27）删除“cluster-admin”条目的exec auth插件环境变量</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">kubectl config set-credentials cluster-admin --exec-env=var-to-remove-</span><br></pre></td></tr></table></figure>
<p>28）取消设置当前上下文</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">kubectl config unset current-context</span><br></pre></td></tr></table></figure>
<p>29）使用minikube集群的上下文</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">kubectl config use-context minikube</span><br></pre></td></tr></table></figure>
<p>30）显示合并的kubeconfig设置</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">kubectl config view</span><br></pre></td></tr></table></figure>
<p>31）显示合并的kubeconfig设置和原始证书数据</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">kubectl config view --raw</span><br></pre></td></tr></table></figure>
<p>32）获取e2e用户的密码</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">kubectl config view -o jsonpath=&#x27;&#123;.users[?(@.name == &quot;e2e&quot;)].user.password&#125;&#x27;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>kubernetes</category>
      </categories>
      <tags>
        <tag>kubernetes</tag>
      </tags>
  </entry>
  <entry>
    <title>lvs + keepalived  高可用集群 HAC</title>
    <url>/2021/05/lvs%20+%20keepalived%20%20%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%20HAC/index.html</url>
    <content><![CDATA[<h1 id="lvs-+ keepalived  高可用集群 hac">lvs + keepalived  高可用集群 HAC</h1>
<h3 id="lvs-安装">LVS 安装</h3>
<h4 id="1-内核模块检测">1. 内核模块检测</h4>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">测试是否加载，如果没有得到任何信息，则已经加载</span></span><br><span class="line">modprobe ip_vs</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看版本信息，以检测是否已经开始正常工作</span></span><br><span class="line">cat /proc/net/ip_vs</span><br></pre></td></tr></table></figure>
<h4 id="2-安装 lvs 管理程序 和keepalived">2. 安装 lvs 管理程序 和keepalived</h4>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">yum -y install ipvsadm keepalived</span><br></pre></td></tr></table></figure>
<h4 id="3-开启路由转发">3. 开启路由转发</h4>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">echo &quot;net.ipv4.ip_forward = 1&quot; &gt;&gt; /etc/sysctl.conf</span><br><span class="line">sysctl -p</span><br><span class="line">sysctl -a |grep &quot;net.ipv4.ip_forward&quot;</span><br></pre></td></tr></table></figure>
<h4 id="4-lvs 主节点配置keepalived">4. lvs 主节点配置keepalived</h4>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">! Configuration File for keepalived</span><br><span class="line">global_defs &#123;</span><br><span class="line">   router_id lvs-01             # router_id 机器标识</span><br><span class="line">&#125;</span><br><span class="line">vrrp_instance VI_1 &#123;            # vrrp实例定义部分</span><br><span class="line">    state BACKUP                # 置lvs的状态，MASTER和BACKUP两种，必须大写 </span><br><span class="line">    interface ens33             # 设置对外服务的接口</span><br><span class="line">    virtual_router_id 100       # 设置虚拟路由标示，这个标示是一个数字，同一个vrrp实例使用唯一标示 </span><br><span class="line">    priority 90                 # 定义优先级，主服务器优先级高</span><br><span class="line">    # nopreempt                 # 表示设置为不抢夺VIP# state MASTER 需修改为 state BACKUP </span><br><span class="line">    advert_int 1                # 设定master与backup负载均衡器之间同步检查的时间间隔，单位是秒</span><br><span class="line">    authentication &#123;            # 设置验证类型和密码</span><br><span class="line">        auth_type PASS          # 主要有PASS和AH两种</span><br><span class="line">        auth_pass 1111          # 验证密码，同一个vrrp_instance下MASTER和BACKUP密码必须相同</span><br><span class="line">    &#125;</span><br><span class="line">    virtual_ipaddress &#123;         #设置虚拟ip地址，可以设置多个，每行一个</span><br><span class="line">        10.10.10.222 dev ens33</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">设置虚拟服务器，需要指定虚拟ip和服务端口(lvs 端口必须要和后端服务相同)</span></span><br><span class="line">virtual_server 10.10.10.222 80 &#123;     # 集群端口和后端端口必须一致</span><br><span class="line">    delay_loop 6                     # 健康检查时间间隔</span><br><span class="line">    lb_algo rr                       # 负载均衡调度算法</span><br><span class="line">    lb_kind DR                       # 负载均衡转发规则</span><br><span class="line">    protocol TCP                     # 指定转发协议类型，有TCP和UDP两种</span><br><span class="line"><span class="meta prompt_">	</span></span><br><span class="line"><span class="meta prompt_">	#</span><span class="language-bash">设置后端服务器1</span></span><br><span class="line">    real_server 10.10.10.23 80 &#123;</span><br><span class="line">        weight 1  </span><br><span class="line">        inhibit_on_failure             # 表示在节点失败后，把他权重设置成0，而不在IPVS中删除，0表示失效</span><br><span class="line">        TCP_CHECK &#123;                    # realserver的状态监测设置部分单位秒</span><br><span class="line">           connect_port 80             # 连接端口为服务端口，要和上面的保持一致</span><br><span class="line">           connect_timeout 3           # 连接超时为10秒</span><br><span class="line">           nb_get_retry 3              # 重连次数</span><br><span class="line">           delay_before_retry 3        # 重试间隔</span><br><span class="line">           &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="meta prompt_">	#</span><span class="language-bash">设置后端服务器2</span></span><br><span class="line">    real_server 10.10.10.25 80 &#123;</span><br><span class="line">        weight 1</span><br><span class="line">        inhibit_on_failure</span><br><span class="line">        TCP_CHECK &#123;</span><br><span class="line">           connect_port 80</span><br><span class="line">           connect_timeout 3</span><br><span class="line">           nb_get_retry 3</span><br><span class="line">           delay_before_retry 3</span><br><span class="line">           &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    # 后端服务器.....</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="5- lvs 从节点配置keepalived">5 . lvs 从节点配置keepalived</h4>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">! Configuration File for keepalived</span><br><span class="line">global_defs &#123;</span><br><span class="line">   router_id lvs-02</span><br><span class="line">&#125;</span><br><span class="line">vrrp_instance VI_1 &#123;</span><br><span class="line">    state BACKUP</span><br><span class="line">    interface ens33</span><br><span class="line">    virtual_router_id 100</span><br><span class="line">    priority 30		   # 差值大于 50 切换会快</span><br><span class="line">    advert_int 1</span><br><span class="line">    authentication &#123;</span><br><span class="line">        auth_type PASS</span><br><span class="line">        auth_pass 1111</span><br><span class="line">    &#125;</span><br><span class="line">    virtual_ipaddress &#123;</span><br><span class="line">        10.10.10.222 dev ens33</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">virtual_server 10.10.10.222 80 &#123;</span><br><span class="line">    delay_loop 6</span><br><span class="line">    lb_algo rr</span><br><span class="line">    lb_kind DR</span><br><span class="line">    protocol TCP</span><br><span class="line"></span><br><span class="line">    real_server 10.10.10.23 80 &#123;</span><br><span class="line">        weight 1</span><br><span class="line">        inhibit_on_failure</span><br><span class="line">        TCP_CHECK &#123;</span><br><span class="line">           connect_port 80</span><br><span class="line">           connect_timeout 3</span><br><span class="line">           nb_get_retry 3</span><br><span class="line">           delay_before_retry 3</span><br><span class="line">           &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    real_server 10.10.10.25 80 &#123;</span><br><span class="line">        weight 1</span><br><span class="line">        inhibit_on_failure</span><br><span class="line">        TCP_CHECK &#123;</span><br><span class="line">           connect_port 80</span><br><span class="line">           connect_timeout 3</span><br><span class="line">           nb_get_retry 3</span><br><span class="line">           delay_before_retry 3</span><br><span class="line">           &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="6-启动keepalived">6. 启动keepalived</h4>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl start keepalived.service</span><br><span class="line">systemctl status keepalived.service</span><br><span class="line">systemctl enable keepalived.service</span><br></pre></td></tr></table></figure>
<p>出现如下日志信息表示VIP配置成功</p>
<p><img src="https://images.gitee.com/uploads/images/2020/1114/112921_a613a840_5330846.png" alt="输入图片说明" title="1598065700207911375.png"></p>
<h3 id="后端服务器配置">后端服务器配置</h3>
<h4 id="1-安装httpd服务">1. 安装httpd服务</h4>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">yum -y install httpd</span><br><span class="line">systemctl start httpd</span><br><span class="line">systemctl enable httpd</span><br></pre></td></tr></table></figure>
<h4 id="2-添加虚拟ip和路由">2. 添加虚拟IP和路由</h4>
<ul>
<li>临时配置</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ip addr add 10.10.10.222/32 dev lo:0 broadcast 10.10.10.222</span><br><span class="line">ip route add 10.10.10.222 dev lo:0  # 将目标ip为VIP的报文转交给lo:0处理</span><br></pre></td></tr></table></figure>
<ul>
<li>永久配置</li>
</ul>
<blockquote>
<p>虚拟IP地址配置</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vim /etc/sysconfig/network-scripts/ifcfg-lo:0</span><br><span class="line">DEVICE=lo:0</span><br><span class="line">IPADDR=10.10.10.222</span><br><span class="line">NETMASK=255.255.255.255</span><br><span class="line">NETWORK=127.0.0.0</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">If you<span class="string">&#x27;re having problems with gated making 127.0.0.0/8 a martian,</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="string">you can change this to something else (255.255.255.255, for example)</span></span></span><br><span class="line">BROADCAST=127.255.255.255</span><br><span class="line">ONBOOT=yes</span><br><span class="line">NAME=loopback</span><br></pre></td></tr></table></figure>
<blockquote>
<p>路由配置</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vim /etc/sysconfig/network-scripts/route-lo:0</span><br><span class="line">10.10.10.222 dev lo:0</span><br></pre></td></tr></table></figure>
<h4 id="3-关闭arp响应级别">3. 关闭arp响应级别</h4>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 临时配置</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;1&quot;</span> &gt;/proc/sys/net/ipv4/conf/lo/arp_ignore</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;2&quot;</span> &gt;/proc/sys/net/ipv4/conf/lo/arp_announce</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;1&quot;</span> &gt;/proc/sys/net/ipv4/conf/all/arp_ignore</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;2&quot;</span> &gt;/proc/sys/net/ipv4/conf/all/arp_announce</span><br><span class="line"></span><br><span class="line"><span class="comment"># 永久配置</span></span><br><span class="line"><span class="comment"># /etc/sysctl.conf </span></span><br><span class="line">net.ipv4.conf.lo.arp_ignore= 1</span><br><span class="line">net.ipv4.conf.lo.arp_announce= 2</span><br><span class="line">net.ipv4.conf.all.arp_ignore= 1</span><br><span class="line">net.ipv4.conf.all.arp_announce= 2</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>系统</category>
      </categories>
      <tags>
        <tag>LVS</tag>
      </tags>
  </entry>
  <entry>
    <title>nginx 反向代理配置的相关请求头设置</title>
    <url>/2021/06/nginx-%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86%E9%85%8D%E7%BD%AE%E7%9A%84%E7%9B%B8%E5%85%B3%E8%AF%B7%E6%B1%82%E5%A4%B4%E8%AE%BE%E7%BD%AE/index.html</url>
    <content><![CDATA[<h4 id="为了后端能够获取到客户端的真实ip，需要配置一些请求头">为了后端能够获取到客户端的真实IP，需要配置一些请求头</h4>
<figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 一级代理</span></span><br><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span>       <span class="number">10.10.10.11:80</span>;</span><br><span class="line">    <span class="attribute">server_name</span>  localhost;</span><br><span class="line"></span><br><span class="line">    <span class="section">location</span> / &#123;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> Host <span class="variable">$host</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> X-Real-IP <span class="variable">$remote_addr</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> HTTP_CLIENT_IP <span class="variable">$remote_addr</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> X-Forwarded-For <span class="variable">$remote_addr</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> X-Client-Real-ip <span class="variable">$remote_addr</span>;</span><br><span class="line"></span><br><span class="line">        <span class="attribute">proxy_pass</span> http://10.10.10.12;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 二级代理</span></span><br><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span>       <span class="number">10.10.10.12:80</span>;</span><br><span class="line">    <span class="attribute">server_name</span>  localhost;</span><br><span class="line"></span><br><span class="line">    <span class="section">location</span> / &#123;</span><br><span class="line">        <span class="attribute">set_real_ip_from</span> <span class="number">10.10.10.0</span>/<span class="number">24</span>;</span><br><span class="line">        <span class="attribute">real_ip_header</span> X-Forwarded-For;</span><br><span class="line">        <span class="attribute">real_ip_recursive</span> <span class="literal">on</span>;</span><br><span class="line"></span><br><span class="line">        <span class="attribute">proxy_set_header</span> Host <span class="variable">$host</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> X-Real-IP <span class="variable">$http_x_real_ip</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> X-Forwarded-For <span class="variable">$proxy_add_x_forwarded_for</span>;</span><br><span class="line">        <span class="attribute">proxy_pass</span> http://10.10.10.13;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 三级代理</span></span><br><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span>       <span class="number">10.10.10.13:80</span>;</span><br><span class="line">    <span class="attribute">server_name</span>  localhost;</span><br><span class="line"></span><br><span class="line">    <span class="section">location</span> / &#123;</span><br><span class="line">        <span class="attribute">set_real_ip_from</span> <span class="number">10.10.10.11</span>;</span><br><span class="line">        <span class="attribute">set_real_ip_from</span> <span class="number">10.10.10.12</span>;</span><br><span class="line">        <span class="attribute">set_real_ip_from</span> <span class="number">10.10.10.13</span>;</span><br><span class="line">        <span class="attribute">real_ip_header</span> X-Forwarded-For;</span><br><span class="line">        <span class="attribute">real_ip_recursive</span> <span class="literal">on</span>;</span><br><span class="line"></span><br><span class="line">        <span class="attribute">proxy_set_header</span> Host <span class="variable">$host</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> X-Real-IP <span class="variable">$http_x_real_ip</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> X-Forwarded-For <span class="variable">$proxy_add_x_forwarded_for</span>;</span><br><span class="line">        <span class="attribute">proxy_pass</span> http://10.10.10.1:8888;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">gw=10.10.10.1                   10.10.10.11                       10.10.10.12                       10.10.10.100</span><br><span class="line">---客户端--------------------------&gt; nginx----------------------------&gt;nginx --------------------------&gt; server</span><br><span class="line">10.10.10.1               remote_addr=10.10.10.1             remote_addr=10.10.10.11             remote_addr=10.10.10.12   </span><br><span class="line">                         X-Real-IP=<span class="variable">$remote_addr</span>             X-Real-IP=<span class="variable">$http_x_real_ip</span>           X-Real-IP=<span class="variable">$http_x_real_ip</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>服务</category>
        <category>Nginx</category>
      </categories>
      <tags>
        <tag>Nginx</tag>
      </tags>
  </entry>
  <entry>
    <title>nginx 日志配置</title>
    <url>/2021/06/nginx-%E6%97%A5%E5%BF%97%E9%85%8D%E7%BD%AE/index.html</url>
    <content><![CDATA[<figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 日志配置</span></span><br><span class="line"><span class="section">http</span> &#123;</span><br><span class="line">    <span class="attribute">map</span> <span class="variable">$http_x_request_id</span> <span class="variable">$req_id</span> &#123;</span><br><span class="line">        <span class="attribute">default</span> <span class="variable">$http_x_request_id</span>;</span><br><span class="line">        &#x27;&#x27;      $request_id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">log_format</span> upstreaminfo</span><br><span class="line">        <span class="string">&#x27;<span class="variable">$remote_addr</span> - <span class="variable">$remote_user</span> [<span class="variable">$time_local</span>] &quot;<span class="variable">$request</span>&quot; &#x27;</span></span><br><span class="line">        <span class="string">&#x27;<span class="variable">$status</span> <span class="variable">$body_bytes_sent</span> &quot;<span class="variable">$http_referer</span>&quot; &quot;<span class="variable">$http_user_agent</span>&quot; &#x27;</span></span><br><span class="line">        <span class="string">&#x27;<span class="variable">$request_length</span> <span class="variable">$request_time</span> <span class="variable">$upstream_addr</span> &#x27;</span></span><br><span class="line">        <span class="string">&#x27;<span class="variable">$upstream_response_length</span> <span class="variable">$upstream_response_time</span> <span class="variable">$upstream_status</span> <span class="variable">$req_id</span>&#x27;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="section">server</span> &#123;</span><br><span class="line">        <span class="attribute">listen</span>       <span class="number">80</span>;</span><br><span class="line">        <span class="attribute">server_name</span>  localhost;</span><br><span class="line"></span><br><span class="line">        <span class="attribute">access_log</span>  /var/log/nginx/access.log  upstreaminfo;</span><br><span class="line"></span><br><span class="line">        <span class="section">location</span> / &#123;</span><br><span class="line">            <span class="attribute">add_header</span> X-Request-Id <span class="variable">$req_id</span>;  <span class="comment"># 添加最终的响应头里面，一般在网关的时候需要</span></span><br><span class="line">            <span class="attribute">proxy_set_header</span> Host <span class="variable">$host</span>;</span><br><span class="line">            <span class="attribute">proxy_set_header</span> X-Request-Id <span class="variable">$req_id</span>;</span><br><span class="line">            <span class="attribute">proxy_set_header</span> X-Real-IP <span class="variable">$remote_addr</span>;</span><br><span class="line">            <span class="attribute">proxy_set_header</span> X-Forwarded-For <span class="variable">$remote_addr</span>;</span><br><span class="line">            <span class="attribute">proxy_set_header</span> X-Client-Real-ip <span class="variable">$remote_addr</span>;</span><br><span class="line"></span><br><span class="line">            <span class="attribute">proxy_pass</span> http://192.168.8.111:8888;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="variable">$request_length</span>        <span class="comment"># 请求长度（包括请求行，标题和请求正文）</span></span><br><span class="line"><span class="variable">$request_method</span>        <span class="comment"># 请求的动作（get或者post）</span></span><br><span class="line"><span class="variable">$request_time</span>          <span class="comment"># 请求时间(以毫秒为单位的请求处理时间（1.3.9,1.2.6）; 从客户端读取第一个字节后经过的时间)</span></span><br><span class="line"><span class="variable">$request_url</span>           <span class="comment"># 完整的原始请求URL（带参数）  </span></span><br><span class="line"><span class="variable">$scheme</span>                <span class="comment"># 返回用的协议，是http还是https</span></span><br><span class="line"><span class="variable">$remote_addr</span>           <span class="comment"># 客户端的地址</span></span><br><span class="line"><span class="variable">$remote_port</span>           <span class="comment"># client port</span></span><br><span class="line"><span class="variable">$remote_user</span>           <span class="comment"># 基本认证的身份</span></span><br><span class="line"><span class="variable">$server_addr</span>           <span class="comment"># 服务端的地址</span></span><br><span class="line"><span class="variable">$server_port</span>           <span class="comment"># server port</span></span><br><span class="line"><span class="variable">$server_protocol</span>       <span class="comment"># 使用的http的版本“HTTP/1.0”, “HTTP/1.1”, or “HTTP/2.0”</span></span><br><span class="line"><span class="variable">$status</span>                <span class="comment"># 回应状态</span></span><br><span class="line"><span class="variable">$body_bytes_sent</span>       <span class="comment"># 给你主体发送的字节</span></span><br><span class="line"><span class="variable">$http_referer</span>          <span class="comment"># 请求的上个页面来至于哪里</span></span><br><span class="line"><span class="variable">$http_x_forwarded_for</span>  <span class="comment"># 代理服务器的IP地址</span></span><br><span class="line"><span class="variable">$http_user_agent</span>       <span class="comment"># 浏览器的型号</span></span><br><span class="line"><span class="variable">$uri</span>                   <span class="comment"># 除去域名和协议的URL</span></span><br><span class="line"></span><br><span class="line">================upstream 模块所支持的变量==============</span><br><span class="line"><span class="variable">$upstream_addr</span>              <span class="comment"># 处理请求的上游服务器的地址</span></span><br><span class="line"><span class="variable">$upstream_response_length</span>   <span class="comment"># 从上游服务器获得的响应体的字节数，不包括响应头</span></span><br><span class="line"><span class="variable">$upstream_cache_status</span>      <span class="comment"># 表示是否命中缓存</span></span><br><span class="line"><span class="variable">$upstream_status</span>            <span class="comment"># 上游服务器的响应状态码</span></span><br><span class="line"><span class="variable">$upstream_response_time</span>     <span class="comment"># 上游服务器的响应时间，精度到毫秒</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>服务</category>
        <category>Nginx</category>
      </categories>
      <tags>
        <tag>Nginx</tag>
      </tags>
  </entry>
  <entry>
    <title>nginx安全配置</title>
    <url>/2021/05/nginx%E5%AE%89%E5%85%A8%E9%85%8D%E7%BD%AE/index.html</url>
    <content><![CDATA[<h2 id="nginx安全配置">nginx安全配置</h2>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">http &#123; port_in_redirect off; &#125;</span><br><span class="line">http &#123; server_tokens off; &#125;       <span class="comment"># 隐藏版本号</span></span><br><span class="line">http &#123; add_header X-Frame-Options SAMEORIGIN; &#125;</span><br><span class="line">http &#123; add_header X-XSS-Protection <span class="string">&quot;1; mode=block&quot;</span>; &#125;</span><br><span class="line">http &#123; add_header X-Content-Type-Options nosniff; &#125;</span><br><span class="line">http &#123; autoindex off; &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">server &#123;</span><br><span class="line">	client_body_timeout ...</span><br><span class="line">	client_header_timeout 60s</span><br><span class="line">	keepalive_timeout ...</span><br><span class="line">	send_timeout 60;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>服务</category>
        <category>Nginx</category>
      </categories>
      <tags>
        <tag>Nginx</tag>
      </tags>
  </entry>
  <entry>
    <title>ssh 免密通道登录及常见问题</title>
    <url>/2021/05/ssh-%E5%85%8D%E5%AF%86%E9%80%9A%E9%81%93%E7%99%BB%E5%BD%95%E5%8F%8A%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/index.html</url>
    <content><![CDATA[<h3 id="创建密钥对">创建密钥对</h3>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 这条命令一路回车即可</span></span><br><span class="line">ssh-keygen</span><br></pre></td></tr></table></figure>
<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 生成如下2个文件</span></span><br><span class="line">tree .ssh</span><br><span class="line">.ssh</span><br><span class="line">├── id_rsa</span><br><span class="line">└── id_rsa.pub</span><br></pre></td></tr></table></figure>
<h4 id="将公钥传输到待登录的目标机器">将公钥传输到待登录的目标机器</h4>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 根据提示输入密码即可</span></span><br><span class="line">ssh-copy-id root@10.10.10.12</span><br></pre></td></tr></table></figure>
<blockquote>
<p>使用 <code>-i</code> 指定私钥位置，使用 <code>-p</code> 指定ssh的端口</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ssh-copy-id -i .ssh/id_rsa root@10.10.10.12 -p 22</span><br></pre></td></tr></table></figure>
<p>如果公钥丢失，可以从私钥中导出，（私钥中能导处公钥，公钥中不能导出私钥）</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@host-10-11 ~]<span class="comment"># ssh-keygen -y -f .ssh/id_rsa</span></span><br><span class="line">ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCvd/MFEXp1amhEV59QnrEvdwuvDyQPW......</span><br><span class="line"><span class="comment"># 导出的pub没有最后的Comment</span></span><br></pre></td></tr></table></figure>
</blockquote>
<h4 id="远程机器会生成`authorized_keys`文件">远程机器会生成<code>authorized_keys</code>文件</h4>
<blockquote>
<p><code>文件权限非常重要，错误的权限会导致免密失效</code></p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@host-10-11 ~]<span class="comment"># tree -a -C -p  /root</span></span><br><span class="line">/root</span><br><span class="line">├── [drwx------]  .ssh</span><br><span class="line">│   └── [-rw-------]  authorized_keys</span><br></pre></td></tr></table></figure>
<h4 id="手工拷贝pub文件">手工拷贝pub文件</h4>
<p>由于直接编辑容易出错，建议使用如下命令</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 将pub文件进行base64编码</span></span><br><span class="line">[root@host-10-11 ~]<span class="comment"># base64 .ssh/id_rsa.pub </span></span><br><span class="line">c3NoLXJzYSBBQUFBQjNOemFDMXljMkVBQUFBREFRQUJBQUFCQVFDdmQvTUZFWHAxYW1oRVY1OVFu</span><br><span class="line">ckV2ZHd1dkR5UVBXMnd2e......</span><br><span class="line">......</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 目标机器创建文件</span></span><br><span class="line">[root@host-10-12 ~]<span class="comment"># cat &lt;&lt;EOF |base64 -d &gt;&gt; .ssh/authorized_keys</span></span><br><span class="line">c3NoLXJzYSBBQUFBQjNOemFDMXljMkVBQUFBREFRQUJBQUFCQVFDdmQvTUZFWHAxYW1oRVY1OVFu</span><br><span class="line">ckV2ZHd1dkR5UVBXMnd2e......</span><br><span class="line">......</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改权限</span></span><br><span class="line"><span class="built_in">chmod</span> 700 .ssh</span><br><span class="line"><span class="built_in">chmod</span> 600 .ssh/authorized_keys</span><br></pre></td></tr></table></figure>
<h4 id="使用ssh连接目标主机">使用ssh连接目标主机</h4>
<blockquote>
<p>使用 <code>-i</code> 指定私钥位置，使用 <code>-p</code> 指定ssh的端口，示例如下</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@host-10-11 ~]<span class="comment"># ssh -i .ssh/id_rsa root@10.10.10.12 -p 22</span></span><br><span class="line">Last login: Mon May 24 15:56:36 2021 from 10.10.10.11</span><br><span class="line">[root@host-10-12 ~]<span class="comment"># </span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>ssh</category>
      </categories>
      <tags>
        <tag>ssh</tag>
      </tags>
  </entry>
  <entry>
    <title>xshell 连接centos使用图形程序</title>
    <url>/2021/09/xshell%20%E8%BF%9E%E6%8E%A5centos%E4%BD%BF%E7%94%A8%E5%9B%BE%E5%BD%A2%E7%A8%8B%E5%BA%8F/index.html</url>
    <content><![CDATA[<h1 id="xshell-连接centos使用图形程序">xshell 连接centos使用图形程序</h1>
<p>安装测试程序</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">yum -y install xclock</span><br></pre></td></tr></table></figure>
<p>安装x11软件组</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">yum -y groupinstall  &quot;X Window System&quot; &quot;Fonts&quot;</span><br></pre></td></tr></table></figure>
<p>安装Xmanager组件。（官网下载即可）</p>
<p><img src="https://user-images.githubusercontent.com/56825316/119247321-fe518a80-bbba-11eb-9910-3b529f5df5a7.png" alt="image"></p>
<p>报错问题</p>
<p>error: Can’t open display:</p>
<p>原因：未开启转发x11转发。</p>
<p>/usr/bin/xauth:  file /root/.Xauthority does not exist</p>
<p>重新ssh连接一次即可。</p>
]]></content>
      <categories>
        <category>系统</category>
      </categories>
      <tags>
        <tag>ssh</tag>
      </tags>
  </entry>
  <entry>
    <title>从零构建一个 Alpine 的 docker 镜像</title>
    <url>/2021/05/%E4%BB%8E%E9%9B%B6%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AAalpine%E7%9A%84docker%E9%95%9C%E5%83%8F/index.html</url>
    <content><![CDATA[<h2 id="从零构建一个-alpine 的 docker 镜像">从零构建一个 Alpine 的 docker 镜像</h2>
<h3 id="下载alpine的rootfs">下载alpine的rootfs</h3>
<blockquote>
<p><a href="https://alpinelinux.org/downloads/">https://alpinelinux.org/downloads/</a><br>
找到 MINI ROOT FILESYSTEM 区，下载对应架构的包即可</p>
</blockquote>
<h3 id="从dockerfile构建">从Dockerfile构建</h3>
<figure class="highlight dockerfile"><table><tr><td class="code"><pre><span class="line"><span class="keyword">FROM</span> scratch</span><br><span class="line"><span class="comment"># 下面的alpine版本换成自己下载的即可</span></span><br><span class="line"><span class="keyword">ADD</span><span class="language-bash"> alpine-minirootfs-3.13.5-x86_64.tar.gz /</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> apk add --no-cache -U tzdata</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> <span class="built_in">ln</span> -fs ../usr/share/zoneinfo/Asia/Shanghai /etc/localtime</span></span><br></pre></td></tr></table></figure>
<h3 id="使用命令构建">使用命令构建</h3>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker import -m `<span class="built_in">sha256sum</span> alpine-minirootfs-3.18.0-x86_64.tar.gz` alpine-minirootfs-3.18.0-x86_64.tar.gz alpine:3.18.0</span><br><span class="line"><span class="comment"># -m 指定一个 commit message 。我这里使用了rootfs的sha256sum作为message</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 实例如下</span></span><br><span class="line">[root@host-10-14 ~]<span class="comment"># docker import -m `sha256sum alpine-minirootfs-3.18.0-x86_64.tar.gz` alpine-minirootfs-3.18.0-x86_64.tar.gz alpine:3.18.0</span></span><br><span class="line">sha256:f30bd2b686a2a459f394804fc4b5b2452f6c3663dc8a1a64ed7f4b8cb2d073f2</span><br><span class="line">[root@host-10-14 ~]<span class="comment"># docker images alpine</span></span><br><span class="line">REPOSITORY   TAG       IMAGE ID       CREATED       SIZE</span><br><span class="line">alpine       3.18.0    5e2b554c1c45   6 weeks ago   7.33MB</span><br></pre></td></tr></table></figure>
<h5 id="附：">附：</h5>
<blockquote>
<p>docker golang alpine中遇到 sh xxx not found<br>
<a href="https://my.oschina.net/u/727875/blog/4556125">https://my.oschina.net/u/727875/blog/4556125</a><br>
<a href="https://blog.csdn.net/u011124985/article/details/80774171">https://blog.csdn.net/u011124985/article/details/80774171</a><br>
<a href="https://blog.csdn.net/j3T9Z7H/article/details/106232650">https://blog.csdn.net/j3T9Z7H/article/details/106232650</a><br>
docker golang alpine中遇到 sh: xxx: not found<br>
<strong>原因:</strong><br>
由于alpine镜像使用的是musl libc而不是gnu libc，/lib64/ 是不存在的。但他们是兼容的，可以创建个软连接过去试试<br>
处理，创建lib64的软连接<br>
mkdir /lib64<br>
ln -s /lib/libc.musl-x86_64.so.1 /lib64/ld-linux-x86-64.so.2</p>
</blockquote>
]]></content>
      <categories>
        <category>服务</category>
        <category>Docker</category>
      </categories>
      <tags>
        <tag>Docker</tag>
        <tag>Alpine</tag>
      </tags>
  </entry>
  <entry>
    <title>在docker容器安装中文字符集</title>
    <url>/2021/09/%E5%9C%A8docker%E5%AE%B9%E5%99%A8%E5%AE%89%E8%A3%85%E4%B8%AD%E6%96%87%E5%AD%97%E7%AC%A6%E9%9B%86/index.html</url>
    <content><![CDATA[<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">yum install kde-l10n-Chinese</span><br><span class="line">localedef -c -f UTF-8 -i zh_CN zh_CN.utf8</span><br></pre></td></tr></table></figure>
<figure class="highlight dockerfile"><table><tr><td class="code"><pre><span class="line"><span class="keyword">FROM</span> centos:<span class="number">7.6</span>.<span class="number">1810</span> as compile</span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> curl -o /etc/yum.repos.d/CentOS-Base-Local.repo http://mirrors.local/repo/CentOS-Base-Local.repo</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> yum install --downloadonly --downloaddir=/tmp/package \</span></span><br><span class="line"><span class="language-bash">	kde-l10n-Chinese samba samba-client </span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">##########################</span></span><br><span class="line"><span class="keyword">FROM</span> centos:<span class="number">7.6</span>.<span class="number">1810</span> as build</span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> <span class="built_in">ln</span> -fs ../usr/share/zoneinfo/Asia/Shanghai /etc/localtime</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> --from=0 /tmp/package /tmp/package</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> yum -y localinstall /tmp/package/*.rpm</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> <span class="built_in">rm</span> -rf /root/anaconda-ks.cfg /tmp/* /etc/yum.repos.d/*</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> useradd -s /sbin/nologin -d /opt/data admin</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> pdbedit -a admin</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">USER</span> root</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">EXPOSE</span> <span class="number">139</span>/tcp <span class="number">445</span>/tcp</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="language-bash"> /root</span></span><br><span class="line"><span class="keyword">ENTRYPOINT</span><span class="language-bash"> [<span class="string">&quot;/usr/sbin/smbd&quot;</span>]</span></span><br><span class="line"><span class="keyword">CMD</span><span class="language-bash"> [<span class="string">&quot;--foreground&quot;</span>, <span class="string">&quot;--no-process-group&quot;</span>]</span></span><br></pre></td></tr></table></figure>
<blockquote>
<h5 id="参考文章">参考文章</h5>
<p><a href="https://blog.csdn.net/forestqq/article/details/128959874">在Centos7容器中启用中文支持_centos7安装中文字符集-CSDN博客</a></p>
</blockquote>
]]></content>
      <categories>
        <category>服务</category>
        <category>Docker</category>
      </categories>
      <tags>
        <tag>Docker</tag>
      </tags>
  </entry>
  <entry>
    <title>如何使用yum来下载RPM包而不进行安装</title>
    <url>/2021/05/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8yum%E6%9D%A5%E4%B8%8B%E8%BD%BDRPM%E5%8C%85%E8%80%8C%E4%B8%8D%E8%BF%9B%E8%A1%8C%E5%AE%89%E8%A3%85/index.html</url>
    <content><![CDATA[<h2 id="如何使用yum来下载rpm包而不进行安装">如何使用yum来下载RPM包而不进行安装</h2>
<p>yum是基于Red Hat的系统(如CentOS、Fedora、RHEl)上的默认包管理器。使用yum，你可以安装或者更新一个RPM包，并且他会自动解决包依赖关系。但是如果你只想将一个RPM包下载到你的系统上该怎么办呢? 例如，你可能想要获取一些RPM包在以后使用，或者将他们安装在另外的机器上。</p>
<h2 id="下载">下载</h2>
<h3 id="方法一:yum">方法一:yum</h3>
<p>yum命令本身就可以用来下载一个RPM包，标准的yum命令提供了–downloadonly(只下载)的选项来达到这个目的。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">yum install --downloadonly &lt;package-name&gt; </span><br></pre></td></tr></table></figure>
<p>默认情况下，一个下载的RPM包会保存在下面的目录中:</p>
<p>/var/cache/yum/x86_64/[centos/fedora-version]/[repository]/packages</p>
<p>以上的[repository]表示下载包的来源仓库的名称(例如：base、fedora、updates)</p>
<p>如果你想要将一个包下载到一个指定的目录(如/tmp)：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">yum install --downloadonly --downloaddir=/tmp/yumpackage &lt;package-name&gt; </span><br></pre></td></tr></table></figure>
<p>注意，如果下载的包包含了任何没有满足的依赖关系，yum将会把所有的依赖关系包下载，但是都不会被安装。</p>
<p>另外一个重要的事情是，在CentOS/RHEL 6或更早期的版本中，你需要安装一个单独yum插件(名称为 yum-plugin-downloadonly)才能使用–downloadonly命令选项：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">yum install yum-plugin-downloadonly</span><br></pre></td></tr></table></figure>
<p>如果没有该插件，你会在使用yum时得到以下错误：</p>
<p>Command line error: no such option: --downloadonl</p>
<h3 id="方法二:-yumdownloader">方法二: Yumdownloader</h3>
<p>另外一个下载RPM包的方法就是通过一个专门的包下载工具–yumdownloader。 这个工具是yum工具包(包含了用来进行yum包管理的帮助工具套件)的子集。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">yum install yum-utils </span><br></pre></td></tr></table></figure>
<p>下载一个RPM包：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">yumdownloader &lt;package-name&gt;</span><br></pre></td></tr></table></figure>
<p>下载的包会被保存在当前目录中。你需要使用root权限，因为yumdownloader会在下载过程中更新包索引文件。与yum命令不同的是，任何依赖包不会被下载。</p>
<p>下载lsof示例：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">yumdownloader lsof --resolve --destdir=/data/mydepot/　　#resolve下载依赖</span><br></pre></td></tr></table></figure>
<h2 id="安装">安装</h2>
<p>上面我们下载了rpm软件包，安装的时候可以使用如下命令，这种方式可以解决依赖问题并自动安装。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">yum localinstall /tmp/yumpackage/&lt;package-name&gt;.rpm </span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>系统</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>常用命令</title>
    <url>/2021/05/%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/index.html</url>
    <content><![CDATA[<h2 id="创建临时目录或文件">创建临时目录或文件</h2>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">Usage: mktemp [OPTION]... [TEMPLATE]</span><br><span class="line">  -d, --directory     用于创建目录而非文件</span><br><span class="line">  -u, --dry-run       创建的文件会在mktemp之行结束被删除，所以并非真正创建文件，只是打印生成的文件名，后缀为随机数字</span><br><span class="line">  -q, --quiet         执行时若发生错误，不会显示任何信息。</span><br><span class="line">  -t                  用于在/tmp目录下创建临时文件            	</span><br></pre></td></tr></table></figure>
<p>实例</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">tempfile=$(mktemp -t test-XXXXXXXXXXXX) &amp;&amp; echo $tempfile</span><br><span class="line">tempfile=$(mktemp -td test-XXXXXXXXXXXX) &amp;&amp; echo $tempfile</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>脚本</category>
      </categories>
      <tags>
        <tag>shell</tag>
      </tags>
  </entry>
  <entry>
    <title>常用工具</title>
    <url>/2021/05/%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7/index.html</url>
    <content><![CDATA[<h3 id="常用谷歌浏览器插件">常用谷歌浏览器插件</h3>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 代理配置</span><br><span class="line">SwitchyOmega</span><br><span class="line"></span><br><span class="line"># 各种小工具，前端开发工具</span><br><span class="line">fehelper</span><br><span class="line"></span><br><span class="line"># http2.0闪电图标</span><br><span class="line">HTTP/2 and SPDY indicator</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>系统</category>
      </categories>
  </entry>
  <entry>
    <title>Nginx 配置 request_id</title>
    <url>/2022/11/Nginx-%E9%85%8D%E7%BD%AE-request-id/index.html</url>
    <content><![CDATA[<h3 id="nginx-配置request_id">Nginx 配置request_id</h3>
<p>1.修改在<code>nginx.conf</code>同一路径下的<code>fastcgi_params</code>文件，添加如下内容</p>
<figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="attribute">fastcgi_param</span> HTTP_REQUEST_ID <span class="variable">$request_id</span>;</span><br></pre></td></tr></table></figure>
<p>2.添加nginx的日志格式，并开启。</p>
<figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="attribute">log_format</span>  main  <span class="string">&#x27;<span class="variable">$remote_addr</span> - <span class="variable">$request_id</span> <span class="variable">$remote_user</span> [<span class="variable">$time_local</span>] &quot;<span class="variable">$reque</span>.........</span></span><br><span class="line"><span class="string">access_log  logs/access.log  main;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>日志文件如下：</p>
<figure class="highlight tex"><table><tr><td class="code"><pre><span class="line">127.0.0.1 - 571de9a42ce6f207861a9365a9564d31 - [11/Nov/2022:23:05:05 +0800] &quot;GET / .......</span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="在前端请求里面配置请求id">在前端请求里面配置请求ID</h3>
<p>设置一个请求头，此时再去请求，会发现响应头里面会多一个X-Request-Id，与日志中显示的值是相同的。</p>
<blockquote>
<p>add_header 可以配置在 <code>http</code> <code>server</code> <code>location</code> 等区域</p>
</blockquote>
<figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="attribute">add_header</span> X-Request-Id <span class="variable">$request_id</span>;</span><br><span class="line"><span class="comment">#或者</span></span><br><span class="line"><span class="attribute">proxy_set_header</span> X-Request-Id <span class="variable">$request_id</span>;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>服务</category>
        <category>Nginx</category>
      </categories>
      <tags>
        <tag>Nginx</tag>
      </tags>
  </entry>
  <entry>
    <title>centos 修改主机名</title>
    <url>/2022/07/centos-%E4%BF%AE%E6%94%B9%E4%B8%BB%E6%9C%BA%E5%90%8D/index.html</url>
    <content><![CDATA[<h3 id="centos-修改主机名">centos 修改主机名</h3>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@local-server ~]<span class="comment"># hostnamectl status</span></span><br><span class="line">Static hostname: localhost.localdomain</span><br><span class="line">   Pretty hostname: mini-host</span><br><span class="line">Transient hostname: local-server</span><br><span class="line">         Icon name: computer-laptop</span><br><span class="line">           Chassis: laptop</span><br><span class="line">        Machine ID: 831ba05f9eb04b7db36ed8a76d77e833</span><br><span class="line">           Boot ID: 7f5fad8ac55549f5851de6f3a5bcbeeb</span><br><span class="line">  Operating System: CentOS Linux 7 (Core)</span><br><span class="line">       CPE OS Name: cpe:/o:centos:centos:7</span><br><span class="line">            Kernel: Linux 3.10.0-1127.el7.x86_64</span><br><span class="line">      Architecture: x86-64</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>如果有<code>Transient hostname</code>，则显示<code>Transient hostname</code>，否则显示<code>Static hostname</code></p>
<p>设置<code>Transient hostname</code>使用如下命令</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">hostnamectl set-hostname --transient local-server</span><br></pre></td></tr></table></figure>
<blockquote>
<p>有些软件会偷偷的改 <code>Transient hostname</code></p>
<p>由上面hostnamectl的显示信息可知，hostname只改变了Transient hostname（临时主机名）。其原理就是临时修改了/proc/sys/kernel/hostname文件（可以用cat /proc/sys/kernel/hostname查看），懂内核的或许就知道，其文件是Linux系统启动时生成的虚拟文件（proc文件系统），系统重启后此hostname又将以静态hostname覆盖。</p>
</blockquote>
<h2 id="主机名分类">主机名分类</h2>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">man hostnamectl</span><br></pre></td></tr></table></figure>
<p>基于上面命令，我们可以进一步思考是否可以修改主机名呢？是否用hostname、hostnamectl这两条命令就能修改主机名呢。其实，Linux主机名分为静态主机名（static hostname）、临时主机名（transient hostname）以及pretty 主机名（理解为：优雅的主机名），下面将详细介绍其区别：（摘自man hostnamectl）</p>
<ol>
<li>The high-level “pretty” hostname which might include all kinds of special characters (e.g. “Lennart’s Laptop”)；–pretty主机名对字符几乎没有限制，可以设置为你喜欢的任意主机名；</li>
<li>The static hostname which is used to initialize the kernel hostname at boot (e.g. “lennarts-laptop”)；–静态主机名用于系统启动时设置内核参数；存储于/etc/hostname中。</li>
<li>The transient hostname which is a default received from network configuration. If a static hostname is set, and is valid (something other than localhost), then the transient hostname is not used.—临时主机名默认从网络配置中获取，如果静态主机名生效，则临时主机名没用。</li>
</ol>
<h3 id="参考文献">参考文献</h3>
<blockquote>
<p><a href="https://blog.csdn.net/zhaogang1993/article/details/82769439/">Linux修改主机名(静态主机名、临时主机名)_transient hostname_那个少年的博客-CSDN博客</a></p>
</blockquote>
]]></content>
      <categories>
        <category>系统</category>
      </categories>
      <tags>
        <tag>系统</tag>
      </tags>
  </entry>
  <entry>
    <title>helm 常用语法</title>
    <url>/2022/04/helm-%E5%B8%B8%E7%94%A8%E8%AF%AD%E6%B3%95/index.html</url>
    <content><![CDATA[<p>values.yaml</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">image:</span></span><br><span class="line">  <span class="attr">repoprefix:</span> <span class="string">harbor.com/library</span></span><br><span class="line">  <span class="attr">repository:</span> <span class="string">nginx</span></span><br><span class="line">  <span class="attr">pullPolicy:</span> <span class="string">IfNotPresent</span></span><br><span class="line">  <span class="attr">tag:</span> <span class="string">&quot;0.1.1&quot;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line">&#123;&#123;<span class="bullet">-</span> <span class="string">$image</span> <span class="string">:=</span> <span class="string">printf</span> <span class="string">&quot;%s/%s:%s&quot;</span> <span class="string">.Values.image.repoprefix</span> <span class="string">.Values.image.repository</span>  <span class="string">.Values.image.tag</span> &#125;&#125;</span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">apps/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Deployment</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="comment">#......</span></span><br><span class="line">  <span class="attr">template:</span></span><br><span class="line">    <span class="comment">#......</span></span><br><span class="line">    <span class="attr">spec:</span></span><br><span class="line">      <span class="attr">containers:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> &#123;&#123; <span class="string">.Chart.Name</span> &#125;&#125;</span><br><span class="line">          <span class="attr">image:</span> &#123;&#123; <span class="string">$image</span> &#125;&#125;</span><br></pre></td></tr></table></figure>
<hr>
<p>templates</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">key:</span> <span class="string">a</span></span><br><span class="line"><span class="attr">data:</span></span><br><span class="line">  <span class="attr">a:</span></span><br><span class="line">    <span class="attr">a:</span> <span class="string">&quot;aaabbb&quot;</span></span><br><span class="line">  <span class="attr">b:</span></span><br><span class="line">    <span class="attr">b:</span> <span class="string">&quot;2&quot;</span></span><br><span class="line">[<span class="string">root@k8s-master</span> <span class="string">aaaaaa</span>]<span class="comment"># cat templates/cm.yaml </span></span><br><span class="line">&#123;&#123;<span class="bullet">-</span> <span class="string">$meta</span> <span class="string">:=</span> <span class="string">.Values.data</span> &#125;&#125;</span><br><span class="line">&#123;&#123; <span class="string">$key</span> <span class="string">:=</span> <span class="string">.Values.key</span> &#125;&#125;</span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">ConfigMap</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">test</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">default</span></span><br><span class="line"><span class="attr">data:</span></span><br><span class="line">  &#123;&#123;<span class="bullet">-</span> <span class="string">range</span> <span class="string">$k</span>, <span class="string">$v</span> <span class="string">:=</span> <span class="string">get</span> <span class="string">$meta</span> <span class="string">$key</span> &#125;&#125;</span><br><span class="line">  &#123;&#123; <span class="string">$k</span> &#125;&#125;<span class="string">:</span> &#123;&#123; <span class="string">$v</span> &#125;&#125;</span><br><span class="line">  &#123;&#123;<span class="bullet">-</span> <span class="string">end</span> &#125;&#125;</span><br><span class="line">[<span class="string">root@k8s-master</span> <span class="string">aaaaaa</span>]<span class="comment"># helm template aa . </span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="comment"># Source: aaaaaa/templates/cm.yaml</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">ConfigMap</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">test</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">default</span></span><br><span class="line"><span class="attr">data:</span></span><br><span class="line">  <span class="attr">a:</span> <span class="string">aaabbb</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>kubernetes</category>
      </categories>
      <tags>
        <tag>helm</tag>
      </tags>
  </entry>
  <entry>
    <title>helm模板 .Files.Get 函数</title>
    <url>/2022/04/helm%E6%A8%A1%E6%9D%BF-Files-Get-%E5%87%BD%E6%95%B0/index.html</url>
    <content><![CDATA[<h2 id="常规用法">常规用法</h2>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">ConfigMap</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">templates</span></span><br><span class="line"><span class="attr">binaryData:</span></span><br><span class="line">  <span class="attr">file1:</span> &#123;&#123; <span class="string">.Files.Get</span> <span class="string">&quot;files/file1&quot;</span> <span class="string">|</span> <span class="string">b64enc</span> &#125;&#125;</span><br><span class="line">  <span class="attr">file2:</span> &#123;&#123; <span class="string">.Files.Get</span> <span class="string">&quot;files/file2&quot;</span> <span class="string">|</span> <span class="string">b64enc</span> &#125;&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 错误示例</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">ConfigMap</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">templates</span></span><br><span class="line"><span class="attr">binaryData:</span></span><br><span class="line">&#123;&#123;<span class="bullet">-</span> <span class="string">range</span> <span class="string">$.Values.templates.files</span> &#125;&#125;</span><br><span class="line">  &#123;&#123; <span class="string">.</span> &#125;&#125;<span class="string">:</span> &#123;&#123; <span class="string">.Files.Get</span> <span class="string">&quot;files/fil1&quot;</span> <span class="string">|</span> <span class="string">b64enc</span> &#125;&#125;</span><br><span class="line">&#123;&#123;<span class="bullet">-</span> <span class="string">end</span> &#125;&#125;</span><br></pre></td></tr></table></figure>
<h2 id="进阶用法">进阶用法</h2>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">ConfigMap</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">templates</span></span><br><span class="line"><span class="attr">binaryData:</span></span><br><span class="line">  <span class="comment"># .Values.files.file1 是文件路径</span></span><br><span class="line">  <span class="attr">file1:</span> &#123;&#123; <span class="string">.Files.Get</span> <span class="string">.Values.files.file1</span> <span class="string">|</span> <span class="string">b64enc</span> &#125;&#125;</span><br></pre></td></tr></table></figure>
<p>在Go text/template语言中，<code>.</code>是一个具有多种含义的特殊变量。值得注意的是，在<code>range</code>循环中，.成为循环中的当前项，<br>
因此<code>.Files</code>引用当前循环项中的<code>Files</code>字段，而不是顶级Helm对象。可以通过将<code>.</code>或<code>.Files</code>保存到循环外部的局部变量中来解决此问题</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">binaryData:</span></span><br><span class="line">&#123;&#123;<span class="bullet">-</span> <span class="string">$files</span> <span class="string">:=</span> <span class="string">.Files</span> &#125;&#125;</span><br><span class="line">&#123;&#123;<span class="bullet">-</span> <span class="string">range</span> <span class="string">$.Values.templates.files</span> &#125;&#125;</span><br><span class="line">  &#123;&#123; <span class="string">.</span> &#125;&#125;<span class="string">:</span> &#123;&#123; <span class="string">$files.Get</span> <span class="string">&quot;files/file&quot;</span> <span class="string">|</span> <span class="string">b64enc</span> &#125;&#125;</span><br><span class="line">&#123;&#123;<span class="bullet">-</span> <span class="string">end</span> &#125;&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>kubernetes</category>
      </categories>
      <tags>
        <tag>helm</tag>
      </tags>
  </entry>
  <entry>
    <title>k8s亲和与容忍</title>
    <url>/2022/12/k8s%E4%BA%B2%E5%92%8C%E4%B8%8E%E5%AE%B9%E5%BF%8D/index.html</url>
    <content><![CDATA[<h4 id="操作符介绍">操作符介绍</h4>
<p>对于 label 的匹配规则，可选的操作符有</p>
<table>
<thead>
<tr>
<th>操作符</th>
<th>规则说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>In</td>
<td>label 的值在某个列表中</td>
</tr>
<tr>
<td>NotIn</td>
<td>label 的值不在某个列表中</td>
</tr>
<tr>
<td>Exists</td>
<td>某个 label 存在</td>
</tr>
<tr>
<td>DoesNotExist</td>
<td>某个 label 不存在</td>
</tr>
<tr>
<td>Gt</td>
<td>label 的值大于某个值（字符串比较）</td>
</tr>
<tr>
<td>Lt</td>
<td>label 的值小于某个值（字符串比较）</td>
</tr>
</tbody>
</table>
<h4 id="节点亲和">节点亲和</h4>
<ul>
<li>软策略</li>
</ul>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">template:</span></span><br><span class="line">    <span class="attr">spec:</span></span><br><span class="line">      <span class="attr">affinity:</span></span><br><span class="line">        <span class="attr">nodeAffinity:</span> <span class="comment">#节点亲和</span></span><br><span class="line">          <span class="attr">preferredDuringSchedulingIgnoredDuringExecution:</span> <span class="comment">#软策略</span></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">preference:</span></span><br><span class="line">                <span class="attr">matchExpressions:</span>  <span class="comment">#匹配条件</span></span><br><span class="line">                  <span class="comment"># 代表倾向于kubernetes.io/hostname=node03的节点（但由于是软策略，不一定就在node03上）</span></span><br><span class="line">                  <span class="bullet">-</span> &#123;<span class="attr">key:</span> <span class="string">kubernetes.io/hostname</span>, <span class="attr">operator:</span> <span class="string">In</span>, <span class="attr">values:</span> [<span class="string">&quot;k8s-master&quot;</span>]&#125;</span><br><span class="line">              <span class="attr">weight:</span> <span class="number">50</span>  <span class="comment">#如果有多个软策略选项的话，权重越大，优先级越高</span></span><br></pre></td></tr></table></figure>
<ul>
<li>硬策略</li>
</ul>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">template:</span></span><br><span class="line">    <span class="attr">spec:</span></span><br><span class="line">      <span class="attr">affinity:</span></span><br><span class="line">        <span class="attr">nodeAffinity:</span> <span class="comment">#节点亲和</span></span><br><span class="line">          <span class="attr">requiredDuringSchedulingIgnoredDuringExecution:</span>    <span class="comment">#硬策略</span></span><br><span class="line">            <span class="attr">nodeSelectorTerms:</span>    <span class="comment">#node节点标签选择</span></span><br><span class="line">              <span class="bullet">-</span> <span class="attr">matchExpressions:</span>    <span class="comment">#匹配规则</span></span><br><span class="line">                  <span class="comment"># 设置Pod安装到kubernetes.io/hostname的标签值不在values列表中的node上</span></span><br><span class="line">                  <span class="bullet">-</span> &#123;<span class="attr">key:</span> <span class="string">kubernetes.io/hostname</span>, <span class="attr">operator:</span> <span class="string">NotIn</span>, <span class="attr">values:</span> [<span class="string">&quot;node02&quot;</span>]&#125;</span><br></pre></td></tr></table></figure>
<h4 id="pod亲和">POD亲和</h4>
<ul>
<li>硬策略</li>
</ul>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">template:</span></span><br><span class="line">    <span class="attr">spec:</span></span><br><span class="line">      <span class="attr">affinity:</span></span><br><span class="line">        <span class="attr">podAffinity:</span>  <span class="comment"># 作用域：Pod和Pod之间</span></span><br><span class="line">          <span class="attr">requiredDuringSchedulingIgnoredDuringExecution:</span>  <span class="comment"># Pod亲和性-硬策略</span></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">labelSelector:</span></span><br><span class="line">                <span class="attr">matchExpressions:</span></span><br><span class="line">                  <span class="bullet">-</span> &#123;<span class="attr">key:</span> <span class="string">app</span>, <span class="attr">operator:</span> <span class="string">In</span>, <span class="attr">values:</span> [<span class="string">&quot;myapp&quot;</span>]&#125;</span><br><span class="line">              <span class="attr">topologyKey:</span> <span class="string">kubernetes.io/hostname</span></span><br></pre></td></tr></table></figure>
<ul>
<li>软策略</li>
</ul>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">template:</span></span><br><span class="line">    <span class="attr">spec:</span></span><br><span class="line">      <span class="attr">affinity:</span>        </span><br><span class="line">        <span class="attr">podAntiAffinity:</span>  <span class="comment"># 作用域：Pod和Pod之间</span></span><br><span class="line">          <span class="attr">preferredDuringSchedulingIgnoredDuringExecution:</span>  <span class="comment"># Pod非亲和性-软策略</span></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">weight:</span> <span class="number">50</span></span><br><span class="line">              <span class="attr">podAffinityTerm:</span></span><br><span class="line">                <span class="attr">labelSelector:</span></span><br><span class="line">                  <span class="attr">matchExpressions:</span></span><br><span class="line">                    <span class="bullet">-</span> &#123;<span class="attr">key:</span> <span class="string">app</span>, <span class="attr">operator:</span> <span class="string">NotIn</span>, <span class="attr">values:</span> [<span class="string">&quot;myapp&quot;</span>]&#125;</span><br><span class="line">                <span class="attr">topologyKey:</span> <span class="string">kubernetes.io/hostname</span></span><br></pre></td></tr></table></figure>
<h4 id="容忍taint">容忍Taint</h4>
<p>设置了污点的Node将根据taint的<code>effect：``NoSchedule</code>、<code>PreferNoSchedule</code>、<code>NoExecute</code>和<code>Pod</code>之间产生互斥的关系，Pod将在一定程度上不会被调度到Node上。 但我们可以在Pod上设置容忍(<code>Toleration</code>)，意思是设置了容忍的Pod将可以容忍污点的存在，可以被调度到存在污点的Node上</p>
<p>Toleration 声明中的 key 和 effect 需要与 Taint 的设置保持一致，并且满足以下条件之一:</p>
<ul>
<li>1.operator 的值为 Exists，这时无需指定 value</li>
<li>2.operator 的值为 Equal ,这时需要指定 value，并且 value 相等</li>
<li>3.如果不指定 operator，则默认值为 Equal</li>
</ul>
<p><strong>另外还有如下两个特例</strong></p>
<ul>
<li>空的 key 配合 Exists 操作符能够匹配所有的键和值，
<ul>
<li>当不指定<code>key</code>值时，表示容忍所有的污点key，如<code>&#123;effect: NoSchedule, operator: Exists&#125;</code></li>
</ul>
</li>
<li>空的 effect 匹配所有的 effect
<ul>
<li>当不指定effect值时，表示容忍所有的污点作用，<code>&#123;key: node-role.kubernetes.io/master, operator: Exists&#125;</code></li>
<li>当key和effect都不指定是，表示容忍所有的污点key和所有的污点作用，<code>&#123;operator: Exists&#125;</code></li>
</ul>
</li>
</ul>
<p><strong>配置示例</strong>：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">template:</span></span><br><span class="line">    <span class="attr">spec:</span></span><br><span class="line">      <span class="attr">tolerations:</span></span><br><span class="line">        <span class="bullet">-</span> &#123;<span class="attr">effect:</span> <span class="string">NoSchedule</span>, <span class="attr">key:</span> <span class="string">node-role.kubernetes.io/master</span>, <span class="attr">operator:</span> <span class="string">Exists</span>&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>kubernetes</category>
      </categories>
      <tags>
        <tag>kubernetes</tag>
      </tags>
  </entry>
  <entry>
    <title>linux reboot 无法重启</title>
    <url>/2022/08/linux-reboot-%E6%97%A0%E6%B3%95%E9%87%8D%E5%90%AF/index.html</url>
    <content><![CDATA[<h4 id="一台测试环境的服务器故障，无法重启，是k8s-的master。">一台测试环境的服务器故障，无法重启，是K8s 的master。</h4>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@k8s-master ~]<span class="comment"># reboot</span></span><br><span class="line">Failed to start reboot.target: Connection timed out</span><br><span class="line">See system logs and <span class="string">&#x27;systemctl status reboot.target&#x27;</span> <span class="keyword">for</span> details.</span><br><span class="line">......</span><br></pre></td></tr></table></figure>
<h4 id="基础命令还能操作，所有`systemctl`相关命令都超时，也无法强制重启，最终以如下方法重启，并修复k8s。">基础命令还能操作，所有<code>systemctl</code>相关命令都超时，也无法强制重启，最终以如下方法重启，并修复k8s。</h4>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">sync</span></span><br><span class="line"><span class="built_in">echo</span> s &gt; /proc/sysrq-trigger</span><br><span class="line"><span class="built_in">echo</span> u &gt; /proc/sysrq-trigger</span><br><span class="line"><span class="built_in">echo</span> s &gt; /proc/sysrq-trigger</span><br><span class="line"><span class="built_in">echo</span> b &gt; /proc/sysrq-trigger</span><br><span class="line"><span class="comment"># 命令解释</span></span><br><span class="line"><span class="comment"># s: 将尝试同步所有已挂载的文件系统</span></span><br><span class="line"><span class="comment"># u: 将当前任务的列表和他们信息输出到终端</span></span><br><span class="line"><span class="comment"># s: 将尝试同步所有已挂载的文件系统</span></span><br><span class="line"><span class="comment"># b: 立即重启机器，而且不会将缓冲区同步到硬盘，也不会卸载已挂载的硬盘</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p><code>/proc/sysrq-trigger</code>是一个特殊的文件路径，用于触发系统的SysRq功能。SysRq是Linux内核提供的一种机制，旨在允许管理员在系统遇到异常情况时进行高级调试和管理操作。</p>
</blockquote>
<h4 id="可以通过命令查看，以上消息都会输出到屏幕。">可以通过命令查看，以上消息都会输出到屏幕。</h4>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">dmesg -w -L -T</span><br></pre></td></tr></table></figure>
<blockquote>
<p>参数解释<br>
-w 实时模式打印内核信息<br>
-L 显示颜色<br>
-T 显示时间</p>
</blockquote>
]]></content>
      <categories>
        <category>系统</category>
      </categories>
      <tags>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title>linux 连接Wifi</title>
    <url>/2022/05/linux-%E8%BF%9E%E6%8E%A5Wifi/index.html</url>
    <content><![CDATA[<h4 id="安装无线设备操作命令">安装无线设备操作命令</h4>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">yum install -y iw</span><br></pre></td></tr></table></figure>
<h4 id="查看-wlp9s0网卡的激活状态">查看 wlp9s0网卡的激活状态</h4>
<blockquote>
<p>尖括号&lt;&gt;内没有‘’UP‘’字样就表示未激活</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@localhost script]<span class="comment"># ip link show wlp3s0</span></span><br><span class="line">4: wlp3s0: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu 1500 qdisc mq state DOWN mode DEFAULT group default qlen 1000</span><br><span class="line"> <span class="built_in">link</span>/ether 00:22:fb:16:bd:ee brd ff:ff:ff:ff:ff:ff</span><br></pre></td></tr></table></figure>
</blockquote>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">ip <span class="built_in">link</span> show wlp3s0</span><br></pre></td></tr></table></figure>
<h4 id="激活-wlp3s0网卡">激活 wlp3s0网卡</h4>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">ip <span class="built_in">link</span> <span class="built_in">set</span> wlp3s0 up</span><br></pre></td></tr></table></figure>
<blockquote>
<p>停用 <code>wlp3s0 </code>网卡</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">ip <span class="built_in">link</span> <span class="built_in">set</span> wlp3s0 down</span><br></pre></td></tr></table></figure>
</blockquote>
<h4 id="搜索附近可用的无线网络">搜索附近可用的无线网络</h4>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">iw wlp3s0 scan | grep SSID</span><br></pre></td></tr></table></figure>
<h4 id="如果存在可用的无线网络，红色的`ssid`之后便是wifi名称">如果存在可用的无线网络，红色的<code>SSID</code>之后便是wifi名称</h4>
<blockquote>
<p>例如：<code>SSID: MERCURY_5G_271E</code></p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">wpa_supplicant -B -i wlp3s0 -c&lt;(wpa_passphrase &quot;MERCURY_5G_271E&quot; &quot;无线密码&quot;)</span><br></pre></td></tr></table></figure>
<h4 id="为此网卡分配ip地址">为此网卡分配ip地址</h4>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">dhclient wlp3s0</span><br></pre></td></tr></table></figure>
<h4 id="少等片刻即可继续，可以看到获取到了ip">少等片刻即可继续，可以看到获取到了ip</h4>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">wlp3s0: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500</span><br><span class="line">        inet 192.168.0.104  netmask 255.255.255.0  broadcast 192.168.0.255</span><br><span class="line">        inet6 fe80::222:fbff:fe16:bdee  prefixlen 64  scopeid 0x20&lt;<span class="built_in">link</span>&gt;</span><br><span class="line">        ether 00:22:fb:16:bd:ee  txqueuelen 1000  (Ethernet)</span><br><span class="line">        RX packets 105  bytes 14315 (13.9 KiB)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 54  bytes 12029 (11.7 KiB)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Wifi</category>
      </categories>
      <tags>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux安装docker</title>
    <url>/2022/11/linux%E5%AE%89%E8%A3%85docker/index.html</url>
    <content><![CDATA[<h2 id="安装-docker">安装 docker</h2>
<h3 id="安装要求的软件包">安装要求的软件包</h3>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">yum install yum-utils device-mapper-persistent-data lvm2 -y</span><br></pre></td></tr></table></figure>
<h3 id="添加docker仓库">添加Docker仓库</h3>
<blockquote>
<p>官方源</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo</span><br></pre></td></tr></table></figure>
<p>国内源</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">yum-config-manager --add-repo http://mirrors.163.com/.help/CentOS7-Base-163.repo</span><br><span class="line">yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="安装docker">安装docker</h3>
<ul>
<li>查询docker版本</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">yum list docker-ce --showduplicates</span><br></pre></td></tr></table></figure>
<ul>
<li>安装指定版本</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">yum -y install docker-ce-20.10.10 docker-ce-cli-20.10.10</span><br></pre></td></tr></table></figure>
<ul>
<li>创建daemon.json配置文件，注意，这里这指定了cgroupdriver=systemd，另外由于国内拉取镜像较慢，最后追加了华为云镜像加速配置（阿里云的镜像加速感觉是假的）。</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">mkdir /etc/docker</span><br><span class="line">cat &lt;&lt; EOF &gt; /etc/docker/daemon.json </span><br><span class="line">&#123;</span><br><span class="line">    &quot;exec-opts&quot;: [</span><br><span class="line">        &quot;native.cgroupdriver=systemd&quot;</span><br><span class="line">    ],</span><br><span class="line">    &quot;log-driver&quot;: &quot;json-file&quot;,</span><br><span class="line">    &quot;log-opts&quot;: &#123;</span><br><span class="line">        &quot;max-size&quot;: &quot;100m&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;storage-driver&quot;: &quot;overlay2&quot;,</span><br><span class="line">    &quot;storage-opts&quot;: [</span><br><span class="line">        &quot;overlay2.override_kernel_check=true&quot;</span><br><span class="line">    ],</span><br><span class="line">    &quot;registry-mirrors&quot;: [</span><br><span class="line">        &quot;https://0bdb6151bd80f5e50fc8c013fdff71e0.mirror.swr.myhuaweicloud.com&quot;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>
<h3 id="启动docker服务">启动docker服务</h3>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl enable --now docker</span><br></pre></td></tr></table></figure>
<h3 id="最近的一些版本">最近的一些版本</h3>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">docker-ce.x86_64            3:23.0.1-1.el7                     docker-ce-stable </span><br><span class="line">docker-ce.x86_64            3:23.0.0-1.el7                     docker-ce-stable </span><br><span class="line">docker-ce.x86_64            3:20.10.9-3.el7                    docker-ce-stable </span><br><span class="line">docker-ce.x86_64            3:20.10.9-3.el7                    @docker-ce-stable</span><br><span class="line">docker-ce.x86_64            3:20.10.8-3.el7                    docker-ce-stable </span><br><span class="line">docker-ce.x86_64            3:20.10.7-3.el7                    docker-ce-stable </span><br><span class="line">docker-ce.x86_64            3:20.10.6-3.el7                    docker-ce-stable </span><br><span class="line">docker-ce.x86_64            3:20.10.5-3.el7                    docker-ce-stable </span><br><span class="line">docker-ce.x86_64            3:20.10.4-3.el7                    docker-ce-stable </span><br><span class="line">docker-ce.x86_64            3:20.10.3-3.el7                    docker-ce-stable </span><br><span class="line">docker-ce.x86_64            3:20.10.2-3.el7                    docker-ce-stable </span><br><span class="line">docker-ce.x86_64            3:20.10.23-3.el7                   docker-ce-stable </span><br><span class="line">docker-ce.x86_64            3:20.10.22-3.el7                   docker-ce-stable </span><br><span class="line">docker-ce.x86_64            3:20.10.21-3.el7                   docker-ce-stable </span><br><span class="line">docker-ce.x86_64            3:20.10.20-3.el7                   docker-ce-stable </span><br><span class="line">docker-ce.x86_64            3:20.10.19-3.el7                   docker-ce-stable </span><br><span class="line">docker-ce.x86_64            3:20.10.18-3.el7                   docker-ce-stable </span><br><span class="line">docker-ce.x86_64            3:20.10.17-3.el7                   docker-ce-stable </span><br><span class="line">docker-ce.x86_64            3:20.10.16-3.el7                   docker-ce-stable </span><br><span class="line">docker-ce.x86_64            3:20.10.15-3.el7                   docker-ce-stable </span><br><span class="line">docker-ce.x86_64            3:20.10.14-3.el7                   docker-ce-stable </span><br><span class="line">docker-ce.x86_64            3:20.10.1-3.el7                    docker-ce-stable </span><br><span class="line">docker-ce.x86_64            3:20.10.13-3.el7                   docker-ce-stable </span><br><span class="line">docker-ce.x86_64            3:20.10.12-3.el7                   docker-ce-stable </span><br><span class="line">docker-ce.x86_64            3:20.10.11-3.el7                   docker-ce-stable </span><br><span class="line">docker-ce.x86_64            3:20.10.10-3.el7                   docker-ce-stable </span><br><span class="line">docker-ce.x86_64            3:20.10.0-3.el7                    docker-ce-stable </span><br><span class="line">docker-ce.x86_64            3:19.03.9-3.el7                    docker-ce-stable </span><br><span class="line">docker-ce.x86_64            3:19.03.8-3.el7                    docker-ce-stable </span><br><span class="line">docker-ce.x86_64            3:19.03.7-3.el7                    docker-ce-stable </span><br><span class="line">docker-ce.x86_64            3:19.03.6-3.el7                    docker-ce-stable </span><br><span class="line">docker-ce.x86_64            3:19.03.5-3.el7                    docker-ce-stable </span><br><span class="line">docker-ce.x86_64            3:19.03.4-3.el7                    docker-ce-stable </span><br><span class="line">docker-ce.x86_64            3:19.03.3-3.el7                    docker-ce-stable </span><br><span class="line">docker-ce.x86_64            3:19.03.2-3.el7                    docker-ce-stable </span><br><span class="line">docker-ce.x86_64            3:19.03.15-3.el7                   docker-ce-stable </span><br><span class="line">docker-ce.x86_64            3:19.03.14-3.el7                   docker-ce-stable </span><br><span class="line">docker-ce.x86_64            3:19.03.1-3.el7                    docker-ce-stable </span><br><span class="line">docker-ce.x86_64            3:19.03.13-3.el7                   docker-ce-stable </span><br><span class="line">docker-ce.x86_64            3:19.03.12-3.el7                   docker-ce-stable </span><br><span class="line">docker-ce.x86_64            3:19.03.11-3.el7                   docker-ce-stable </span><br><span class="line">docker-ce.x86_64            3:19.03.10-3.el7                   docker-ce-stable </span><br><span class="line">docker-ce.x86_64            3:19.03.0-3.el7                    docker-ce-stable </span><br><span class="line">docker-ce.x86_64            3:18.09.9-3.el7                    docker-ce-stable </span><br><span class="line">docker-ce.x86_64            3:18.09.8-3.el7                    docker-ce-stable </span><br><span class="line">docker-ce.x86_64            3:18.09.7-3.el7                    docker-ce-stable </span><br><span class="line">docker-ce.x86_64            3:18.09.6-3.el7                    docker-ce-stable </span><br><span class="line">docker-ce.x86_64            3:18.09.5-3.el7                    docker-ce-stable </span><br><span class="line">docker-ce.x86_64            3:18.09.4-3.el7                    docker-ce-stable </span><br><span class="line">docker-ce.x86_64            3:18.09.3-3.el7                    docker-ce-stable </span><br><span class="line">docker-ce.x86_64            3:18.09.2-3.el7                    docker-ce-stable </span><br><span class="line">docker-ce.x86_64            3:18.09.1-3.el7                    docker-ce-stable </span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>服务</category>
        <category>Docker</category>
      </categories>
      <tags>
        <tag>Docker</tag>
      </tags>
  </entry>
  <entry>
    <title>helm 命名模板</title>
    <url>/2022/04/helm-%E5%91%BD%E5%90%8D%E6%A8%A1%E6%9D%BF/index.html</url>
    <content><![CDATA[<p>templates 目录下⾯除了 <code>NOTES.txt</code> 文件和以下划线 <code>_</code> 开头命令的文件之外，都会被当做 kubernetes 的资源清单文件，而这个下划线开头的文件不会被当做资源清单外，还可以被其他chart 模板中调用</p>
<p>命名模板我们也可以称为子模板，是限定在⼀个文件内部的模板，然后给⼀个名称，在使用命名模板的时候有⼀个需要特别注意的是：模板名称是全局的，如果我们声明了两个相同名称的模板，最后加载的⼀个模板会覆盖掉另外的模板，由于子chart中的模板也是和顶层的模板⼀起编译的，所以在命名的时候⼀定要注意，不能重名了。为了避免重名，有个通用的约定就是为每个定义的模板添加上 chart 名称： <code>&#123;&#123;define”mychart.labels”&#125;&#125;</code> ， <code>define</code> 关键字就是用来声明命名模板的，加上 chart 名称就可以避免不同chart 间的模板出现冲突的情况。</p>
<p>values.yaml</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">image:</span></span><br><span class="line">  <span class="attr">repoprefix:</span> <span class="string">harbor.com/library</span></span><br><span class="line">  <span class="attr">repository:</span> <span class="string">nginx</span></span><br><span class="line">  <span class="attr">pullPolicy:</span> <span class="string">IfNotPresent</span></span><br><span class="line">  <span class="attr">tag:</span> <span class="string">&quot;0.1.1&quot;</span></span><br></pre></td></tr></table></figure>
<p>templates/_helpers.tpl</p>
<p>⽤ <code>/**/</code> 包裹起来，用来描述命名模板的用途</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line">&#123;&#123;<span class="string">/*</span> <span class="string">镜像版本</span> <span class="string">*/</span>&#125;&#125;</span><br><span class="line">&#123;&#123;<span class="bullet">-</span> <span class="string">define</span> <span class="string">&quot;myImage&quot;</span> <span class="string">-</span>&#125;&#125;</span><br><span class="line">&#123;&#123;<span class="bullet">-</span> <span class="string">printf</span> <span class="string">&quot;%s/%s:%s&quot;</span> <span class="string">.Values.image.repoprefix</span> <span class="string">.Values.image.repository</span>  <span class="string">.Values.image.tag</span> &#125;&#125;</span><br><span class="line">&#123;&#123;<span class="bullet">-</span> <span class="string">end</span> <span class="string">-</span>&#125;&#125;</span><br></pre></td></tr></table></figure>
<p>templates/deployment.yaml</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">apps/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Deployment</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="comment">#......</span></span><br><span class="line">  <span class="attr">template:</span></span><br><span class="line">    <span class="comment">#......</span></span><br><span class="line">    <span class="attr">spec:</span></span><br><span class="line">      <span class="attr">containers:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> &#123;&#123; <span class="string">.Chart.Name</span> &#125;&#125;</span><br><span class="line">          <span class="attr">image:</span> &#123;&#123; <span class="string">template</span> <span class="string">&quot;myImage&quot;</span> <span class="string">.</span> &#125;&#125;</span><br></pre></td></tr></table></figure>
<p>最终效果</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="comment"># Source: aaaaaa/templates/deployment.yaml</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">apps/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Deployment</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="comment">#......</span></span><br><span class="line">  <span class="attr">template:</span></span><br><span class="line">    <span class="comment">#......</span></span><br><span class="line">    <span class="attr">spec:</span></span><br><span class="line">      <span class="attr">containers:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">aaaaaa</span></span><br><span class="line">          <span class="attr">image:</span> <span class="string">harbor.com/library/nginx:0.1.1</span></span><br></pre></td></tr></table></figure>
<p><img src="data:image/jpeg;base64,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" alt="alt"></p>
]]></content>
      <categories>
        <category>kubernetes</category>
      </categories>
      <tags>
        <tag>helm</tag>
      </tags>
  </entry>
  <entry>
    <title>ssh 代理-缓存ssh私钥</title>
    <url>/2022/11/ssh-%E4%BB%A3%E7%90%86-%E7%BC%93%E5%AD%98ssh%E7%A7%81%E9%92%A5/index.html</url>
    <content><![CDATA[<h2 id="ssh-代理-缓存ssh私钥">ssh 代理-缓存ssh私钥</h2>
<h4 id="ssh-代理介绍">ssh 代理介绍</h4>
<p>当把私钥交给 ssh agent 管理的好处</p>
<p>当 其他程序 需要身份验证的时候 可以将验证申请交给 ssh-agent 来完成整个认证过程。使用不同的密钥连接到不同的主机时，需要要手动指定对应的密钥，而ssh代理可以自动帮助我们选择对应的密钥进行认证。</p>
<p>避免重复输入密码：如果您的私钥使用密码短语来加密了的话，每一次使用 SSH 密钥对进行登录的时候，您都必须输入正确的密码短语。而 SSH agent 程序能够将您的已解密的私钥缓存起来，在需要的时候提供给您的 SSH 客户端。这样子，您就只需要在使用 ssh-add 时将私钥加入 SSH agent 缓存的时候，输入一次密码短语就可以了。这为经常使用 SSH 连接用户提供了不少便利。</p>
<p><code>sh-agent</code> 命令：是客户端ssh的默认代理</p>
<p><code>ssh-agent $SHELL</code> ：它会在当前 shell 中启动一个默认 shell，作为当前 shell 的子 shell，ssh-agent 会在子shell中运行；也可以明确指定 $SHELL ，比如 ssh-agent bash ， ssh-agent 会随者当前 ssh 会话的结束而结束，这是一种安全机制。</p>
<p>但是测试发现，如果连接突然中断，ssh-agent会被1号进程接管</p>
<p>运行 ssh agent 以后，会加载默认的私钥</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ssh-agent $SHELL</span><br></pre></td></tr></table></figure>
<p>如果有多个密钥，则需要在 ~/.ssh/config 中进行配置：</p>
<ul>
<li>一般来说 ssh agent 程序可以根据配置自动加载并管理这些密钥；但如果发现某个密钥没有加载则</li>
<li>也可以手动使用 ssh-add 命令将某个私钥交给 ssh-agent 保管，<br>
运行 ssh-add 时， 如果提示 “Could not open a connection to your authentication agent.” 说明你的ssh-agent并没有运行；使用下面的命令运行ssh agent，再使用ssh-add命令添加你的ssh key。</li>
</ul>
<h4 id="配置ssh-agent">配置ssh-agent</h4>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">启动agent代理</span></span><br><span class="line">ssh-agent $SHELL</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">加载</span></span><br><span class="line">ssh-add .ssh/id_rsa</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看</span></span><br><span class="line">ssh-add -l</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">删除</span></span><br><span class="line">ssh-add -d</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>系统</category>
      </categories>
      <tags>
        <tag>ssh</tag>
      </tags>
  </entry>
  <entry>
    <title>yum history 命令示例： 显示、回滚、重做、撤消 yum 事务</title>
    <url>/2022/09/yum-history-%E5%91%BD%E4%BB%A4%E7%A4%BA%E4%BE%8B%EF%BC%9A-%E6%98%BE%E7%A4%BA%E3%80%81%E5%9B%9E%E6%BB%9A%E3%80%81%E9%87%8D%E5%81%9A%E3%80%81%E6%92%A4%E6%B6%88-yum-%E4%BA%8B%E5%8A%A1/index.html</url>
    <content><![CDATA[<h2 id="yum-history 命令示例： 显示、回滚、重做、撤消 yum 事务">yum history 命令示例： 显示、回滚、重做、撤消 yum 事务</h2>
<p>yum 的<code>yum history</code>功能是 Linux 中一个经常被忽视但非常强大的实用程序。<br>
它可用于将 <code>yum</code> 事务回滚/重做/撤消到一切正常的状态。</p>
<h2 id="yum-history">yum history</h2>
<p><code>yum history list</code>命令在不带任何参数的情况下运行时会产生类似于下图所示的输出。<br>
<code>yum history</code>或者<code>yum history list</code>默认显示最近 20 个 yum 交易。</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">yum <span class="built_in">history</span> list</span><br></pre></td></tr></table></figure>
<p>其中：<br>
ID ：唯一标识一个 yum 事务。</p>
<p>命令行 ：日期和时间：交易的日期和时间。</p>
<p>Action(s) ：在事务中执行的操作，如安装、更新等。<br>
详细列表如下。</p>
<table>
<thead>
<tr>
<th>Action</th>
<th>Abbreviation</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Downgrade</td>
<td>D</td>
<td>At least one package has been downgraded to an older version.</td>
</tr>
<tr>
<td>Erase</td>
<td>E</td>
<td>At least one package has been removed.</td>
</tr>
<tr>
<td>Install</td>
<td>I</td>
<td>At least one new package has been installed.</td>
</tr>
<tr>
<td>Obsoleting</td>
<td>O</td>
<td>At least one package has been marked as obsolete.</td>
</tr>
<tr>
<td>Reinstall</td>
<td>R</td>
<td>At least one package has been reinstalled.</td>
</tr>
<tr>
<td>Update</td>
<td>U</td>
<td>At least one package has been updated to a newer version.</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>Action</th>
<th>缩写</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>Downgrade</td>
<td>D</td>
<td>至少有一个软件包已降级到旧版本。</td>
</tr>
<tr>
<td>Erase</td>
<td>E</td>
<td>至少删除了一个包。</td>
</tr>
<tr>
<td>Install</td>
<td>I</td>
<td>至少安装了一个新软件包。</td>
</tr>
<tr>
<td>Obsoleting</td>
<td>O</td>
<td>至少有一个包被标记为过时。</td>
</tr>
<tr>
<td>Reinstall</td>
<td>R</td>
<td>至少已重新安装了一个软件包。</td>
</tr>
<tr>
<td>Update</td>
<td>U</td>
<td>至少有一个软件包已更新到较新的版本。</td>
</tr>
</tbody>
</table>
<p>Altered : 受事务影响的包数和添加信息，例如 rpmdb 数据库是否在事务之后更改等。<br>
详细列表如下。</p>
<table>
<thead>
<tr>
<th>Symbol</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>&lt;</td>
<td>在事务完成之前，rpmdb 数据库在 Yum 之外发生了变化。</td>
</tr>
<tr>
<td>&gt;</td>
<td>交易完成后，rpmdb 数据库在 Yum 之外发生了变化。</td>
</tr>
<tr>
<td>*</td>
<td>交易未能完成。</td>
</tr>
<tr>
<td>#</td>
<td>交易成功完成，但 yum 返回了非零退出代码。</td>
</tr>
<tr>
<td>E</td>
<td>事务成功完成，但显示错误或者警告。</td>
</tr>
<tr>
<td>P</td>
<td>事务成功完成，但 rpmdb 数据库中已经存在问题。</td>
</tr>
<tr>
<td>s</td>
<td>事务成功完成，但使用了 -skip-broken 命令行选项并跳过了某些包。</td>
</tr>
</tbody>
</table>
<p>要显示所有交易，请使用 all 选项。</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">yum <span class="built_in">history</span> list all</span><br></pre></td></tr></table></figure>
<h2 id="有关特定交易的信息">有关特定交易的信息</h2>
<p>如果我们知道 yum 事务的事务 ID，则可以使用以下命令获得详细视图。</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">yum <span class="built_in">history</span> info 1</span><br></pre></td></tr></table></figure>
<p>我们还可以在 yum history 命令中使用包名称。</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">yum <span class="built_in">history</span> info vsftpd</span><br></pre></td></tr></table></figure>
<p>上面的命令将显示所有事务，如安装、更新、删除 vsftpd 包。</p>
<p>我们还可以使用摘要选项获取特定软件包的交易历史摘要。</p>
<h2 id="回滚或者重做-yum 事务">回滚或者重做 yum 事务</h2>
<p>我们可以使用以下语法命令撤消特定的 yum 事务：</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">yum <span class="built_in">history</span> rollback [transaction_ID]</span><br></pre></td></tr></table></figure>
<p>同样，我们也可以重做 yum 事务。</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">yum <span class="built_in">history</span> redo [transaction ID]</span><br></pre></td></tr></table></figure>
<p>我们将使用下图所示的命令重做移除的 sysstat 包移除。</p>
<p>在我们指定事务之前，重做子命令还可以采用一些可选参数：<br>
<code>force-reinstall</code> - 重新安装在该事务中安装的所有软件包（通过 <code>yum install、upgrade</code> 或者 <code>downgrade</code>）。</p>
<p><code>force-remove</code> - 删除所有更新或者降级的包。</p>
<h2 id="将-yum 事务回滚到某个点">将 yum 事务回滚到某个点</h2>
<p>使用 <code>yum history</code> 命令，我们可以回滚所有事务，直到特定事务 ID。<br>
例如，如果我们指定事务 ID 为 16，则将回滚从最新到事务 ID 16 的所有事务。<br>
例如 ：</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">yum <span class="built_in">history</span> rollback 16</span><br></pre></td></tr></table></figure>
<blockquote>
<p><a href="https://www.onitroad.com/jc/linux/other/yum-history-command-examples.html">“yum history”命令示例： 显示、回滚、重做、撤消 yum 事务-之路教程 (onitroad.com)</a></p>
</blockquote>
]]></content>
      <categories>
        <category>yum</category>
      </categories>
      <tags>
        <tag>yum</tag>
      </tags>
  </entry>
  <entry>
    <title>为Helm生成针对于bash shell的自动补全脚本，helm命令补全</title>
    <url>/2022/04/%E4%B8%BAHelm%E7%94%9F%E6%88%90%E9%92%88%E5%AF%B9%E4%BA%8Ebash-shell%E7%9A%84%E8%87%AA%E5%8A%A8%E8%A1%A5%E5%85%A8%E8%84%9A%E6%9C%AC%EF%BC%8Chelm%E5%91%BD%E4%BB%A4%E8%A1%A5%E5%85%A8/index.html</url>
    <content><![CDATA[<ul>
<li>在当前shell会话中加载自动补全</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">source</span> &lt;(helm completion bash)</span><br></pre></td></tr></table></figure>
<ul>
<li>为每个新的会话加载自动补全，执行一次</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">helm completion bash &gt; /etc/bash_completion.d/helm</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>kubernetes</category>
      </categories>
      <tags>
        <tag>helm</tag>
      </tags>
  </entry>
  <entry>
    <title>logrotate日志管理</title>
    <url>/2022/10/logrotate%E6%97%A5%E5%BF%97%E7%AE%A1%E7%90%86/index.html</url>
    <content><![CDATA[<h1 id="logrotate日志管理">logrotate日志管理</h1>
<h4 id="配置文件">配置文件</h4>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">-rw-r--r--. 1 root root 662 2013-07-31 19:46:23 /etc/logrotate.conf</span><br></pre></td></tr></table></figure>
<p>该配文件记录着日志的轮替规则，对全局 rsyslog 所管理的服务生效，也是默认的规则</p>
<ul>
<li><code>weekly</code> 指定所有的日志文件每周转储一次。</li>
<li><code>rotate 4</code> 指定转储文件的保留4份。</li>
<li><code>errors root</code> 指定错误信息发送给root。</li>
<li><code>create</code> 指定logrotate 自动建立新的日志文件，新的日志文件具有和原来的文件一样的权限。</li>
<li><code>dateext</code> 切换后的日志文件会附加上一个短横线和<code>YYYYMMDD</code>格式的日期，没有这个配置项会附加一个小数点加一个数字序号</li>
<li><code>#compress</code> 指定不压缩转储文件，如果需要压缩，去掉注释就可以了。</li>
<li><code>#notifempty</code>  这个新加的，当日志文件为空时，不进行轮转，属于调优范畴，需要时打开注释。</li>
</ul>
<h4 id="定时脚本">定时脚本</h4>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">-rwx------. 1 root root 219 2017-08-02 09:12:36 /etc/cron.daily/logrotate</span><br></pre></td></tr></table></figure>
<p>该脚本每天都会运行，检查是否有符合轮替的日志，然后进行轮替，也是系统能够进行轮替的原因。</p>
<h4 id="管理的对象">管理的对象</h4>
<ul>
<li>主要是 rsyslog 服务所管理产生的日志</li>
<li>也包含一部分通过 rpm 安装的服务（httpd、vsftpd…）/etc/logrotate.d/*</li>
</ul>
<h4 id="操作命令">操作命令</h4>
<ul>
<li>强制轮替日志</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">logrotate -vf /etc/logrotate.conf</span><br><span class="line">    -v 	    显示过程</span><br><span class="line">    -f      强制</span><br><span class="line">    -d      调试模式，不会真的轮替日志文件，只是打印信息</span><br></pre></td></tr></table></figure>
<h4 id="参数解释">参数解释</h4>
<table>
<thead>
<tr>
<th>参数</th>
<th>解释</th>
</tr>
</thead>
<tbody>
<tr>
<td>daily</td>
<td>每天轮替</td>
</tr>
<tr>
<td>weekly</td>
<td>每周轮替</td>
</tr>
<tr>
<td>monthly</td>
<td>每月轮替</td>
</tr>
<tr>
<td>size</td>
<td>大于该指定大小时轮替，而不按时间轮替，如 size 100k， bytes (缺省)以及KB (sizek)或者MB (sizem)，日志大小达到这个值触发，和时间、周期没有关系。</td>
</tr>
<tr>
<td>minsize</td>
<td>日志轮替最小值。时间周期到了，日志大小达到这个值；两个条件都要满足才触发。</td>
</tr>
<tr>
<td>maxsize</td>
<td>如果按小时触发，则满足maxsize大小时会轮替，此时忽略(daily, weekly, monthly, or yearly) 等参数。（M K）。时间周期到了，日志大小大于这个值；两个条件任何一个满足则触发。</td>
</tr>
<tr>
<td>missingok</td>
<td>如果日志不存在，不报错继续滚动下一个日志</td>
</tr>
<tr>
<td>maxage</td>
<td>保存日志个数，以天数为单位，如果我们是以按天来轮转日志，那么rotate和maxage的差别就不大了</td>
</tr>
<tr>
<td>rotate</td>
<td>指定日志文件删除之前转储的个数，0 指没有备份，5 指保留5个备份，以个数为单位</td>
</tr>
<tr>
<td>compress</td>
<td>通过gzip 压缩转储以后的日志</td>
</tr>
<tr>
<td>delaycompress</td>
<td>和 compress 一起使用时，转储的日志文件到下一次转储时才压缩</td>
</tr>
<tr>
<td>dateext</td>
<td>使用当期日期作为命名格式</td>
</tr>
<tr>
<td>dateformat</td>
<td>配合dateext使用，紧跟在下一行出现，定义文件切割后的文件名，必须配合dateext使用，只支持 %Y %m %d %s 这四个参数（dateformat -%Y%m%d-%s）</td>
</tr>
<tr>
<td>notifempty</td>
<td>当日志文件为空时，不进行轮转</td>
</tr>
<tr>
<td>create</td>
<td>指定创建新文件的属性，如 create 0777 nobody nobody</td>
</tr>
<tr>
<td>sharedscripts</td>
<td>运行postrotate脚本，作用是在所有日志都轮转后统一执行一次脚本。如果没有配置这个，那么每个日志轮转后都会执行一次脚本</td>
</tr>
<tr>
<td>prstrotade/endscript</td>
<td>postrotate/endscript  在logrotate转储之后需要执行的指令，例如重新启动 (kill -HUP) 某个服务！必须独立成行</td>
</tr>
<tr>
<td>prerote/endscript</td>
<td>在日志轮替之前的脚本命令，标识脚本结束</td>
</tr>
</tbody>
</table>
<blockquote>
<ul>
<li>CentOS 系统默认的<code>syslog</code>，不会自动压缩和删除，需要的话要自己添加。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cat /etc/logrotate.d/syslog </span><br><span class="line">/var/log/cron</span><br><span class="line">/var/log/maillog</span><br><span class="line">/var/log/messages</span><br><span class="line">/var/log/secure</span><br><span class="line">/var/log/spooler</span><br><span class="line">&#123;</span><br><span class="line">    missingok</span><br><span class="line">    sharedscripts</span><br><span class="line">    postrotate</span><br><span class="line">	/bin/kill -HUP `cat /var/run/syslogd.pid 2&gt; /dev/null` 2&gt; /dev/null || true</span><br><span class="line">    endscript</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>可以修改为如下新式，添加了 <code>rotate 52</code> <code>compress</code> <code>delaycompress</code></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">/var/log/cron</span><br><span class="line">/var/log/maillog</span><br><span class="line">/var/log/messages</span><br><span class="line">/var/log/secure</span><br><span class="line">/var/log/spooler</span><br><span class="line">&#123;</span><br><span class="line">    missingok</span><br><span class="line">    rotate 52</span><br><span class="line">    compress</span><br><span class="line">    delaycompress</span><br><span class="line">    sharedscripts</span><br><span class="line">    postrotate</span><br><span class="line">        /bin/kill -HUP `cat /var/run/syslogd.pid 2&gt; /dev/null` 2&gt; /dev/null || true</span><br><span class="line">    endscript</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<h4 id="附：nginx的配置规则">附：Nginx的配置规则</h4>
<blockquote>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line"># /etc/logrotate.d/nginx</span><br><span class="line">/usr/local/nginx/logs/access.log</span><br><span class="line">/usr/local/nginx/logs/error.log</span><br><span class="line">&#123;</span><br><span class="line"> daily</span><br><span class="line"> minsize 10M</span><br><span class="line"> maxsize 1G</span><br><span class="line"> missingok</span><br><span class="line"> rotate 14</span><br><span class="line"> compress</span><br><span class="line"> delaycompress</span><br><span class="line"> dateext</span><br><span class="line"> dateformat -%Y%m%d-%s</span><br><span class="line"> notifempty</span><br><span class="line"> create 0640 nginx nginx</span><br><span class="line"> sharedscripts</span><br><span class="line"> postrotate</span><br><span class="line">     if [ -f /usr/local/nginx/run/nginx.pid ]; then</span><br><span class="line">         /usr/bin/kill -SIGUSR1 `cat /usr/local/nginx/run/nginx.pid 2&gt;/dev/null` 2&gt;/dev/null || true</span><br><span class="line">     fi</span><br><span class="line"> endscript</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<h4 id="特殊说明">特殊说明</h4>
<p>参考文档：<a href="https://access.redhat.com/solutions/39006">https://access.redhat.com/solutions/39006</a></p>
<p>查看系统规则库，可以看到Nginx的日志目录应具有 <code>system_u:object_r:httpd_log_t:s0</code>  上下文，如下：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># semanage fcontext -l |grep nginx</span><br><span class="line">/var/log/nginx(/.*)?          all files          system_u:object_r:httpd_log_t:s0</span><br></pre></td></tr></table></figure>
<p>我们可以直接将标签加到<code>selinux</code>的安全策略库中，这个定义将存储在<code>/etc/selinux/targeted/contexts/files/file_contexts.local</code>。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># semanage fcontext -a -t httpd_log_t &#x27;/usr/local/nginx/logs(/.*)?&#x27;</span><br></pre></td></tr></table></figure>
<p>根据新定义，运行以下命令递归设置logs上下文，该命令要求启用selinux才能使用</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># restorecon -Frvv /usr/local/nginx/logs</span><br></pre></td></tr></table></figure>
<p>If SELinux is not in the Enforcing mode, this solution does not apply. Please, refer to <a href="https://access.redhat.com/site/solutions/32831">this article</a> in order to get more information on logrotate troubleshooting.</p>
<p>或者手动设置<code>/usr/local/nginx/logs</code>目录的上下文：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># chcon -R -t httpd_log_t  /usr/local/nginx/logs</span><br></pre></td></tr></table></figure>
<h4 id="diagnostic-steps">Diagnostic Steps</h4>
<ul>
<li>
<p>Check if <code>/etc/logrotate.conf</code> or the <code>/etc/logrotate.d</code> directory has custom scripts that require logrotate to rotate files from directories outside of <code>/var/log</code>.</p>
</li>
<li>
<p>Check the SELinux context on those custom directories. They should have the “<code>var_log_t</code>” type on those files.</p>
</li>
<li>
<p>The message <code>logrotate: ALERT exited abnormally with [1]</code> comes from the <code>/etc/cron.daily/logrotate</code> script:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/sh</span></span><br><span class="line"></span><br><span class="line">/usr/sbin/logrotate /etc/logrotate.conf &gt;/dev/null 2&gt;&amp;1</span><br><span class="line">EXITVALUE=$?</span><br><span class="line">if [ $EXITVALUE != 0 ]; then</span><br><span class="line">    /usr/bin/logger -t logrotate &quot;ALERT exited abnormally with [$EXITVALUE]&quot;</span><br><span class="line">fi</span><br><span class="line">exit 0</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="selinux相关命令">selinux相关命令</h3>
<ul>
<li>
<p>设置文件selinux上下文</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">chcon [-R] [-t type] [-u user] [-r role] 文件</span><br><span class="line">    选项与参数：</span><br><span class="line">    -R ：连同该目录下的次目录也同时修改;</span><br><span class="line">    -t ：后面接安全性本文的类型字段，例如 var_log_t;</span><br><span class="line">    -u ：后面接身份识别，例如 system_u;</span><br><span class="line">    -r ：后面接角色，例如 system_r;</span><br><span class="line">如： chcon -R -t httpd_sys_content_t /www/  修改 Apache 的网页目录的安全类型</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="日志切割">日志切割</h1>
<ul>
<li>
<p>当日志文件产生后，发现日志文件过大(事后)，通过脚本来进行对日志文件的切割</p>
</li>
<li>
<p>split -[bl] 文件名</p>
</li>
<li>
<p>按行数切割</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">split -l 100 install.log -d -a 3 ins_log</span><br><span class="line">    -d       声明切割后的文件的前缀</span><br><span class="line">    -a 3     以数字作为后缀，以 3 位长度的数作为后缀（000）</span><br><span class="line">    -l 100   设置 100 行切割一个</span><br><span class="line">    ins_log  人为指定切割后文件的前缀</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>按大小切割</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">split -b 1M install.log -d -a 3 ins_log</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="系统日志">系统日志</h2>
<table>
<thead>
<tr>
<th>日志文件</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>/var/log/cron</td>
<td>定时任务相关日志</td>
</tr>
<tr>
<td>/var/log/cups/</td>
<td>打印信息</td>
</tr>
<tr>
<td>/var/log/dmesg</td>
<td>开机内核自检信息，可用 dmesg 直接查看</td>
</tr>
<tr>
<td>/var/log/btmp</td>
<td>错误登录日志（lastb）</td>
</tr>
<tr>
<td>/var/log/lastlog</td>
<td>所有用户最后一次登录时间（lastlog）</td>
</tr>
<tr>
<td>/var/log/message</td>
<td>记录系统重要信息日志</td>
</tr>
<tr>
<td>/var/log/secure</td>
<td>验证和授权方面信息，如 ssh 登录，su，sudo,创建用户等操作</td>
</tr>
<tr>
<td>/var/log/wtmp</td>
<td>永久记录所有用户的登录，注销信息，系统的启动，重启，关机等事件</td>
</tr>
<tr>
<td>/var/log/utmp</td>
<td>记录当前已经登录的用户信息</td>
</tr>
</tbody>
</table>
]]></content>
      <categories>
        <category>系统</category>
      </categories>
      <tags>
        <tag>Nginx</tag>
        <tag>logrotate</tag>
      </tags>
  </entry>
  <entry>
    <title>创建一个空白的docker镜像</title>
    <url>/2022/11/%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%A9%BA%E7%99%BD%E7%9A%84docker%E9%95%9C%E5%83%8F/index.html</url>
    <content><![CDATA[<h4 id="方法1">方法1</h4>
<p>使用 <code>/dev/null</code> 创建一个空文件</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 创建tar 文件</span></span><br><span class="line">tar cf scratch.tar --files-from /dev/null</span><br><span class="line"><span class="comment"># 使用 docker import 导入这个空文件到镜像</span></span><br><span class="line">docker import scratch.tar scratch</span><br></pre></td></tr></table></figure>
<h4 id="方法2">方法2</h4>
<p>一条命令搞定 (&quot; - &quot; 为管道后的标准输出 )</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">tar cv --files-from /dev/null |docker import - scratch:latest</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>服务</category>
        <category>Docker</category>
      </categories>
      <tags>
        <tag>Docker</tag>
      </tags>
  </entry>
  <entry>
    <title>在k8s中使用jsonpath更高效的获取一些信息</title>
    <url>/2022/01/%E5%9C%A8k8s%E4%B8%AD%E4%BD%BF%E7%94%A8jsonpath%E6%9B%B4%E9%AB%98%E6%95%88%E7%9A%84%E8%8E%B7%E5%8F%96%E4%B8%80%E4%BA%9B%E4%BF%A1%E6%81%AF/index.html</url>
    <content><![CDATA[<p><strong>列出POD和容器ID，根据容器ID查询POD</strong> pause容器是不显示的</p>
<blockquote>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">kubectl get pod --all-namespaces \</span><br><span class="line">-o jsonpath=<span class="string">&#x27;&#123;range .items[*]&#125;&#123;.metadata.name&#125;&#123;&quot; &quot;&#125;&#123;range .status.containerStatuses[*]&#125;&#123;.containerID&#125;&#123;&quot;\n&quot;&#125;&#123;end&#125;&#123;end&#125;&#x27;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line">smartdns-858ffd9649-8lmmv docker://60abe0607c8bc70b9fbc4252f10a51b8266dfa8116f5ef2263dc298d8b457d12</span><br><span class="line">calico-kube-controllers-cdd44746d-hqmtv docker://a96788eadb02fefcd282276d31bc1f1700dab69c9a7e8e784b3f276964a9792a</span><br><span class="line">calico-node-9s5qg docker://33fbbafc8e4b4ab26d265819b4eea008a9daa1f462175e1d24469d4bac8550d2</span><br><span class="line">calico-node-fv4dw docker://296ef655c2379bd8ed998769691412b4b89122612ae390a7d779ebc777d03050</span><br><span class="line">calico-node-w4txb docker://f959ca181fcbae149b0e3ecce6787fb47384c17877db4edfa52e412677c6dbd8</span><br><span class="line">coredns-6968cd84c6-sh22v docker://d61826409fc322fd3338486d325fa2a9cd519decf79baa8c6184ba477058d4e0</span><br><span class="line">......</span><br></pre></td></tr></table></figure>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">kubectl get pods --all-namespaces \</span><br><span class="line">-o jsonpath=<span class="string">&#x27;&#123;range .items[*]&#125;&#123;.status.containerStatuses[*].containerID&#125;, &#123;.metadata.name&#125;&#123;&quot;\n&quot;&#125;&#123;end&#125;&#x27;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line">docker://60abe0607c8bc70b9fbc4252f10a51b8266dfa8116f5ef2263dc298d8b457d12, smartdns-858ffd9649-8lmmv</span><br><span class="line">docker://a96788eadb02fefcd282276d31bc1f1700dab69c9a7e8e784b3f276964a9792a, calico-kube-controllers-cdd44746d-hqmtv</span><br><span class="line">docker://33fbbafc8e4b4ab26d265819b4eea008a9daa1f462175e1d24469d4bac8550d2, calico-node-9s5qg</span><br><span class="line">docker://296ef655c2379bd8ed998769691412b4b89122612ae390a7d779ebc777d03050, calico-node-fv4dw</span><br><span class="line">docker://f959ca181fcbae149b0e3ecce6787fb47384c17877db4edfa52e412677c6dbd8, calico-node-w4txb</span><br><span class="line">docker://d61826409fc322fd3338486d325fa2a9cd519decf79baa8c6184ba477058d4e0, coredns-6968cd84c6-sh22v</span><br><span class="line">docker://a87ddd5c7af540b499dfc85435538c5bedf80ded328fab69ef80e0c888b3ea86, coredns-6968cd84c6-zvv65</span><br><span class="line">......</span><br></pre></td></tr></table></figure>
</blockquote>
<p><strong>获取所有的containerID和pod ip</strong></p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">kubectl get pods --all-namespaces \</span><br><span class="line">-o jsonpath=<span class="string">&#x27;&#123;range .items[*]&#125;&#123;.status.containerStatuses[*].containerID&#125;, &#123;.status.podIP&#125;&#123;&quot;\n&quot;&#125;&#123;end&#125;&#x27;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line">docker://60abe0607c8bc70b9fbc4252f10a51b8266dfa8116f5ef2263dc298d8b457d12, 10.10.10.31</span><br><span class="line">docker://a96788eadb02fefcd282276d31bc1f1700dab69c9a7e8e784b3f276964a9792a, 10.244.169.176</span><br><span class="line">docker://33fbbafc8e4b4ab26d265819b4eea008a9daa1f462175e1d24469d4bac8550d2, 10.10.10.33</span><br><span class="line">docker://296ef655c2379bd8ed998769691412b4b89122612ae390a7d779ebc777d03050, 10.10.10.31</span><br><span class="line">docker://f959ca181fcbae149b0e3ecce6787fb47384c17877db4edfa52e412677c6dbd8, 10.10.10.32</span><br><span class="line">docker://d61826409fc322fd3338486d325fa2a9cd519decf79baa8c6184ba477058d4e0, 10.244.169.175</span><br><span class="line">......</span><br></pre></td></tr></table></figure>
<blockquote>
<p><a href="https://kubernetes.io/zh-cn/docs/reference/kubectl/jsonpath/">JSONPath 支持 | Kubernetes</a></p>
</blockquote>
]]></content>
      <categories>
        <category>kubernetes</category>
      </categories>
      <tags>
        <tag>kubernetes</tag>
      </tags>
  </entry>
  <entry>
    <title>对linux系统中/usr/src/kernels中找不到内核源码的问题</title>
    <url>/2022/06/%E5%AF%B9linux%E7%B3%BB%E7%BB%9F%E4%B8%ADusrsrckernels%E4%B8%AD%E6%89%BE%E4%B8%8D%E5%88%B0%E5%86%85%E6%A0%B8%E6%BA%90%E7%A0%81%E7%9A%84%E9%97%AE%E9%A2%98/index.html</url>
    <content><![CDATA[<h1 id="对linux系统中/usr/src/kernels中找不到内核源码的问题">对linux系统中/usr/src/kernels中找不到内核源码的问题</h1>
<p>在安装系统后，发现没有安装当前系统的内核源码在/usr/src/kernels目录下，其实我们是少安装了一个rpm包</p>
<p>首先在配置好自己电脑的源后，然后针对不同系统安装下面提示的包就可以了：</p>
<p>针对centos、redhata、fedora等系统</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">yum install -y kernel-devel kernel-headers kernel-tools kernel-tools-libs-devel kernel-tools-libs </span><br></pre></td></tr></table></figure>
<p>针对Ubuntu系统：</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">apt-get install -y linux-source</span><br></pre></td></tr></table></figure>
<p>然后就可以看到对应的内核源码</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># ls /usr/src/kernels</span></span><br><span class="line">3.10.0-1160.el7.x86_64</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>系统</category>
      </categories>
      <tags>
        <tag>系统</tag>
      </tags>
  </entry>
  <entry>
    <title>更新kubeadm安装的K8S的CA</title>
    <url>/2022/05/%E6%9B%B4%E6%96%B0kubeadm%E5%AE%89%E8%A3%85%E7%9A%84K8S%E7%9A%84CA/index.html</url>
    <content><![CDATA[<h4 id="使用已有的证书和私钥生成csr">使用已有的证书和私钥生成CSR</h4>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">openssl x509 -<span class="keyword">in</span> ca.crt -signkey ca.key -x509toreq -out domain.csr</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>查看csr证书请求文件</strong></p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">openssl req -text -noout -<span class="keyword">in</span> domain.csr</span><br></pre></td></tr></table></figure>
</blockquote>
<h4 id="创建v3扩展文件">创建V3扩展文件</h4>
<p>可以根据源证书的扩展适当修改，当前为<code>v1.18.18</code>集群</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cat</span> &lt;&lt; <span class="string">&#x27;EOF&#x27;</span> &gt; ca_v3.ext</span><br><span class="line">keyUsage           = critical, digitalSignature, keyEncipherment, keyCertSign</span><br><span class="line">basicConstraints   = critical, CA:<span class="literal">true</span></span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>
<h4 id="生成自签名证书">生成自签名证书</h4>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">openssl x509 -req -days 365 -sha256 -CAcreateserial -extfile ca_v3.ext -<span class="keyword">in</span> domain.csr -signkey ca.key -out ca_new.crt</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>查看证书内容</strong></p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">openssl x509 -text -noout -<span class="keyword">in</span> ca_new.crt</span><br></pre></td></tr></table></figure>
</blockquote>
<h4 id="v3扩展中keyusage说明">V3扩展中keyUsage说明</h4>
<table>
<thead>
<tr>
<th>keyUsage的配置</th>
<th>实际证书中的呈现</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>digitalSignature</td>
<td>Digital Signature</td>
<td>必选</td>
</tr>
<tr>
<td>nonRepudiation</td>
<td>Non Repudiation</td>
<td></td>
</tr>
<tr>
<td>keyEncipherment</td>
<td>Key Encipherment</td>
<td>必选</td>
</tr>
<tr>
<td>dataEncipherment</td>
<td>Data Encipherment</td>
<td></td>
</tr>
<tr>
<td>keyAgreement</td>
<td>Key Agreement</td>
<td></td>
</tr>
<tr>
<td>keyCertSign</td>
<td>Certificate Sign</td>
<td>必选</td>
</tr>
<tr>
<td>cRLSign</td>
<td>CRL Sign</td>
<td></td>
</tr>
<tr>
<td>encipherOnly</td>
<td>Encipher Only</td>
<td></td>
</tr>
<tr>
<td>decipherOnly</td>
<td>Decipher Only</td>
<td></td>
</tr>
</tbody>
</table>
<h4 id="ca证书示例">CA证书示例</h4>
<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line">Certificate:</span><br><span class="line">    Data:</span><br><span class="line">        Version: 3 (0x2)</span><br><span class="line">        Serial Number: 0 (0x0)</span><br><span class="line">    Signature Algorithm: sha256WithRSAEncryption</span><br><span class="line">        Issuer: <span class="attr">CN</span>=kubernetes</span><br><span class="line">        Validity</span><br><span class="line">            Not Before: Apr 24 05:47:52 2021 GMT</span><br><span class="line">            Not After : Apr 22 05:47:52 2031 GMT</span><br><span class="line">        Subject: <span class="attr">CN</span>=kubernetes</span><br><span class="line">        Subject Public Key Info:</span><br><span class="line">            Public Key Algorithm: rsaEncryption</span><br><span class="line">                Public-Key: (2048 bit)</span><br><span class="line">                Modulus:</span><br><span class="line">                    00:a7:31:98:cb:76:32:74:2c:6a:87:b3:57:90:98:</span><br><span class="line">                    2e:c9:00:c9:4e:73:08:c1:66:6a:85:54:c4:b3:13:</span><br><span class="line">                    6c:4b:f6:9b:41:7a:49:cd:ec:f4:de:20:62:c1:5a:</span><br><span class="line">                    26:64:98:a6:fa:5d:1a:0c:f6:cd:83:f4:30:09:e6:</span><br><span class="line">                    43:59:2c:c1:c4:01:fe:79:94:97:f8:3b:21:74:9f:</span><br><span class="line">                    21:f7:32:3b:c6:57:a1:88:f8:4e:f1:74:23:0b:fb:</span><br><span class="line">                    21:28:37:c1:53:b4:30:89:69:3f:f5:df:ba:9e:53:</span><br><span class="line">                    19:e1:f5:4c:b4:38:3e:8c:bc:d9:d8:66:a5:6b:4c:</span><br><span class="line">                    94:fe:49:a3:2f:31:ce:36:4a:63:87:8f:5f:ba:30:</span><br><span class="line">                    d5:d7:26:0e:b5:ec:6c:ac:39:21:7d:4c:9e:4e:9d:</span><br><span class="line">                    40:e3:dc:54:ec:de:c5:55:c2:50:29:b7:29:51:f0:</span><br><span class="line">                    09:76:09:f6:39:a8:40:6b:b7:a3:c1:03:b3:72:7c:</span><br><span class="line">                    cb:99:20:99:14:30:41:c8:9e:a4:83:3f:4b:18:36:</span><br><span class="line">                    2c:bd:dc:d8:0e:ae:a3:99:8f:36:b4:61:4c:c2:db:</span><br><span class="line">                    e2:ad:e4:26:d3:d4:7a:0e:04:fa:98:89:bc:65:1d:</span><br><span class="line">                    e0:80:f1:b7:02:1a:f0:48:14:94:f1:c3:a0:05:06:</span><br><span class="line">                    7a:40:08:e8:bf:ce:37:c6:ec:fc:a1:e7:0d:cc:3f:</span><br><span class="line">                    04:89</span><br><span class="line">                Exponent: 65537 (0x10001)</span><br><span class="line">        X509v3 extensions:</span><br><span class="line">            X509v3 Key Usage: critical</span><br><span class="line">                Digital Signature, Key Encipherment, Certificate Sign</span><br><span class="line">            X509v3 Basic Constraints: critical</span><br><span class="line">                CA:TRUE</span><br><span class="line">    Signature Algorithm: sha256WithRSAEncryption</span><br><span class="line">         10:a8:69:31:d6:fd:09:77:53:7d:50:9e:e0:f1:fd:de:70:97:</span><br><span class="line">         e4:f8:03:96:76:7f:6e:01:60:8e:71:e2:a9:60:c7:b4:eb:e8:</span><br><span class="line">         24:96:bb:42:53:47:98:ee:46:8d:12:7b:f4:38:95:e4:bd:e4:</span><br><span class="line">         51:61:b7:e3:c2:db:e3:64:f6:ae:6a:f0:87:03:7c:73:5e:71:</span><br><span class="line">         9f:ec:95:7f:ee:5c:0f:3a:5a:0f:a8:08:30:a9:ea:d2:8f:44:</span><br><span class="line">         f6:9d:e5:f7:fc:dd:9d:a9:a8:11:d9:e5:d6:7c:8d:f4:af:93:</span><br><span class="line">         7b:75:ec:15:63:9e:e6:fa:81:bb:fd:82:18:c6:bd:1b:e6:de:</span><br><span class="line">         70:27:8e:8d:14:3d:f2:47:84:e3:bd:04:44:4a:93:1f:e6:f4:</span><br><span class="line">         36:ec:b2:4d:0a:44:62:d6:a7:08:79:a4:73:a2:a3:4d:a1:66:</span><br><span class="line">         36:17:0e:0f:d9:57:25:94:f9:a2:f0:a8:e6:32:24:7e:ba:50:</span><br><span class="line">         4f:08:8c:40:3c:92:af:97:da:63:9f:2b:6b:c1:6d:3a:f7:e7:</span><br><span class="line">         28:6b:40:7c:6f:0c:fb:98:a6:48:cb:4d:be:5d:8d:3a:d5:4e:</span><br><span class="line">         ad:9e:c7:aa:bd:30:59:5a:67:c5:99:e1:53:5a:d6:3b:fd:87:</span><br><span class="line">         5b:b3:01:0e:f2:75:4f:f5:be:a0:45:57:ca:dc:2e:03:c0:db:</span><br><span class="line">         3f:3c:71:08</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>kubernetes</category>
      </categories>
      <tags>
        <tag>kubernetes</tag>
      </tags>
  </entry>
  <entry>
    <title>CentOS 更新内核</title>
    <url>/2023/08/CentOS-%E6%9B%B4%E6%96%B0%E5%86%85%E6%A0%B8/index.html</url>
    <content><![CDATA[<p>CentOS 更新内核</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment">#查看现在的内核版本</span></span><br><span class="line"><span class="built_in">uname</span> -r</span><br><span class="line">3.10.0-1160.el7.x86_64</span><br><span class="line"></span><br><span class="line"><span class="comment">#查看 yum 中可升级的内核版本</span></span><br><span class="line">yum list kernel --showduplicates</span><br><span class="line"><span class="comment">#如果list中有需要的版本可以直接执行 update 升级，多数是没有的，所以要按以下步骤操作</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#导入ELRepo软件仓库的公共秘钥</span></span><br><span class="line">rpm --import https://www.elrepo.org/RPM-GPG-KEY-elrepo.org</span><br><span class="line"></span><br><span class="line"><span class="comment">#Centos7系统安装ELRepo</span></span><br><span class="line">yum install https://www.elrepo.org/elrepo-release-7.el7.elrepo.noarch.rpm</span><br><span class="line"><span class="comment">#Centos8系统安装ELRepo</span></span><br><span class="line">yum install https://www.elrepo.org/elrepo-release-8.el8.elrepo.noarch.rpm</span><br><span class="line"></span><br><span class="line"><span class="comment">#查看ELRepo提供的内核版本</span></span><br><span class="line">yum --disablerepo=<span class="string">&quot;*&quot;</span> --enablerepo=<span class="string">&quot;elrepo-kernel&quot;</span> makecache</span><br><span class="line">yum --disablerepo=<span class="string">&quot;*&quot;</span> --enablerepo=<span class="string">&quot;elrepo-kernel&quot;</span> list available</span><br><span class="line"><span class="comment"># 查看所有版本</span></span><br><span class="line">yum --disablerepo=<span class="string">&quot;*&quot;</span> --enablerepo=<span class="string">&quot;elrepo-kernel&quot;</span> list --showduplicates kernel-lt</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#kernel-lt：表示longterm，即长期支持的内核</span></span><br><span class="line"><span class="comment">#kernel-ml：表示mainline，即当前主线的内核</span></span><br><span class="line"><span class="comment">#安装主线内核（32位安装kernek-ml）</span></span><br><span class="line">yum --disablerepo=* --enablerepo=kernel install kernel-lt</span><br><span class="line"></span><br><span class="line"><span class="comment">#查看系统可用内核，并设置启动项</span></span><br><span class="line">[root@k8s-master ~]<span class="comment"># awk -F\&#x27; &#x27;$1==&quot;menuentry &quot; &#123;print i++ &quot; : &quot; $2&#125;&#x27; /etc/grub2.cfg</span></span><br><span class="line">0 : CentOS Linux (6.3.1-1.el7.elrepo.x86_64) 7 (Core)</span><br><span class="line">1 : CentOS Linux (3.10.0-1160.el7.x86_64) 7 (Core)</span><br><span class="line">2 : CentOS Linux (0-rescue-1d061b0b4b1e459f9b75c5ee5d8153c9) 7 (Core)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#指定开机启动内核版本</span></span><br><span class="line">grub2-set-default 0 或者 grub2-set-default <span class="string">&#x27;CentOS Linux (6.3.1-1.el7.elrepo.x86_64) 7 (Core)&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#生成 grub 配置文件</span></span><br><span class="line">grub2-mkconfig -o /boot/grub2/grub.cfg</span><br><span class="line"></span><br><span class="line"><span class="comment">#重启系统，验证</span></span><br><span class="line">[root@k8s-master ~]<span class="comment"># uname -r</span></span><br><span class="line">6.3.1-1.el7.elrepo.x86_64</span><br><span class="line"></span><br><span class="line"><span class="comment"># 卸载旧的tools包</span></span><br><span class="line">[root@k8s-master ~]<span class="comment"># rpm -qa |grep kernel</span></span><br><span class="line">kernel-tools-libs-3.10.0-693.el7.x86_64</span><br><span class="line">kernel-3.10.0-693.el7.x86_64</span><br><span class="line">kernel-lt-5.4.254-1.el7.elrepo.x86_64</span><br><span class="line">kernel-tools-3.10.0-693.el7.x86_64</span><br><span class="line"></span><br><span class="line"><span class="comment"># 然后在安装新的tools的相关包，不卸载的话安装会包冲突</span></span><br><span class="line">rpm -e kernel-tools-libs-3.10.0-693.el7.x86_64</span><br><span class="line">rpm -e kernel-tools-3.10.0-693.el7.x86_64</span><br><span class="line"><span class="comment"># 再安装这2个包</span></span><br><span class="line">yum --disablerepo=* --enablerepo=kernel install kernel-lt-tools-libs kernel-lt-tools</span><br></pre></td></tr></table></figure>
<h2 id="参考文献">参考文献</h2>
<blockquote>
<p><a href="https://cloud.tencent.com/developer/article/1455002">Centos内核版本升级-腾讯云开发者社区-腾讯云 (tencent.com)</a></p>
<p><a href="http://elrepo.org/tiki/kernel-ml">ELRepo | kernel-ml</a></p>
<p><a href="https://cloud.tencent.com/developer/article/2284588">centos系统yum升级内核版本-腾讯云开发者社区-腾讯云 (tencent.com)</a></p>
<p><a href="https://blog.csdn.net/qq_45344835/article/details/130828282">如何升级 centos7 内核方法_centos7 内核升级_Nick袁的博客-CSDN博客</a></p>
<p><a href="https://blog.csdn.net/aligeter/article/details/131398360">centos 的内核升级_centos 升级内核_70年代的生猛海鲜的博客-CSDN博客</a></p>
</blockquote>
]]></content>
      <categories>
        <category>系统</category>
      </categories>
      <tags>
        <tag>CentOS</tag>
      </tags>
  </entry>
  <entry>
    <title>Git yum 安装</title>
    <url>/2023/02/Git-yum-%E5%AE%89%E8%A3%85/index.html</url>
    <content><![CDATA[<h2 id="安装新版本-git">安装新版本 Git</h2>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 安装 WANDisco 仓库包</span><br><span class="line">yum install http://opensource.wandisco.com/centos/7/git/x86_64/wandisco-git-release-7-2.noarch.rpm</span><br><span class="line">yum -y install git</span><br><span class="line">git version</span><br></pre></td></tr></table></figure>
<h2 id="命令补全设置">命令补全设置</h2>
<ul>
<li>下载相同版本的源码包，获取脚本</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">https://mirrors.edge.kernel.org/pub/software/scm/git/</span><br></pre></td></tr></table></figure>
<ul>
<li>复制脚本</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 进入git 源码目录</span><br><span class="line">cd git-x.x.x</span><br><span class="line">cd ./contrib/completion</span><br><span class="line">cp git-completion.bash git-prompt.sh /etc/profile.d/</span><br><span class="line">cd /etc/profile.d/ &amp;&amp; ln -s git-completion.bash git-completion.sh</span><br></pre></td></tr></table></figure>
<ul>
<li>配置变量</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cat &lt;&lt; &#x27;EOF&#x27; &gt; /etc/profile.d/git.sh</span><br><span class="line">export GIT_PS1_SHOWDIRTYSTATE=1</span><br><span class="line">export GIT_PS1_SHOWSTASHSTATE=1</span><br><span class="line">export GIT_PS1_SHOWUNTRACKEDFILES=1</span><br><span class="line">export GIT_PS1_SHOWUPSTREAM=&quot;verbose git svn&quot;</span><br><span class="line">export GIT_HOME=/usr/local/git</span><br><span class="line">export PATH=$PATH:$GIT_HOME/bin</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>
<h2 id="定制命令提示符，必须先设置命令补全">定制命令提示符，必须先设置命令补全</h2>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 将其加入到PS1： \[\033[1;31m\]$(__git_ps1 &quot;(%s)&quot;)\[\e[1;32m\]</span><br><span class="line">cat &lt;&lt; &#x27;EOF&#x27; &gt;&gt; /etc/bashrc</span><br><span class="line">export PS1=&#x27;\[\e[1;32m\][\u@\h \W\[\033[1;31m\]$(__git_ps1 &quot;(%s)&quot;)\[\e[1;32m\]]\$ \[\e[0m\]&#x27;</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>系统</category>
      </categories>
      <tags>
        <tag>Git</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux 获取16进制的UUID并转化为大写</title>
    <url>/2023/12/Linux-%E8%8E%B7%E5%8F%9616%E8%BF%9B%E5%88%B6%E7%9A%84UUID%E5%B9%B6%E8%BD%AC%E5%8C%96%E4%B8%BA%E5%A4%A7%E5%86%99/index.html</url>
    <content><![CDATA[<h4 id="获取uuid">获取UUID</h4>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">uuidgen -r</span><br></pre></td></tr></table></figure>
<h4 id="转化为大写">转化为大写</h4>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">awk <span class="string">&#x27;&#123;print toupper($0)&#125;&#x27;</span></span><br></pre></td></tr></table></figure>
<h4 id="去除横杠">去除横杠</h4>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="built_in">tr</span> -d <span class="string">&#x27;-&#x27;</span></span><br></pre></td></tr></table></figure>
<h4 id="示例：">示例：</h4>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">uuidgen -r |awk <span class="string">&#x27;&#123;print toupper($0)&#125;&#x27;</span> |<span class="built_in">tr</span> -d <span class="string">&#x27;-&#x27;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@host-10-11 ~]<span class="comment"># uuidgen -r |awk &#x27;&#123;print toupper($0)&#125;&#x27; |tr -d &#x27;-&#x27;</span></span><br><span class="line">D029FDBD6B0242E4A36D0D9F625600B1</span><br></pre></td></tr></table></figure>
</blockquote>
<h4 id="批量生成10个">批量生成10个</h4>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> _ <span class="keyword">in</span> `<span class="built_in">seq</span> 10`;<span class="keyword">do</span> uuidgen -r |awk <span class="string">&#x27;&#123;print toupper($0)&#125;&#x27;</span> |<span class="built_in">tr</span> -d <span class="string">&#x27;-&#x27;</span>;<span class="keyword">done</span></span><br></pre></td></tr></table></figure>
<blockquote>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@host-10-11 ~]<span class="comment"># for _ in `seq 10`;do uuidgen -r |awk &#x27;&#123;print toupper($0)&#125;&#x27; |tr -d &#x27;-&#x27;;done</span></span><br><span class="line">34196D83A7904A9BBE7D7CE3F8EC4E9B</span><br><span class="line">B36993C7067B4E4BB7475A8DDE87D1F4</span><br><span class="line">966C1F3DA8FE4E30BA1EAE4F2C42079F</span><br><span class="line">2E76680316F94800BD99224D3C24238B</span><br><span class="line">B8E4DF8F08364E279EF84A0F5C2B52B8</span><br><span class="line">8D957C39B55C4D90BABCD97B25160E29</span><br><span class="line">C1EEB41BE5BC4342A28A0B84FF2FE106</span><br><span class="line">DACBFA9D4E3F4BC7B0757A8414FFF452</span><br><span class="line">4CF54C56D488488BAAE05D4C54225A07</span><br><span class="line">34D6385FD98D4F6981C0AC54D7ED1749</span><br></pre></td></tr></table></figure>
</blockquote>
<h4 id="附：">附：</h4>
<blockquote>
<p>UUID中的第13位是版本号，对于通过<code>uuidgen</code>命令生成的UUID，默认生成的是基于随机数的版本4 UUID，UID的版本号有以下几种：</p>
<ul>
<li>版本1：基于时间和MAC地址生成的UUID。</li>
<li>版本2：基于DCE安全性的UUID。</li>
<li>版本3：基于名字的MD5散列值生成的UUID。</li>
<li>版本4：基于随机数生成的UUID。</li>
<li>版本5：基于名字的SHA-1散值生成的UUID。</li>
</ul>
<p>需要注意的是，UUID的版本号是固定的，不会改变。因此，如果您生成的UUID的版本号是固定的，那么每次生成的UUID都会有相同的版本号。</p>
</blockquote>
]]></content>
      <categories>
        <category>常用命令</category>
      </categories>
      <tags>
        <tag>shell</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux 配置时间同步 chronyd（客户端）</title>
    <url>/2023/09/Linux-%E9%85%8D%E7%BD%AE%E6%97%B6%E9%97%B4%E5%90%8C%E6%AD%A5-chronyd%EF%BC%88%E5%AE%A2%E6%88%B7%E7%AB%AF%EF%BC%89/index.html</url>
    <content><![CDATA[<h3 id="配置时间同步">配置时间同步</h3>
<p>centos7 默认已启用 chrony 服务，执行 <code>chronyc sources</code> 命令，查看存在以<code>*</code>开头的行，说明已经与NTP服务器时间同步.</p>
<h4 id="编辑配置文件">编辑配置文件</h4>
<p><code>vim /etc/chrony.conf</code></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">server cn.pool.ntp.org minpoll 4 maxpoll 10 iburst</span><br><span class="line">server ntp.aliyun.com  minpoll 4 maxpoll 10 iburst </span><br><span class="line">server ntp1.aliyun.com minpoll 4 maxpoll 10 iburst</span><br><span class="line">server ntp.tencent.com minpoll 4 maxpoll 10 iburst</span><br></pre></td></tr></table></figure>
<blockquote>
<p>注：华为云提供的ntp只能在云环境使用，公网不能访问，一般配置以上4个就够用了</p>
<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line">minpoll 4     <span class="comment"># 2^4=16秒，表示每16秒向服务的发一次ntp请求，默认值是6(64秒)，最小值是-4(1/16秒)，最长为24(6个月)</span></span><br><span class="line">maxpoll 10    <span class="comment"># 2^10=1024秒，如果客户端和服务的时间差很小，则减少轮询频率，最长1024秒一次，默认值是10，最小值为0(1秒)，最大值为24(6个月)</span></span><br><span class="line">iburst        <span class="comment"># 开机后，前四次轮询之间的间隔将是2秒，而不是minpoll。这对于快速获得时钟的第一次更新后很有用。</span></span><br></pre></td></tr></table></figure>
</blockquote>
<h4 id="重启服务并设置为开机自启动">重启服务并设置为开机自启动</h4>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">systemctl restart chronyd.service</span><br><span class="line">systemctl <span class="built_in">enable</span> chronyd.service</span><br><span class="line">systemctl status chronyd.service</span><br></pre></td></tr></table></figure>
<h4 id="查看同步状态">查看同步状态</h4>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">~]<span class="comment"># chronyc sources</span></span><br><span class="line">210 Number of sources = 4</span><br><span class="line">MS Name/IP address         Stratum Poll Reach LastRx Last sample               </span><br><span class="line">===============================================================================</span><br><span class="line">^* dns2.synet.edu.cn             1   4   377    14    +64us[ -190us] +/-   26ms</span><br><span class="line">^+ 203.107.6.88                  2   7   377     9  -2954us[-2954us] +/-   40ms</span><br><span class="line">^+ 120.25.115.20                 2   6   205    87  +5428us[+6206us] +/-   32ms</span><br><span class="line">^+ 106.55.184.199                2   6   377    26    +75us[ -176us] +/-   58ms</span><br></pre></td></tr></table></figure>
<blockquote>
<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line">^*   <span class="comment">#指示当前要同步到的源</span></span><br><span class="line">^+   <span class="comment">#指示与所选源组合的可接受源</span></span><br><span class="line">^-   <span class="comment">#表示被组合算法排除的可接受的源</span></span><br><span class="line">^?   <span class="comment">#代表未连接成功。可以尝试关闭防火墙，然后重启chrony。指示断连或报文未通过所有测试的源。它也显示在启动，至少3个样品已经从中收集</span></span><br><span class="line">^x   <span class="comment">#表示chronyd认为一个时钟是假的(即它的时间与大多数其他来源不一致)</span></span><br><span class="line">^~   <span class="comment">#表示其时间似乎有太大可变性的源</span></span><br></pre></td></tr></table></figure>
</blockquote>
]]></content>
      <categories>
        <category>系统</category>
      </categories>
      <tags>
        <tag>chronyd</tag>
        <tag>ntp</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux开启历史命令并设置不记录在.bash_history文件</title>
    <url>/2023/11/Linux%E5%BC%80%E5%90%AF%E5%8E%86%E5%8F%B2%E5%91%BD%E4%BB%A4%E5%B9%B6%E8%AE%BE%E7%BD%AE%E4%B8%8D%E8%AE%B0%E5%BD%95%E5%9C%A8-bash-history%E6%96%87%E4%BB%B6/index.html</url>
    <content><![CDATA[<h3 id="linux开启历史命令并设置不记录在`bash_history`文件">Linux开启历史命令并设置不记录在<code>.bash_history</code>文件</h3>
<p>奇怪的需求总是有</p>
<p>如果要设置不保存历史操作命令，但是你又不得不操作时，就会发现没有<code>history</code>很痛苦，所以使用如下设置，既能不保存历史命令，又能实现<code>history</code></p>
<p>如果<code>HISTSIZE</code>设置为0，那么脚本便不能读取history，我还是不建议关闭。</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="built_in">export</span> HISTFILESIZE=0</span><br><span class="line"><span class="built_in">export</span> HISTSIZE=1000</span><br></pre></td></tr></table></figure>
<ul>
<li>自定义时间格式</li>
</ul>
<blockquote>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="built_in">export</span> HISTTIMEFORMAT=<span class="string">&#x27;%F %T &#x27;</span></span><br></pre></td></tr></table></figure>
</blockquote>
<ul>
<li>忽略连续重复命令</li>
</ul>
<blockquote>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="built_in">export</span> HISTCONTROL=ignoreboth</span><br></pre></td></tr></table></figure>
</blockquote>
<ul>
<li><code>HISTSIZE</code> 标示在 <code>history</code> 命令中，要记录的命令数量</li>
</ul>
<blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">如果为 0， 则不进行记录</span><br><span class="line">如果小于 0，则永远记录</span><br><span class="line">如果大于 0，则仅记录这个数值</span><br></pre></td></tr></table></figure>
</blockquote>
<ul>
<li><code>HISTFILESIZE</code> 标示在历史文件 <code>.bash_history</code> 中的记录数。</li>
</ul>
<blockquote>
<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line">如果为 0， 则不进行记录</span><br><span class="line">如果小于 0，则永远记录</span><br><span class="line">如果大于 0，则仅记录这个数值</span><br></pre></td></tr></table></figure>
</blockquote>
<p>当我们用户退出当前会话的时候，才会把缓存中的内容写入到 <code>~/.bash_history</code> 中，那么意味着如果我当前终端不释放，其他终端是感知不到我当前终端运行的命令。</p>
<ul>
<li>默认值</li>
</ul>
<blockquote>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="built_in">set</span> |grep HISTSIZE</span><br><span class="line"><span class="comment"># HISTSIZE=1000</span></span><br><span class="line"><span class="built_in">set</span> |grep HISTFILESIZE</span><br><span class="line"><span class="comment"># HISTFILESIZE=1000</span></span><br></pre></td></tr></table></figure>
</blockquote>
<ul>
<li>临时关闭历史命令记录</li>
</ul>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 关闭记录</span></span><br><span class="line"><span class="built_in">set</span> +o <span class="built_in">history</span></span><br><span class="line"><span class="comment"># 开启记录</span></span><br><span class="line"><span class="built_in">set</span> -o <span class="built_in">history</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>系统</category>
      </categories>
      <tags>
        <tag>bash</tag>
      </tags>
  </entry>
  <entry>
    <title>Nginx location 匹配规则</title>
    <url>/2023/07/Nginx-location-%E5%8C%B9%E9%85%8D%E8%A7%84%E5%88%99/index.html</url>
    <content><![CDATA[<h2 id="**语法规则：**"><strong>语法规则：</strong></h2>
<ul>
<li><code>=</code> 开头表示精确匹配</li>
<li><code>^~</code> 开头表示uri以某个常规字符串开头，理解为匹配url路径即可(非正则)</li>
<li><code>~</code> 开头表示区分大小写的正则匹配</li>
<li><code>~*</code> 开头表示不区分大小写的正则匹配</li>
<li><code>!~</code>和<code>!~*</code>分别为区分大小写不匹配及不区分大小写不匹配的正则</li>
<li><code>/</code> 通用匹配，任何请求都会匹配到</li>
</ul>
<p>优先级：</p>
<blockquote>
<p><code>=</code>  &gt;  <code>^~</code>  &gt; <code>~ | ~*</code>  &gt;  <code>最长前缀匹配  </code> &gt; <code>/</code></p>
</blockquote>
<ul>
<li>等号类型 <code>=</code> 的优先级最高。一旦匹配成功，则不再查找其他location的匹配项</li>
<li><code>^~</code> 和通用匹配。使用前缀匹配，不支持正则表达式，如果有多个location匹配成功的话，不会终止匹配过程，会匹配表达式最长的那个</li>
<li>如果上一步得到的最长的location为<code>^~</code>类型，则表示阻断正则表达式，不再匹配正则表达式</li>
<li>如果上一步得到的最长的location不是<code>^~</code>类型，继续匹配正则表达式，只要有一个正则成功，则使用这个正则的location，立即返回结果，并结束解析过程</li>
</ul>
<h2 id="**location匹配参数实例：**"><strong>location匹配参数实例：</strong></h2>
<p><code>=</code>  精确匹配</p>
<p>内容要同表达式完全一致才匹配成功</p>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line">location = /abc/ &#123;</span><br><span class="line">  .....</span><br><span class="line"> &#125;</span><br><span class="line">        </span><br><span class="line"># 只匹配http://abc.com/abc</span><br><span class="line">#http://example.com/abc [匹配成功]</span><br><span class="line">#http://example.com/abc/index [匹配失败]</span><br></pre></td></tr></table></figure>
<p><code>~</code>  执行正则匹配，区分大小写。</p>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line">location ~ /Abc/ &#123;</span><br><span class="line">  .....</span><br><span class="line">&#125;</span><br><span class="line">#http://example.com/Abc/ [匹配成功]</span><br><span class="line">#http://example.com/abc/ [匹配失败]</span><br></pre></td></tr></table></figure>
<p><code>~* </code> 执行正则匹配，忽略大小写</p>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line">location ~* /Abc/ &#123;</span><br><span class="line">  .....</span><br><span class="line">&#125;</span><br><span class="line"># 则会忽略 uri 部分的大小写</span><br><span class="line">#http://example.com/Abc/ [匹配成功]</span><br><span class="line">#http://example.com/abc/ [匹配成功]</span><br></pre></td></tr></table></figure>
<p><code>^~ </code> 表示普通字符串匹配上以后不再进行正则匹配。</p>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line">location ^~ /index/ &#123;</span><br><span class="line">  .....</span><br><span class="line">&#125;</span><br><span class="line">#以 /index/ 开头的请求，都会匹配上</span><br><span class="line">#http://example.com/index/index.page  [匹配成功]</span><br><span class="line">#http://example.com/error/error.page [匹配失败]</span><br></pre></td></tr></table></figure>
<p>不加任何规则时，默认是大小写敏感，前缀匹配，相当于加了 <code>~</code> 与 <code>^~</code></p>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line">location /index/ &#123;</span><br><span class="line">  ......</span><br><span class="line">&#125;</span><br><span class="line">#http://example.com/index  [匹配成功]</span><br><span class="line">#http://example.com/index/index.page  [匹配成功]</span><br><span class="line">#http://example.com/test/index  [匹配失败]</span><br><span class="line">#http://example.com/Index  [匹配失败]</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>服务</category>
        <category>Nginx</category>
      </categories>
      <tags>
        <tag>Nginx</tag>
      </tags>
  </entry>
  <entry>
    <title>Nginx 使用正则时配置反向代理</title>
    <url>/2023/07/Nginx-%E4%BD%BF%E7%94%A8%E6%AD%A3%E5%88%99%E6%97%B6%E9%85%8D%E7%BD%AE%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86/index.html</url>
    <content><![CDATA[<p><strong>当nginx的location 使用正则时，proxy_pass 中就不能出现路径。</strong></p>
<p>但有时候我们需要利用nginx去修改请求路径，比如：<br>
访问  <code>/v1/api</code> 时，希望转发到后端是 <code>/api</code><br>
这个时候要利用 <code>rewrite</code>  才能完成。</p>
<p>示例如下：</p>
<figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="section">location</span> <span class="regexp">~ &quot;^/v1/api/user/[0-9]+&quot;</span> &#123;</span><br><span class="line">    <span class="attribute">rewrite</span> <span class="regexp"> ^/v1/api/(.*)</span> /api/<span class="variable">$1</span> <span class="literal">break</span>;</span><br><span class="line">    <span class="attribute">proxy_pass</span> http://10.10.10.13;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上面配置中，比如客户端请求的接口是：<code>/v1/api/user/100</code> 	那转发的接口是<code>/api/user/100</code></p>
<p>通过 <code>rewrite</code> 去掉了 <code>/v1</code> 前缀。</p>
<p>其中 <code>$1</code> 是<code>rewrite</code>中的第一个圆括号</p>
]]></content>
      <categories>
        <category>服务</category>
        <category>Nginx</category>
      </categories>
      <tags>
        <tag>Nginx</tag>
      </tags>
  </entry>
  <entry>
    <title>Nginx 使用证书进行双向校验</title>
    <url>/2023/04/Nginx-%E4%BD%BF%E7%94%A8%E8%AF%81%E4%B9%A6%E8%BF%9B%E8%A1%8C%E5%8F%8C%E5%90%91%E6%A0%A1%E9%AA%8C/index.html</url>
    <content><![CDATA[<p><strong>生成root CA证书时COMMON_NAME参数不能与生成server端和client端证书时的COMMON_NAME参数一样，其他参数随意、</strong></p>
<h2 id="签发服务证书">签发服务证书</h2>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cat &lt;&lt; EOF &gt; nginx-csr.json</span><br><span class="line">&#123;</span><br><span class="line">    &quot;CN&quot;: &quot;Nginx&quot;,</span><br><span class="line">    &quot;hosts&quot;: [</span><br><span class="line">        &quot;127.0.0.1&quot;,</span><br><span class="line">        &quot;localhost&quot;,</span><br><span class="line">        &quot;139.224.75.128&quot;,</span><br><span class="line">        &quot;10.10.10.11&quot;</span><br><span class="line">    ],</span><br><span class="line">    &quot;key&quot;: &#123;</span><br><span class="line">        &quot;algo&quot;: &quot;rsa&quot;,</span><br><span class="line">        &quot;size&quot;: 2048</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;names&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">            &quot;C&quot;: &quot;CN&quot;,</span><br><span class="line">            &quot;L&quot;: &quot;ZJ&quot;,            </span><br><span class="line">            &quot;ST&quot;: &quot;HZ&quot;,</span><br><span class="line">            &quot;O&quot;: &quot;yonge server&quot;,</span><br><span class="line">            &quot;OU&quot;: &quot;IT&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line">cfssl gencert \</span><br><span class="line">  -ca=ca.pem \</span><br><span class="line">  -ca-key=ca-key.pem \</span><br><span class="line">  -config=ca-config.json \</span><br><span class="line">  -profile=www nginx-csr.json | cfssljson -bare nginx</span><br></pre></td></tr></table></figure>
<h2 id="签发客户端证书">签发客户端证书</h2>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cat &lt;&lt; EOF &gt; client-csr.json</span><br><span class="line">&#123;</span><br><span class="line">    &quot;CN&quot;: &quot;Client&quot;,</span><br><span class="line">    &quot;hosts&quot;: [],</span><br><span class="line">    &quot;key&quot;: &#123;</span><br><span class="line">        &quot;algo&quot;: &quot;rsa&quot;,</span><br><span class="line">        &quot;size&quot;: 2048</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;names&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">            &quot;O&quot;: &quot;My client&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line">cfssl gencert \</span><br><span class="line">  -ca=ca.pem \</span><br><span class="line">  -ca-key=ca-key.pem \</span><br><span class="line">  -config=ca-config.json \</span><br><span class="line">  -profile=www client-csr.json | cfssljson -bare client</span><br></pre></td></tr></table></figure>
<h2 id="nginx-配置">nginx 配置</h2>
<figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">        <span class="attribute">listen</span>     <span class="number">443</span> ssl http2;</span><br><span class="line">        <span class="attribute">server_name</span>  www.example.com;</span><br><span class="line">        <span class="attribute">ssl_certificate</span> nginx.crt;            <span class="comment"># 服务端证书</span></span><br><span class="line">        <span class="attribute">ssl_certificate_key</span> nginx.key;        <span class="comment"># 服务端证书</span></span><br><span class="line">        <span class="attribute">ssl_client_certificate</span> client-ca.crt; <span class="comment"># 客户端证书的CA</span></span><br><span class="line">        <span class="attribute">ssl_verify_client</span> <span class="literal">on</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="客户端证书转p12">客户端证书转p12</h2>
<p>查看更多： <a href="/2023/04/%E6%99%AE%E9%80%9Ax509%E8%AF%81%E4%B9%A6%E8%BD%ACp12%E6%A0%BC%E5%BC%8F/index.html" title="普通x509证书转p12格式">普通x509证书转p12格式</a></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">openssl pkcs12 -<span class="built_in">export</span> -clcerts -<span class="keyword">in</span> client.crt -inkey client.key -out client.p12</span><br></pre></td></tr></table></figure>
<h2 id="使用curl-命令测试">使用curl 命令测试</h2>
<blockquote>
<p>使用 <code>curl</code> 命令无需把证书转换成p12格式</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 这里一定要使用证书相对路径或绝对路径，不能写成 --cert client.crt ....这种形式，但是--cacert是可以直接写的</span></span><br><span class="line">curl curl --cacert ca.crt --cert ./client.crt --key ./client.key https://10.10.10.11</span><br></pre></td></tr></table></figure>
<h2 id="浏览器导入p12证书">浏览器导入p12证书</h2>
<a href="/2023/04/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%AF%BC%E5%85%A5p12%E8%AF%81%E4%B9%A6/index.html" title="浏览器导入p12证书">浏览器导入p12证书</a>
<h1 id="附：">附：</h1>
<blockquote>
<ul>
<li>经个人通过nginx验证，使用双向认证时，证书到期会导致认证不通过</li>
</ul>
</blockquote>
]]></content>
      <categories>
        <category>服务</category>
        <category>Nginx</category>
      </categories>
      <tags>
        <tag>Nginx</tag>
        <tag>SSL</tag>
        <tag>TLS</tag>
      </tags>
  </entry>
  <entry>
    <title>Nginx 反向代理之神奇的斜线</title>
    <url>/2023/06/Nginx-%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86%E4%B9%8B%E7%A5%9E%E5%A5%87%E7%9A%84%E6%96%9C%E7%BA%BF/index.html</url>
    <content><![CDATA[<h1 id="nginx-反向代理之神奇的斜线">Nginx 反向代理之神奇的斜线</h1>
<h3 id="**代理模式**"><strong>代理模式</strong></h3>
<p>在客户端中请求服务器A，反向代理到服务器B，对于如下4组配置的代理效果如下。</p>
<blockquote>
<p>效果1</p>
</blockquote>
<figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="comment"># A实际发起的请求路劲 -&gt; B收到的请求</span></span><br><span class="line"><span class="comment"># localhost/v1/api -&gt; /api</span></span><br><span class="line"><span class="section">location</span> /v1/ &#123;</span><br><span class="line">  <span class="attribute">proxy_pass</span> http://10.10.10.12/;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># localhost/v2/api -&gt; //api</span></span><br><span class="line"><span class="section">location</span> /v2 &#123;</span><br><span class="line">  <span class="attribute">proxy_pass</span> http://10.10.10.12/;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>效果2</p>
</blockquote>
<figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="comment"># localhost/v3/api -&gt; /v3/api</span></span><br><span class="line"><span class="section">location</span> /v3/ &#123;</span><br><span class="line">  <span class="attribute">proxy_pass</span> http://10.10.10.12;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># localhost/v4/api -&gt; /v4/api</span></span><br><span class="line"><span class="section">location</span> /v4 &#123;</span><br><span class="line">  <span class="attribute">proxy_pass</span> http://10.10.10.12;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>效果3</p>
</blockquote>
<figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="comment"># localhost/v5/api -&gt; /on/api</span></span><br><span class="line"><span class="section">location</span> /v5/ &#123;</span><br><span class="line">  <span class="attribute">proxy_pass</span> http://10.10.10.12/on/;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># localhost/v6/api -&gt; /on//api</span></span><br><span class="line"><span class="section">location</span> /v6 &#123;</span><br><span class="line">  <span class="attribute">proxy_pass</span> http://10.10.10.12/on/;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>效果4</p>
</blockquote>
<figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="comment"># localhost/v7/api -&gt; /onapi</span></span><br><span class="line"><span class="section">location</span> /v7/ &#123;</span><br><span class="line">  <span class="attribute">proxy_pass</span> http://10.10.10.12/on;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># localhost/v8/api -&gt; /on/api</span></span><br><span class="line"><span class="section">location</span> /v8 &#123;</span><br><span class="line">  <span class="attribute">proxy_pass</span> http://10.10.10.12/on;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>只要proxy_pass后面新制定的路由地址带有/开头的字符串，那么请求后面的地址信息将会从location中匹配到的部分去除，将剩余的地址信息部分追加到proxy_pass拼接到地址后面，构建成一个全新的请求url。如下图：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">curl 10.10.10.11/v1/api    # /v1/  被匹配到了，会去掉 “/v1/”， 所以只剩下api</span><br><span class="line">       location /v1/ &#123;</span><br><span class="line">           proxy_pass http://10.10.10.12/;</span><br><span class="line">       &#125;</span><br><span class="line">                      http://10.10.10.12/api   # 将api 拼接在proxy_pass后面，形成新的url</span><br><span class="line">------------------------------------------------------------------------------------------------------------------</span><br><span class="line">curl 10.10.10.11/v3/api    # /v1/  被匹配到了，因为proxy_pass里面没有路劲，所以请求路径会被全部拼接</span><br><span class="line">       location /v3/ &#123;</span><br><span class="line">           proxy_pass http://10.10.10.12;</span><br><span class="line">       &#125;</span><br><span class="line">                      http://10.10.10.12/v3/api   # 将 /v3/api 拼接在proxy_pass后面，形成新的url</span><br></pre></td></tr></table></figure>
</blockquote>
<h4 id="**本地资源模式**"><strong>本地资源模式</strong></h4>
<figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="section">location</span> / &#123;</span><br><span class="line">    <span class="attribute">root</span>   /usr/share/nginx/html;</span><br><span class="line">    <span class="attribute">index</span>  index.html index.htm;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># curl localhost/s1/api/index.html  -&gt; /usr/local/s1/api/index.html</span></span><br><span class="line"><span class="section">location</span> /s1/ &#123;</span><br><span class="line">  <span class="attribute">root</span> /usr/local/;</span><br><span class="line">  <span class="attribute">index</span>  index.html index.htm;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># curl localhost/s2/api/index.html  -&gt; /usr/local/s2/api/index.html</span></span><br><span class="line"><span class="section">location</span> /s2/ &#123;</span><br><span class="line">  <span class="attribute">root</span> /usr/local;</span><br><span class="line">  <span class="attribute">index</span>  index.html index.htm;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># curl localhost/s3/api/index.html  -&gt; /usr/local/s3/api/index.html</span></span><br><span class="line"><span class="section">location</span> /s3 &#123;</span><br><span class="line">  <span class="attribute">root</span> /usr/local/;</span><br><span class="line">  <span class="attribute">index</span>  index.html index.htm;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># curl localhost/s4/api/index.html  -&gt; /usr/local/s4/api/index.html</span></span><br><span class="line"><span class="section">location</span> /s4 &#123;</span><br><span class="line">  <span class="attribute">root</span> /usr/local;</span><br><span class="line">  <span class="attribute">index</span>  index.html index.htm;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># curl localhost/a1/api/index.html  -&gt; /usr/local/api/index.html</span></span><br><span class="line"><span class="section">location</span> /a1/ &#123;</span><br><span class="line">  <span class="attribute">alias</span> /usr/local/;</span><br><span class="line">  <span class="attribute">index</span>  index.html index.htm;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># curl localhost/a2/api/index.html  -&gt; /usr/local//api/index.html</span></span><br><span class="line"><span class="section">location</span> /a2 &#123;</span><br><span class="line">  <span class="attribute">alias</span> /usr/local/;</span><br><span class="line">  <span class="attribute">index</span>  index.html index.htm;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># curl localhost/hostname/  -&gt; /etc/hostname</span></span><br><span class="line"><span class="section">location</span> /hostname &#123;</span><br><span class="line">  <span class="attribute">alias</span> /etc;</span><br><span class="line">  <span class="attribute">index</span> hostname;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>服务</category>
        <category>Nginx</category>
      </categories>
      <tags>
        <tag>Nginx</tag>
      </tags>
  </entry>
  <entry>
    <title>Nginx 反向代理使用双向认证</title>
    <url>/2023/08/Nginx-%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86%E4%BD%BF%E7%94%A8%E5%8F%8C%E5%90%91%E8%AE%A4%E8%AF%81/index.html</url>
    <content><![CDATA[<figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="section">location</span> /api &#123;</span><br><span class="line">    <span class="attribute">proxy_set_header</span> Host <span class="variable">$host</span>;</span><br><span class="line">    <span class="attribute">proxy_set_header</span> X-Real-IP <span class="variable">$remote_addr</span>;</span><br><span class="line">    <span class="attribute">proxy_set_header</span> X-Forwarded-For <span class="variable">$proxy_add_x_forwarded_for</span>;</span><br><span class="line">    <span class="attribute">proxy_redirect</span>    <span class="literal">off</span>; </span><br><span class="line">    <span class="attribute">proxy_ssl_certificate</span>       client.crt;</span><br><span class="line">    <span class="attribute">proxy_ssl_certificate_key</span>   client.key;</span><br><span class="line">    <span class="attribute">proxy_ssl_trusted_certificate</span>  trusted_ca.pem;   <span class="comment"># 指定 CA 证书用于验证代理 HTTPS 服务器的证书</span></span><br><span class="line">    <span class="attribute">proxy_ssl_verify</span> <span class="literal">on</span>;     <span class="comment"># 开启代理 HTTPS 服务器证书的验证</span></span><br><span class="line">    <span class="attribute">proxy_pass</span> https://api.example.com;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>服务</category>
        <category>Nginx</category>
      </categories>
      <tags>
        <tag>Nginx</tag>
      </tags>
  </entry>
  <entry>
    <title>Nginx 配置四层代理</title>
    <url>/2023/07/Nginx-%E9%85%8D%E7%BD%AE%E5%9B%9B%E5%B1%82%E4%BB%A3%E7%90%86/index.html</url>
    <content><![CDATA[<h4 id="使用upstream方式">使用upstream方式</h4>
<figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 与http区域同级</span></span><br><span class="line"><span class="section">stream</span> &#123;</span><br><span class="line">    <span class="section">upstream</span> lb-<span class="number">80</span> &#123;</span><br><span class="line">        <span class="attribute">server</span>  <span class="number">10.80.0.46:30080</span>;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="section">upstream</span> lb-<span class="number">443</span> &#123;</span><br><span class="line">        <span class="attribute">server</span>  <span class="number">10.80.0.46:30443</span>;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="section">server</span> &#123;</span><br><span class="line">        <span class="attribute">listen</span>  <span class="number">80</span>;</span><br><span class="line">        <span class="attribute">proxy_pass</span>  lb-<span class="number">80</span>;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="section">server</span> &#123;</span><br><span class="line">        <span class="attribute">listen</span>  <span class="number">443</span>;</span><br><span class="line">        <span class="attribute">ssl_protocols</span> TLSv1.<span class="number">2</span>;</span><br><span class="line">        <span class="attribute">proxy_pass</span>  lb-<span class="number">443</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="直接使用proxy_pass">直接使用proxy_pass</h4>
<figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 与http区域同级</span></span><br><span class="line"><span class="section">stream</span> &#123;</span><br><span class="line">    <span class="section">server</span> &#123;</span><br><span class="line">        <span class="attribute">listen</span> <span class="number">6443</span>;</span><br><span class="line">        <span class="attribute">proxy_pass</span>  <span class="number">10.10.10.31:6443</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="日志配置">日志配置</h4>
<blockquote>
<a href="/2023/07/Nginx-%E9%85%8D%E7%BD%AE%E5%9B%9B%E5%B1%82%E4%BB%A3%E7%90%86%E7%9A%84%E8%AE%BF%E9%97%AE%E6%97%A5%E5%BF%97/index.html" title="Nginx 配置四层代理的访问日志">Nginx 配置四层代理的访问日志</a>
</blockquote>
]]></content>
      <categories>
        <category>服务</category>
        <category>Nginx</category>
      </categories>
      <tags>
        <tag>Nginx</tag>
      </tags>
  </entry>
  <entry>
    <title>Nginx 常用配置</title>
    <url>/2023/07/Nginx-%E5%B8%B8%E7%94%A8%E9%85%8D%E7%BD%AE/index.html</url>
    <content><![CDATA[<h3 id="请求头配置">请求头配置</h3>
<h5 id="请求头的缓冲区">请求头的缓冲区</h5>
<p><a href="https://nginx.org/en/docs/http/ngx_http_core_module.html#client_header_buffer_size">client_header_buffer_size (nginx.org)</a></p>
<blockquote>
<p>设置读取客户端请求头的缓冲区大小，对于大多数请求，1K字节的缓冲区就足够了。但是，如果请求包含很长的cookie，则可能无法装入1K。如果请求行或请求头字段不适合这个缓冲区，则分配由<code>large_client_header_buffers</code>指令配置的更大的缓冲区。</p>
</blockquote>
<figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line">Syntax:	  <span class="attribute">client_header_buffer_size</span> size;</span><br><span class="line">Default:  <span class="attribute">client_header_buffer_size</span> <span class="number">1k</span>;</span><br><span class="line">Context:  http, server</span><br></pre></td></tr></table></figure>
<h5 id="设置用于读取大型客户端请求标头的缓冲区的最大数目和大小，如果请求头很大，使用这个配置">设置用于读取大型客户端请求标头的缓冲区的最大数目和大小，如果请求头很大，使用这个配置</h5>
<p><a href="https://nginx.org/en/docs/http/ngx_http_core_module.html#large_client_header_buffers">large_client_header_buffers (nginx.org)</a></p>
<figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line">Syntax:	  <span class="attribute">large_client_header_buffers</span> number size;</span><br><span class="line">Default:  <span class="attribute">large_client_header_buffers</span> <span class="number">4</span> <span class="number">8k</span>;</span><br><span class="line">Context:  http, server</span><br></pre></td></tr></table></figure>
<h3 id="请求体配置">请求体配置</h3>
<h5 id="设置客户端请求体的最大允许大小">设置客户端请求体的最大允许大小</h5>
<p><a href="https://nginx.org/en/docs/http/ngx_http_core_module.html#client_max_body_size">client_max_body_size (nginx.org)</a></p>
<blockquote>
<p><code>client_max_body_size</code> 默认 1M，表示客户端请求服务器最大允许大小，在<code>Content-Length</code>请求头中指定。如果请求的正文数据大于<code>client_max_body_size</code>，HTTP协议会报错 413 Request Entity Too Large。就是说如果请求的正文大于<code>client_max_body_size</code>，一定是失败的。如果需要上传大文件，一定要修改该值。</p>
</blockquote>
<figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line">Syntax:	  <span class="attribute">client_max_body_size</span> size;</span><br><span class="line">Default:  <span class="attribute">client_max_body_size</span> <span class="number">1m</span>;</span><br><span class="line">Context:  http, server, <span class="section">location</span></span><br></pre></td></tr></table></figure>
<h5 id="设置读取客户端请求体的缓冲区大小">设置读取客户端请求体的缓冲区大小</h5>
<p><a href="https://nginx.org/en/docs/http/ngx_http_core_module.html#client_body_buffer_size">client_body_buffer_size (nginx.org)</a></p>
<blockquote>
<p>Nginx分配给请求数据的Buffer大小，如果请求的数据小于<code>client_body_buffer_size</code>直接将数据先在内存中存储。如果请求的值大于<code>client_body_buffer_size</code>小于<code>client_max_body_size</code>，就会将数据先存储到临时文件中，<code>client_body_temp</code> 指定的路径</p>
</blockquote>
<figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line">Syntax:	  <span class="attribute">client_body_buffer_size</span> size;</span><br><span class="line">Default:  <span class="attribute">client_body_buffer_size</span> <span class="number">8k</span>|<span class="number">16k</span>;</span><br><span class="line">Context:  http, server, <span class="section">location</span></span><br></pre></td></tr></table></figure>
<h5 id="设置用于读取从代理服务器接收到的响应的第一部分的缓冲区的大小">设置用于读取从代理服务器接收到的响应的第一部分的缓冲区的大小</h5>
<blockquote>
<p>通常，该缓冲区大小设置为一个内存页的大小，具体是4k或8k，取决于服务器平台。也可以把它设置的更小，但是没必要设置过大了，因为只是用于缓冲初始部分响应。</p>
</blockquote>
<p><a href="https://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_buffer_size">proxy_buffer_size (nginx.org)</a></p>
<figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line">Syntax:   <span class="attribute">proxy_buffer_size</span> size;</span><br><span class="line">Default:  <span class="attribute">proxy_buffer_size</span> <span class="number">4k</span>|<span class="number">8k</span>;</span><br><span class="line">Context:  http, server, <span class="section">location</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="超时配置">超时配置</h3>
]]></content>
      <categories>
        <category>服务</category>
        <category>Nginx</category>
      </categories>
      <tags>
        <tag>Nginx</tag>
      </tags>
  </entry>
  <entry>
    <title>Nginx 配置四层代理的访问日志</title>
    <url>/2023/07/Nginx-%E9%85%8D%E7%BD%AE%E5%9B%9B%E5%B1%82%E4%BB%A3%E7%90%86%E7%9A%84%E8%AE%BF%E9%97%AE%E6%97%A5%E5%BF%97/index.html</url>
    <content><![CDATA[<h4 id="四层代理的日志配置">四层代理的日志配置</h4>
<figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="section">stream</span> &#123;</span><br><span class="line">    <span class="attribute">log_format</span> proxy <span class="string">&#x27;<span class="variable">$remote_addr</span> [<span class="variable">$time_local</span>] &#x27;</span></span><br><span class="line">                     <span class="string">&#x27;<span class="variable">$protocol</span> <span class="variable">$status</span> <span class="variable">$bytes_sent</span> <span class="variable">$bytes_received</span> &#x27;</span></span><br><span class="line">                     <span class="string">&#x27;<span class="variable">$session_time</span> <span class="variable">$upstream_addr</span> &#x27;</span></span><br><span class="line">                     <span class="string">&#x27;<span class="variable">$upstream_bytes_sent</span> <span class="variable">$upstream_bytes_received</span> <span class="variable">$upstream_connect_time</span>&#x27;</span>;</span><br><span class="line">    <span class="attribute">access_log</span> /var/log/nginx/tcp-access.log proxy;</span><br><span class="line">    <span class="attribute">error_log</span>  /var/log/nginx/tcp-<span class="literal">error</span>.log <span class="literal">warn</span>;</span><br><span class="line"></span><br><span class="line">    <span class="section">server</span> &#123;</span><br><span class="line">        <span class="attribute">listen</span> <span class="number">6443</span>;</span><br><span class="line">        <span class="attribute">proxy_pass</span>  <span class="number">10.10.10.31:6443</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>效果示例</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@host-10-11 nginx]<span class="comment"># tailf /var/log/nginx/tcp-access.log </span></span><br><span class="line">10.10.10.11 [29/Jul/2023:14:01:15 +0800] TCP 200 40 80 0.004 10.10.10.11:22 80 40 0.000</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>服务</category>
        <category>Nginx</category>
      </categories>
      <tags>
        <tag>Nginx</tag>
      </tags>
  </entry>
  <entry>
    <title>OpenSSL s_client测试子命令</title>
    <url>/2023/04/OpenSSL-s-client%E6%B5%8B%E8%AF%95%E5%AD%90%E5%91%BD%E4%BB%A4/index.html</url>
    <content><![CDATA[<h4 id="载第三方的最新的pem（privacy-enhanced-mail）格式的可信证书库">载第三方的最新的PEM（privacy-enhanced mail）格式的可信证书库</h4>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># https://curl.se/docs/caextract.html</span></span><br><span class="line">wget --no-check-certificate   https://curl.se/ca/cacert.pem</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">echo</span> |openssl s_client -CAfile cacert.pem -connect www.baidu.com:443 -msg</span><br></pre></td></tr></table></figure>
<h4 id="显示证书链">显示证书链</h4>
<blockquote>
<p>使用CA文件</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">echo</span> |openssl s_client -CAfile cacert.pem -connect www.baidu.com:443 -showcerts</span><br></pre></td></tr></table></figure>
<p><img src="https://img2023.cnblogs.com/blog/1599886/202304/1599886-20230414204205830-2063234458.png" alt=""></p>
<h4 id="直接访问，显示目标ssl证书">直接访问，显示目标SSL证书</h4>
<blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">-showcerts 显示证书链</span><br></pre></td></tr></table></figure>
</blockquote>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="built_in">echo</span> |openssl s_client -connect www.baidu.com:443</span><br></pre></td></tr></table></figure>
<h4 id="查看服务的证书的过期时间">查看服务的证书的过期时间</h4>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">~]# echo |openssl s_client -connect www.baidu.com:443 2&gt;/dev/null |openssl x509 -noout -dates</span><br><span class="line">notBefore=Jul  6 01:51:06 2023 GMT</span><br><span class="line">notAfter=Aug  6 01:51:05 2024 GMT</span><br></pre></td></tr></table></figure>
<h4 id="保存服务器的证书">保存服务器的证书</h4>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="built_in">echo</span> |openssl s_client -showcerts -connect example.com:443 2&gt;/dev/null | sed -n <span class="string">&#x27;/-----BEGIN/,/-----END/p&#x27;</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>常用命令</category>
      </categories>
      <tags>
        <tag>openssl</tag>
      </tags>
  </entry>
  <entry>
    <title>Postman 安装</title>
    <url>/2023/11/Postman-%E5%AE%89%E8%A3%85/index.html</url>
    <content><![CDATA[<p>貌似从版本10.14开始，从文件导入必须登录。（登录之后每次打开必须联网，体验很差）</p>
<h3 id="旧版1013.6下载">旧版10.13.6下载</h3>
<p><a href="https://www.filehorse.com/download-postman/80098/download/">https://www.filehorse.com/download-postman/80098/download/</a></p>
<h3 id="安装报错version-mismatch detected">安装报错version mismatch detected</h3>
<p><a href="https://blog.csdn.net/haobindayi/article/details/133683485">postman使用旧版本报错version mismatch detected后如何恢复使用_postman旧版本__王小义_的博客-CSDN博客</a></p>
<blockquote>
<p>但是安装打开后会提示version mismatch detected，所以需要解决该办法；</p>
<ul>
<li>修改文件名称</li>
</ul>
<p>修改 C:\Users\XXX\AppData\Roaming\Postman 为 C:\Users\XXX\AppData\Roaming\Postman1</p>
<ul>
<li>安装旧版本</li>
</ul>
<p>此时安装旧版本可以正常打开。</p>
<ul>
<li>数据恢复</li>
</ul>
<p>找到C:\Users\XXX\AppData\Roaming\Postman1中的backup-20xx-XX-XXT07-xx-xx.708Z.json的文件，然后点击面板中的import，将文件拖入后可正常导入。</p>
<ul>
<li>删除升级文件</li>
</ul>
<p>C:\Users\XXX\AppData\Local\Postman中的update.exe删除。</p>
</blockquote>
<h3 id="最后将postman更新地址写入hosts，禁止偷偷的更新">最后将Postman更新地址写入hosts，禁止偷偷的更新</h3>
<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Postman</span></span><br><span class="line">0.0.0.0 dl.pstmn.io</span><br><span class="line">0.0.0.0 sync-v3.getpostman.com</span><br><span class="line">0.0.0.0 getpostman.com</span><br><span class="line">0.0.0.0 go.pstmn.io</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>工具</category>
      </categories>
      <tags>
        <tag>Postman</tag>
      </tags>
  </entry>
  <entry>
    <title>Shell下判断一个命令是否存在</title>
    <url>/2023/04/Shell%E4%B8%8B%E5%88%A4%E6%96%AD%E4%B8%80%E4%B8%AA%E5%91%BD%E4%BB%A4%E6%98%AF%E5%90%A6%E5%AD%98%E5%9C%A8/index.html</url>
    <content><![CDATA[<ul>
<li>which非SHELL的内置命令，用起来比内置命令的开销大，并且非内置命令会依赖平台的实现，不同平台的实现可能不同。</li>
<li>很多系统的which并不设置退出时的返回值，即使要查找的命令不存在，which也返回0</li>
</ul>
<h4 id="较为合适的判断方式">较为合适的判断方式</h4>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="built_in">command</span> -v foo &gt;/dev/null 2&gt;&amp;1 || &#123; <span class="built_in">echo</span> &gt;&amp;2 <span class="string">&quot;I require foo but it&#x27;s not installed.  Aborting.&quot;</span>; <span class="built_in">exit</span> 1; &#125;</span><br><span class="line"><span class="built_in">type</span> foo &gt;/dev/null 2&gt;&amp;1 || &#123; <span class="built_in">echo</span> &gt;&amp;2 <span class="string">&quot;I require foo but it&#x27;s not installed.  Aborting.&quot;</span>; <span class="built_in">exit</span> 1; &#125;</span><br><span class="line"><span class="built_in">hash</span> foo 2&gt;/dev/null || &#123; <span class="built_in">echo</span> &gt;&amp;2 <span class="string">&quot;I require foo but it&#x27;s not installed.  Aborting.&quot;</span>; <span class="built_in">exit</span> 1; &#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> ! [ -x <span class="string">&quot;<span class="subst">$(command -v git)</span>&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&#x27;Error: git is not installed.&#x27;</span> &gt;&amp;2</span><br><span class="line">  <span class="built_in">exit</span> 1</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>shell</category>
      </categories>
      <tags>
        <tag>shell</tag>
      </tags>
  </entry>
  <entry>
    <title>Windows 路由管理（route）</title>
    <url>/2023/06/Windows-%E8%B7%AF%E7%94%B1%E7%AE%A1%E7%90%86%EF%BC%88route%EF%BC%89/index.html</url>
    <content><![CDATA[<h3 id="添加一条临时主机路由">添加一条临时主机路由</h3>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">route add <span class="number">192</span>.<span class="number">168</span>.<span class="number">99</span>.<span class="number">100</span>/<span class="number">32</span> <span class="number">192</span>.<span class="number">168</span>.<span class="number">99</span>.<span class="number">1</span></span><br></pre></td></tr></table></figure>
<ul>
<li>使用 <code>-p</code> 将其设置成永久路由</li>
</ul>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">route add -p <span class="number">192</span>.<span class="number">168</span>.<span class="number">99</span>.<span class="number">100</span>/<span class="number">32</span> <span class="number">192</span>.<span class="number">168</span>.<span class="number">99</span>.<span class="number">1</span></span><br></pre></td></tr></table></figure>
<ul>
<li>使用 <code>route print</code> 查看</li>
</ul>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"><span class="function">C:\<span class="title">Users</span>\<span class="title">outsrkem</span>&gt;<span class="title">route</span> <span class="title">print</span></span></span><br><span class="line"><span class="function">===========================================================================</span></span><br><span class="line"><span class="function">接口列表</span></span><br><span class="line"><span class="function"> 12...00 <span class="title">d8</span> 61 85 02 35 ......<span class="title">Killer</span> <span class="title">E2500</span> <span class="title">Gigabit</span> <span class="title">Ethernet</span> <span class="title">Controller</span></span></span><br><span class="line"><span class="function"> 15...24 <span class="title">ee</span> 9<span class="title">a</span> 69 <span class="title">a2</span> 4<span class="title">f</span> ......<span class="title">Microsoft</span> <span class="title">Wi</span>-<span class="title">Fi</span> <span class="title">Direct</span> <span class="title">Virtual</span> <span class="title">Adapter</span></span></span><br><span class="line"><span class="function">  9...26 <span class="title">ee</span> 9<span class="title">a</span> 69 <span class="title">a2</span> 4<span class="title">e</span> ......<span class="title">Microsoft</span> <span class="title">Wi</span>-<span class="title">Fi</span> <span class="title">Direct</span> <span class="title">Virtual</span> <span class="title">Adapter</span> #2</span></span><br><span class="line"><span class="function"> 21...00 50 56 <span class="title">c0</span> 00 01 ......<span class="title">VMware</span> <span class="title">Virtual</span> <span class="title">Ethernet</span> <span class="title">Adapter</span> <span class="title">for</span> <span class="title">VMnet1</span></span></span><br><span class="line"><span class="function"> 20...00 50 56 <span class="title">c0</span> 00 08 ......<span class="title">VMware</span> <span class="title">Virtual</span> <span class="title">Ethernet</span> <span class="title">Adapter</span> <span class="title">for</span> <span class="title">VMnet8</span></span></span><br><span class="line"><span class="function"> 13...0<span class="title">a</span> <span class="title">b8</span> 59 65 <span class="title">a4</span> 2<span class="title">c</span> ......<span class="title">Intel</span>(<span class="title">R</span>) <span class="title">Wireless</span>-<span class="title">AC</span> 9560 160<span class="title">MHz</span></span></span><br><span class="line"><span class="function">  1...........................<span class="title">Software</span> <span class="title">Loopback</span> <span class="title">Interface</span> 1</span></span><br><span class="line"><span class="function">===========================================================================</span></span><br><span class="line"><span class="function"><span class="title">IPv4</span> 路由表</span></span><br><span class="line"><span class="function">===========================================================================</span></span><br><span class="line"><span class="function">活动路由:</span></span><br><span class="line"><span class="function">网络目标        网络掩码          网关       接口   跃点数</span></span><br><span class="line"><span class="function">          0.0.0.0          0.0.0.0    192.168.198.1  192.168.198.100     35</span></span><br><span class="line"><span class="function">       10.10.10.0    255.255.255.0            在链路上        10.10.10.1    291</span></span><br><span class="line"><span class="function">       10.10.10.1  255.255.255.255            在链路上        10.10.10.1    291</span></span><br><span class="line"><span class="function">     10.10.10.255  255.255.255.255            在链路上        10.10.10.1    291</span></span><br><span class="line"><span class="function">     ......</span></span><br><span class="line"><span class="function">===========================================================================</span></span><br><span class="line"><span class="function">永久路由:</span></span><br><span class="line"><span class="function">  网络地址          网络掩码  网关地址  跃点数</span></span><br><span class="line"><span class="function">   192.168.99.100  255.255.255.255     192.168.99.1       1</span></span><br><span class="line"><span class="function">===========================================================================</span></span><br><span class="line"><span class="function">......</span></span><br></pre></td></tr></table></figure>
<ul>
<li>删除路由</li>
</ul>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">route delete -p <span class="number">192</span>.<span class="number">168</span>.<span class="number">99</span>.<span class="number">100</span>/<span class="number">32</span> <span class="number">192</span>.<span class="number">168</span>.<span class="number">99</span>.<span class="number">1</span></span><br></pre></td></tr></table></figure>
<h3 id="网段路由">网段路由</h3>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">route add -p <span class="number">10</span>.<span class="number">10</span>.<span class="number">10</span>.<span class="number">0</span> mask <span class="number">255</span>.<span class="number">255</span>.<span class="number">255</span>.<span class="number">0</span> <span class="number">10</span>.<span class="number">10</span>.<span class="number">10</span>.<span class="number">1</span></span><br><span class="line"># 或者</span><br><span class="line">route add -p <span class="number">10</span>.<span class="number">10</span>.<span class="number">10</span>.<span class="number">0</span>/<span class="number">24</span> <span class="number">10</span>.<span class="number">10</span>.<span class="number">10</span>.<span class="number">1</span></span><br></pre></td></tr></table></figure>
<ul>
<li>删除</li>
</ul>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">route delete -p <span class="number">10</span>.<span class="number">10</span>.<span class="number">10</span>.<span class="number">0</span>/<span class="number">24</span> <span class="number">10</span>.<span class="number">10</span>.<span class="number">10</span>.<span class="number">1</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>常用命令</category>
      </categories>
      <tags>
        <tag>route</tag>
      </tags>
  </entry>
  <entry>
    <title>centos安装磁盘分区选择</title>
    <url>/2023/08/centos%E5%AE%89%E8%A3%85%E7%A3%81%E7%9B%98%E5%88%86%E5%8C%BA%E9%80%89%E6%8B%A9/index.html</url>
    <content><![CDATA[<h1 id="centos安装磁盘分区介绍">CentOS安装磁盘分区介绍</h1>
<h3 id="device-type(设备类型)">Device Type(设备类型)</h3>
<table>
<thead>
<tr>
<th>设备类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>标准分区</td>
<td>标准 分区可包含文件系统或swap空间，同时也可以为软件RAID或者LVM物理卷提供容器。</td>
</tr>
<tr>
<td>逻辑卷 LVM</td>
<td>创建LVM分区可自动生成LVM逻辑卷。便于扩容。</td>
</tr>
<tr>
<td>LVM 精简配置</td>
<td>使用精简配置，用户可以在程序需要的时候，动态扩展分配有效存储空间。</td>
</tr>
<tr>
<td>BTRFS</td>
<td>BTRFS是多个类设备功能的文件系统，相比ext2、ext3和ext4，它可以处理和管理更多文件、更大型的文件以及更大的卷。</td>
</tr>
</tbody>
</table>
<h2 id="分区配置参考">分区配置参考</h2>
<table>
<thead>
<tr>
<th>分区</th>
<th>所需容量</th>
<th>说明（单位默认为MB）</th>
</tr>
</thead>
<tbody>
<tr>
<td>/boot</td>
<td>&gt;=200MB</td>
<td>用于存放引导器（bootloader）和内核映像（kernel image），必选</td>
</tr>
<tr>
<td>swap</td>
<td>4096MB</td>
<td>交换分区，可选</td>
</tr>
<tr>
<td>/</td>
<td>剩余全部空间</td>
<td>大小为空，默认会分配剩余空间</td>
</tr>
</tbody>
</table>
<h3 id="file-systom(文件系统)">File Systom(文件系统)</h3>
<p>需要勾选旁边的重新格式化。</p>
<table>
<thead>
<tr>
<th>类型</th>
<th>最大支持文件系统</th>
<th>最大文件</th>
<th>最大子目录</th>
</tr>
</thead>
<tbody>
<tr>
<td>ext2</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>ext3</td>
<td>16TB</td>
<td>2TB</td>
<td>32000</td>
</tr>
<tr>
<td>ext4</td>
<td>1EB（1048576TB）</td>
<td>16TB</td>
<td>无限制</td>
</tr>
<tr>
<td>xfs</td>
<td>16EB（约1600百万TB）</td>
<td></td>
<td>千百万条目</td>
</tr>
</tbody>
</table>
]]></content>
      <categories>
        <category>系统</category>
      </categories>
      <tags>
        <tag>CentOS</tag>
      </tags>
  </entry>
  <entry>
    <title>cfssl 续签CA根证书</title>
    <url>/2023/04/cfssl-%E7%BB%AD%E7%AD%BECA%E6%A0%B9%E8%AF%81%E4%B9%A6/index.html</url>
    <content><![CDATA[<h4 id="如果ca证书过期，则可以使用下面方法重新生成ca证书">如果CA证书过期，则可以使用下面方法重新生成CA证书</h4>
<ul>
<li><strong>使用现有的CA私钥和CSR，重新生成</strong></li>
</ul>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">cfssl gencert -initca -ca-key ca-key.pem ca-csr.json | cfssljson -bare ca</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>使用现有的CA私钥和CA证书，重新生成</strong></li>
</ul>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">cfssl gencert -renewca -ca-key ca-key.pem -ca ca.pem  | cfssljson -bare ca</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>常用命令</category>
      </categories>
      <tags>
        <tag>cfssl</tag>
        <tag>ssl</tag>
      </tags>
  </entry>
  <entry>
    <title>coredns 部分pod启动失败</title>
    <url>/2023/08/coredns-%E9%83%A8%E5%88%86pod%E5%90%AF%E5%8A%A8%E5%A4%B1%E8%B4%A5/index.html</url>
    <content><![CDATA[<h5 id="查看现象及日志">查看现象及日志</h5>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@k8s-master ~]<span class="comment"># kubectl get pod -n kube-system </span></span><br><span class="line">NAME                                 READY   STATUS    RESTARTS   AGE</span><br><span class="line">coredns-59c7994f5d-87gq7             0/1     Running   2          4m5s</span><br><span class="line">coredns-59c7994f5d-db78l             1/1     Running   0          4m5s</span><br><span class="line">etcd-k8s-master                      1/1     Running   9          274d</span><br><span class="line">kube-apiserver-k8s-master            1/1     Running   11         2y121d</span><br><span class="line">kube-controller-manager-k8s-master   1/1     Running   4          2y121d</span><br><span class="line">kube-flannel-ds-amd64-77q6m          1/1     Running   0          3m58s</span><br><span class="line">kube-flannel-ds-amd64-fdjgm          1/1     Running   0          3m18s</span><br><span class="line">kube-flannel-ds-amd64-jrvjr          1/1     Running   0          2m41s</span><br><span class="line">kube-proxy-n7qqj                     1/1     Running   0          4m18s</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@k8s-master ~]# kubectl -n kube-system logs coredns-59c7994f5d-87gq7 </span><br><span class="line">E0824 05:26:56.720802       1 reflector.go:153] pkg/mod/k8s.io/client-go@v0.17.2/tools/cache/reflector.go:105: Failed to list *v1.Endpoints: Get https://10.96.0.1:443/api/v1/endpoints?limit=500&amp;resourceVersion=0: dial tcp 10.96.0.1:443: connect: no route to host</span><br><span class="line">E0824 05:26:56.720843       1 reflector.go:153] pkg/mod/k8s.io/client-go@v0.17.2/tools/cache/reflector.go:105: Failed to list *v1.Service: Get https://10.96.0.1:443/api/v1/services?limit=500&amp;resourceVersion=0: dial tcp 10.96.0.1:443: connect: no route to host</span><br><span class="line">E0824 05:26:56.720971       1 reflector.go:153] pkg/mod/k8s.io/client-go@v0.17.2/tools/cache/reflector.go:105: Failed to list *v1.Namespace: Get https://10.96.0.1:443/api/v1/namespaces?limit=500&amp;resourceVersion=0: dial tcp 10.96.0.1:443: connect: no route to host</span><br><span class="line">.:53</span><br><span class="line">[INFO] plugin/reload: Running configuration MD5 = 4e235fcc3696966e76816bcd9034ebc7</span><br><span class="line">CoreDNS-1.6.7</span><br><span class="line">linux/amd64, go1.13.6, da7f65b</span><br><span class="line">E0824 05:26:59.792027       1 reflector.go:153] pkg/mod/k8s.io/client-go@v0.17.2/tools/cache/reflector.go:105: Failed to list *v1.Service: Get https://10.96.0.1:443/api/v1/services?limit=500&amp;resourceVersion=0: dial tcp 10.96.0.1:443: connect: no route to host</span><br><span class="line">E0824 05:26:59.792049       1 reflector.go:153] pkg/mod/k8s.io/client-go@v0.17.2/tools/cache/reflector.go:105: Failed to list *v1.Namespace: Get https://10.96.0.1:443/api/v1/namespaces?limit=500&amp;resourceVersion=0: dial tcp 10.96.0.1:443: connect: no route to host</span><br><span class="line">E0824 05:26:59.792290       1 reflector.go:153] pkg/mod/k8s.io/client-go@v0.17.2/tools/cache/reflector.go:105: Failed to list *v1.Endpoints: Get https://10.96.0.1:443/api/v1/endpoints?limit=500&amp;resourceVersion=0: dial tcp 10.96.0.1:443: connect: no route to host</span><br><span class="line">E0824 05:27:02.864586       1 reflector.go:153] pkg/mod/k8s.io/client-go@v0.17.2/tools/cache/reflector.go:105: Failed to list *v1.Endpoints: Get https://10.96.0.1:443/api/v1/endpoints?limit</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h5 id="关键报错">关键报错</h5>
<p><code>Failed to list *v1.Endpoints: Get https://10.96.0.1:443/api/v1/endpoints?limit=500&amp;resourceVersion=0: dial tcp 10.96.0.1:443: connect: no route to host</code></p>
<p>路由问题导致：<code>iptables -L</code></p>
<h5 id="解决方法">解决方法</h5>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 先缩减</span></span><br><span class="line">kubectl scale --replicas=0  deploy/coredns -n kube-system</span><br><span class="line"><span class="comment"># 再增加</span></span><br><span class="line">kubectl scale --replicas=2  deploy/coredns -n kube-system</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>kubernetes</category>
      </categories>
      <tags>
        <tag>kubernetes</tag>
        <tag>coredns</tag>
      </tags>
  </entry>
  <entry>
    <title>date 计算未来距离现在隔了多少天</title>
    <url>/2023/07/date-%E8%AE%A1%E7%AE%97%E6%9C%AA%E6%9D%A5%E8%B7%9D%E7%A6%BB%E7%8E%B0%E5%9C%A8%E9%9A%94%E4%BA%86%E5%A4%9A%E5%B0%91%E5%A4%A9/index.html</url>
    <content><![CDATA[<h4 id="计算方法">计算方法</h4>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 未来N年距离今天是多少天，输入格式为：int</span></span><br><span class="line"><span class="function"><span class="title">select_year_day</span></span>() &#123;</span><br><span class="line">    <span class="built_in">local</span> val=<span class="variable">$1</span></span><br><span class="line">    <span class="built_in">echo</span> $(( ($(date -d `date -d &quot;+<span class="variable">$val</span> year&quot; +%F` +%s) - $(date -d `date +%F` +%s)) / 86400 ))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 未来N月距离今天是多少天，输入格式为：int</span></span><br><span class="line"><span class="function"><span class="title">select_month_day</span></span>() &#123;</span><br><span class="line">    <span class="built_in">local</span> val=<span class="variable">$1</span></span><br><span class="line">    <span class="built_in">echo</span> $(( ($(date -d `date -d &quot;+<span class="variable">$val</span> month&quot; +%F` +%s) - $(date -d `date +%F` +%s)) / 86400 ))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 未来某天距离今天是多少天，输入格式为标准时间格式:20230711、2023-07-11、&quot;Mon Jul 10 22:50:10 CST 2023&quot;</span></span><br><span class="line"><span class="function"><span class="title">select_day2day</span></span>() &#123;</span><br><span class="line">    <span class="built_in">local</span> val=<span class="variable">$1</span></span><br><span class="line">    <span class="built_in">echo</span> $(( ($(date -d `date -d &quot;<span class="variable">$val</span>&quot; +%F` +%s) - $(date -d `date +%F` +%s)) / 86400 ))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="使用示例">使用示例</h4>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@host-10-11 ~]<span class="comment"># select_year_day 1</span></span><br><span class="line">366</span><br><span class="line">[root@host-10-11 ~]<span class="comment"># select_year_day 20</span></span><br><span class="line">7305</span><br><span class="line">[root@host-10-11 ~]<span class="comment"># echo `select_year_day 20`</span></span><br></pre></td></tr></table></figure>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@host-10-11 ~]<span class="comment"># select_month_day 1</span></span><br><span class="line">31</span><br><span class="line">[root@host-10-11 ~]<span class="comment"># select_month_day 12</span></span><br><span class="line">366</span><br><span class="line">[root@host-10-11 ~]<span class="comment"># select_month_day 240</span></span><br><span class="line">7305</span><br></pre></td></tr></table></figure>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@host-10-11 ~]<span class="comment"># date +%F</span></span><br><span class="line">2023-07-10</span><br><span class="line">[root@host-10-11 ~]<span class="comment"># select_day2day 20230711</span></span><br><span class="line">1</span><br><span class="line">[root@host-10-11 ~]<span class="comment"># select_day2day 2023-07-11</span></span><br><span class="line">1</span><br><span class="line">[root@host-10-11 ~]<span class="comment"># select_day2day &quot;Mon Jul 11 22:50:10 CST 2023&quot;</span></span><br><span class="line">1</span><br><span class="line">[root@host-10-11 ~]<span class="comment"># select_day2day 20230801</span></span><br><span class="line">22</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>常用命令</category>
      </categories>
      <tags>
        <tag>date</tag>
      </tags>
  </entry>
  <entry>
    <title>git log 中文乱码的解决方案</title>
    <url>/2023/05/git-log-%E4%B8%AD%E6%96%87%E4%B9%B1%E7%A0%81%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/index.html</url>
    <content><![CDATA[<p>设置 Git 支持 utf-8 编码<br>
在命令行下输入以下命令：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git config --global core.quotepath false # 显示 status 编码</span><br><span class="line">git config --global gui.encoding utf-8 # 图形界面编码</span><br><span class="line">git config --global i18n.commit.encoding utf-8 # 提交信息编码</span><br><span class="line">git config --global i18n.logoutputencoding utf-8 # 输出 log 编码</span><br><span class="line">export LESSCHARSET=utf-8</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>常用命令</category>
      </categories>
      <tags>
        <tag>Git</tag>
      </tags>
  </entry>
  <entry>
    <title>git diff 忽略某些文件</title>
    <url>/2023/05/git-diff-%E5%BF%BD%E7%95%A5%E6%9F%90%E4%BA%9B%E6%96%87%E4%BB%B6/index.html</url>
    <content><![CDATA[<h3 id="自定义-`git diff driver`">自定义 <code>git diff driver</code></h3>
<h5 id="在项目的根目录下运行">在项目的根目录下运行</h5>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git config diff.nodiff.command /usr/bin/true</span><br></pre></td></tr></table></figure>
<h5 id="设置git-attribute">设置git attribute</h5>
<p>在项目根目录添加<code>.gitattributes</code>文件，内容如下</p>
<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 其中title_encode.txt和build.js是git diff 要忽略的文件</span></span><br><span class="line">title_encode.txt <span class="attr">diff</span>=nodiff</span><br><span class="line">/**/build.js  <span class="attr">diff</span>=nodiff</span><br></pre></td></tr></table></figure>
<p>貌似不能直接设置目录，如<code>public/dist/ diff=nodiff</code>会不生效，所以只能通过通配符来设置，设置为<code>public/dist/**/* diff=nodiff</code></p>
]]></content>
      <categories>
        <category>服务</category>
        <category>Git</category>
      </categories>
      <tags>
        <tag>Git</tag>
      </tags>
  </entry>
  <entry>
    <title>git 常用配置</title>
    <url>/2023/07/git-%E5%B8%B8%E7%94%A8%E9%85%8D%E7%BD%AE/index.html</url>
    <content><![CDATA[<ul>
<li>windows 开启大小写敏感</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git config --global  core.ignorecase <span class="literal">false</span></span><br></pre></td></tr></table></figure>
<ul>
<li>配置CA证书</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git config --global http.sslcainfo <span class="string">&quot;/etc/pki/git/ca.crt&quot;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>忽略ssl验证</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git config --global http.sslverify <span class="literal">false</span></span><br></pre></td></tr></table></figure>
</blockquote>
<ul>
<li>提交时转换为LF（Linux 结束符），检出（拉取）时不转换（建议配置，推荐配置）</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git config --global core.autocrlf input</span><br></pre></td></tr></table></figure>
<ul>
<li>配置用户信息</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git config user.name zhangsan</span><br><span class="line">git config user.email zsadmin@admin.com</span><br></pre></td></tr></table></figure>
<ul>
<li>格式化<code>git log</code>的时间（<code>Date:   Tue May 5 15:24:15 2020 +0800</code> —&gt; <code>Date:   2020-05-05 15:24:15 +0800</code>）</li>
</ul>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">git config --global log.date format:<span class="string">&#x27;%Y-%m-%d %H:%M:%S %z&#x27;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>设置<code>tag</code>命令别名（按时间排序）</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git config --global alias.ntag &quot;tag -n --sort=taggerdate&quot;</span><br><span class="line"># 使用方式</span><br><span class="line">git ntag</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>服务</category>
        <category>Git</category>
      </categories>
      <tags>
        <tag>Git</tag>
      </tags>
  </entry>
  <entry>
    <title>git 强制拉取master分支代码</title>
    <url>/2023/12/git-%E5%BC%BA%E5%88%B6%E6%8B%89%E5%8F%96master%E5%88%86%E6%94%AF%E4%BB%A3%E7%A0%81/index.html</url>
    <content><![CDATA[<p><strong>git 强制拉取master分支代码</strong></p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">git fetch --all &amp;&amp; git reset --hard origin/master &amp;&amp; git pull</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>服务</category>
        <category>Git</category>
      </categories>
      <tags>
        <tag>Git</tag>
      </tags>
  </entry>
  <entry>
    <title>ifconfig 网络设备配置查看命令</title>
    <url>/2023/07/ifconfig-%E7%BD%91%E7%BB%9C%E8%AE%BE%E5%A4%87%E9%85%8D%E7%BD%AE%E6%9F%A5%E7%9C%8B%E5%91%BD%E4%BB%A4/index.html</url>
    <content><![CDATA[<blockquote>
<p><code>ifconfig</code>是linux中用于显示或配置网络设备（网络接口卡）的命令，英文全称是network interfaces configuring</p>
<p>命令安装</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yum install -y net-tools</span><br></pre></td></tr></table></figure>
</blockquote>
<ul>
<li>
<p>配置网卡的IP地址</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ifconfig eth0 192.168.0.1 netmask 255.255.255.0</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>若想再在eth0上在配置一个<code>192.168.1.1/24</code> 的IP地址用下面的命令，配置网卡子接口。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ifconfig eth0:0 192.168.1.1 netmask 255.255.255.0</span><br><span class="line"><span class="comment"># 另一种掩码的写法</span></span><br><span class="line">ifconfig eth0:0 10.0.2.16/24</span><br></pre></td></tr></table></figure>
<blockquote>
<p>这时再用<code>ifconifg</code>命令查看，就可以看到两个网卡的信息了，分别为：<code>eth0</code>和<code>eth0:0</code>。若还想再增加IP，那网卡的命名就接着是：<code>eth0:1</code>、<code>eth0:2</code>……想要几个就填几个。</p>
</blockquote>
</li>
<li>
<p>配置网卡的硬件地址</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ifconfig eth0 hw ether 00:0c:29:97:ef:11</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>将网卡禁用</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ifconfig eth0 down</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>将网卡启用</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ifconfig eth0 up</span><br></pre></td></tr></table></figure>
</li>
</ul>
]]></content>
      <categories>
        <category>常用命令</category>
      </categories>
      <tags>
        <tag>ifconfig</tag>
      </tags>
  </entry>
  <entry>
    <title>ingress常用配置</title>
    <url>/2023/08/ingress%E5%B8%B8%E7%94%A8%E9%85%8D%E7%BD%AE/index.html</url>
    <content><![CDATA[<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">nginx.ingress.kubernetes.io/proxy-body-size: 8m</span><br><span class="line">https://kubernetes.github.io/ingress-nginx/user-guide/nginx-configuration/annotations/<span class="comment">#custom-max-body-size</span></span><br><span class="line">nginx.ingress.kubernetes.io/proxy-buffer-size: <span class="string">&quot;8k&quot;</span></span><br><span class="line">https://kubernetes.github.io/ingress-nginx/user-guide/nginx-configuration/annotations/<span class="comment">#proxy-buffer-size</span></span><br><span class="line">nginx.ingress.kubernetes.io/backend-protocol: <span class="string">&quot;HTTPS&quot;</span></span><br><span class="line">https://kubernetes.github.io/ingress-nginx/user-guide/nginx-configuration/annotations/<span class="comment">#backend-protocol</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>kubernetes</category>
      </categories>
      <tags>
        <tag>ingress</tag>
      </tags>
  </entry>
  <entry>
    <title>iperf 网络传输性能测试工具</title>
    <url>/2023/06/iperf-%E7%BD%91%E7%BB%9C%E4%BC%A0%E8%BE%93%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95%E5%B7%A5%E5%85%B7/index.html</url>
    <content><![CDATA[<h1 id="iperf-网络传输性能测试工具">iperf 网络传输性能测试工具</h1>
<p>官网：<a href="https://iperf.fr/">https://iperf.fr/</a></p>
<h3 id="安装">安装</h3>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@host-10-11 ~]<span class="comment"># rpm -ivh iperf3-3.1.3-1.fc24.x86_64.rpm </span></span><br><span class="line">Preparing...                          <span class="comment">################################# [100%]</span></span><br><span class="line">Updating / installing...</span><br><span class="line">   1:iperf3-3.1.3-1.fc24              <span class="comment">################################# [100%]</span></span><br><span class="line">[root@host-10-11 ~]<span class="comment"># rpm -ql iperf3</span></span><br><span class="line">/usr/bin/iperf3</span><br><span class="line">/usr/lib64/libiperf.so.0</span><br><span class="line">/usr/lib64/libiperf.so.0.0.0</span><br><span class="line">/usr/share/doc/iperf3</span><br><span class="line">/usr/share/doc/iperf3/LICENSE</span><br><span class="line">/usr/share/doc/iperf3/README.md</span><br><span class="line">/usr/share/doc/iperf3/RELEASE_NOTES</span><br><span class="line">/usr/share/man/man1/iperf3.1.gz</span><br><span class="line">/usr/share/man/man3/libiperf.3.gz</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="服务端">服务端</h3>
<table>
<thead>
<tr>
<th>选项</th>
<th>释义</th>
</tr>
</thead>
<tbody>
<tr>
<td>-s</td>
<td>Iperf服务器模式</td>
</tr>
<tr>
<td>-u</td>
<td>使用UDP方式，默认TCP方式</td>
</tr>
<tr>
<td>-p</td>
<td>指定服务端端口，5201</td>
</tr>
</tbody>
</table>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">iperf3 -s </span><br><span class="line">-----------------------------------------------------------</span><br><span class="line">Server listening on 5201</span><br><span class="line">-----------------------------------------------------------</span><br></pre></td></tr></table></figure>
<h3 id="客户端">客户端</h3>
<table>
<thead>
<tr>
<th>选项</th>
<th>释义</th>
</tr>
</thead>
<tbody>
<tr>
<td>-c</td>
<td>运行Iperf的客户端模式，连接到指定的Iperf服务器端，服务器端的IP为1192.168.1.100</td>
</tr>
<tr>
<td>-u</td>
<td>指定udp协议</td>
</tr>
<tr>
<td>-p</td>
<td>设置端口，与服务器端的监听端口一致。默认是5201端口，与tcp的一样</td>
</tr>
<tr>
<td>-b</td>
<td>目标带宽，单位为bits/sec(0表示无限制)，单位K，M，G</td>
</tr>
<tr>
<td>-t</td>
<td>设置传输的总时间。Iperf在指定的时间内，重复的发送指定长度的数据包。默认是10秒</td>
</tr>
<tr>
<td>-n</td>
<td>传输的字节数，不能和-t同时使用，单位K，M，G</td>
</tr>
<tr>
<td>-R</td>
<td>运行反向模式(服务器发送，客户端接收)</td>
</tr>
</tbody>
</table>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">iperf3 -c 10.10.10.12  -t 10</span><br><span class="line">Connecting to host 10.10.10.12, port 5201</span><br><span class="line">[  4] <span class="built_in">local</span> 10.10.10.11 port 48760 connected to 10.10.10.12 port 5201</span><br><span class="line">[ ID] Interval           Transfer     Bandwidth       Retr  Cwnd</span><br><span class="line">[  4]   0.00-1.00   sec   557 MBytes  4.67 Gbits/sec    0   1.04 MBytes       </span><br><span class="line">[  4]   1.00-2.00   sec   635 MBytes  5.32 Gbits/sec    0   1.30 MBytes       </span><br><span class="line">[  4]   2.00-3.00   sec   654 MBytes  5.49 Gbits/sec    0   1.40 MBytes       </span><br><span class="line">[  4]   3.00-4.00   sec   671 MBytes  5.63 Gbits/sec    0   1.45 MBytes       </span><br><span class="line">[  4]   4.00-5.00   sec   650 MBytes  5.44 Gbits/sec    0   1.53 MBytes       </span><br><span class="line">[  4]   5.00-6.00   sec   674 MBytes  5.67 Gbits/sec    0   1.55 MBytes       </span><br><span class="line">[  4]   6.00-7.00   sec   675 MBytes  5.66 Gbits/sec    0   1.59 MBytes       </span><br><span class="line">[  4]   7.00-8.00   sec   705 MBytes  5.90 Gbits/sec    0   1.64 MBytes       </span><br><span class="line">[  4]   8.00-9.00   sec   668 MBytes  5.61 Gbits/sec    0   1.67 MBytes       </span><br><span class="line">[  4]   9.00-10.00  sec   701 MBytes  5.88 Gbits/sec    0   1.67 MBytes       </span><br><span class="line">- - - - - - - - - - - - - - - - - - - - - - - - -</span><br><span class="line">[ ID] Interval           Transfer     Bandwidth       Retr</span><br><span class="line">[  4]   0.00-10.00  sec  6.43 GBytes  5.53 Gbits/sec    0             sender</span><br><span class="line">[  4]   0.00-10.00  sec  6.43 GBytes  5.52 Gbits/sec                  receiver</span><br><span class="line"></span><br><span class="line">iperf Done.</span><br></pre></td></tr></table></figure>
<blockquote>
<p>可以看到带宽平均在5.5Gbits/sec左右。</p>
</blockquote>
]]></content>
      <categories>
        <category>常用命令</category>
      </categories>
      <tags>
        <tag>iperf</tag>
      </tags>
  </entry>
  <entry>
    <title>iptablse 配置DNAT转发</title>
    <url>/2023/07/iptablse-%E9%85%8D%E7%BD%AEDNAT%E8%BD%AC%E5%8F%91/index.html</url>
    <content><![CDATA[<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">192.168.39.100 --------------&gt; 192.168.39.33:443</span><br><span class="line">                                   ||</span><br><span class="line">                               10.10.10.10   --------------&gt;   10.10.10.15:8443</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">iptables -t nat -A PREROUTING -d 192.168.39.33 -p tcp --dport 443 -j DNAT --to-destination 10.10.10.15:8443</span><br><span class="line">iptables -t nat -A OUTPUT -d 192.168.39.33 -p tcp --dport 443 -j DNAT --to-destination 10.10.10.15:8443  <span class="comment"># 实现本机访问</span></span><br><span class="line">iptables -t nat -A POSTROUTING -d 10.10.10.15/32 -o eth0 -j SNAT --to-source 10.10.10.10</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>系统</category>
      </categories>
      <tags>
        <tag>iptables</tag>
      </tags>
  </entry>
  <entry>
    <title>k8s(kubectl) 查看pod日志或同时查看多个pod的日志</title>
    <url>/2023/08/k8s-kubectl-%E6%9F%A5%E7%9C%8Bpod%E6%97%A5%E5%BF%97%E6%88%96%E5%90%8C%E6%97%B6%E6%9F%A5%E7%9C%8B%E5%A4%9A%E4%B8%AApod%E7%9A%84%E6%97%A5%E5%BF%97/index.html</url>
    <content><![CDATA[<p>查看单个pod的日志</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">kubectl -n kube-system logs -f --<span class="built_in">tail</span> 100 pod_name</span><br></pre></td></tr></table></figure>
<p>使用标签选择器指定要查看日志的Pod的选择条件</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">kubectl -n kube-system logs -f -l k8s-app=kube-dns</span><br></pre></td></tr></table></figure>
<p>若遇到如下错误：</p>
<blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">error: you are attempting to follow 11 log streams, but maximum allowed concurrency is 5, use --max-log-requests to increase the limit</span><br></pre></td></tr></table></figure>
<p>这个错误是因为默认情况下，<code>kubectl</code>在同时跟踪日志流时有最大并发限制。可以按照错误信息中提到的建议使用<code>--max-log-requests</code>参数来修改限制。</p>
</blockquote>
<p>示例如下：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 推荐方式</span></span><br><span class="line">kubectl -n kube-system logs -f --<span class="built_in">tail</span> 10 --max-log-requests=100 -l k8s-app=kube-dns</span><br></pre></td></tr></table></figure>
<p>使用deploy名称查看</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 命令支持，但实际感觉只显示了一个pod的日志</span></span><br><span class="line">kubectl -n kube-system logs -f --<span class="built_in">tail</span> 100 deployment.apps/coredns</span><br></pre></td></tr></table></figure>
<p>常用的选项如下：</p>
<ul>
<li>
<p><code>-f</code> 实时查看日志</p>
</li>
<li>
<p><code>--previous=true</code> 可以查看被中断的pod的日志，如果需要查看崩溃的容器日志，这个参数有用</p>
</li>
<li>
<p><code>--all-containers=true</code> 查看pod中所有容器的日志（适合一个pod内有多个容器的场景）</p>
</li>
<li>
<p><code>-c 容器名字</code> 如果pod内有多个容器，必须使用 <code>-c</code> 参数指定具体容器的名字</p>
</li>
<li>
<p><code>--prefix</code>：输出对应<code>Pod</code>的名称。</p>
</li>
<li>
<p><code>--max-log-requests</code>：最大查看<code>Pod</code>的个数。</p>
</li>
<li>
<p><code>-l a!=a</code>：查看标签不是<code>a!=a</code>的<code>Pod</code>的日志</p>
</li>
</ul>
]]></content>
      <categories>
        <category>kubernetes</category>
      </categories>
      <tags>
        <tag>kubernetes</tag>
      </tags>
  </entry>
  <entry>
    <title>k8s 一直报 no destination available</title>
    <url>/2023/08/k8s-%E4%B8%80%E7%9B%B4%E6%8A%A5-no-destination-available/index.html</url>
    <content><![CDATA[<h3 id="no-destination available">no destination available</h3>
<p>内核日志不停报 <code>no destination available</code> 这样的 warning 日志，查看 dmesg:</p>
<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="section">[root@k8s-master ~]</span><span class="comment"># dmesg</span></span><br><span class="line">......</span><br><span class="line"><span class="section">[  760.443033]</span> IPVS: rr: TCP 10.10.10.31:32567 - no destination available</span><br><span class="line"><span class="section">[  764.195466]</span> IPVS: rr: TCP 10.10.10.31:32567 - no destination available</span><br><span class="line"><span class="section">[  764.210921]</span> IPVS: rr: TCP 10.10.10.31:32567 - no destination available</span><br><span class="line"><span class="section">[  764.457063]</span> IPVS: rr: TCP 10.10.10.31:32567 - no destination available</span><br><span class="line"><span class="section">[  772.203102]</span> IPVS: rr: TCP 10.10.10.31:32567 - no destination available</span><br><span class="line"><span class="section">[  772.218299]</span> IPVS: rr: TCP 10.10.10.31:32567 - no destination available</span><br><span class="line"><span class="section">[  772.464662]</span> IPVS: rr: TCP 10.10.10.31:32567 - no destination available</span><br><span class="line">......</span><br></pre></td></tr></table></figure>
<p>一般是因为有 Service 用了 <code>externalTrafficPolicy:Local</code>，当 Node 上没有该 Service 对应 Pod 时，Node 上的该 Service 对应 NodePort 的 IPVS 规则里，RS 列表为空。当有流量打到这个 Node 的对应 NodePort 上时，由于 RS 列表为空，内核就会报这个 warning 日志。</p>
<p>在云厂商托管的 K8S 服务里，通常是 LB 会去主动探测 NodePort，发到没有这个 Service 对应 Pod 实例的 Node 时，报文被正常丢弃，从而内核报 warning 日志。</p>
<p>这个日志不会对服务造成影响，可以忽略不管。如果是在腾讯云 TKE 环境里，并且用的 TencentOS，可以设置一个内核参数来抑制这个 warning 日志输出:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sysctl -w net.ipv4.vs.ignore_no_rs_error=1</span><br></pre></td></tr></table></figure>
<h4 id="参考资料">参考资料</h4>
<blockquote>
<p><a href="https://imroc.cc/kubernetes/troubleshooting/node/ipvs-no-destination-available.html#ipvs-no-destination-available">IPVS no destination available - Kubernetes 实践指南 (imroc.cc)</a><br>
<a href="https://github.com/kubernetes/kubernetes/issues/100925">IPVS 错误日志占用外部流量策略：服务中的本地选项 ·问题 #100925 ·Kubernetes/Kubernetes (github.com)</a><br>
<a href="https://github.com/Tencent/TencentOS-kernel/commit/fe66d659f44e13c0e1c007782309d79c987b4788">net: ipvs print limit · Tencent/TencentOS-kernel@fe66d65 (github.com)</a></p>
</blockquote>
]]></content>
      <categories>
        <category>kubernetes</category>
      </categories>
      <tags>
        <tag>kubernetes</tag>
      </tags>
  </entry>
  <entry>
    <title>k8s 滚动更新策略</title>
    <url>/2023/12/k8s-%E6%BB%9A%E5%8A%A8%E6%9B%B4%E6%96%B0%E7%AD%96%E7%95%A5/index.html</url>
    <content><![CDATA[<h3 id="k8s-滚动更新策略">k8s 滚动更新策略</h3>
<p><code>type</code>：设置更新策略。有两个可选项：<code>recreate</code>和<code>RollingUpdate</code>（默认）。<code>Recreate</code>表示全部重新创建，<code>RollingUpdate</code>表示滚动更新</p>
<blockquote>
<p><code>maxSurge</code> 升级过程中最多可以比原先设置多出的Pod数量，可以是数字，也可以是比例。如一次性拉起一倍预期Pod数量，设置为<code>100%</code>。</p>
<p><code>maxUnavailable</code>:升级过程中最多允许有多少个Pod处于不可用状态</p>
<p><code>maxSurge</code>和<code>maxUnavailable</code>可以用来决定更新是的最大Pod数和最小Pod数，并且在更新策略为<code>RollingUpdate</code>时才需要设置</p>
</blockquote>
<h3 id="例如">例如</h3>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">replicas:</span> <span class="number">5</span></span><br><span class="line">  <span class="attr">strategy:</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">RollingUpdate</span>  </span><br><span class="line">    <span class="attr">rollingUpdate:</span></span><br><span class="line">      <span class="attr">maxSurge:</span> <span class="number">1</span> <span class="comment"># 默认为 25%</span></span><br><span class="line">      <span class="attr">maxUnavailable:</span> <span class="number">0</span> <span class="comment"># # 默认为 25%</span></span><br><span class="line">        <span class="comment"># maxSurge: 1</span></span><br><span class="line">        <span class="comment"># maxUnavailable: 0</span></span><br><span class="line">        <span class="comment"># 更新时 最大的Pod数是 replicas+ maxSurge = 5+1 =6，最大的个数是6</span></span><br><span class="line">        <span class="comment"># 最小pod数是 replicas - maxUnavailable = 5-0 = 5,最小Pod数是5，所以只能先启动一个Pod，再删除一个Pod</span></span><br></pre></td></tr></table></figure>
<h4 id="注意">注意</h4>
<blockquote>
<p>实际环境中可以根据<code>replicas</code>配置合理的值</p>
<p>当<code>maxSurge</code>设置为0的时候，<code>maxUnavailable</code>不能设置为0。<code>maxSurge=0</code>时先删除后启动，<code>maxSurge!=0</code>时先启动后删除</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">revisionHistoryLimit:</span> <span class="number">10</span> <span class="comment"># revisionHistoryLimit表示保留的版本数</span></span><br><span class="line">  <span class="attr">minReadySeconds:</span> <span class="number">5</span> <span class="comment"># minReadySeconds表示Pod启动后经过多少秒Pod才开始对外提供服务，默认是0</span></span><br></pre></td></tr></table></figure>
</blockquote>
]]></content>
      <categories>
        <category>kubernetes</category>
      </categories>
      <tags>
        <tag>kubernetes</tag>
      </tags>
  </entry>
  <entry>
    <title>kubectl create / replace / apply</title>
    <url>/2023/04/kubectl-create-replace-apply/index.html</url>
    <content><![CDATA[<h4 id="命令介绍">命令介绍</h4>
<p>使用 kubectl create 命令在 Kubernetes 里创建这个 Deployment 对象</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">kubectl create -f nginx.yaml</span><br></pre></td></tr></table></figure>
<p>当我们想要修改镜像的时候，除了使用kubectl edit /kubectl set image ，我们还可以使用修改nginx.yaml文件。然后使用 kubectl replace 来触发更新。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 对于这种先 kubectl create，再 replace 的操作，我们称为命令式配置文件操作。</span></span><br><span class="line">kubectl replace -f nginx.yaml</span><br></pre></td></tr></table></figure>
<p>我们还可以通过 kubectl apply 创建deployment</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">kubectl apply -f nginx.yaml</span><br><span class="line"><span class="comment"># 如果修改镜像，我们只需要修改nginx.yaml文件，然后执行</span></span><br><span class="line">kubectl apply -f nginx.yaml</span><br></pre></td></tr></table></figure>
<h4 id="kubectl-create / replace 与kubectl apply 的区别">kubectl create / replace 与kubectl apply 的区别</h4>
<ul>
<li>kubectl replace 的执行过程，是使用新的 YAML 文件中的 API 对象，替换原有的 API 对象</li>
<li>kubectl apply，则是执行了一个对原有 API 对象的 PATCH 操作。</li>
</ul>
]]></content>
      <categories>
        <category>kubernetes</category>
      </categories>
      <tags>
        <tag>kubernetes</tag>
      </tags>
  </entry>
  <entry>
    <title>kubectl - 如何列出Pod中运行的所有容器，包括初始化容器</title>
    <url>/2023/07/kubectl-%E5%A6%82%E4%BD%95%E5%88%97%E5%87%BAPod%E4%B8%AD%E8%BF%90%E8%A1%8C%E7%9A%84%E6%89%80%E6%9C%89%E5%AE%B9%E5%99%A8%EF%BC%8C%E5%8C%85%E6%8B%AC%E5%88%9D%E5%A7%8B%E5%8C%96%E5%AE%B9%E5%99%A8/index.html</url>
    <content><![CDATA[<p>初始化容器存储在<code>spec.initContainers</code>中:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">kubectl get pods POD_NAME_HERE -o jsonpath=&#123;.spec.initContainers[*].name&#125;</span><br></pre></td></tr></table></figure>
<p>运行的所有容器在<code>containers</code>中</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">kubectl get pods POD_NAME_HERE -o jsonpath=&#123;.spec.containers[*].name&#125;</span><br></pre></td></tr></table></figure>
<p>可以使用<a href="https://kubernetes.io/zh-cn/docs/reference/kubectl/jsonpath/">JSONPath</a>来显示两者</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">kubectl get pod POD_NAME_HERE -o jsonpath=<span class="string">&quot;&#123;.spec[&#x27;containers&#x27;,&#x27;initContainers&#x27;][*].name&#125;&quot;</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>kubernetes</category>
      </categories>
      <tags>
        <tag>kubernetes</tag>
      </tags>
  </entry>
  <entry>
    <title>linux 常用的几个压缩命令</title>
    <url>/2023/06/linux-%E5%B8%B8%E7%94%A8%E7%9A%84%E5%87%A0%E4%B8%AA%E5%8E%8B%E7%BC%A9%E5%91%BD%E4%BB%A4/index.html</url>
    <content><![CDATA[<h1 id="linux-常用的几个压缩命令">linux 常用的几个压缩命令</h1>
<h2 id="常用压缩命令介绍">常用压缩命令介绍</h2>
<h4 id="zip压缩">zip压缩</h4>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">zip -r outsrkem.github.io.zip outsrkem.github.io 压缩（-r是压缩目录）</span><br><span class="line">unzip outsrkem.github.io.zip			解压缩</span><br></pre></td></tr></table></figure>
<h4 id="gz压缩">gz压缩</h4>
<blockquote>
<p>不会打包（不支持压缩目录），不保留源文件</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">gzip 源文件                压缩</span><br><span class="line">gzip -r 原目录            （只对目录内文件单独压缩, 可自行试验）</span><br><span class="line">gzip -c 源文件 &gt; 压缩包	  保留源文件压缩</span><br><span class="line">gunzip 压缩包              解压缩</span><br><span class="line">gzip -d 压缩包             解压缩</span><br></pre></td></tr></table></figure>
<h4 id="bz2">bz2</h4>
<blockquote>
<p>不能压缩目录</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">bzip2	  源文件        （压缩，-k保留源文件）</span><br><span class="line">bzip2 -d  压缩包        （解压，-k保留压缩包）</span><br><span class="line">bunzip2   压缩包        （解压，-k保留压缩包）</span><br></pre></td></tr></table></figure>
<h4 id="xz-压缩">xz 压缩</h4>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">xz -k  待压缩文件      (压缩成功后生成 xxx.xz,原文件会被删除。)</span><br><span class="line">xz -dk 压缩包         (使用参数 -k 压缩或解压时保持源文件不被删除， xz 待压缩文件； -d --decompress  解压缩)</span><br><span class="line"><span class="comment"># 使用参数 -0, -1, -2, … -6, … -9 ,xz 命令的默认为 -6</span></span><br><span class="line">xz -k -9 待压缩文件</span><br><span class="line">xz -l 压缩包          (显示 .xz 文件的基本信息)</span><br></pre></td></tr></table></figure>
<h4 id="tar-命令">tar 命令</h4>
<ul>
<li>tar打包，不压缩</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">tar -cvf  打包名 源文件 	 	（打包）</span><br><span class="line">tar -xvf  文件包名			（解包，-c打包，-x解包，-v显示过程，-f指定打包文件名</span><br></pre></td></tr></table></figure>
<ul>
<li>tar打包同时压缩</li>
</ul>
<blockquote>
<ul>
<li>gz压缩</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">tar -zcvf 压缩包名 源文件(目录)    <span class="comment"># 压缩, -z, --gzip, --gunzip, --ungzip，识别 gz 格式 (filter the archive through gzip)</span></span><br><span class="line">tar -zxvf 压缩包名               <span class="comment"># 解压</span></span><br></pre></td></tr></table></figure>
<ul>
<li>bz2压缩</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">tar -jcvf 压缩包名 源文件(目录)   <span class="comment"># 压缩, -j, --bzip2，识别 bz2 格式 (filter the archive through bzip2)</span></span><br><span class="line">tar -jxvf 压缩包名              <span class="comment"># 解压</span></span><br></pre></td></tr></table></figure>
<ul>
<li>xz 压缩</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">tar -Jcvf 压缩包名 源文件(目录)     <span class="comment"># 压缩, -J, --xz，识别 xz 格式  (filter the archive through xz)</span></span><br><span class="line">tar -Jxvf 压缩包名                <span class="comment"># 解压</span></span><br></pre></td></tr></table></figure>
</blockquote>
<ul>
<li>tar 命令其他参数</li>
</ul>
<blockquote>
<ul>
<li>只查看不解压</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">tar -ztvf	（gz格式，-t，只查看，不解压）</span><br><span class="line">tar -jtvf	（bz2格式）</span><br><span class="line">tar ft      (通用命令)</span><br></pre></td></tr></table></figure>
</blockquote>
<hr>
<blockquote>
<ul>
<li>指定压缩位置</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">tar -jxvf root.tar.bz2 -C /tmp/</span><br></pre></td></tr></table></figure>
<ul>
<li>压缩指定路径下的文件到当前目录</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">tar -zcv -C /usr/local/src/ -f 123.tar.gz 123.txt</span><br></pre></td></tr></table></figure>
</blockquote>
<hr>
<blockquote>
<ul>
<li>解压指定文件到指定位置</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">tar -xzv -C /tmp -f a.tar.gz 待解压文件路劲    (写用-t查看时显示的有路径路径文件名)</span><br></pre></td></tr></table></figure>
<ul>
<li>tar通用解压</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">tar -xf[v] 文件名	（解压）-v显示过程</span><br></pre></td></tr></table></figure>
</blockquote>
<h2 id="几种压缩格式的压缩率比较">几种压缩格式的压缩率比较</h2>
<blockquote>
<p>参与比较的压缩格式有：zip，gz，bz2，xz，tar</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@host-10-11 ~]<span class="comment"># du -sh outsrkem.github.io</span></span><br><span class="line">142M	outsrkem.github.io</span><br><span class="line">[root@host-10-11 ~]<span class="comment"># ls -lh</span></span><br><span class="line">total 266M</span><br><span class="line">drwxr-xr-x 11 root root 4.0K May 31 19:51 outsrkem.github.io</span><br><span class="line">-rw-r--r--  1 root root 106M Jun  2 20:28 outsrkem.github.io.tar      (tar -cvf)</span><br><span class="line">-rw-r--r--  1 root root  40M Jun  2 20:34 outsrkem.github.io.tar.bz2  (tar -jcvf)</span><br><span class="line">-rw-r--r--  1 root root  43M Jun  2 20:32 outsrkem.github.io.tar.gz   (tar -zcvf)</span><br><span class="line">-rw-r--r--  1 root root  31M Jun  2 20:33 outsrkem.github.io.tar.xz   (tar -Jcvf)</span><br><span class="line">-rw-r--r--  1 root root  26M Jun  2 20:57 outsrkem.github.io.tar.xz   (tar -cvf; xz -9)</span><br><span class="line">-rw-r--r--  1 root root  49M Jun  2 20:13 outsrkem.github.io.zip      (zip -r)</span><br></pre></td></tr></table></figure>
<ul>
<li>通过比较得出</li>
</ul>
<table>
<thead>
<tr>
<th>源文件</th>
<th>tar</th>
<th>zip</th>
<th>gz</th>
<th>bz2</th>
<th>xz (-6)</th>
<th>xz (-9)</th>
</tr>
</thead>
<tbody>
<tr>
<td>142M</td>
<td>106M</td>
<td>49M</td>
<td>43M</td>
<td>40M</td>
<td>31M</td>
<td>26M</td>
</tr>
<tr>
<td>0.0%</td>
<td>74.6%</td>
<td>34.5%</td>
<td>30.2%</td>
<td>28.1%</td>
<td>21.8%</td>
<td>18.3%</td>
</tr>
</tbody>
</table>
<blockquote>
<p>压缩率</p>
<p>压缩率（Compression rate），描述压缩文件的效果名，是文件压缩后的大小与压缩前的大小之比，例如：把100m的文件压缩后是90m，压缩率为90/100*100%=90%，压缩率一般是越小越好，但是压得越小，解压时间越长。</p>
</blockquote>
<h2 id="附">附</h2>
<blockquote>
<p><code>tar -Jcvf</code> 不支持设定压缩率（默认是6），如果要指定则需要单独使用<code>xz</code>命令压缩</p>
<ul>
<li>先使用<code>tar -cvf</code>打包</li>
<li>再使用<code>xz -9</code>压缩（有0-9个级别）</li>
<li>解压可以直接使用<code>tar xf</code>命令</li>
</ul>
</blockquote>
]]></content>
      <categories>
        <category>常用命令</category>
      </categories>
      <tags>
        <tag>tar</tag>
        <tag>gzip</tag>
        <tag>bzip2</tag>
        <tag>xz</tag>
      </tags>
  </entry>
  <entry>
    <title>linux 生成补丁以及给文件打补丁</title>
    <url>/2023/08/linux-%E7%94%9F%E6%88%90%E8%A1%A5%E4%B8%81%E4%BB%A5%E5%8F%8A%E7%BB%99%E6%96%87%E4%BB%B6%E6%89%93%E8%A1%A5%E4%B8%81/index.html</url>
    <content><![CDATA[<h5 id="生成补丁文件（建议在同一目录中操作）">生成补丁文件（建议在同一目录中操作）</h5>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">diff -Naur old.txt new.txt &gt; test.patch</span><br></pre></td></tr></table></figure>
<blockquote>
<p>old.txt 旧的文件</p>
<p>new.txt 新的文件</p>
<p>test.patch 生成的补丁文件</p>
<p>生成的补丁文件如下</p>
</blockquote>
<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line">--- coredns.yaml	2020-08-22 16:39:34.555058930 +0800</span><br><span class="line">+++ 1.yaml 2020-08-22 16:39:34.555058950 +0800   <span class="comment"># 这行实际上没用，可以删除</span></span><br><span class="line">@@ -81,6 +81,7 @@</span><br><span class="line">   <span class="comment"># replicas: not specified here:</span></span><br><span class="line">   <span class="comment"># 1. Default is 1.</span></span><br><span class="line">   <span class="comment"># 2. Will be tuned in real time if DNS horizontal auto-scaling is turned on.</span></span><br><span class="line">+  replicas: 1</span><br><span class="line">   strategy:</span><br><span class="line">     type: RollingUpdate</span><br><span class="line">     rollingUpdate:</span><br></pre></td></tr></table></figure>
<h5 id="给旧文件打补丁">给旧文件打补丁</h5>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">patch -p0 &lt; test.patch</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>常用命令</category>
      </categories>
      <tags>
        <tag>diff</tag>
        <tag>patch</tag>
      </tags>
  </entry>
  <entry>
    <title>linux 获取随机数</title>
    <url>/2023/07/linux-%E8%8E%B7%E5%8F%96%E9%9A%8F%E6%9C%BA%E6%95%B0/index.html</url>
    <content><![CDATA[<p>要获取一个随机数，可以使用系统环境变量</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="variable">$RANDOM</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>常用命令</category>
      </categories>
      <tags>
        <tag>shell</tag>
      </tags>
  </entry>
  <entry>
    <title>linux路由管理(route)</title>
    <url>/2023/06/linux%E8%B7%AF%E7%94%B1%E7%AE%A1%E7%90%86-route/index.html</url>
    <content><![CDATA[<h2 id="linux-路由管理（route）">Linux 路由管理（route）</h2>
<h3 id="网段路由">网段路由</h3>
<blockquote>
<ul>
<li><strong>添加一个网络</strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">route add -net 10.4.4.0/24 dev ens33</span><br><span class="line">route add -net 10.4.4.0/24 gw 10.4.4.1  # route add -net 10.4.4.0 netmask 255.255.255.0 gw 10.4.4.1</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>屏蔽一条路由</strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">route add -net 10.4.4.0 netmask 255.255.255.0 reject</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>删除一条路由</strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">route del -net 10.4.4.0 netmask 255.255.255.0 reject  # 删除屏蔽的路由需要加 reject</span><br><span class="line">route del -net 10.4.5.0/24</span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="默认网关">默认网关</h3>
<blockquote>
<ul>
<li><strong>添加默认网关</strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">route add default gw 10.10.10.1</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>删除默认网关</strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">route del default gw 10.10.10.1</span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="主机路由">主机路由</h3>
<blockquote>
<ul>
<li><strong>添加一个有网关的路由</strong></li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">route add -host 10.1.1.100 dev ens33 gw 10.1.1.1</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>添加一条直连的路由</strong></li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">route add -host 10.1.1.100 dev ens33</span><br><span class="line"></span><br><span class="line"><span class="comment"># 如下：</span></span><br><span class="line">[root@host-10-11 ~]<span class="comment"># route -n </span></span><br><span class="line">Kernel IP routing table</span><br><span class="line">Destination     Gateway         Genmask         Flags Metric Ref    Use Iface</span><br><span class="line">0.0.0.0         192.168.29.2    0.0.0.0         UG    100    0        0 ens34</span><br><span class="line">10.1.1.100      0.0.0.0         255.255.255.255 UH    0      0        0 ens33</span><br><span class="line">10.10.10.0      0.0.0.0         255.255.255.0   U     100    0        0 ens33</span><br><span class="line">192.168.29.0    0.0.0.0         255.255.255.0   U     100    0        0 ens34</span><br><span class="line">Gateway是0.0.0.0，表示路由开销为0（直连，通过ARP解析通信）。</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>删除主机IP</strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">route del -host 10.1.1.100</span><br></pre></td></tr></table></figure>
</blockquote>
<hr>
<h2 id="附：">附：</h2>
<blockquote>
<p><strong>路由标识的意思介绍</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Flags  Possible flags include</span><br><span class="line">   U (route is up)</span><br><span class="line">   H (target is a host)</span><br><span class="line">   G (use gateway)</span><br><span class="line">   R (reinstate route for dynamic routing)</span><br><span class="line">   D (dynamically installed by daemon or redirect)</span><br><span class="line">   M (modified from routing daemon or redirect)</span><br><span class="line">   A (installed by addrconf)</span><br><span class="line">   C (cache entry)</span><br><span class="line">   !  (reject route)</span><br></pre></td></tr></table></figure>
</blockquote>
]]></content>
      <categories>
        <category>常用命令</category>
      </categories>
      <tags>
        <tag>route</tag>
      </tags>
  </entry>
  <entry>
    <title>nc 命令使用简介</title>
    <url>/2023/07/nc-%E5%91%BD%E4%BB%A4%E4%BD%BF%E7%94%A8%E7%AE%80%E4%BB%8B/index.html</url>
    <content><![CDATA[<p>NC命令是一款重要的网络工具，它是一款强大的网络工具，它可以将数据包准确的传输和接收，提供了一种高效的数据传输方式。NC的全称是Netcat，它基于TCP/IP协议，可以在网络上进行数据传输和监听，很好地解决了网络连接的问题。</p>
<h3 id="安装nc命令">安装nc命令</h3>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yum -y install nc</span><br></pre></td></tr></table></figure>
<h3 id="常用选项">常用选项</h3>
<table>
<thead>
<tr>
<th>选项</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>-l</td>
<td>使用监听模式，管控传入的资料</td>
</tr>
<tr>
<td>-p</td>
<td>设置本地主机使用的通信端口</td>
</tr>
<tr>
<td>-s</td>
<td>设置本地主机送出数据包的IP地址</td>
</tr>
<tr>
<td>-u</td>
<td>使用UDP传输协议</td>
</tr>
<tr>
<td>-v</td>
<td>显示指令执行过程</td>
</tr>
<tr>
<td>-w</td>
<td>设置等待连线的时间</td>
</tr>
<tr>
<td>-z</td>
<td>使用0输入/输出模式，只在扫描通信端口时使用</td>
</tr>
<tr>
<td>-n</td>
<td>不使用dns反向查询ip地址域名</td>
</tr>
</tbody>
</table>
<h3 id="测试端口">测试端口</h3>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">nc -v -z -w2 10.10.10.14 80</span><br><span class="line"><span class="comment"># 端口通</span></span><br><span class="line">Ncat: Version 7.50 ( https://nmap.org/ncat )</span><br><span class="line">Ncat: Connected to 10.10.10.14:80.</span><br><span class="line">Ncat: 0 bytes sent, 0 bytes received <span class="keyword">in</span> 0.01 seconds.</span><br><span class="line"><span class="comment"># 端口不通</span></span><br><span class="line">Ncat: Version 7.50 ( https://nmap.org/ncat )</span><br><span class="line">Ncat: Connection refused.</span><br></pre></td></tr></table></figure>
<h3 id="测试udp端口">测试UDP端口</h3>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">nc -uzv 8.8.8.8:53</span><br><span class="line"><span class="comment"># 端口通</span></span><br><span class="line">Ncat: Version 7.50 ( https://nmap.org/ncat )</span><br><span class="line">Ncat: Connected to 8.8.8.8:53.</span><br><span class="line">Ncat: UDP packet sent successfully</span><br><span class="line">Ncat: 1 bytes sent, 0 bytes received <span class="keyword">in</span> 2.01 seconds.</span><br><span class="line"><span class="comment"># 端口不通</span></span><br><span class="line">Ncat: Version 7.50 ( https://nmap.org/ncat )</span><br><span class="line">Ncat: Connected to 10.10.10.14:123.</span><br><span class="line">Ncat: Connection refused.</span><br></pre></td></tr></table></figure>
<h3 id="传输文件">传输文件</h3>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 接收端先启动接收命令</span></span><br><span class="line">nc -l 10.10.10.14 10000 &gt; file.tar.gz</span><br><span class="line"><span class="comment"># 源端再启动发送命令</span></span><br><span class="line">nc 10.10.10.14 10000 &lt; file.tar.gz</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>常用命令</category>
      </categories>
      <tags>
        <tag>nc</tag>
      </tags>
  </entry>
  <entry>
    <title>openssl 吊销自签证书</title>
    <url>/2023/04/openssl-%E5%90%8A%E9%94%80%E8%87%AA%E7%AD%BE%E8%AF%81%E4%B9%A6/index.html</url>
    <content><![CDATA[<h3 id="前置条件">前置条件</h3>
<p><strong>在CA签发环境中进行，引用CA签发时的配置及CA和私钥</strong>    <a href="/2023/04/openssl-%E7%AD%BE%E5%8F%91CA%E8%AF%81%E4%B9%A6/index.html" title="openssl 签发CA证书">openssl 签发CA证书</a></p>
<h4 id="初始化配置">初始化配置</h4>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cat</span> &lt;&lt; <span class="string">&#x27;EOF&#x27;</span> &gt; crl.cnf</span><br><span class="line">CERT_DIR   = .</span><br><span class="line">[ ca ]</span><br><span class="line">default_ca = CA_default</span><br><span class="line"></span><br><span class="line">[ CA_default ]</span><br><span class="line"><span class="built_in">dir</span>               = <span class="variable">$&#123;ENV::CERT_DIR&#125;</span></span><br><span class="line">certs             = <span class="variable">$dir</span></span><br><span class="line">crl_dir           = <span class="variable">$dir</span>/crl</span><br><span class="line">new_certs_dir     = <span class="variable">$dir</span></span><br><span class="line">database          = <span class="variable">$dir</span>/index.txt</span><br><span class="line">certificate       = <span class="variable">$dir</span>/ca.crt</span><br><span class="line">serial            = <span class="variable">$dir</span>/serial</span><br><span class="line">crlnumber         = <span class="variable">$dir</span>/crlnumber</span><br><span class="line">crl               = <span class="variable">$dir</span>/crl/root.crl</span><br><span class="line">private_key       = <span class="variable">$dir</span>/ca.key</span><br><span class="line">default_crl_days  = 30</span><br><span class="line">crl_extensions    = crl_ext</span><br><span class="line">default_md        = sha256</span><br><span class="line">name_opt          = ca_default</span><br><span class="line">cert_opt          = ca_default</span><br><span class="line">default_days      = 365</span><br><span class="line">preserve          = no</span><br><span class="line">policy            = policy_match</span><br><span class="line"></span><br><span class="line">[ crl_ext ]</span><br><span class="line">authorityKeyIdentifier=keyid:always</span><br><span class="line"></span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>
<h4 id="初始化环境">初始化环境</h4>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="built_in">touch</span> index.txt  <span class="comment"># 如果之前有吊销过，要复用之前的index.txt，否则会导致之前的吊销列表丢失</span></span><br><span class="line">openssl rand -hex 3 &gt; crlnumber</span><br></pre></td></tr></table></figure>
<h4 id="撤销证书">撤销证书</h4>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">openssl ca -config crl.cnf -cert ca.crt -keyfile ca.key -revoke server.crt -crl_reason Unspecified <span class="comment"># -crl_reason 指定吊销原因</span></span><br></pre></td></tr></table></figure>
<h4 id="更新撤销列表（crl）">更新撤销列表（CRL）</h4>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">openssl ca -config crl.cnf -gencrl -cert ca.crt -keyfile ca.key -out root-crl.pem <span class="comment">#[-crldays &lt;CRL有效期&gt;]</span></span><br></pre></td></tr></table></figure>
<h4 id="查看crl">查看CRL</h4>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">openssl crl -text -noout -<span class="keyword">in</span> root-crl.pem</span><br></pre></td></tr></table></figure>
<h4 id="转换格式，der格式占用空间更小">转换格式，DER格式占用空间更小</h4>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">openssl crl -inform PEM -outform DER -<span class="keyword">in</span> root-crl.pem -out root.crl</span><br></pre></td></tr></table></figure>
<h4 id="部署crl分发点服务器，使用nginx部署">部署CRL分发点服务器，使用nginx部署</h4>
<figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span>       <span class="number">80</span>;</span><br><span class="line">    <span class="attribute">server_name</span>  crl.privatesign.local.com;</span><br><span class="line"></span><br><span class="line">    <span class="section">location</span> = /crl/root.crl &#123;</span><br><span class="line">        <span class="section">types</span>        &#123;&#125;</span><br><span class="line">        <span class="attribute">default_type</span> application/pkix-crl;</span><br><span class="line">        <span class="attribute">alias</span> /opt/pki/crl/root.crl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="吊销原因">吊销原因</h4>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">reason                X509v3 CRL Reason Code             解释                    备注</span><br><span class="line">---------------------------------------------------------------------------------------------</span><br><span class="line">unspecified               Unspecified                 未指定 (0)</span><br><span class="line">keyCompromise             Key Compromise              密钥泄漏 (1)</span><br><span class="line">CACompromise              CA Compromise               CA 泄漏 (2)</span><br><span class="line">affiliationChanged        Affiliation Changed         附属关系已更改 (3)</span><br><span class="line">superseded                Superseded                  被取代 (4)</span><br><span class="line">cessationOfOperation      Cessation Of Operation      停止操作 (5)</span><br><span class="line">certificateHold           Certificate Hold            证书挂起 (6)</span><br><span class="line">removeFromCRL             Remove From CRL             从 CRL 中删除 (8)         使用OCSP</span><br></pre></td></tr></table></figure>
<h4 id="crl-x509示例 `openssl crl -text -noout -in rootcrl`">crl x509示例 <code>openssl crl -text -noout -in root.crl</code></h4>
<figure class="highlight tex"><table><tr><td class="code"><pre><span class="line">Certificate Revocation List (CRL):</span><br><span class="line">        Version 2 (0x1)</span><br><span class="line">    Signature Algorithm: sha256WithRSAEncryption</span><br><span class="line">        Issuer: /O=PrivateSign/OU=PrivateSign/CN=PrivateSign Root CA</span><br><span class="line">        Last Update: Apr 17 15:05:44 2023 GMT</span><br><span class="line">        Next Update: May 17 05:45:44 2023 GMT</span><br><span class="line">        CRL extensions:</span><br><span class="line">            X509v3 Authority Key Identifier: </span><br><span class="line">                keyid:B5:BD:B2:FD:18:F9:86:AE:6E:7F:4A:F7:86:A3:9A:8E:7D:D8:63:D1</span><br><span class="line"></span><br><span class="line">        CRL extensions:</span><br><span class="line">            X509v3 CRL Number: </span><br><span class="line">                916689326</span><br><span class="line">Revoked Certificates:</span><br><span class="line">    Serial Number: 67250A6E24874F8235286B6E6FA9C1A482FE</span><br><span class="line">        Revocation Date: Apr 17 15:05:40 2023 GMT</span><br><span class="line">        CRL entry extensions:</span><br><span class="line">            X509v3 CRL Reason Code: </span><br><span class="line">                Unspecified</span><br><span class="line">    Signature Algorithm: sha256WithRSAEncryption</span><br><span class="line">         41:2a:f4:10:1a:22:fc:3c:72:ae:1f:ea:d4:11:c7:6d:ba:13:</span><br><span class="line">         51:f9:01:a4:44:fa:a6:d7:96:6a:7b:23:37:04:9e:87:09:f2:</span><br><span class="line">         c1:e7:f8:9a:82:75:66:91:c5:05:d2:2e:be:aa:4e:68:2b:28:</span><br><span class="line">         60:6c:fa:5a:14:4c:2a:28:0a:13:04:47:14:b7:3c:fa:8d:63:</span><br><span class="line">         c7:70:ec:10:86:82:6e:1d:97:27:b8:5b:bf:d5:a7:09:d7:d2:</span><br><span class="line">         53:c9:67:31:3c:67:53:fe:33:26:c3:e3:f2:7e:4d:37:f8:49:</span><br><span class="line">         f0:39:54:96:8c:ac:1f:db:c9:5c:24:12:c4:0e:65:24:39:c5:</span><br><span class="line">         58:ff:b0:88:7f:ff:cf:e9:47:a0:99:0b:c2:06:f6:e5:54:b8:</span><br><span class="line">         d1:c1:7b:ba:4a:01:cb:96:4f:43:83:78:d3:b4:67:2e:7d:e4:</span><br><span class="line">         25:f4:90:db:3f:d7:91:87:3e:0b:45:20:ae:7b:ba:e2:d2:a3:</span><br><span class="line">         60:c5:17:92:29:1c:a4:51:e4:35:45:35:c0:54:08:ff:65:1c:</span><br><span class="line">         9a:f3:71:05:ed:f4:b4:06:e8:0c:f9:96:8b:e2:40:aa:aa:0f:</span><br><span class="line">         54:b0:32:64:f0:8f:9d:ad:2c:0c:ec:64:f3:46:a5:d6:76:0f:</span><br><span class="line">         14:ce:25:b3:be:76:78:e1:28:bd:1f:a0:87:00:06:b9:df:4b:</span><br><span class="line">         d5:bb:75:3b</span><br></pre></td></tr></table></figure>
<figure class="highlight tex"><table><tr><td class="code"><pre><span class="line"><span class="params">#</span> cat index.txt</span><br><span class="line">R	240417152945Z	230417152954Z,unspecified	C0ED6FC2306B9B575A07EEF926A99F1B7A97	unknown	/C=CN/ST=ZheJiang/L=HangZhou/O=SRE/CN=example.com</span><br><span class="line"></span><br><span class="line">第一个字段R表示valid也就是吊销的意思，这个字段还可以有其他几个值，比如R表示revoked,E表示expired，还有V。</span><br><span class="line">第二个字段是过期时间，格式是YYMMDDHHMMSSZ。</span><br><span class="line">第三个字段是Revocation日期，如果空表示没有revoked。</span><br><span class="line">第四个字段是序列号，也就是生成的CA名字。</span><br><span class="line">第五个字段是文件的位置，unknown表示未知。</span><br><span class="line">最后一个字段是这个证书的名字,用于和其他的证书做区分。</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>常用命令</category>
      </categories>
      <tags>
        <tag>openssl</tag>
      </tags>
  </entry>
  <entry>
    <title>openssl 签发CA证书</title>
    <url>/2023/04/openssl-%E7%AD%BE%E5%8F%91CA%E8%AF%81%E4%B9%A6/index.html</url>
    <content><![CDATA[<h2 id="openssl-签发ca证书">openssl 签发CA证书</h2>
<ul>
<li>创建配置文件</li>
</ul>
<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line">cat &lt;&lt; &#x27;EOF&#x27; &gt; openssl.cnf</span><br><span class="line"><span class="attr">CERT_DIR</span>   = .</span><br><span class="line"><span class="section">[ ca ]</span></span><br><span class="line"><span class="attr">default_ca</span> = CA_default</span><br><span class="line"></span><br><span class="line"><span class="section">[ CA_default ]</span></span><br><span class="line"><span class="attr">dir</span>               = <span class="variable">$&#123;ENV::CERT_DIR&#125;</span></span><br><span class="line"><span class="attr">certs</span>             = <span class="variable">$dir</span></span><br><span class="line"><span class="attr">crl_dir</span>           = <span class="variable">$dir</span>/crl</span><br><span class="line"><span class="attr">new_certs_dir</span>     = <span class="variable">$dir</span></span><br><span class="line"><span class="attr">database</span>          = <span class="variable">$dir</span>/index.txt</span><br><span class="line"><span class="attr">certificate</span>       = <span class="variable">$dir</span>/ca.crt</span><br><span class="line"><span class="attr">serial</span>            = <span class="variable">$dir</span>/serial</span><br><span class="line"><span class="attr">crlnumber</span>         = <span class="variable">$dir</span>/crlnumber</span><br><span class="line"><span class="attr">crl</span>               = <span class="variable">$dir</span>/crl/root.crl</span><br><span class="line"><span class="attr">private_key</span>       = <span class="variable">$dir</span>/ca.key</span><br><span class="line"><span class="attr">default_crl_days</span>  = <span class="number">30</span></span><br><span class="line"><span class="attr">crl_extensions</span>    = crl_ext</span><br><span class="line"><span class="attr">default_md</span>        = sha256</span><br><span class="line"><span class="attr">name_opt</span>          = ca_default</span><br><span class="line"><span class="attr">cert_opt</span>          = ca_default</span><br><span class="line"><span class="attr">default_days</span>      = <span class="number">365</span></span><br><span class="line"><span class="attr">preserve</span>          = <span class="literal">no</span></span><br><span class="line"><span class="attr">policy</span>            = policy_match</span><br><span class="line"></span><br><span class="line"><span class="section">[ policy_match ]</span></span><br><span class="line"><span class="attr">countryName</span>             = optional</span><br><span class="line"><span class="attr">stateOrProvinceName</span>     = optional</span><br><span class="line"><span class="attr">localityName</span>            = optional</span><br><span class="line"><span class="attr">organizationName</span>        = optional</span><br><span class="line"><span class="attr">organizationalUnitName</span>  = optional</span><br><span class="line"><span class="attr">commonName</span>              = supplied</span><br><span class="line"><span class="attr">emailAddress</span>            = optional</span><br><span class="line"></span><br><span class="line"><span class="section">[ req ]</span></span><br><span class="line"><span class="attr">default_bits</span>        = <span class="number">2048</span></span><br><span class="line"><span class="attr">distinguished_name</span>  = req_distinguished_name</span><br><span class="line"><span class="attr">string_mask</span>         = utf8only</span><br><span class="line"><span class="attr">default_md</span>          = sha256</span><br><span class="line"><span class="attr">x509_extensions</span>     = v3_ca</span><br><span class="line"></span><br><span class="line"><span class="section">[ req_distinguished_name ]</span></span><br><span class="line"><span class="attr">countryName</span>             = Country Name (<span class="number">2</span> letter code)</span><br><span class="line"><span class="attr">stateOrProvinceName</span>     = State or Province Name</span><br><span class="line"><span class="attr">localityName</span>            = Locality Name</span><br><span class="line"><span class="attr">0.organizationName</span>      = Organization Name</span><br><span class="line"><span class="attr">organizationalUnitName</span>  = Organizational Unit Name</span><br><span class="line"><span class="attr">commonName</span>              = Common Name</span><br><span class="line"></span><br><span class="line"><span class="section">[ v3_ca ]</span></span><br><span class="line"><span class="attr">keyUsage</span>                = critical, cRLSign, keyCertSign</span><br><span class="line"><span class="attr">basicConstraints</span>        = critical, CA:<span class="literal">true</span></span><br><span class="line"><span class="attr">subjectKeyIdentifier</span>    = hash</span><br><span class="line"><span class="attr">authorityKeyIdentifier</span>  = keyid:always,issuer</span><br><span class="line"><span class="comment">#issuerAltName          = @ca_alt_names</span></span><br><span class="line"></span><br><span class="line"><span class="section">[ ca_alt_names ]</span></span><br><span class="line"><span class="attr">DNS.1</span> = Root CA</span><br><span class="line"><span class="attr">DNS.2</span> = example.com</span><br><span class="line"><span class="attr">IP.1</span>  = <span class="number">192.168</span>.<span class="number">99.1</span></span><br><span class="line"></span><br><span class="line"><span class="section">[ crl_ext ]</span></span><br><span class="line"><span class="attr">authorityKeyIdentifier</span>=keyid:always</span><br><span class="line"></span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>
<h4 id="初始化环境">初始化环境</h4>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="built_in">touch</span> index.txt</span><br><span class="line">openssl rand -hex 16 &gt; serial</span><br><span class="line"><span class="built_in">echo</span> 1001 &gt; crlnumber</span><br></pre></td></tr></table></figure>
<h4 id="创建私钥">创建私钥</h4>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">(<span class="built_in">umask</span> 077; openssl genrsa -out ca.key 2048)</span><br><span class="line"><span class="comment"># (umask 077; openssl genrsa -aes128 -passout pass:&quot;12345678&quot; -out ca.key 2048)  # 有密码，长度2048</span></span><br></pre></td></tr></table></figure>
<h4 id="签发ca">签发CA</h4>
<blockquote>
<p>可以使用 <code>-set_serial</code> 指定序号，例如  <code>-set_serial 0xe0435e3b8c5af5c12c</code>，可以使用 <code>openssl rand -hex 9</code>生成。</p>
</blockquote>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="built_in">export</span> OPENSSL_CONF=`<span class="built_in">pwd</span>`/openssl.cnf</span><br><span class="line">openssl req -new -x509 \</span><br><span class="line">    -days 7305 \</span><br><span class="line">    -sha256 -key ca.key \</span><br><span class="line">    -out ca.crt \</span><br><span class="line">    -subj <span class="string">&quot;/O=PrivateSign/OU=PrivateSign/CN=PrivateSign Root CA&quot;</span> <span class="comment"># -passin pass:&quot;12345678&quot;</span></span><br><span class="line">openssl x509 -<span class="keyword">in</span> ca.crt -noout -text</span><br></pre></td></tr></table></figure>
<h4 id="验证私钥">验证私钥</h4>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">openssl rsa -text -noout -<span class="keyword">in</span> ca.key</span><br><span class="line">openssl rsa -check -<span class="keyword">in</span> ca.key  <span class="comment"># -passin pass:&quot;12345678&quot;</span></span><br></pre></td></tr></table></figure>
<h4 id="快捷链接">快捷链接</h4>
<blockquote>
<ul>
<li>
<a href="/2023/04/openssl-%E7%AD%BE%E5%8F%91%E4%B8%AD%E9%97%B4%E8%AF%81%E4%B9%A6/index.html" title="openssl 签发中间证书">openssl 签发中间证书</a>
</li>
<li>
<a href="/2023/04/openssl-%E7%AD%BE%E5%8F%91%E6%9C%8D%E5%8A%A1%E7%AB%AF%E8%AF%81%E4%B9%A6/index.html" title="openssl 签发服务端证书">openssl 签发服务端证书</a>
</li>
<li>
<a href="/2023/04/openssl-%E7%BB%AD%E7%AD%BECA%E6%A0%B9%E8%AF%81%E4%B9%A6/index.html" title="openssl 续签CA根证书">openssl 续签CA根证书</a>
</li>
<li>
<a href="/2023/04/cfssl-%E7%BB%AD%E7%AD%BECA%E6%A0%B9%E8%AF%81%E4%B9%A6/index.html" title="cfssl 续签CA根证书">cfssl 续签CA根证书</a>
</li>
</ul>
</blockquote>
<h4 id="openssl-帮助">openssl 帮助</h4>
<blockquote>
<p><a href="https://www.openssl.org/docs/man1.1.1/man1/">/docs/man1.1.1/man1/index.html (openssl.org)</a></p>
<p><a href="https://www.openssl.org/docs/man1.1.1/man5/">/docs/man1.1.1/man5/index.html (openssl.org)</a></p>
</blockquote>
<h4 id="其他帮助">其他帮助</h4>
<blockquote>
<p><a href="https://m.163.com/dy/article/HCR0H8OK0531FIPF.html?spss=adap_pc">创建私有CA,我就用openSSL|config|issuer|key|ocsp|openssl_手机网易网 (163.com)</a></p>
<p><a href="https://vircloud.net/operations/verify-crt-ocsp.html">利用 OpenSSL 搭建自签 SSL 证书的 OCSP 状态在线验证服务及 OCSP Stapling 说明 - VirCloud’s Blog - Learning&amp;Sharing</a></p>
</blockquote>
<h4 id="使用`ca`子命令">使用<code>ca</code>子命令</h4>
<ul>
<li>自签CA</li>
</ul>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="built_in">export</span> OPENSSL_CONF=`<span class="built_in">pwd</span>`/openssl.cnf</span><br><span class="line">(<span class="built_in">umask</span> 077; openssl genrsa -out ca.key 2048)</span><br><span class="line">openssl req -new -key ca.key -out ca.csr -subj <span class="string">&quot;/O=PrivateSign/OU=PrivateSign/CN=PrivateSign Root CA&quot;</span></span><br><span class="line">openssl ca -selfsign -<span class="keyword">in</span> ca.csr -out ca.crt -extensions v3_ca</span><br></pre></td></tr></table></figure>
<ul>
<li>签署证书</li>
</ul>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">(<span class="built_in">umask</span> 077; openssl genrsa -out ca.key 2048)</span><br><span class="line">openssl req -new -config server.conf -key server.key -out server.csr -subj <span class="string">&quot;/C=CN/ST=ZheJiang/L=HangZhou/O=SRE/CN=example.com&quot;</span></span><br><span class="line">openssl ca -<span class="keyword">in</span> server.csr -out server.crt -extensions v3_ext -extfile server.conf -days 100</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>常用命令</category>
      </categories>
      <tags>
        <tag>SSL</tag>
        <tag>openssl</tag>
      </tags>
  </entry>
  <entry>
    <title>openssl 签发中间证书</title>
    <url>/2023/04/openssl-%E7%AD%BE%E5%8F%91%E4%B8%AD%E9%97%B4%E8%AF%81%E4%B9%A6/index.html</url>
    <content><![CDATA[<h3 id="前置条件">前置条件</h3>
<ul>
<li>
<a href="/2023/04/openssl-%E7%AD%BE%E5%8F%91CA%E8%AF%81%E4%B9%A6/index.html" title="openssl 签发CA证书">先签发ca证书</a>
</li>
</ul>
<h3 id="签发中间证书">签发中间证书</h3>
<ul>
<li>创建配置文件</li>
</ul>
<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line">cat &lt;&lt; &#x27;EOF&#x27; &gt; intermediate_ca_v3.ext</span><br><span class="line"><span class="attr">keyUsage</span>                = critical, digitalSignature, cRLSign, keyCertSign</span><br><span class="line"><span class="attr">basicConstraints</span>        = critical, CA:<span class="literal">true</span>, pathlen:<span class="number">0</span></span><br><span class="line"><span class="attr">subjectKeyIdentifier</span>    = hash</span><br><span class="line"><span class="attr">authorityKeyIdentifier</span>  = keyid:always,issuer</span><br><span class="line"><span class="attr">authorityInfoAccess</span>     = @Info_access</span><br><span class="line"><span class="attr">crlDistributionPoints</span>   = @crl_section</span><br><span class="line"><span class="attr">certificatePolicies</span>     = @polsect</span><br><span class="line"></span><br><span class="line"><span class="comment"># .0 的这种格式，可以写多个，如URI.0、URI.1、URI.2</span></span><br><span class="line"><span class="section">[ Info_access ]</span></span><br><span class="line">OCSP<span class="comment">;URI.0       = http://ocsp.privatesign.local.com</span></span><br><span class="line">caIssuers<span class="comment">;URI.0  = http://secure.privatesign.local.com/cacert/PrivateSignRootCA.crt</span></span><br><span class="line"></span><br><span class="line"><span class="section">[ crl_section ]</span></span><br><span class="line"><span class="attr">URI.0</span>  = http://crl.privatesign.local.com/crl/root.crl</span><br><span class="line"></span><br><span class="line"><span class="section">[ polsect ]</span></span><br><span class="line"><span class="attr">policyIdentifier</span> = X509v3 Any Policy</span><br><span class="line"><span class="attr">CPS.1</span>            = http://www.privatesign.local.com</span><br><span class="line"></span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>
<ul>
<li>
<p>创建私钥</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">(<span class="built_in">umask</span> 077; openssl genrsa -out intermediate_ca.key 2048)</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>创建证书签署请求</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">openssl req -new \</span><br><span class="line">    -key intermediate_ca.key \</span><br><span class="line">    -out intermediate_ca.csr \</span><br><span class="line">    -subj <span class="string">&quot;/C=CN/O=SRE/CN=PrivateSign RSA SSL CA 2019&quot;</span></span><br><span class="line"><span class="comment"># openssl req  -noout -text -in intermediate_ca.csr</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>使用CA签名并生成证书</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">openssl rand -hex 14 &gt; serial.srl</span><br><span class="line">openssl x509 -req -sha512 \</span><br><span class="line">    -days 3650 \</span><br><span class="line">    -CAserial serial.srl \</span><br><span class="line">    -CAcreateserial \</span><br><span class="line">    -CA ca.crt \</span><br><span class="line">    -CAkey ca.key \</span><br><span class="line">    -<span class="keyword">in</span> intermediate_ca.csr \</span><br><span class="line">    -extfile intermediate_ca_v3.ext \</span><br><span class="line">    -out intermediate_ca.crt</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>查看和校验证书</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">openssl x509 -noout -text -<span class="keyword">in</span> intermediate_ca.crt</span><br><span class="line">openssl verify -CAfile ca.crt intermediate_ca.crt</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>创建证书链</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 创建中间ca的证书链，中间证书在上面，根证书在下面</span></span><br><span class="line"><span class="built_in">cat</span> intermediate_ca.crt ca.crt &gt; intermediate_ca_chain.crt</span><br><span class="line"></span><br><span class="line"><span class="comment"># 测试证书的签发状态</span></span><br><span class="line">openssl verify -CAfile ca.crt intermediate_ca_chain.crt</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="完整证书链结构">完整证书链结构</h4>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">-----BEGIN CERTIFICATE-----</span><br><span class="line">        用户证书</span><br><span class="line">-----END CERTIFICATE-----</span><br><span class="line">-----BEGIN CERTIFICATE-----</span><br><span class="line">        中间证书</span><br><span class="line">-----END CERTIFICATE-----</span><br><span class="line">-----BEGIN CERTIFICATE-----</span><br><span class="line">        根证书</span><br><span class="line">-----END CERTIFICATE-----</span><br></pre></td></tr></table></figure>
<h3 id="签发服务端证书">签发服务端证书</h3>
<blockquote>
<a href="/2023/04/openssl-%E7%AD%BE%E5%8F%91%E6%9C%8D%E5%8A%A1%E7%AB%AF%E8%AF%81%E4%B9%A6/index.html" title="openssl 签发服务端证书">点击跳转到签发服务端证书</a>
</blockquote>
]]></content>
      <categories>
        <category>常用命令</category>
      </categories>
      <tags>
        <tag>SSL</tag>
        <tag>openssl</tag>
      </tags>
  </entry>
  <entry>
    <title>openssl 签发服务端证书</title>
    <url>/2023/04/openssl-%E7%AD%BE%E5%8F%91%E6%9C%8D%E5%8A%A1%E7%AB%AF%E8%AF%81%E4%B9%A6/index.html</url>
    <content><![CDATA[<h3 id="前置条件">前置条件</h3>
<ul>
<li>
<a href="/2023/04/openssl-%E7%AD%BE%E5%8F%91CA%E8%AF%81%E4%B9%A6/index.html" title="openssl 签发CA证书">先签发ca证书</a>
</li>
</ul>
<h3 id="证书主题-(-subj)">证书主题 (-subj)</h3>
<table>
<thead>
<tr>
<th>KEY</th>
<th>示例</th>
<th>解释</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>C</code></td>
<td>CN</td>
<td>国家名称，一般用的是两位大写的国家代码，如：CN表示中国</td>
<td>必填项</td>
</tr>
<tr>
<td><code>ST</code></td>
<td>beijing</td>
<td>申请单位所在的省份</td>
<td>必填项</td>
</tr>
<tr>
<td><code>L</code></td>
<td>beijing</td>
<td>城市</td>
<td>必填项</td>
</tr>
<tr>
<td><code>O</code></td>
<td>Beijing Baidu Netcom Science Technology Co., Ltd</td>
<td>组织名</td>
<td>必填项</td>
</tr>
<tr>
<td><code>OU</code></td>
<td></td>
<td>组织单位名</td>
<td></td>
</tr>
<tr>
<td><code>CN</code></td>
<td><a href="http://baidu.com">baidu.com</a></td>
<td>公用名，一般指网站域名全称。</td>
<td>必填项</td>
</tr>
<tr>
<td><code>emailAddress</code></td>
<td><a href="mailto:info@example.com">info@example.com</a></td>
<td>邮箱</td>
<td></td>
</tr>
</tbody>
</table>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">-subj <span class="string">&quot;/C=CN/ST=beijing/L=beijing/O=SRE/OU=Devops/CN=example.com/emailAddress=info@example.com&quot;</span></span><br></pre></td></tr></table></figure>
<h3 id="签发服务端证书">签发服务端证书</h3>
<h4 id="声明配置">声明配置</h4>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="built_in">export</span> ROOT_CA_CRT=ca.crt</span><br><span class="line"><span class="built_in">export</span> ROOT_CA_KEY=ca.key</span><br><span class="line"><span class="built_in">export</span> SERVER_OPENSSL_CONF=server.conf</span><br><span class="line"><span class="built_in">export</span> SERVER_CRT=server.crt</span><br><span class="line"><span class="built_in">export</span> SERVER_KEY=server.key</span><br><span class="line"><span class="built_in">export</span> SERVER_CSR=server.csr</span><br></pre></td></tr></table></figure>
<ul>
<li>
<p>创建一个配置文件。</p>
<blockquote>
<p>可在 <code>man x509v3_config</code> 中查看更多配置</p>
</blockquote>
</li>
</ul>
<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line">cat &lt;&lt; &#x27;EOF&#x27; &gt; server.conf</span><br><span class="line"><span class="section">[ req ]</span></span><br><span class="line"><span class="attr">req_extensions</span> = v3_req</span><br><span class="line"><span class="attr">distinguished_name</span> = dn</span><br><span class="line"></span><br><span class="line"><span class="section">[ dn ]</span></span><br><span class="line"></span><br><span class="line"><span class="section">[ v3_req ]</span></span><br><span class="line"><span class="attr">subjectAltName</span> = @alt_names</span><br><span class="line"></span><br><span class="line"><span class="section">[ v3_ext ]</span></span><br><span class="line"><span class="attr">keyUsage</span>                = critical,digitalSignature,keyEncipherment</span><br><span class="line"><span class="attr">extendedKeyUsage</span>        = serverAuth,clientAuth</span><br><span class="line"><span class="attr">basicConstraints</span>        = critical,CA:<span class="literal">FALSE</span></span><br><span class="line"><span class="comment">#authorityInfoAccess    = @Info_access</span></span><br><span class="line"><span class="comment">#certificatePolicies    = @polsect</span></span><br><span class="line"><span class="attr">subjectKeyIdentifier</span>    = hash</span><br><span class="line"><span class="attr">authorityKeyIdentifier</span>  = keyid,issuer</span><br><span class="line"><span class="attr">crlDistributionPoints</span>   = @crl_section</span><br><span class="line"><span class="comment">#nsCertType             = client, server, email, objsign, sslCA, emailCA, objCA</span></span><br><span class="line"><span class="attr">subjectAltName</span>          = @alt_names</span><br><span class="line"><span class="comment">#nsComment              = &quot;你想显示的内容&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="section">[ Info_access ]</span></span><br><span class="line">caIssuers<span class="comment">;URI.0  = http://secure.privatesign.local.com/cacert/psrsasslca2019.crt</span></span><br><span class="line">OCSP<span class="comment">;URI.0       = http://ocsp.privatesign.local.com</span></span><br><span class="line"></span><br><span class="line"><span class="section">[ crl_section ]</span></span><br><span class="line"><span class="attr">URI.0</span>  = http://crl.privatesign.local.com/crl/psrsasslca2019.crl</span><br><span class="line"></span><br><span class="line"><span class="section">[ polsect ]</span></span><br><span class="line"><span class="attr">policyIdentifier</span> = <span class="number">1.3</span>.<span class="number">6.1</span>.<span class="number">4.1</span>.<span class="number">4146.1</span>.<span class="number">1</span></span><br><span class="line"><span class="attr">CPS.1</span>            = http://my.host.name</span><br><span class="line"></span><br><span class="line"><span class="section">[ alt_names ]</span></span><br><span class="line"><span class="attr">DNS.1</span>  = localhost</span><br><span class="line"><span class="attr">DNS.2</span>  = example.com</span><br><span class="line"><span class="attr">DNS.3</span>  = *.example.com</span><br><span class="line"><span class="attr">IP.1</span>   = <span class="number">127.0</span>.<span class="number">0.1</span></span><br><span class="line"><span class="attr">IP.2</span>   = <span class="number">10.10</span>.<span class="number">10.10</span></span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>
<h4 id="创建私钥">创建私钥</h4>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">(<span class="built_in">umask</span> 077; openssl genrsa -out <span class="variable">$SERVER_KEY</span> 2048)</span><br></pre></td></tr></table></figure>
<h4 id="创建证书请求文件（csr）">创建证书请求文件（CSR）</h4>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">openssl req -new \</span><br><span class="line">    -config <span class="variable">$SERVER_OPENSSL_CONF</span> \</span><br><span class="line">    -key <span class="variable">$SERVER_KEY</span> \</span><br><span class="line">    -out <span class="variable">$SERVER_CSR</span> \</span><br><span class="line">    -subj <span class="string">&quot;/C=CN/ST=ZheJiang/L=HangZhou/O=SRE/CN=example.com&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看CSR内容</span></span><br><span class="line">openssl req  -noout -text -<span class="keyword">in</span> <span class="variable">$SERVER_CSR</span></span><br></pre></td></tr></table></figure>
<h4 id="证书签名">证书签名</h4>
<blockquote>
<p><strong>使用中间CA签名</strong> （<a href="/2023/04/openssl-%E7%AD%BE%E5%8F%91%E4%B8%AD%E9%97%B4%E8%AF%81%E4%B9%A6/index.html" title="openssl 签发中间证书">签发中间证书</a>）  （<a href="/2023/07/date-%E8%AE%A1%E7%AE%97%E6%9C%AA%E6%9D%A5%E8%B7%9D%E7%A6%BB%E7%8E%B0%E5%9C%A8%E9%9A%94%E4%BA%86%E5%A4%9A%E5%B0%91%E5%A4%A9/index.html" title="date 计算未来距离现在隔了多少天">计算未来距离现在隔了多少天</a>）</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 签发证书</span></span><br><span class="line">openssl rand -hex 18 &gt; serial.srl</span><br><span class="line">openssl x509 -req -sha512 -days 1095 \</span><br><span class="line"> -CAserial serial.srl -CAcreateserial -CA intermediate_ca.crt -CAkey intermediate_ca.key \</span><br><span class="line"> -<span class="keyword">in</span> server.csr -out server.crt -extensions v3_ext -extfile server.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建服务器证书证书链，服务器证书在上面，中间证书在下面</span></span><br><span class="line"><span class="built_in">cat</span> &lt;&lt;<span class="string">EOF &gt; server_chain.crt</span></span><br><span class="line"><span class="string">`openssl x509 -in server.crt`</span></span><br><span class="line"><span class="string">`openssl x509 -in intermediate_ca.crt`</span></span><br><span class="line"><span class="string">`openssl x509 -in ca.crt`</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看证书内容</span></span><br><span class="line">openssl x509 -noout -text -<span class="keyword">in</span> server_chain.crt</span><br><span class="line"></span><br><span class="line"><span class="comment"># 验证证书链，最终要用到的是 server_chain.crt 和 server.key</span></span><br><span class="line">openssl verify -CAfile ca.crt -untrusted intermediate_ca.crt server_chain.crt</span><br><span class="line"><span class="comment"># openssl verify -verbose -CAfile &lt;(cat intermediate_ca.crt ca.crt) server_chain.crt</span></span><br></pre></td></tr></table></figure>
<p><strong>使用根CA签名</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">openssl rand -hex 18 &gt; serial.srl</span><br><span class="line">openssl x509 -req -sha512 -days 1095 \</span><br><span class="line"> -CAserial serial.srl -CAcreateserial -CA <span class="variable">$ROOT_CA_CRT</span> -CAkey <span class="variable">$ROOT_CA_KEY</span> \</span><br><span class="line"> -<span class="keyword">in</span> <span class="variable">$SERVER_CSR</span> -out <span class="variable">$SERVER_CRT</span> -extensions v3_ext -extfile <span class="variable">$SERVER_OPENSSL_CONF</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看证书内容</span></span><br><span class="line">openssl x509 -noout -text -<span class="keyword">in</span> <span class="variable">$SERVER_CRT</span></span><br></pre></td></tr></table></figure>
</blockquote>
<h4 id="验证证书">验证证书</h4>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">openssl verify -CAfile <span class="variable">$ROOT_CA_CRT</span> <span class="variable">$SERVER_CRT</span></span><br><span class="line">openssl rsa -noout -modulus -<span class="keyword">in</span> <span class="variable">$SERVER_KEY</span> | openssl md5</span><br><span class="line">openssl x509 -noout -modulus -<span class="keyword">in</span> <span class="variable">$SERVER_CRT</span> | openssl md5</span><br><span class="line">openssl req -noout -modulus -<span class="keyword">in</span> <span class="variable">$SERVER_CSR</span> | openssl md5</span><br></pre></td></tr></table></figure>
<hr>
<blockquote>
<h4 id="附：组合命令">附：组合命令</h4>
</blockquote>
<blockquote>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 创建私钥和证书请求文件</span></span><br><span class="line">openssl req -config <span class="variable">$SERVER_OPENSSL_CONF</span> -newkey rsa:2048 -nodes -out <span class="variable">$SERVER_CSR</span> -keyout <span class="variable">$SERVER_KEY</span> \</span><br><span class="line">    -subj <span class="string">&quot;/C=CN/ST=省份/L=城市/O=申请单位组织名/CN=example.com&quot;</span></span><br><span class="line"><span class="comment"># 使用根CA签名</span></span><br><span class="line">openssl x509 -req -sha512 \</span><br><span class="line">    -days 1095 \</span><br><span class="line">    -CAcreateserial \</span><br><span class="line">    -CA <span class="variable">$ROOT_CA_CRT</span> \</span><br><span class="line">    -CAkey <span class="variable">$ROOT_CA_KEY</span> \</span><br><span class="line">    -<span class="keyword">in</span> <span class="variable">$SERVER_CSR</span> \</span><br><span class="line">    -out <span class="variable">$SERVER_CRT</span> \</span><br><span class="line">    -extensions v3_ext \</span><br><span class="line">    -extfile <span class="variable">$SERVER_OPENSSL_CONF</span></span><br></pre></td></tr></table></figure>
</blockquote>
]]></content>
      <categories>
        <category>常用命令</category>
      </categories>
      <tags>
        <tag>SSL</tag>
        <tag>openssl</tag>
      </tags>
  </entry>
  <entry>
    <title>openssl 给私钥设置密码</title>
    <url>/2023/04/openssl-%E7%BB%99%E7%A7%81%E9%92%A5%E8%AE%BE%E7%BD%AE%E5%AF%86%E7%A0%81/index.html</url>
    <content><![CDATA[<h3 id="创建一个带密码的私钥">创建一个带密码的私钥</h3>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">openssl genrsa -des3 -out privkey.pem 2048</span><br></pre></td></tr></table></figure>
<h4 id="给私钥设置一个密码">给私钥设置一个密码</h4>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">openssl genrsa -out privkey.pem  <span class="comment"># 生成没有密码的私钥</span></span><br><span class="line">openssl rsa -<span class="keyword">in</span> privkey.pem -aes128 -out privkey-new.pem -passout pass:123456</span><br></pre></td></tr></table></figure>
<h4 id="查看私钥文本">查看私钥文本</h4>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">openssl rsa -text -noout -<span class="keyword">in</span> privkey-new.pem -passin pass:123456</span><br></pre></td></tr></table></figure>
<h4 id="取消私钥的密码">取消私钥的密码</h4>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">openssl rsa -<span class="keyword">in</span> privkey-new.pem -out privkey-1.pem</span><br></pre></td></tr></table></figure>
<blockquote>
<p>私钥的加密算法</p>
<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="section">[root@host-10-11 ~]</span><span class="comment"># openssl genrsa</span></span><br><span class="line">usage: genrsa <span class="section">[args]</span> <span class="section">[numbits]</span></span><br><span class="line"> -des            encrypt the generated key with DES in cbc mode</span><br><span class="line"> -des3           encrypt the generated key with DES in ede cbc mode (168 bit key)</span><br><span class="line"> -idea           encrypt the generated key with IDEA in cbc mode</span><br><span class="line"> -seed</span><br><span class="line">                 encrypt PEM output with cbc seed</span><br><span class="line"> -aes128, -aes192, -aes256</span><br><span class="line">                 encrypt PEM output with cbc aes</span><br><span class="line"> -camellia128, -camellia192, -camellia256</span><br><span class="line">                 encrypt PEM output with cbc camellia</span><br><span class="line">......</span><br></pre></td></tr></table></figure>
</blockquote>
]]></content>
      <categories>
        <category>常用命令</category>
      </categories>
      <tags>
        <tag>openssl</tag>
      </tags>
  </entry>
  <entry>
    <title>openssl 续签CA根证书</title>
    <url>/2023/04/openssl-%E7%BB%AD%E7%AD%BECA%E6%A0%B9%E8%AF%81%E4%B9%A6/index.html</url>
    <content><![CDATA[<h4 id="第一种、使用原有的openssl配置">第一种、使用原有的openssl配置</h4>
<ul>
<li><strong>使用已有的证书和私钥生成CSR</strong></li>
</ul>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">openssl x509 -<span class="keyword">in</span> ca.crt -signkey ca.key -x509toreq -out ca.csr</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>生成自签名证书</strong></li>
</ul>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">openssl x509 \</span><br><span class="line">        -req -days 3650 \</span><br><span class="line">        -sha256 -CAcreateserial \</span><br><span class="line">        -extfile openssl.cnf \</span><br><span class="line">        -extensions v3_ca \</span><br><span class="line">        -<span class="keyword">in</span> ca.csr \</span><br><span class="line">        -signkey ca.key -out ca_new.crt</span><br></pre></td></tr></table></figure>
<h4 id="第二种、使用新的v3扩展重新生成">第二种、使用新的V3扩展重新生成</h4>
<blockquote>
<p>用于原有自定义的配置（openssl.cnf）丢失</p>
</blockquote>
<ul>
<li><strong>使用已有的证书和私钥生成CSR</strong></li>
</ul>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">openssl x509 -<span class="keyword">in</span> ca.crt -signkey ca.key -x509toreq -out ca.csr</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>创建V3扩展文件</strong></li>
</ul>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cat</span> &lt;&lt; <span class="string">&#x27;EOF&#x27;</span> &gt; ca_v3.ext</span><br><span class="line">basicConstraints       = critical, CA:<span class="literal">true</span>, pathlen:2</span><br><span class="line">keyUsage               = critical, digitalSignature, cRLSign, keyCertSign</span><br><span class="line">subjectKeyIdentifier   = <span class="built_in">hash</span></span><br><span class="line">authorityKeyIdentifier = keyid:always,issuer</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>生成自签名证书</strong></li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">openssl x509 -req \</span><br><span class="line">        -days 365 \</span><br><span class="line">        -sha256 \</span><br><span class="line">        -CAcreateserial \</span><br><span class="line">        -extfile ca_v3.ext \</span><br><span class="line">        -<span class="keyword">in</span> ca.csr \</span><br><span class="line">        -signkey ca.key -out ca_new.crt</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>常用命令</category>
      </categories>
      <tags>
        <tag>openssl</tag>
        <tag>ssl</tag>
      </tags>
  </entry>
  <entry>
    <title>openssl 证书相关常用命令</title>
    <url>/2023/04/openssl-%E8%AF%81%E4%B9%A6%E7%9B%B8%E5%85%B3%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/index.html</url>
    <content><![CDATA[<h4 id="查看证书">查看证书</h4>
<ul>
<li>
<p>查看CSR条目</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">openssl req -text -noout -verify -<span class="keyword">in</span> ca.csr</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>查看证书条目</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">openssl x509 -<span class="keyword">in</span> ca.crt -noout -text</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>查看签发和到期时间</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">openssl x509 -<span class="keyword">in</span> ca.crt -noout -dates</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>验证证书是否由CA签发</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">openssl verify -verbose -CAFile ca.crt domain.crt</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>获取OCSP responder地址</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">openssl x509 -<span class="keyword">in</span> server.pem -noout -ocsp_uri </span><br></pre></td></tr></table></figure>
</li>
<li>
<p>其他</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">openssl x509 -<span class="keyword">in</span> server.crt -noout -text</span><br><span class="line">openssl x509 -<span class="keyword">in</span> server.crt -noout -serial</span><br><span class="line">openssl x509 -<span class="keyword">in</span> server.crt -noout -subject</span><br><span class="line">openssl x509 -<span class="keyword">in</span> server.crt -noout -issuer</span><br><span class="line">openssl x509 -<span class="keyword">in</span> server.crt -noout -fingerprint</span><br><span class="line">openssl x509 -<span class="keyword">in</span> server.crt -noout -issuer_hash</span><br><span class="line">openssl x509 -<span class="keyword">in</span> server.crt -noout -dates</span><br><span class="line">openssl x509 -<span class="keyword">in</span> server.crt -noout -startdate -enddate</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="私钥生成与验证">私钥生成与验证</h4>
<ul>
<li>
<p>创建私钥</p>
<p>下面的命令创建一个密码保护的2048位私钥<code>domain.key</code>，会提示输入密码，推荐使用<code>-aes128</code>加密。</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">openssl genrsa -des3 -out domain.key 2048</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>验证私钥</p>
<p>下面的命令可以验证私钥<code>domain.key</code>是否有效</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">openssl rsa -check -<span class="keyword">in</span> domain.key</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>验证私钥与证书和CSR匹配</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">openssl rsa -noout -modulus -<span class="keyword">in</span> ca.key | openssl md5</span><br><span class="line">openssl x509 -noout -modulus -<span class="keyword">in</span> ca.crt | openssl md5</span><br><span class="line">openssl req -noout -modulus -<span class="keyword">in</span> ca.csr | openssl md5</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>加密私钥</p>
<p>下面的命令将私钥unencrypted.key加密，输出加密后的私钥encrypted.key，执行时会提示设置密码</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">openssl rsa -des3  -<span class="keyword">in</span> unencrypted.key -out encrypted.key</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>解密私钥</p>
<p>下面的命令将加密私钥encrypted.key解密，并输出明文结果，执行时会提示设置密码</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">openssl rsa  -<span class="keyword">in</span> encrypted.key -out decrypted.key</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="证书格式转换">证书格式转换</h4>
<ul>
<li>
<p>PEM转DER</p>
<p>可以将PEM编码的证书domain.crt转换为二进制DER编码的证书domain.der</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">openssl x509  -in domain.crt -outform der -out domain.der</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>DER转PEM</p>
<p>可以将DER编码的证书（domain.der）转换为PEM编码（domain.crt）：</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">openssl x509  -inform der -<span class="keyword">in</span> domain.der  -out domain.crt</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>PEM转PKCS7</p>
<p>可以将PEM证书（domain.crt和ca-chain.crt）添加到一个PKCS7（domain.p7b）文件中：</p>
<p>使用<code>-certfile</code>选项指定要添加到PKCS7中的证书</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">openssl crl2pkcs7 -nocrl  -certfile domain.crt  -certfile ca-chain.crt  -out domain.p7b</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>PKCS7转换为PEM</p>
<p>使用下面的命令将PKCS7文件（domain.p7b）转换为PEM文件，如果PKCS7文件中包含多个证书，例如一个普通证书和一个中间CA证书，那么输出的PEM文件中将包含所有的证书。</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">openssl pkcs7 -<span class="keyword">in</span> domain.p7b -print_certs -out domain.crt</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>PEM转换为PKCS12</p>
<p>可以将私钥文件（domain.key）和证书文件（domain.crt）组合起来生成PKCS12 文件（domain.pfx）命令将提示你输入导出密码，可以留空不填.PKCS12文件也被称为PFX文件，通常用于导入/导出微软IIS中的证书链</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">openssl pkcs12 -inkey domain.key -<span class="keyword">in</span> domain.crt -<span class="built_in">export</span> -out domain.pfx</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>PKCS12转换为PEM</p>
<p>也可以将PKCS12文件（domain.pfx）转换为PEM格式（domain.combined.crt）</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">openssl pkcs12 -<span class="keyword">in</span> domain.pfx -nodes -out domain.combined.crt</span><br></pre></td></tr></table></figure>
</li>
</ul>
]]></content>
      <categories>
        <category>常用命令</category>
      </categories>
      <tags>
        <tag>openssl</tag>
      </tags>
  </entry>
  <entry>
    <title>openssl和ssh-keygen对证书的相互转换</title>
    <url>/2023/05/openssl%E5%92%8Cssh-keygen%E5%AF%B9%E8%AF%81%E4%B9%A6%E7%9A%84%E7%9B%B8%E4%BA%92%E8%BD%AC%E6%8D%A2/index.html</url>
    <content><![CDATA[<p>我们平时使用<code>ssh-keygen</code>生成的ssh免密证书，其实和<code>openssl</code>生成的是一样，只不过是不同格式的体现，仔细观察私钥是一样的，可以通过命令进行转换和查看。</p>
<h4 id="从私钥提取公钥">从私钥提取公钥</h4>
<p>如果您只有私钥文件，而没有公钥文件，您可以通过以下步骤间接提取SSH OpenSSH公钥。<br>
首先，使用OpenSSL命令从私钥文件中提取OpenSSL格式的公钥：</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">openssl rsa -<span class="keyword">in</span> private_key -outform PEM -pubout -out public_key.pem</span><br></pre></td></tr></table></figure>
<p>接下来，将公钥转换为OpenSSH格式的公钥。使用以下命令，这将会将OpenSSL格式的公钥转换为OpenSSH格式的公钥，并保存在<code>public_key.pub</code>文件中。 现在，您可以使用文本编辑器打开<code>public_key.pub</code>文件，复制公钥内容以供使用。</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">ssh-keygen -i -m PKCS8 -f public_key.pem &gt; public_key.pub</span><br></pre></td></tr></table></figure>
<p>或者直接使用<code>ssh-keygen</code>提取：</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">ssh-keygen -y -e -f private_key &gt; public_key.pub</span><br></pre></td></tr></table></figure>
<h4 id="查看公钥信息">查看公钥信息</h4>
<p>使用OpenSSL命令查看公钥的信息，可以看到包括公钥算法、模数（Modulus）和指数（Exponent）等：</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">openssl rsa -<span class="keyword">in</span> public_key.pem -pubin -text -noout</span><br></pre></td></tr></table></figure>
<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line">Public-Key: (2048 bit)</span><br><span class="line">Modulus:</span><br><span class="line">    00:eb:9e:ea:66:1f:17:1d:58:e4:94:21:c3:70:6f:</span><br><span class="line">    7f:23:05:9d:b2:04:7e:49:49:03:68:c3:16:ba:da:</span><br><span class="line">    71:bc:1e:b0:8a:3d:45:69:8f:e9:f1:8b:d3:e0:f2:</span><br><span class="line">    c0:85:be:67:1f:b9:c1:cf:3d:22:ed:71:83:19:b1:</span><br><span class="line">    8c:19:d4:72:1f:d4:15:21:d2:aa:3c:f1:aa:08:ad:</span><br><span class="line">    9a:a0:13:bf:e1:1d:05:21:7e:5a:ad:60:f6:10:70:</span><br><span class="line">    b6:5d:80:7e:47:71:ec:47:b5:a0:da:1e:c1:16:4e:</span><br><span class="line">    4e:cf:7b:1b:f4:93:be:fb:d5:11:aa:01:80:b2:56:</span><br><span class="line">    ab:93:b8:db:0b:1f:ca:3d:09:8a:91:3d:00:ed:e4:</span><br><span class="line">    51:b9:80:e7:bf:98:59:2f:f3:c3:b4:ea:ec:2f:52:</span><br><span class="line">    2e:74:42:45:bc:df:db:7a:c9:f2:c6:74:7f:79:b4:</span><br><span class="line">    0a:ba:0a:90:4c:8a:17:a5:e1:b4:fd:87:2b:21:c0:</span><br><span class="line">    28:e0:89:dd:d7:a1:e5:5a:74:85:92:02:3e:99:0b:</span><br><span class="line">    68:44:90:6a:7e:04:e1:af:a1:cc:ee:fb:ef:8b:be:</span><br><span class="line">    bd:10:85:0c:eb:a7:82:00:69:cc:a2:24:4c:cb:9c:</span><br><span class="line">    07:d3:4e:45:08:38:97:61:1a:13:68:67:79:ec:c4:</span><br><span class="line">    4c:7f:4e:35:fc:fb:a0:2b:0f:ad:14:c2:d8:d8:a1:</span><br><span class="line">    c3:ef</span><br><span class="line">Exponent: 65537 (0x10001)</span><br></pre></td></tr></table></figure>
<p>如果公钥是以其他格式（如OpenSSH格式）保存的，可以先将其转换为PEM格式，然后再使用上述命令查看公钥信息。例如</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">ssh-keygen -f public_key.pub -e -m pem &gt; public_key.pem</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>ssh</category>
      </categories>
      <tags>
        <tag>ssh</tag>
        <tag>openssl</tag>
        <tag>ssh-keygen</tag>
      </tags>
  </entry>
  <entry>
    <title>sed 先过滤在替换字符串</title>
    <url>/2023/05/sed-%E5%85%88%E8%BF%87%E6%BB%A4%E5%9C%A8%E6%9B%BF%E6%8D%A2%E5%AD%97%E7%AC%A6%E4%B8%B2/index.html</url>
    <content><![CDATA[<p>如果文件中有多个相同的字符串，但只是想替换其中一个，可以先过滤在替换，比如只想替换最后一行的<code>nginx</code></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">default</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">nginx</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">app:</span> <span class="string">nginx</span></span><br></pre></td></tr></table></figure>
<p>命令示例：</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">sed <span class="string">&quot;/app/&#123;s/nginx/myapp/g&#125;&quot;</span> file</span><br></pre></td></tr></table></figure>
<blockquote>
<p>首先查找具有 OS 模式的行，然后用 ArchLinux 替换单词 Linux</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">sed <span class="string">&#x27;/OS/ s/Linux/ArchLinux/&#x27;</span> sed-test.txt</span><br></pre></td></tr></table></figure>
<p>以下 sed 的命令搜索 linuxunix 和 CentOS 模式，用 Fedora30 替换它们</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">sed -e <span class="string">&#x27;s/\(linuxunix\|CentOS\)/Fedora30/g&#x27;</span> sed-test.txt</span><br></pre></td></tr></table></figure>
</blockquote>
]]></content>
      <categories>
        <category>常用命令</category>
      </categories>
      <tags>
        <tag>sed</tag>
      </tags>
  </entry>
  <entry>
    <title>shell 字符串按长度截取</title>
    <url>/2023/05/shell-%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%8C%89%E9%95%BF%E5%BA%A6%E6%88%AA%E5%8F%96/index.html</url>
    <content><![CDATA[<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@host-10-11 ~]# echo $&#123;a:0:2&#125;</span><br><span class="line">12</span><br><span class="line">[root@host-10-11 ~]# echo $&#123;a:2:2&#125;</span><br><span class="line">34</span><br><span class="line">[root@host-10-11 ~]# echo $&#123;a:2&#125;</span><br><span class="line">3456</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>常用命令</category>
      </categories>
      <tags>
        <tag>shell</tag>
      </tags>
  </entry>
  <entry>
    <title>shell 获取嵌套的变量</title>
    <url>/2023/05/shell-%E8%8E%B7%E5%8F%96%E5%B5%8C%E5%A5%97%E7%9A%84%E5%8F%98%E9%87%8F/index.html</url>
    <content><![CDATA[<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">Ha=12345</span><br><span class="line">Hb=asdf</span><br><span class="line">name=a</span><br><span class="line"></span><br><span class="line">p=`<span class="built_in">eval</span> <span class="built_in">echo</span> <span class="string">&#x27;$&#x27;</span>H<span class="variable">$name</span>`</span><br><span class="line"><span class="comment"># 输出 12345</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$p</span></span><br><span class="line"></span><br><span class="line">name=b</span><br><span class="line">p=`<span class="built_in">eval</span> <span class="built_in">echo</span> <span class="string">&#x27;$&#x27;</span>H<span class="variable">$name</span>`</span><br><span class="line"><span class="comment"># 输出 asdf</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$p</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>常用命令</category>
      </categories>
      <tags>
        <tag>shell</tag>
        <tag>eval</tag>
      </tags>
  </entry>
  <entry>
    <title>tcpdump 命令抓包指南</title>
    <url>/2023/07/tcpdump-%E5%91%BD%E4%BB%A4%E6%8A%93%E5%8C%85%E6%8C%87%E5%8D%97/index.html</url>
    <content><![CDATA[<h4 id="命令安装">命令安装</h4>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yum -y install tcpdump</span><br></pre></td></tr></table></figure>
<h4 id="示例命令">示例命令</h4>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">tcpdump tcp -i ens32 -t -s0 -c 100 and dst port ! 22 and src net 192.168.30.0/24 -w ./a1.<span class="built_in">cap</span></span><br><span class="line">tcpdump -i ens32 -nn -X -vv tcp port 21 and ip host 来源 ip.</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>选项</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>tcp</td>
<td>ip、icmp、arp、rarp 和 tcp、udp、icmp这些选项等都要放到第一个参数的位置，用来过滤数据报的类型。</td>
</tr>
<tr>
<td>-i ens33</td>
<td>只抓经过接口ens33的包，any 代表所有网卡。</td>
</tr>
<tr>
<td>-t</td>
<td>不显示时间戳</td>
</tr>
<tr>
<td>-s0</td>
<td>抓取数据包时默认抓取长度为68字节。加上&quot;-s0&quot;后可以抓到完整的数据包。</td>
</tr>
<tr>
<td>-c 100</td>
<td>只抓取100个数据包。</td>
</tr>
<tr>
<td>dst port ! 22</td>
<td>不抓取目标端口是22的数据包。</td>
</tr>
<tr>
<td>src net 192.168.1.0/24</td>
<td>数据包的源网络地址为192.168.1.0/24。Net：网段，host：主机。</td>
</tr>
<tr>
<td>-w ./a1.cap</td>
<td>保存成cap文件，方便用wireshark分析。</td>
</tr>
<tr>
<td>-X</td>
<td>输出包的头部数据，会以 16 进制和 ASCII 两种方式同时输出</td>
</tr>
<tr>
<td>-vv</td>
<td>产生更详细的输出</td>
</tr>
<tr>
<td>-n</td>
<td>对地址以数字方式显式，否则显式为主机名</td>
</tr>
<tr>
<td>-nn</td>
<td>除了-n 的作用外，还把端口显示为数值，否则显示端口服务名</td>
</tr>
</tbody>
</table>
<h3 id="常见的`tcpdump`过滤语句介绍">常见的<code>tcpdump</code>过滤语句介绍</h3>
<p>可以通过命令 <code>man pcap-filter</code> 来参考过滤表达式的帮助文档</p>
<ul>
<li>抓取所有网卡的包</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">tcpdump -i any</span><br></pre></td></tr></table></figure>
<ul>
<li>抓取<code>ens33</code>网卡所有的包，排除<code>22</code>端口</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">tcpdump -i ens33 tcp -nn <span class="string">&#x27;port !22&#x27;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>抓取<code>ens33</code>网卡所有的包，排除<code>22</code>端口和<code>80</code>端口，只显示IP相关协议</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">tcpdump -i ens33 tcp -nn <span class="string">&#x27;port ! 22 and ! 80 and ip&#x27;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>目标机器的<code>ping</code>包</li>
</ul>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">tcpdump -i any icmp and dst 10.10.10.14</span><br></pre></td></tr></table></figure>
<ul>
<li>过滤源地址和目的地址</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 如果不写默认是 &#x27;dst or src&#x27;</span></span><br><span class="line">tcpdump -i ens33 src 10.10.10.11  <span class="comment"># 源地址</span></span><br><span class="line">tcpdump -i ens33 dst 10.10.10.14  <span class="comment"># 目标地址</span></span><br></pre></td></tr></table></figure>
<ul>
<li>只想查目标机器端口是21或80的网络包</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">tcpdump -i ens33 -c 10 <span class="string">&#x27;dst port 21 or dst port 80&#x27;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>想要截获主机<code>10.10.10.11</code> 和主机<code>10.10.10.14</code>或 <code>10.10.10.13</code>的通信</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">tcpdump -i ens33 -c 3 <span class="string">&#x27;host 10.10.10.11 and (10.10.10.14 or 10.10.10.13)&#x27;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>想获取使用<code>ftp</code>端口和<code>ftp</code>数据端口的网络包</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">tcpdump -i ens33 <span class="string">&#x27;port ftp or ftp-data&#x27;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>获取主机<code>10.10.10.11</code>除了和主机<code>10.10.10.14</code>之外所有主机通信的ip包</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">tcpdump -i ens33  ip <span class="string">&#x27;host 10.10.10.11 and ! 10.10.10.14&#x27;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>抓<code>10.10.10.14</code>的<code>80、110、25</code>端口以外的其他端口的包</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">tcpdump -i ens33 <span class="string">&#x27;host 10.10.10.14 and ! port 80 and ! port 25 and ! port 110&#x27;</span></span><br></pre></td></tr></table></figure>
<h4 id="其中flags-标识符有以下几种">其中Flags 标识符有以下几种</h4>
<blockquote>
<p>[S] : SYN（开始连接）<br>
[P] : PSH（推送数据）<br>
[F] : FIN （结束连接）<br>
[R] : RST（重置连接）<br>
[.] : 没有 Flag，由于除了 SYN 包外所有的数据包都有ACK，所以一般这个标志也可表示 ACK</p>
</blockquote>
]]></content>
      <categories>
        <category>常用命令</category>
      </categories>
      <tags>
        <tag>tcpdump</tag>
      </tags>
  </entry>
  <entry>
    <title>x509证书V3扩展</title>
    <url>/2023/04/x509%E8%AF%81%E4%B9%A6V3%E6%89%A9%E5%B1%95/index.html</url>
    <content><![CDATA[<p><strong>扩展名</strong></p>
<p>SubjectKeyIdentifier<br>
KeyUsage<br>
PrivateKeyUsage<br>
SubjectAlternativeName<br>
IssuerAlternativeName<br>
BasicConstraints<br>
NameConstraints<br>
PolicyMappings<br>
AuthorityKeyIdentifier<br>
PolicyConstraints</p>
<h5 id="扩展的分类：">扩展的分类：</h5>
<ul>
<li>标准扩展：这些是由X509证书标准定义的扩展。</li>
<li>非标准扩展：这些是由证书颁发机构或其他实体定义的扩展。</li>
</ul>
<h5 id="扩展的优势">扩展的优势</h5>
<ul>
<li>提供额外的信息和功能：扩展可以提供有关证书的附加信息，例如证书策略、键用法、扩展密钥用法等。</li>
<li>提高安全性：某些扩展可以提高证书的安全性，例如OCSP Must-Staple扩展可以确保在连接过程中使用证书的状态信息。</li>
<li>提高可用性：某些扩展可以提高证书的可用性，例如Subject Alternative Name扩展可以指定多个主题备选名称。</li>
</ul>
<h5 id="扩展的应用场景">扩展的应用场景</h5>
<ul>
<li>身份验证：扩展可以用于验证证书的身份，例如通过Subject Alternative Name扩展指定主题备选名称。</li>
<li>键用法：扩展可以指定证书的键用法，例如数字签名、密钥加密等。</li>
<li>扩展密钥用法：扩展可以指定证书的扩展密钥用法，例如TLS Web服务器身份验证、TLS Web客户端身份验证等。</li>
</ul>
<h5 id="密钥用法`keyusage`">密钥用法<code>keyUsage</code></h5>
<table>
<thead>
<tr>
<th>keyUsage的配置</th>
<th>实际证书中的呈现</th>
<th>说明</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>digitalSignature</td>
<td>Digital Signature</td>
<td>数字签名</td>
<td>表示证书拥有者可以用其私钥对数据进行数字签名。</td>
</tr>
<tr>
<td>nonRepudiation</td>
<td>Non Repudiation</td>
<td>不可否认</td>
<td>表示证书拥有者无法否认其对数据进行数字签名的行为。</td>
</tr>
<tr>
<td>keyEncipherment</td>
<td>Key Encipherment</td>
<td>密钥加密</td>
<td>表示证书拥有者可以使用其公钥对密钥进行加密。</td>
</tr>
<tr>
<td>dataEncipherment</td>
<td>Data Encipherment</td>
<td>数据加密</td>
<td>表示证书拥有者可以使用其公钥对数据进行加密。</td>
</tr>
<tr>
<td>keyAgreement</td>
<td>Key Agreement</td>
<td>密钥协商</td>
<td>表示证书拥有者可以使用其私钥进行密钥协商，以便与其他实体建立共享密钥。</td>
</tr>
<tr>
<td>keyCertSign</td>
<td>Certificate Sign</td>
<td>证书签名</td>
<td>表示证书拥有者可以使用其私钥对其他证书进行签名，以确认其有效性。</td>
</tr>
<tr>
<td>cRLSign</td>
<td>CRL Sign</td>
<td>证书吊销列表签名</td>
<td>表示证书拥有者可以使用其私钥对证书吊销列表进行签名，以确认证书的吊销状态。</td>
</tr>
<tr>
<td>encipherOnly</td>
<td>Encipher Only</td>
<td>仅加密</td>
<td>表示证书拥有者只能用其公钥对数据进行加密，而不能对其进行解密。</td>
</tr>
<tr>
<td>decipherOnly</td>
<td>Decipher Only</td>
<td>仅解密</td>
<td>表示证书拥有者只能用其私钥对数据进行解密，而不能对其进行加密。</td>
</tr>
</tbody>
</table>
<h5 id="增强型密钥用法`extendedkeyusage`">增强型密钥用法<code>extendedKeyUsage</code></h5>
<table>
<thead>
<tr>
<th>extendedKeyUsage</th>
<th>说明</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>serverAuth</td>
<td>服务器身份验证</td>
<td>该证书可以用于验证服务器的身份</td>
</tr>
<tr>
<td>clientAuth</td>
<td>客户端身份验证</td>
<td>该证书可以用于验证客户端的身份</td>
</tr>
<tr>
<td>emailProtection</td>
<td>安全电子邮件</td>
<td>该证书可以用于保护电子邮件的安全性</td>
</tr>
<tr>
<td>timeStamping</td>
<td>时间戳</td>
<td>该证书可以用于生成时间戳，用于证明特定时间点的文件的存在或状态</td>
</tr>
<tr>
<td>codeSigning</td>
<td>代码签名</td>
<td>该证书可以用于对软件代码进行数字签名，以验证代码的完整性和来源</td>
</tr>
<tr>
<td>msEFS</td>
<td>Microsoft加密文件系统</td>
<td>该证书可以用于支持Microsoft加密文件系统的安全操作</td>
</tr>
<tr>
<td>ipsecTunnel</td>
<td>IIPSec隧道</td>
<td>该证书可以用于IPSec隧道连接的身份验证和密钥交换</td>
</tr>
<tr>
<td>ipsecUser</td>
<td>IP 安全用户</td>
<td>该证书可以用于IPSec用户的身份验证和密钥交换</td>
</tr>
<tr>
<td>OCSPSigning</td>
<td>OCSP 签名</td>
<td>该证书可以用于对在线证书状态协议（OCSP）响应进行签名，以验证证书的有效性</td>
</tr>
</tbody>
</table>
<h5 id="基本约束">基本约束</h5>
<table>
<thead>
<tr>
<th>basicConstraints</th>
<th>对应</th>
</tr>
</thead>
<tbody>
<tr>
<td>CA:true</td>
<td>Subject Type=CA</td>
</tr>
<tr>
<td>CA:FALSE</td>
<td>Subject Type=End Entity</td>
</tr>
<tr>
<td>pathlen:0</td>
<td>Path Length Constraint=0</td>
</tr>
</tbody>
</table>
<blockquote>
<p><em># CA</em> basicConstraints = CA:true</p>
<p><em># 中间 CA</em> basicConstraints = CA:true, pathlen:0</p>
<p><em># 非 CA</em> basicConstraints = CA:FALSE</p>
</blockquote>
<h5 id="netscape-cert type">Netscape Cert Type</h5>
<table>
<thead>
<tr>
<th>nsCertType</th>
<th>对应</th>
</tr>
</thead>
<tbody>
<tr>
<td>client</td>
<td>SSL 客户端身份验证</td>
</tr>
<tr>
<td>server</td>
<td>SSL 服务器身份验证</td>
</tr>
<tr>
<td>email</td>
<td>SMIME</td>
</tr>
<tr>
<td>objsign</td>
<td>签名</td>
</tr>
<tr>
<td>sslCA</td>
<td>SSL CA</td>
</tr>
<tr>
<td>emailCA</td>
<td>SMIME CA</td>
</tr>
<tr>
<td>objCA</td>
<td>签名 CA</td>
</tr>
</tbody>
</table>
<h5 id="nscomment">nsComment</h5>
<p>自定义想显示的类容</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">......</span><br><span class="line">[ v3_ext ]</span><br><span class="line">......</span><br><span class="line">nsComment               = &quot;你想显示的内容&quot;</span><br><span class="line">......</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>常用命令</category>
      </categories>
      <tags>
        <tag>openssl</tag>
        <tag>x509</tag>
      </tags>
  </entry>
  <entry>
    <title>yum 常用命令指南</title>
    <url>/2023/08/yum-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E6%8C%87%E5%8D%97/index.html</url>
    <content><![CDATA[<h4 id="配置源">配置源</h4>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">curl -o /etc/yum.repos.d/CentOS7-Base-163.repo http://mirrors.163.com/.help/CentOS7-Base-163.repo</span><br><span class="line">curl -o /etc/yum.repos.d/CentOS-Base-aliyun.repo https://mirrors.aliyun.com/repo/Centos-7.repo</span><br></pre></td></tr></table></figure>
<h4 id="安装">安装</h4>
<p>查询软件版本</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">yum list --showduplicates docker-ce</span><br></pre></td></tr></table></figure>
<p>查询命令在那个软件包里面</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">yum provides kubectl</span><br></pre></td></tr></table></figure>
<p>使用指定的源，速度会快</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">yum --disablerepo=* --enablerepo=base list</span><br></pre></td></tr></table></figure>
<h4 id="回退">回退</h4>
<p>查看安装历史</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 查看所有安装记录</span></span><br><span class="line">yum <span class="built_in">history</span> list</span><br><span class="line"><span class="comment"># 查看某个命令的安装记录</span></span><br><span class="line">yum <span class="built_in">history</span> list nginx</span><br><span class="line"></span><br><span class="line">[root@host-10-14 ~]<span class="comment"># yum history list nginx</span></span><br><span class="line">Loaded plugins: fastestmirror</span><br><span class="line">ID     | Command line             | Date and time    | Action(s)      | Altered</span><br><span class="line">-------------------------------------------------------------------------------</span><br><span class="line">     6 | install nginx            | 2022-11-27 09:56 | Install        |    2 EE</span><br><span class="line"><span class="built_in">history</span> list</span><br></pre></td></tr></table></figure>
<p>使用undo撤销一次安装</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">yum <span class="built_in">history</span> undo &lt;<span class="built_in">id</span>&gt;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>常用命令</category>
      </categories>
      <tags>
        <tag>yum</tag>
      </tags>
  </entry>
  <entry>
    <title>使用image-syncer迁移镜像</title>
    <url>/2023/05/%E4%BD%BF%E7%94%A8image-syncer%E8%BF%81%E7%A7%BB%E9%95%9C%E5%83%8F/index.html</url>
    <content><![CDATA[<h1 id="使用image-syncer迁移镜像">使用image-syncer迁移镜像</h1>
<blockquote>
<p>github <a href="https://github.com/AliyunContainerService/image-syncer">AliyunContainerService/image-syncer: Docker image synchronization tool for Docker Registry V2 based services (github.com)</a></p>
</blockquote>
<blockquote>
<p>当我们处理数量较少的镜像迁移任务时，使用命令行迁移就可以解决这个问题。但是实际生产中涉及到成千上百个镜像，几T的镜像仓库数据时，迁移过程就变得耗时很是漫长，甚至丢失数据。这时，我们可以使用该工具来同步。</p>
</blockquote>
<h2 id="使用用例">使用用例</h2>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 获得帮助信息</span><br><span class="line">./image-syncer -h</span><br><span class="line"></span><br><span class="line"># 设置配置文件为config.json，默认registry为registry.cn-beijing.aliyuncs.com</span><br><span class="line"># 默认namespace为ruohe，并发数为6</span><br><span class="line">./image-syncer --proc=6 --auth=./auth.json --images=./images.json --namespace=ruohe \</span><br><span class="line">--registry=registry.cn-beijing.aliyuncs.com --retries=3</span><br></pre></td></tr></table></figure>
<h2 id="配置文件">配置文件</h2>
<blockquote>
<p>认证信息</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># auth.json</span><br><span class="line">&#123;  </span><br><span class="line">    // 认证字段，其中每个对象为一个registry的一个账号和</span><br><span class="line">    // 密码；通常，同步源需要具有pull以及访问tags权限，</span><br><span class="line">    // 同步目标需要拥有push以及创建仓库权限，如果没有提供，则默认匿名访问</span><br><span class="line">    </span><br><span class="line">    &quot;quay.io&quot;: &#123;    // 支持 &quot;registry&quot; 和 &quot;registry/namespace&quot;（v1.0.3之后的版本） 的形式，需要跟下面images中的registry(registry/namespace)对应</span><br><span class="line">                    // images中被匹配到的的url会使用对应账号密码进行镜像同步, 优先匹配 &quot;registry/namespace&quot; 的形式</span><br><span class="line">        &quot;username&quot;: &quot;xxx&quot;,               // 用户名，可选，（v1.3.1 之后支持）valuse 使用 &quot;$&#123;env&#125;&quot; 或者 &quot;$env&quot; 类型的字符串可以引用环境变量</span><br><span class="line">        &quot;password&quot;: &quot;xxxxxxxxx&quot;,         // 密码，可选，（v1.3.1 之后支持）valuse 使用 &quot;$&#123;env&#125;&quot; 或者 &quot;$env&quot; 类型的字符串可以引用环境变量</span><br><span class="line">        &quot;insecure&quot;: true                 // registry是否是http服务，如果是，insecure 字段需要为true，默认是false，可选，支持这个选项需要image-syncer版本 &gt; v1.0.1</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;registry.cn-beijing.aliyuncs.com&quot;: &#123;</span><br><span class="line">        &quot;username&quot;: &quot;xxx&quot;,</span><br><span class="line">        &quot;password&quot;: &quot;xxxxxxxxx&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;registry.hub.docker.com&quot;: &#123;</span><br><span class="line">        &quot;username&quot;: &quot;xxx&quot;,</span><br><span class="line">        &quot;password&quot;: &quot;xxxxxxxxxx&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;quay.io/coreos&quot;: &#123;                       </span><br><span class="line">        &quot;username&quot;: &quot;abc&quot;,              </span><br><span class="line">        &quot;password&quot;: &quot;xxxxxxxxx&quot;,</span><br><span class="line">        &quot;insecure&quot;: true  </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>镜像同步文件</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># images.json</span><br><span class="line">&#123;</span><br><span class="line">    // 同步镜像规则字段，其中条规则包括一个源仓库（键）和一个目标仓库（值）</span><br><span class="line">    </span><br><span class="line">    // 同步的最大单位是仓库（repo），不支持通过一条规则同步整个namespace以及registry</span><br><span class="line">    </span><br><span class="line">    // 源仓库和目标仓库的格式与docker pull/push命令使用的镜像url类似（registry/namespace/repository:tag）</span><br><span class="line">    // 源仓库和目标仓库（如果目标仓库不为空字符串）都至少包含registry/namespace/repository</span><br><span class="line">    // 源仓库字段不能为空，如果需要将一个源仓库同步到多个目标仓库需要配置多条规则</span><br><span class="line">    // 目标仓库名可以和源仓库名不同（tag也可以不同），此时同步功能类似于：docker pull + docker tag + docker push</span><br><span class="line"></span><br><span class="line">    &quot;quay.io/coreos/kube-rbac-proxy&quot;: &quot;quay.io/ruohe/kube-rbac-proxy&quot;,</span><br><span class="line">    &quot;xxxx&quot;:&quot;xxxxx&quot;,</span><br><span class="line">    &quot;xxx/xxx/xx:tag1,tag2,tag3&quot;:&quot;xxx/xxx/xx&quot;</span><br><span class="line"></span><br><span class="line">    // 当源仓库字段中不包含tag时，表示将该仓库所有tag同步到目标仓库，此时目标仓库不能包含tag</span><br><span class="line">    // 当源仓库字段中包含tag时，表示只同步源仓库中的一个tag到目标仓库，如果目标仓库中不包含tag，则默认使用源tag</span><br><span class="line">    // 源仓库字段中的tag可以同时包含多个（比如&quot;a/b/c:1,2,3&quot;），tag之间通过&quot;,&quot;隔开，此时目标仓库不能包含tag，并且默认使用原来的tag</span><br><span class="line">    </span><br><span class="line">    // 当目标仓库为空字符串时，会将源镜像同步到默认registry的默认namespace下，并且repo以及tag与源仓库相同，默认registry和默认namespace可以通过命令行参数以及环境变量配置，参考下面的描述</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>同样支持yaml格式的</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># auth.yaml</span><br><span class="line">quay.io:</span><br><span class="line">  username: xxx</span><br><span class="line">  password: xxxxxxxxx</span><br><span class="line">  insecure: true</span><br><span class="line">registry.cn-beijing.aliyuncs.com:</span><br><span class="line">  username: xxx</span><br><span class="line">  password: xxxxxxxxx</span><br><span class="line">registry.hub.docker.com:</span><br><span class="line">  username: xxx</span><br><span class="line">  password: xxxxxxxxxx</span><br><span class="line">quay.io/coreos:</span><br><span class="line">  username: abc</span><br><span class="line">  password: xxxxxxxxx</span><br><span class="line">  insecure: true</span><br><span class="line">---</span><br><span class="line"># images.yaml</span><br><span class="line">quay.io/coreos/kube-rbac-proxy: quay.io/ruohe/kube-rbac-proxy</span><br><span class="line">quay.io/coreos/kube-rbac-proxy:v1.0: quay.io/ruohe/kube-rbac-proxy</span><br><span class="line">quay.io/coreos/kube-rbac-proxy:v1.0,v2.0: quay.io/ruohe/kube-rbac-proxy</span><br></pre></td></tr></table></figure>
<h2 id="同步镜像">同步镜像</h2>
<blockquote>
<p>提前准备好auth.yaml和images.yaml</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">image-syncer --proc=30 --auth=auth.yaml --images=images.yaml --retries=3</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>服务</category>
        <category>Docker</category>
      </categories>
      <tags>
        <tag>Docker</tag>
      </tags>
  </entry>
  <entry>
    <title>使用rngd增加系统的熵</title>
    <url>/2023/04/%E4%BD%BF%E7%94%A8rngd%E5%A2%9E%E5%8A%A0%E7%B3%BB%E7%BB%9F%E7%9A%84%E7%86%B5/index.html</url>
    <content><![CDATA[<p>Linux内核采用熵来描述数据的随机性。熵（entropy）是描述系统混乱无序程度的物理量，一个系统的熵越大则说明该系统的有序性越差，即不确定性越大。在信息学中，熵被用来表征一个符号或系统的不确定性，熵越大，表明系统所含有用信息量越少，不确定度越大。</p>
<p>系统如果大量使用真随机数</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 查看此文件中的数值大小，如果过小，那么需要安装rngd</span></span><br><span class="line">/proc/sys/kernel/random/entropy_avail</span><br></pre></td></tr></table></figure>
<p>安装并启动</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yum -y install rng-tools</span><br><span class="line">systemctl <span class="built_in">enable</span> --now rngd.service</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>系统</category>
      </categories>
      <tags>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title>使用简单的命令测试端口的连通性</title>
    <url>/2023/07/%E4%BD%BF%E7%94%A8%E7%AE%80%E5%8D%95%E7%9A%84%E5%91%BD%E4%BB%A4%E6%B5%8B%E8%AF%95%E7%AB%AF%E5%8F%A3%E7%9A%84%E8%BF%9E%E9%80%9A%E6%80%A7/index.html</url>
    <content><![CDATA[<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">timeout</span> 1 bash -c <span class="string">&quot;cat &lt; /dev/null &gt; /dev/tcp/10.10.10.14/80&quot;</span> &amp;&gt;/dev/null &amp;&amp; <span class="built_in">echo</span> <span class="string">&#x27;端口正常&#x27;</span> || <span class="built_in">echo</span> <span class="string">&#x27;端口错误&#x27;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>nc 命令</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yum -y install nc</span><br><span class="line">nc -v -z -w2 10.10.10.14 80</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>常用命令</category>
      </categories>
      <tags>
        <tag>nc</tag>
      </tags>
  </entry>
  <entry>
    <title>使用yum安装nginx</title>
    <url>/2023/04/%E4%BD%BF%E7%94%A8yum%E5%AE%89%E8%A3%85nginx/index.html</url>
    <content><![CDATA[<ul>
<li><strong>添加CentOS 7 Nginx yum资源库</strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">rpm -Uvh  http://nginx.org/packages/centos/7/noarch/RPMS/nginx-release-centos-7-0.el7.ngx.noarch.rpm</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>安装nginx</strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">yum -y install nginx</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>启动nginx</strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">systemctl start nginx</span><br></pre></td></tr></table></figure>
<ul>
<li>rpm方式升级并安装某个版本的Nginx</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">rpm -Uvh http://nginx.org/packages/centos/7/x86_64/RPMS/nginx-1.18.0-1.el7.ngx.x86_64.rpm</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>服务</category>
        <category>Nginx</category>
      </categories>
      <tags>
        <tag>Nginx</tag>
      </tags>
  </entry>
  <entry>
    <title>普通x509证书转p12格式</title>
    <url>/2023/04/%E6%99%AE%E9%80%9Ax509%E8%AF%81%E4%B9%A6%E8%BD%ACp12%E6%A0%BC%E5%BC%8F/index.html</url>
    <content><![CDATA[<blockquote>
<p>P12格式主要用于浏览器导入</p>
</blockquote>
<h2 id="先获取到x509格式证书">先获取到x509格式证书</h2>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@host-10-11 ssl]# openssl x509 -text -noout -in client.crt</span><br><span class="line">Certificate:</span><br><span class="line">    Data:</span><br><span class="line">        Version: 3 (0x2)</span><br><span class="line">        Serial Number:</span><br><span class="line">            2d:af:7f:c3:61:ee:88:c0:64:5d:38:53:4d:ce:87:9f:08:cc:28:34</span><br><span class="line">    Signature Algorithm: sha256WithRSAEncryption</span><br><span class="line">        Issuer: C=CN, O=Private issued, OU=Root CA, CN=Private Root CA</span><br><span class="line">        Validity</span><br><span class="line">            Not Before: Apr 15 02:13:00 2023 GMT</span><br><span class="line">            Not After : Apr 15 03:13:00 2023 GMT</span><br><span class="line">        Subject: O=My client, CN=Client</span><br><span class="line">.......</span><br></pre></td></tr></table></figure>
<h2 id="转换命令">转换命令</h2>
<blockquote>
<ul>
<li>
<p>无需CA参与</p>
</li>
<li>
<p>必须要有私钥和证书才可以</p>
</li>
</ul>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">openssl pkcs12 -export -clcerts -in client.crt -inkey client.key -out client.p12</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>常用命令</category>
      </categories>
      <tags>
        <tag>SSL</tag>
        <tag>openssl</tag>
      </tags>
  </entry>
  <entry>
    <title>编程中各种数：完数，因子，质数，偶数等</title>
    <url>/2023/07/%E7%BC%96%E7%A8%8B%E4%B8%AD%E5%90%84%E7%A7%8D%E6%95%B0%EF%BC%9A%E5%AE%8C%E6%95%B0%EF%BC%8C%E5%9B%A0%E5%AD%90%EF%BC%8C%E8%B4%A8%E6%95%B0%EF%BC%8C%E5%81%B6%E6%95%B0%E7%AD%89/index.html</url>
    <content><![CDATA[<h2 id="因子">因子</h2>
<p>整数a除以整数b(b≠0) 的商正好是整数而没有余数，我们就说b是a的因子。0不是0的因子。<br>
假如整数n除以m，结果是无余数的整数，那么我们称m就是n的因子。<br>
需要注意的是，唯有被除数，除数，商皆为整数，余数为零时，此关系才成立。反过来说，我们称n为m的倍数。</p>
<blockquote>
<p>对于某一整数来说，其最大因子为n/2 (若n为偶数时，若为奇数最大因子小于n/2），在n/2〜n-1范围内没有数据可以整除此数。据此，我们可以把遍历范围缩小至1〜n-1</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">fun</span> <span class="params">(<span class="type">int</span> n)</span>&#123;</span><br><span class="line">	<span class="type">int</span> i, s;</span><br><span class="line">	s = n;</span><br><span class="line">	<span class="keyword">for</span> (i=<span class="number">1</span>;i&lt;=n/<span class="number">2</span>;i++) &#123;</span><br><span class="line">		<span class="keyword">if</span> ((n%i) == <span class="number">0</span>) &#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,i);  <span class="comment">// 输出n的因子</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="完数">完数</h2>
<p>如果一个数恰好等于他的因子之和，这个数就称为“完数”，例如 6 = 1 + 2 + 3.</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">fun</span> <span class="params">(<span class="type">int</span> n)</span>&#123;</span><br><span class="line">	<span class="type">int</span> i, s;</span><br><span class="line">	s = n;</span><br><span class="line">	<span class="keyword">for</span> (i=<span class="number">1</span>;i&lt;=n/<span class="number">2</span>;i++) &#123;</span><br><span class="line">		<span class="keyword">if</span> ((n%i) == <span class="number">0</span>) &#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,i);</span><br><span class="line">			s -= i;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> (s == <span class="number">0</span>) <span class="built_in">printf</span>(<span class="string">&quot;%d 是一个完数\n&quot;</span>, n);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="奇数">奇数</h2>
<p>奇数（odd）指不能被2整除的整数 ，数学表达形式为：2k+1， 奇数可以分为正奇数和负奇数。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">fun</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> ((n &amp; <span class="number">1</span>) == <span class="number">1</span>) &#123;  <span class="comment">// if (n%2 != 0)</span></span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d 是一个奇数\n&quot;</span>, n);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="偶数">偶数</h2>
<p>数是能够被2所整除的整数。正偶数也称双数。</p>
<blockquote>
<p>在十进制里，可以看个位数判定该数是奇数还是偶数：个位为1,3,5,7,9的数是奇数；个位为0,2,4,6,8的数是偶数。</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">fun</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> ((n &amp; <span class="number">1</span>) == <span class="number">0</span>) &#123; <span class="comment">// if (n%2 == 0)</span></span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d 是一个偶数\n&quot;</span>, n);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>编程</category>
        <category>文档</category>
      </categories>
      <tags>
        <tag>编程</tag>
        <tag>C</tag>
      </tags>
  </entry>
  <entry>
    <title>acme申请ssl免费证书</title>
    <url>/2024/08/acme%E7%94%B3%E8%AF%B7ssl%E5%85%8D%E8%B4%B9%E8%AF%81%E4%B9%A6/index.html</url>
    <content><![CDATA[<h3 id="安装">安装</h3>
<blockquote>
<p>安装工具</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">wget https://gitee.com/neilpang/acme.sh/raw/master/acme.sh</span><br><span class="line">chmod +x acme.sh</span><br><span class="line">./acme.sh --install -m my@example.com</span><br></pre></td></tr></table></figure>
<blockquote>
<p>更新 <a href="http://acme.sh">acme.sh</a></p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 手动更新</span><br><span class="line">acme.sh --upgrade</span><br><span class="line"></span><br><span class="line"># 如果你不想手动升级，可以开启自动升级</span><br><span class="line">acme.sh --upgrade --auto-upgrade</span><br><span class="line"></span><br><span class="line"># 你也可以随时关闭自动更新:</span><br><span class="line">acme.sh --upgrade --auto-upgrade  0</span><br></pre></td></tr></table></figure>
<blockquote>
<p>切换默认证书</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#切换 Let&#x27;s Encrypt</span><br><span class="line">acme.sh --set-default-ca --server letsencrypt</span><br><span class="line">#切换 Buypass</span><br><span class="line">acme.sh --set-default-ca --server buypass</span><br><span class="line">#切换 ZeroSSL</span><br><span class="line">acme.sh --set-default-ca --server zerossl</span><br><span class="line">#切换 SSL.com</span><br><span class="line">acme.sh --set-default-ca --server ssl.com</span><br><span class="line">#切换 Google Public CA</span><br><span class="line">acme.sh --set-default-ca --server google</span><br></pre></td></tr></table></figure>
<h3 id="签发证书">签发证书</h3>
<blockquote>
<p>请求签发</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@hcss-ecs-d197 ~]# acme.sh --issue -d *.outsrkem.top --dns --yes-I-know-dns-manual-mode-enough-go-ahead-please</span><br><span class="line">[Fri Dec 13 15:08:24 CST 2024] Using CA: https://acme.zerossl.com/v2/DV90</span><br><span class="line">[Fri Dec 13 15:08:24 CST 2024] No EAB credentials found for ZeroSSL, let&#x27;s get one</span><br><span class="line">[Fri Dec 13 15:08:31 CST 2024] Registering account: https://acme.zerossl.com/v2/DV90</span><br><span class="line">[Fri Dec 13 15:08:39 CST 2024] Registered</span><br><span class="line">[Fri Dec 13 15:08:39 CST 2024] ACCOUNT_THUMBPRINT=&#x27;1wTu39ph_TLmRnGAGT0cCbKWx9Fc0K7XR33i3l04m9Y&#x27;</span><br><span class="line">[Fri Dec 13 15:08:39 CST 2024] Creating domain key</span><br><span class="line">[Fri Dec 13 15:08:40 CST 2024] The domain key is here: /root/.acme.sh/example.com/example.com.key</span><br><span class="line">[Fri Dec 13 15:08:40 CST 2024] Single domain=&#x27;example.com&#x27;</span><br><span class="line">[Fri Dec 13 15:08:40 CST 2024] Getting domain auth token for each domain</span><br><span class="line">[Fri Dec 13 15:08:46 CST 2024] Getting webroot for domain=&#x27;example.com&#x27;</span><br><span class="line">[Fri Dec 13 15:08:46 CST 2024] Add the following TXT record:</span><br><span class="line">[Fri Dec 13 15:08:46 CST 2024] Domain: &#x27;_acme-challenge.example.com&#x27;</span><br><span class="line">[Fri Dec 13 15:08:46 CST 2024] TXT value: &#x27;cG_WtYAM-CK0oMtBdzl6th1nmwMITWAXZGhvJ3zI31s&#x27;</span><br><span class="line">[Fri Dec 13 15:08:46 CST 2024] Please be aware that you prepend _acme-challenge. before your domain</span><br><span class="line">[Fri Dec 13 15:08:46 CST 2024] so the resulting subdomain will be: _acme-challenge.example.com</span><br><span class="line">[Fri Dec 13 15:08:46 CST 2024] Please add the TXT records to the domains, and re-run with --renew.</span><br><span class="line">[Fri Dec 13 15:08:46 CST 2024] Please add &#x27;--debug&#x27; or &#x27;--log&#x27; to check more details.</span><br><span class="line">[Fri Dec 13 15:08:46 CST 2024] See: https://github.com/acmesh-official/acme.sh/wiki/How-to-debug-acme.sh</span><br></pre></td></tr></table></figure>
<blockquote>
<p>手工配置DNS解析后进行证书签发</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@hcss-ecs-d197 ~]# acme.sh --renew -d *.outsrkem.top  --yes-I-know-dns-manual-mode-enough-go-ahead-please</span><br><span class="line">[Fri Dec 13 15:12:55 CST 2024] Renew: &#x27;*.outsrkem.top&#x27;</span><br><span class="line">[Fri Dec 13 15:12:55 CST 2024] Renew to Le_API=https://acme.zerossl.com/v2/DV90</span><br><span class="line">[Fri Dec 13 15:12:56 CST 2024] Using CA: https://acme.zerossl.com/v2/DV90</span><br><span class="line">[Fri Dec 13 15:12:56 CST 2024] Single domain=&#x27;*.outsrkem.top&#x27;</span><br><span class="line">[Fri Dec 13 15:12:57 CST 2024] Getting domain auth token for each domain</span><br><span class="line">[Fri Dec 13 15:12:57 CST 2024] Verifying: *.outsrkem.top</span><br><span class="line">[Fri Dec 13 15:13:04 CST 2024] Processing, The CA is processing your order, please just wait. (1/30)</span><br><span class="line">[Fri Dec 13 15:13:12 CST 2024] Success</span><br><span class="line">[Fri Dec 13 15:13:12 CST 2024] Verify finished, start to sign.</span><br><span class="line">[Fri Dec 13 15:13:12 CST 2024] Lets finalize the order.</span><br><span class="line">[Fri Dec 13 15:13:12 CST 2024] Le_OrderFinalize=&#x27;https://acme.zerossl.com/v2/DV90/order/__JvIjokBOhXbTjwVwtA5Q/finalize&#x27;</span><br><span class="line">[Fri Dec 13 15:13:14 CST 2024] Order status is processing, lets sleep and retry.</span><br><span class="line">[Fri Dec 13 15:13:14 CST 2024] Retry after: 15</span><br><span class="line">[Fri Dec 13 15:13:30 CST 2024] Polling order status: https://acme.zerossl.com/v2/DV90/order/__JvIjokBOhXbTjwVwtA5Q</span><br><span class="line">[Fri Dec 13 15:13:35 CST 2024] Downloading cert.</span><br><span class="line">[Fri Dec 13 15:13:35 CST 2024] Le_LinkCert=&#x27;https://acme.zerossl.com/v2/DV90/cert/2JxL4eShxMMkmntIDD4s5A&#x27;</span><br><span class="line">[Fri Dec 13 15:13:38 CST 2024] Cert success.</span><br><span class="line">-----BEGIN CERTIFICATE-----</span><br><span class="line">MIIGajCCBFKgAwIBAgIRAJgnZ446EgLZTL/dXqdeu1MwDQYJKoZIhvcNAQEMBQAw</span><br><span class="line">SzELMAkGA1UEBhMCQVQxEDAOBgNVBAoTB1plcm9TU0wxKjAoBgNVBAMTIVplcm9T</span><br><span class="line">U0wgUlNBIERvbWFpbiBTZWN1cmUgU2l0ZSBDQTAeFw0yNDEyMTMwMDAwMDBaFw0y</span><br><span class="line">NTAzMTMyMzU5NTlaMBkxFzAVBgNVBAMMDioub3V0c3JrZW0udG9wMIIBIjANBgkq</span><br><span class="line">hkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAoxiWm9EW5u1fu3RGxCWFLuRckVEFDI9L</span><br><span class="line">KnEa9jkfVEMu+6IVtT5uP2nGBuQgIM9Iy2r9Vgs5dUXARxq37quf1dCNrzJwtCbU</span><br><span class="line">a0dsHXaI2f/QCzedJaI72oTsRG/1/X99Fi5JTINzWvAjCKGPZk5mjgWO5pjKWUFj</span><br><span class="line">AvSIyB6F5tltUDOmYnXjr9R4R37xSFpH0JZr2336suSgwjdhNtItO6DWJD80Gmft</span><br><span class="line">j4PXU1jEalGfu5m+xByls9YuqKTIuyTFurLxyvtEZ2yp2WkvUStYOK/FzUHoE7oa</span><br><span class="line">3Uz519iFJsR0UdhF37oxyLpa5XMgcFmupx2gXi1GawBem4KRk6DJUwIDAQABo4IC</span><br><span class="line">eTCCAnUwHwYDVR0jBBgwFoAUyNl4aKLZGWjVPXLeXwo+3LWGhqYwHQYDVR0OBBYE</span><br><span class="line">FFT6h+N+cCafVr5Srbusb410zOACMA4GA1UdDwEB/wQEAwIFoDAMBgNVHRMBAf8E</span><br><span class="line">AjAAMB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjBJBgNVHSAEQjBAMDQG</span><br><span class="line">CysGAQQBsjEBAgJOMCUwIwYIKwYBBQUHAgEWF2h0dHBzOi8vc2VjdGlnby5jb20v</span><br><span class="line">Q1BTMAgGBmeBDAECATCBiAYIKwYBBQUHAQEEfDB6MEsGCCsGAQUFBzAChj9odHRw</span><br><span class="line">Oi8vemVyb3NzbC5jcnQuc2VjdGlnby5jb20vWmVyb1NTTFJTQURvbWFpblNlY3Vy</span><br><span class="line">ZVNpdGVDQS5jcnQwKwYIKwYBBQUHMAGGH2h0dHA6Ly96ZXJvc3NsLm9jc3Auc2Vj</span><br><span class="line">dGlnby5jb20wggEDBgorBgEEAdZ5AgQCBIH0BIHxAO8AdgDPEVbu1S58r/OHW9lp</span><br><span class="line">LpvpGnFnSrAX7KwB0lt3zsw7CAAAAZO+3V8AAAAEAwBHMEUCIAKicOUBNxoXVOES</span><br><span class="line">VdD2UmSFgqhzN9EiwwtYNbC9xZXWAiEAxXtAbukctGm8ZlBSo46B8JgwsVKlEcG7</span><br><span class="line">lMXnUxUCbnsAdQDM+w9qhXEJZf6Vm1PO6bJ8IumFXA2XjbapflTA/kwNsAAAAZO+</span><br><span class="line">3V6/AAAEAwBGMEQCIDaI1EeP3h6bhvc5gVFyxs8IF6VBKLG32B6L5BQfha3gAiAY</span><br><span class="line">BEHdGRHrPZPm4A9X/L7nW9g6ICTnVLdATOjTuE7n8zAZBgNVHREEEjAQgg4qLm91</span><br><span class="line">dHNya2VtLnRvcDANBgkqhkiG9w0BAQwFAAOCAgEAB4jp7JqRef4f94B/Cy95IhjI</span><br><span class="line">7P3/RqZa+K+gYdYr6MDLFWBEIzzzlb60zBJ0AnVSmrNqC3QP3uZ2ijuOEFcdhMIn</span><br><span class="line">SefLCdilx4fUkLZuNGNx9VYySJbiP+IO/Zry0Uoz0Q3X9/PGKo+Thq3qOB2a9CQ6</span><br><span class="line">0sY+cwv8s1xI/rtMw5PI8A4QjrKlwpUUmadkAsjW7vNeIb3M/pjYXwRHUfIMrKFY</span><br><span class="line">5gy6XQ0YR2JLcRkNFACB64bTyn9fdKLXa5UBV0HDogpjWlO2M+rlmdgOs8BVHJOj</span><br><span class="line">N2oPMtIfX8yQZLSzllYOB+AmMgeyVmpJNFfaSfghS8VEw/cFk9CCn5tiLFf9GBZC</span><br><span class="line">CBoFh1MMV/QH949xcsNoTjSNvMIluia/eLDaRAY9v4Ftptn22xxKNxSEY7WazRg2</span><br><span class="line">iSelFdP0mAR+PWdtmGGICODa0IyP15Gl2yhPPqhZU1R6kTuomLYh6laItIeWUORW</span><br><span class="line">KfY8Uc6exEs1bWgai6S/ST/qI1UkWhgCHStO1xB/vAyHEw7BSeTJRIRsmVdQLu/q</span><br><span class="line">g4LKaxJ3dr1/eSNZcrvyrRs3Qhu/mQiO1wp5840DhWx72XOO5qchXViK1OptCMzU</span><br><span class="line">Gtgz6+XeyU0cEfMg3+ZMDTzoKSnz0Fbdf9K+WD8g4iuSlSWwNiFw/ULFirLcqYFU</span><br><span class="line">DJzEXW0UGMvEqiizmQA=</span><br><span class="line">-----END CERTIFICATE-----</span><br><span class="line">[Fri Dec 13 15:13:38 CST 2024] Your cert is in: /root/.acme.sh/*.outsrkem.top/*.outsrkem.top.cer</span><br><span class="line">[Fri Dec 13 15:13:38 CST 2024] Your cert key is in: /root/.acme.sh/*.outsrkem.top/*.outsrkem.top.key</span><br><span class="line">[Fri Dec 13 15:13:38 CST 2024] The intermediate CA cert is in: /root/.acme.sh/*.outsrkem.top/ca.cer</span><br><span class="line">[Fri Dec 13 15:13:38 CST 2024] And the full chain certs is there: /root/.acme.sh/*.outsrkem.top/fullchain.cer</span><br></pre></td></tr></table></figure>
<blockquote>
<p>自动配置证书并重启<code>Nginx</code></p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">acme.sh --install-cert -d uias-devops.outsrkem.top \</span><br><span class="line">--key-file       /etc/nginx/cert/uias-devops.outsrkem.top/server-key.pem  \</span><br><span class="line">--fullchain-file /etc/nginx/cert/uias-devops.outsrkem.top/server.pem \</span><br><span class="line">--reloadcmd     &quot;nginx -s reload&quot;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>查看已安装证书信息</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">acme.sh --info -d uias-devops.outsrkem.top</span><br></pre></td></tr></table></figure>
<h3 id="自动dns验证">自动DNS验证</h3>
<blockquote>
<p>自动DNS验证<br>
<a href="https://github.com/acmesh-official/acme.sh/wiki/dnsapi#dns_ali">https://github.com/acmesh-official/acme.sh/wiki/dnsapi#dns_ali</a></p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">set +o history</span><br><span class="line">export Ali_Key=&quot;LTAI5t9KRcUYugeY6MxW7Wnp&quot;</span><br><span class="line">export Ali_Secret=&quot;gOw*************************&quot;</span><br><span class="line">set -o history</span><br><span class="line">acme.sh --issue --dns dns_ali -d uias-devops.outsrkem.top --keylength 2048</span><br><span class="line"></span><br><span class="line"># 强制续签</span><br><span class="line">acme.sh --renew -d uias-devops.outsrkem.top --force</span><br><span class="line"></span><br><span class="line"># 查看信息</span><br><span class="line">acme.sh --info -d uias-devops.outsrkem.top</span><br></pre></td></tr></table></figure>
<blockquote>
<p>查看自动续签列表</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@hcss-ecs-d197 .acme.sh]# acme.sh cron</span><br><span class="line">[Sat Dec 14 09:28:29 CST 2024] ===Starting cron===</span><br><span class="line">[Sat Dec 14 09:28:30 CST 2024] Already up to date!</span><br><span class="line">[Sat Dec 14 09:28:30 CST 2024] Upgrade successful!</span><br><span class="line">[Sat Dec 14 09:28:30 CST 2024] Automatically upgraded to: 3.1.0</span><br><span class="line">[Sat Dec 14 09:28:30 CST 2024] Renewing: &#x27;ats-devops.endpoint.outsrkem.top&#x27;</span><br><span class="line">[Sat Dec 14 09:28:30 CST 2024] Renewing using Le_API=https://acme-v02.api.letsencrypt.org/directory</span><br><span class="line">[Sat Dec 14 09:28:30 CST 2024] Skipping. Next renewal time is: 2025-02-10T13:12:22Z</span><br><span class="line">[Sat Dec 14 09:28:30 CST 2024] Add &#x27;--force&#x27; to force renewal.</span><br><span class="line">[Sat Dec 14 09:28:30 CST 2024] Skipped ats-devops.endpoint.outsrkem.top</span><br><span class="line">[Sat Dec 14 09:28:30 CST 2024] Renewing: &#x27;uias-devops.endpoint.outsrkem.top&#x27;</span><br><span class="line">[Sat Dec 14 09:28:30 CST 2024] Renewing using Le_API=https://acme-v02.api.letsencrypt.org/directory</span><br><span class="line">[Sat Dec 14 09:28:30 CST 2024] Skipping. Next renewal time is: 2025-02-10T13:06:12Z</span><br><span class="line">[Sat Dec 14 09:28:30 CST 2024] Add &#x27;--force&#x27; to force renewal.</span><br><span class="line">[Sat Dec 14 09:28:30 CST 2024] Skipped uias-devops.endpoint.outsrkem.top</span><br><span class="line">[Sat Dec 14 09:28:30 CST 2024] Renewing: &#x27;uias-devops.outsrkem.top&#x27;</span><br><span class="line">[Sat Dec 14 09:28:30 CST 2024] Renewing using Le_API=https://acme-v02.api.letsencrypt.org/directory</span><br><span class="line">[Sat Dec 14 09:28:30 CST 2024] Skipping. Next renewal time is: 2025-02-10T09:50:06Z</span><br><span class="line">[Sat Dec 14 09:28:30 CST 2024] Add &#x27;--force&#x27; to force renewal.</span><br><span class="line">[Sat Dec 14 09:28:30 CST 2024] Skipped uias-devops.outsrkem.top</span><br><span class="line">[Sat Dec 14 09:28:30 CST 2024] ===End cron===</span><br></pre></td></tr></table></figure>
<h3 id="签发多域名证书">签发多域名证书</h3>
<blockquote>
<p>签发多域名证书（签发在一个证书里面），要确保域名解析不能冲突，否则自动签发会失败</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">export DOMAIN=outsrkem.top,*.outsrkem.top,*.support.outsrkem.top</span><br><span class="line">for d in $&#123;DOMAIN//,/ &#125;</span><br><span class="line">do</span><br><span class="line">  domain_params=&quot;$&#123;domain_params&#125; -d $&#123;d&#125;&quot;</span><br><span class="line">done</span><br><span class="line">acme.sh --issue --dns dns_ali $&#123;domain_params&#125; --keylength 2048 --log</span><br><span class="line">acme.sh --info $&#123;domain_params&#125;</span><br></pre></td></tr></table></figure>
<h3 id="帮助文档">帮助文档</h3>
<blockquote>
<p>帮助文档：<a href="https://github.com/acmesh-official/acme.sh/wiki/%E8%AF%B4%E6%98%8E">https://github.com/acmesh-official/acme.sh/wiki/说明</a><br>
大陆指南：<a href="https://github.com/acmesh-official/acme.sh/wiki/Install-in-China#%E5%AE%89%E8%A3%85%E6%AD%A5%E9%AA%A4">https://github.com/acmesh-official/acme.sh/wiki/Install-in-China#安装步骤</a><br>
acme实用技巧：<a href="https://blog.csdn.net/u010066597/article/details/137845246">https://blog.csdn.net/u010066597/article/details/137845246</a><br>
配置多个泛域名 SSL 证书：<a href="https://hadb.me/posts/synology-letsencrypt-multiple-domain-cert-configuration?sid_for_share=99125_3">https://hadb.me/posts/synology-letsencrypt-multiple-domain-cert-configuration?sid_for_share=99125_3</a></p>
</blockquote>
]]></content>
      <categories>
        <category>工具</category>
      </categories>
      <tags>
        <tag>SSL</tag>
      </tags>
  </entry>
</search>
